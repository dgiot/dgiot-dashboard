{
    "version": 3,
    "file": "Action.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Action.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport hotkeys from 'hotkeys-js';\nimport {Renderer, RendererProps} from '../factory';\nimport {filter} from '../utils/tpl';\nimport Button from '../components/Button';\nimport pick from 'lodash/pick';\n\nexport interface ButtonSchema extends BaseSchema {\n  /**\n   * 是否为块状展示，默认为内联。\n   */\n  block?: boolean;\n\n  /**\n   * 禁用时的文案提示。\n   */\n  disabledTip?: string;\n\n  /**\n   * 按钮图标， iconfont 的类名\n   */\n  icon?: SchemaIcon;\n\n  /**\n   * icon 上的css 类名\n   */\n  iconClassName?: SchemaClassName;\n\n  /**\n   * 右侧按钮图标， iconfont 的类名\n   */\n  rightIcon?: SchemaIcon;\n\n  /**\n   * 右侧 icon 上的 css 类名\n   */\n  rightIconClassName?: SchemaClassName;\n  /**\n   * loading 上的css 类名\n   */\n  loadingClassName?: SchemaClassName;\n\n  /**\n   * 按钮文字\n   */\n  label?: string;\n\n  /**\n   * 按钮样式\n   */\n  level?:\n    | 'info'\n    | 'success'\n    | 'warning'\n    | 'danger'\n    | 'link'\n    | 'primary'\n    | 'dark'\n    | 'light';\n\n  /**\n   * @deprecated 通过 level 来配置\n   */\n  primary?: boolean;\n\n  /**\n   * 按钮大小\n   */\n  size?: 'xs' | 'sm' | 'md' | 'lg';\n\n  tooltip?: SchemaTooltip;\n  tooltipPlacement?: 'top' | 'right' | 'bottom' | 'left';\n\n  /**\n   * 指定按钮类型，支持 button、submit或者reset三种类型。\n   */\n  type: 'button' | 'submit' | 'reset';\n\n  /**\n   * 提示文字，配置了操作前会要求用户确认。\n   */\n  confirmText?: string;\n\n  /**\n   * 如果按钮在form中，配置此属性会要求用户把指定的字段通过验证后才会触发行为。\n   */\n  required?: Array<string>;\n\n  /**\n   * 激活状态时的样式\n   */\n  activeLevel?: string;\n\n  /**\n   * 激活状态时的类名\n   */\n  activeClassName?: string;\n\n  /**\n   * 如果按钮在弹框中，可以配置这个动作完成后是否关闭弹窗，或者指定关闭目标弹框。\n   */\n  close?: boolean | string;\n\n  /**\n   * 当按钮时批量操作按钮时，默认必须有勾选元素才能可点击，如果此属性配置成 false，则没有点选成员也能点击。\n   */\n  requireSelected?: boolean;\n\n  /**\n   * 是否将弹框中数据 merge 到父级作用域。\n   */\n  mergeData?: boolean;\n\n  /**\n   * 可以指定让谁来触发这个动作。\n   */\n  target?: string;\n\n  /**\n   * 点击后的禁止倒计时（秒）\n   */\n  countDown?: number;\n\n  /**\n   * 倒计时文字自定义\n   */\n  countDownTpl?: string;\n\n  /**\n   * 角标\n   */\n  badge?: BadgeSchema;\n\n  /**\n   * 键盘快捷键\n   */\n  hotKey?: string;\n  /**\n   * 是否显示loading效果\n   */\n  loadingOn?: string;\n}\n\nexport interface AjaxActionSchema extends ButtonSchema {\n  /**\n   * 指定为发送 ajax 的行为。\n   */\n  actionType: 'ajax';\n\n  /**\n   * 配置 ajax 发送地址\n   */\n  api: SchemaApi;\n\n  feedback?: FeedbackDialog;\n\n  reload?: SchemaReload;\n  redirect?: string;\n  ignoreConfirm?: boolean;\n}\n\nexport interface DownloadActionSchema\n  extends Omit<AjaxActionSchema, 'actionType'> {\n  /**\n   * 指定为下载行为\n   */\n  actionType: 'download';\n}\n\nexport interface UrlActionSchema extends ButtonSchema {\n  /**\n   * 指定为打开链接\n   */\n  actionType: 'url';\n\n  /**\n   * 是否新窗口打开\n   */\n  blank?: boolean;\n\n  /**\n   * 打开的目标地址\n   */\n  url: string;\n}\n\nexport interface DialogActionSchema extends ButtonSchema {\n  /**\n   * 指定为打开弹窗\n   */\n  actionType: 'dialog';\n\n  /**\n   * 弹框详情\n   * 文档：https://baidu.gitee.io/amis/docs/components/dialog\n   */\n  dialog: DialogSchemaBase;\n\n  /**\n   * 是否有下一个的表达式，正常可以不用配置，如果想要刷掉某些数据可以配置这个。\n   */\n  nextCondition?: SchemaExpression;\n  reload?: SchemaReload;\n  redirect?: string;\n}\n\nexport interface DrawerActionSchema extends ButtonSchema {\n  /**\n   * 指定为打开弹窗，抽出式弹窗\n   */\n  actionType: 'drawer';\n\n  /**\n   * 抽出式弹框详情\n   * 文档：https://baidu.gitee.io/amis/docs/components/drawer\n   */\n  drawer: DrawerSchemaBase;\n\n  /**\n   * 是否有下一个的表达式，正常可以不用配置，如果想要刷掉某些数据可以配置这个。\n   */\n  nextCondition?: SchemaExpression;\n  reload?: SchemaReload;\n  redirect?: string;\n}\n\nexport interface CopyActionSchema extends ButtonSchema {\n  /**\n   * 指定为复制内容行为\n   */\n  actionType: 'copy';\n\n  /**\n   * 复制啥内容由此配置，支持模板语法。\n   */\n  copy: SchemaTpl;\n}\n\nexport interface LinkActionSchema extends ButtonSchema {\n  /**\n   * 指定为打开链接行为，跟 url 不同的时这个行为为单页模式。\n   */\n  actionType: 'link';\n\n  /**\n   * 跳转到哪？支持配置相对路径。\n   */\n  link: string;\n}\n\nexport interface ReloadActionSchema extends ButtonSchema {\n  /**\n   * 指定为刷新目标组件。\n   */\n  actionType: 'reload';\n\n  /**\n   * 指定目标组件。\n   */\n  target?: SchemaReload;\n}\n\nexport interface EmailActionSchema extends ButtonSchema {\n  /**\n   * 指定为打开邮箱行为\n   */\n  actionType: 'email';\n\n  /**\n   * 收件人邮箱\n   */\n  to: string;\n\n  /**\n   * 抄送邮箱\n   */\n  cc?: string;\n\n  /**\n   * 匿名抄送邮箱\n   */\n  bcc?: string;\n\n  /**\n   * 邮件主题\n   */\n  subject?: string;\n\n  /**\n   * 邮件正文\n   */\n  body?: string;\n}\n\nexport interface OtherActionSchema extends ButtonSchema {\n  actionType:\n    | 'prev'\n    | 'next'\n    | 'cancel'\n    | 'close'\n    | 'submit'\n    | 'confirm'\n    | 'add'\n    | 'reset'\n    | 'reset-and-submit';\n  [propName: string]: any;\n}\n\nexport interface VanillaAction extends ButtonSchema {\n  actionType?: string;\n}\n\n/**\n * 按钮动作渲染器。\n * 文档：https://baidu.gitee.io/amis/docs/components/action\n */\nexport type ActionSchema =\n  | AjaxActionSchema\n  | UrlActionSchema\n  | LinkActionSchema\n  | DialogActionSchema\n  | DrawerActionSchema\n  | CopyActionSchema\n  | ReloadActionSchema\n  | EmailActionSchema\n  | OtherActionSchema\n  | VanillaAction;\n\nconst ActionProps = [\n  'dialog',\n  'drawer',\n  'url',\n  'link',\n  'confirmText',\n  'tooltip',\n  'disabledTip',\n  'className',\n  'asyncApi',\n  'redirect',\n  'size',\n  'level',\n  'primary',\n  'feedback',\n  'api',\n  'blank',\n  'tooltipPlacement',\n  'to',\n  'cc',\n  'bcc',\n  'subject',\n  'body',\n  'content',\n  'required',\n  'type',\n  'actionType',\n  'label',\n  'icon',\n  'rightIcon',\n  'reload',\n  'target',\n  'close',\n  'messages',\n  'mergeData',\n  'index',\n  'copy',\n  'copyFormat',\n  'payload',\n  'requireSelected'\n];\nimport {filterContents} from './Remark';\nimport {ClassNamesFn, themeable, ThemeProps} from '../theme';\nimport {autobind} from '../utils/helper';\nimport {\n  BaseSchema,\n  FeedbackDialog,\n  SchemaApi,\n  SchemaClassName,\n  SchemaExpression,\n  SchemaIcon,\n  SchemaReload,\n  SchemaTooltip,\n  SchemaTpl\n} from '../Schema';\nimport {DialogSchema, DialogSchemaBase} from './Dialog';\nimport {DrawerSchema, DrawerSchemaBase} from './Drawer';\nimport {generateIcon} from '../utils/icon';\nimport {BadgeSchema, withBadge} from '../components/Badge';\nimport {normalizeApi, str2AsyncFunction} from '../utils/api';\n\n// 构造一个假的 React 事件避免可能的报错，主要用于快捷键功能\n// 来自 https://stackoverflow.com/questions/27062455/reactjs-can-i-create-my-own-syntheticevent\nexport const createSyntheticEvent = <T extends Element, E extends Event>(\n  event: E\n): React.SyntheticEvent<T, E> => {\n  let isDefaultPrevented = false;\n  let isPropagationStopped = false;\n  const preventDefault = () => {\n    isDefaultPrevented = true;\n    event.preventDefault();\n  };\n  const stopPropagation = () => {\n    isPropagationStopped = true;\n    event.stopPropagation();\n  };\n  return {\n    nativeEvent: event,\n    currentTarget: event.currentTarget as EventTarget & T,\n    target: event.target as EventTarget & T,\n    bubbles: event.bubbles,\n    cancelable: event.cancelable,\n    defaultPrevented: event.defaultPrevented,\n    eventPhase: event.eventPhase,\n    isTrusted: event.isTrusted,\n    preventDefault,\n    isDefaultPrevented: () => isDefaultPrevented,\n    stopPropagation,\n    isPropagationStopped: () => isPropagationStopped,\n    persist: () => {},\n    timeStamp: event.timeStamp,\n    type: event.type\n  };\n};\n\nexport interface ActionProps\n  extends Omit<\n      ButtonSchema,\n      'className' | 'iconClassName' | 'rightIconClassName' | 'loadingClassName'\n    >,\n    ThemeProps,\n    Omit<\n      AjaxActionSchema,\n      | 'type'\n      | 'className'\n      | 'iconClassName'\n      | 'rightIconClassName'\n      | 'loadingClassName'\n    >,\n    Omit<\n      UrlActionSchema,\n      | 'type'\n      | 'className'\n      | 'iconClassName'\n      | 'rightIconClassName'\n      | 'loadingClassName'\n    >,\n    Omit<\n      LinkActionSchema,\n      | 'type'\n      | 'className'\n      | 'iconClassName'\n      | 'rightIconClassName'\n      | 'loadingClassName'\n    >,\n    Omit<\n      DialogActionSchema,\n      | 'type'\n      | 'className'\n      | 'iconClassName'\n      | 'rightIconClassName'\n      | 'loadingClassName'\n    >,\n    Omit<\n      DrawerActionSchema,\n      | 'type'\n      | 'className'\n      | 'iconClassName'\n      | 'rightIconClassName'\n      | 'loadingClassName'\n    >,\n    Omit<\n      CopyActionSchema,\n      | 'type'\n      | 'className'\n      | 'iconClassName'\n      | 'rightIconClassName'\n      | 'loadingClassName'\n    >,\n    Omit<\n      ReloadActionSchema,\n      | 'type'\n      | 'className'\n      | 'iconClassName'\n      | 'rightIconClassName'\n      | 'loadingClassName'\n    >,\n    Omit<\n      EmailActionSchema,\n      | 'type'\n      | 'className'\n      | 'iconClassName'\n      | 'rightIconClassName'\n      | 'loadingClassName'\n    >,\n    Omit<\n      OtherActionSchema,\n      | 'type'\n      | 'className'\n      | 'iconClassName'\n      | 'rightIconClassName'\n      | 'loadingClassName'\n    > {\n  actionType: any;\n  onAction?: (\n    e: React.MouseEvent<any> | void | null,\n    action: ActionSchema\n  ) => void;\n  isCurrentUrl?: (link: string) => boolean;\n  onClick?:\n    | ((e: React.MouseEvent<any>, props: any) => void)\n    | string\n    | Function\n    | null;\n  componentClass: React.ReactType;\n  tooltipContainer?: any;\n  data?: any;\n  isMenuItem?: boolean;\n  active?: boolean;\n}\n\nconst allowedType = ['button', 'submit', 'reset'];\n\ninterface ActionState {\n  inCountDown: boolean; // 是否在倒计时\n  countDownEnd: number; // 倒计时结束的精确时间\n  timeLeft: number; // 倒计时剩余时间\n}\n\nexport class Action extends React.Component<ActionProps, ActionState> {\n  static defaultProps = {\n    type: 'button' as 'button',\n    componentClass: 'button' as React.ReactType,\n    tooltipPlacement: 'bottom' as 'bottom',\n    activeClassName: 'is-active',\n    countDownTpl: 'Action.countDown',\n    countDown: 0\n  };\n\n  state: ActionState = {\n    inCountDown: false,\n    countDownEnd: 0,\n    timeLeft: 0\n  };\n\n  localStorageKey: string;\n\n  dom: any;\n\n  constructor(props: ActionProps) {\n    super(props);\n    this.localStorageKey = 'amis-countdownend-' + (this.props.name || '');\n    const countDownEnd = parseInt(\n      localStorage.getItem(this.localStorageKey) || '0'\n    );\n    if (countDownEnd && this.props.countDown) {\n      if (Date.now() < countDownEnd) {\n        this.state = {\n          inCountDown: true,\n          countDownEnd,\n          timeLeft: Math.floor((countDownEnd - Date.now()) / 1000)\n        };\n        this.handleCountDown();\n      }\n    }\n  }\n\n  @autobind\n  async handleAction(e: React.MouseEvent<any>) {\n    const {onAction, disabled, countDown} = this.props;\n    // https://reactjs.org/docs/legacy-event-pooling.html\n    e.persist();\n    let onClick = this.props.onClick;\n\n    if (typeof onClick === 'string') {\n      onClick = str2AsyncFunction(onClick, 'event', 'props');\n    }\n    const result: any = onClick && (await onClick(e, this.props));\n\n    if (\n      disabled ||\n      e.isDefaultPrevented() ||\n      result === false ||\n      !onAction ||\n      this.state.inCountDown\n    ) {\n      return;\n    }\n\n    e.preventDefault();\n    const action = pick(this.props, ActionProps) as ActionSchema;\n\n    // download 是一种 ajax 的简写\n    if (action.actionType === 'download') {\n      action.actionType = 'ajax';\n      const api = normalizeApi((action as AjaxActionSchema).api);\n      api.responseType = 'blob';\n      (action as AjaxActionSchema).api = api;\n    }\n\n    onAction(e, action);\n\n    if (countDown) {\n      const countDownEnd = Date.now() + countDown * 1000;\n      this.setState({\n        countDownEnd: countDownEnd,\n        inCountDown: true,\n        timeLeft: countDown\n      });\n\n      localStorage.setItem(this.localStorageKey, String(countDownEnd));\n\n      setTimeout(() => {\n        this.handleCountDown();\n      }, 1000);\n    }\n  }\n\n  @autobind\n  handleCountDown() {\n    // setTimeout 一般会晚于 1s，经过几十次后就不准了，所以使用真实时间进行 diff\n    const timeLeft = Math.floor((this.state.countDownEnd - Date.now()) / 1000);\n    if (timeLeft <= 0) {\n      this.setState({\n        inCountDown: false,\n        timeLeft: timeLeft\n      });\n    } else {\n      this.setState({\n        timeLeft: timeLeft\n      });\n      setTimeout(() => {\n        this.handleCountDown();\n      }, 1000);\n    }\n  }\n\n  @autobind\n  componentDidMount() {\n    const {hotKey} = this.props;\n    if (hotKey) {\n      hotkeys(hotKey, event => {\n        event.preventDefault();\n        const click = new MouseEvent('click', {\n          bubbles: true,\n          cancelable: true\n        });\n        this.handleAction(createSyntheticEvent(click) as any);\n      });\n    }\n  }\n\n  @autobind\n  componentWillUnmount() {\n    const {hotKey} = this.props;\n    if (hotKey) {\n      hotkeys.unbind(hotKey);\n    }\n  }\n\n  render() {\n    const {\n      type,\n      icon,\n      iconClassName,\n      rightIcon,\n      rightIconClassName,\n      loadingClassName,\n      primary,\n      size,\n      level,\n      countDownTpl,\n      block,\n      className,\n      componentClass,\n      tooltip,\n      disabledTip,\n      tooltipPlacement,\n      actionType,\n      link,\n      data,\n      translate: __,\n      activeClassName,\n      isCurrentUrl,\n      isMenuItem,\n      active,\n      activeLevel,\n      tooltipTrigger,\n      tooltipContainer,\n      tooltipRootClose,\n      loading,\n      classnames: cx\n    } = this.props;\n\n    let label = this.props.label;\n    let disabled = this.props.disabled;\n    let isActive = !!active;\n\n    if (actionType === 'link' && !isActive && link && isCurrentUrl) {\n      isActive = isCurrentUrl(link);\n    }\n\n    // 倒计时\n    if (this.state.inCountDown) {\n      label = filterContents(__(countDownTpl), {\n        ...data,\n        timeLeft: this.state.timeLeft\n      }) as string;\n      disabled = true;\n    }\n\n    const iconElement = generateIcon(cx, icon, 'Button-icon', iconClassName);\n    const rightIconElement = generateIcon(\n      cx,\n      rightIcon,\n      'Button-icon',\n      rightIconClassName\n    );\n\n    return (\n      <Button\n        className={cx(className, {\n          [activeClassName || 'is-active']: isActive\n        })}\n        size={size}\n        level={\n          activeLevel && isActive\n            ? activeLevel\n            : level || (primary ? 'primary' : undefined)\n        }\n        loadingClassName={loadingClassName}\n        loading={loading}\n        onClick={this.handleAction}\n        type={type && ~allowedType.indexOf(type) ? type : 'button'}\n        disabled={disabled}\n        componentClass={isMenuItem ? 'a' : componentClass}\n        overrideClassName={isMenuItem}\n        tooltip={filterContents(tooltip, data)}\n        disabledTip={filterContents(disabledTip, data)}\n        tooltipPlacement={tooltipPlacement}\n        tooltipContainer={tooltipContainer}\n        tooltipTrigger={tooltipTrigger}\n        tooltipRootClose={tooltipRootClose}\n        block={block}\n        iconOnly={!!(icon && !label && level !== 'link')}\n      >\n        {!loading ? iconElement : ''}\n        {label ? <span>{filter(String(label), data)}</span> : null}\n        {rightIconElement}\n      </Button>\n    );\n  }\n}\n\nexport default themeable(Action);\n\n@Renderer({\n  type: 'action'\n})\n// @ts-ignore 类型没搞定\n@withBadge\nexport class ActionRenderer extends React.Component<\n  RendererProps &\n    Omit<ActionProps, 'onAction' | 'isCurrentUrl' | 'tooltipContainer'> & {\n      onAction: (\n        e: React.MouseEvent<any> | void | null,\n        action: object,\n        data: any\n      ) => void;\n      btnDisabled?: boolean;\n    }\n> {\n  @autobind\n  handleAction(e: React.MouseEvent<any> | void | null, action: any) {\n    const {env, onAction, data, ignoreConfirm} = this.props;\n\n    if (!ignoreConfirm && action.confirmText && env.confirm) {\n      env\n        .confirm(filter(action.confirmText, data))\n        .then((confirmed: boolean) => confirmed && onAction(e, action, data));\n    } else {\n      onAction(e, action, data);\n    }\n  }\n\n  @autobind\n  isCurrentAction(link: string) {\n    const {env, data} = this.props;\n    return env.isCurrentUrl(filter(link, data));\n  }\n\n  render() {\n    const {env, disabled, btnDisabled, loading, ...rest} = this.props;\n\n    return (\n      <Action\n        {...(rest as any)}\n        disabled={disabled || btnDisabled}\n        onAction={this.handleAction}\n        loading={loading}\n        isCurrentUrl={this.isCurrentAction}\n        tooltipContainer={\n          env.getModalContainer ? env.getModalContainer : undefined\n        }\n      />\n    );\n  }\n}\n\n@Renderer({\n  type: 'button'\n})\nexport class ButtonRenderer extends ActionRenderer {}\n\n@Renderer({\n  type: 'submit'\n})\nexport class SubmitRenderer extends ActionRenderer {}\n\n@Renderer({\n  type: 'reset'\n})\nexport class ResetRenderer extends ActionRenderer {}\n"
    ]
}