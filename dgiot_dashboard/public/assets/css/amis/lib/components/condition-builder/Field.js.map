{
    "version": 3,
    "file": "Field.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/condition-builder/Field.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport PopOverContainer from '../PopOverContainer';\nimport ListRadios from '../ListRadios';\nimport ResultBox from '../ResultBox';\nimport {ClassNamesFn, ThemeProps, themeable} from '../../theme';\nimport {Icon} from '../icons';\nimport {findTree, noop} from '../../utils/helper';\nimport {localeable, LocaleProps} from '../../locale';\nimport SearchBox from '../SearchBox';\n\nexport interface ConditionFieldProps extends ThemeProps, LocaleProps {\n  options: Array<any>;\n  value: any;\n  onChange: (value: any) => void;\n  disabled?: boolean;\n  fieldClassName?: string;\n  searchable?: boolean;\n}\n\nexport interface ConditionFieldState {\n  options: Array<any>;\n}\n\nconst option2value = (item: any) => item.name;\n\nexport class ConditionField extends React.Component<\n  ConditionFieldProps,\n  ConditionFieldState\n> {\n  constructor(props: ConditionFieldProps) {\n    super(props);\n    this.state = {\n      options: props.options\n    };\n    this.onSearch = this.onSearch.bind(this);\n  }\n\n  onSearch(text: string) {\n    let txt = text.toLowerCase();\n\n    this.setState({\n      options: this.props.options\n        .map((item: any) => {\n          if (item.children) {\n            let children = item.children.filter((child: any) => {\n              return (\n                child.name.toLowerCase().includes(txt) ||\n                child.label.toLowerCase().includes(txt)\n              );\n            });\n            return children.length > 0\n              ? Object.assign({}, item, {children}) // 需要copy一份，防止覆盖原始数据\n              : false;\n          } else {\n            return item.name.toLowerCase().includes(txt) ||\n              item.label.toLowerCase().includes(txt)\n              ? item\n              : false;\n          }\n        })\n        .filter((item: any) => {\n          return !!item;\n        })\n    });\n  }\n\n  // 选了值，还原options\n  onPopClose(e: React.MouseEvent, onClose: () => void) {\n    this.setState({\n      options: this.props.options\n    });\n    onClose();\n  }\n\n  render() {\n    const {\n      options,\n      onChange,\n      value,\n      classnames: cx,\n      fieldClassName,\n      disabled,\n      translate: __,\n      searchable\n    } = this.props;\n    return (\n      <PopOverContainer\n        popOverRender={({onClose}) => (\n          <>\n            {searchable ? (\n              <SearchBox mini={false} onSearch={this.onSearch} />\n            ) : null}\n            <ListRadios\n              onClick={e => this.onPopClose(e, onClose)}\n              showRadio={false}\n              options={this.state.options}\n              value={value}\n              option2value={option2value}\n              onChange={onChange}\n            />\n          </>\n        )}\n      >\n        {({onClick, ref, isOpened}) => (\n          <div className={cx('CBGroup-field')}>\n            <ResultBox\n              className={cx(\n                'CBGroup-fieldInput',\n                fieldClassName,\n                isOpened ? 'is-active' : ''\n              )}\n              ref={ref}\n              allowInput={false}\n              result={\n                value\n                  ? findTree(options, item => item.name === value)?.label\n                  : ''\n              }\n              onResultChange={noop}\n              onResultClick={onClick}\n              placeholder={__('Condition.field_placeholder')}\n              disabled={disabled}\n            >\n              <span className={cx('CBGroup-fieldCaret')}>\n                <Icon icon=\"caret\" className=\"icon\" />\n              </span>\n            </ResultBox>\n          </div>\n        )}\n      </PopOverContainer>\n    );\n  }\n}\n\nexport default themeable(localeable(ConditionField));\n"
    ]
}