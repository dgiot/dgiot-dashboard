/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2022-01-12 11:32:20
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb40dcc4"],{"137f":function(e,t,a){"use strict";a("2c3e7")},"1c21":function(e,t,a){},"248a":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},"2b83a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"devproduct devproduct-container"},[a("input",{ref:"uploader",staticStyle:{display:"none"},attrs:{accept:"zip",type:"file"},on:{change:function(t){return e.doUpload(t)}}}),a("el-dialog",{staticStyle:{margin:"0 auto"},attrs:{"append-to-body":!0,visible:e.dialogVisible,top:"1vh",width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t}}}),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.parserView},on:{"update:visible":function(t){e.parserView=t}}},[a("f-render",{attrs:{config:e.formConfig,pure:""},model:{value:e.formConfig,callback:function(t){e.formConfig=t},expression:"formConfig"}})],1),a("el-dialog",{staticClass:"parserTable",attrs:{"append-to-body":!0,visible:e.parserTable},on:{"update:visible":function(t){e.parserTable=t}}},[a("div",{staticClass:"header-title parserTable",attrs:{slot:"title"},slot:"title"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.addParse(e.parserTableList)}}},[e._v(" "+e._s(e.$translateTitle("product.newlyadded"))+" ")]),a("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return t.preventDefault(),e.saveParse(e.parserTableList)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.parserTableList.parser,height:e.height}},[a("el-table-column",{attrs:{label:e.$translateTitle("product.chinesetitle"),align:"center",prop:"name",sortable:""}}),a("el-table-column",{attrs:{label:e.$translateTitle("product.englishtitle"),align:"center",prop:"enname",sortable:""}}),a("el-table-column",{attrs:{label:e.$translateTitle("leftbar.settings"),align:"center","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row,o=t.$index;return[a("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(t){return e.editParse(o,r)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.edit"))+" ")]),a("el-button",{attrs:{plain:"",type:"success"},on:{click:function(t){return e.previewParse(r.config)}}},[e._v(" "+e._s(e.$translateTitle("application.preview"))+" ")]),a("el-button",{attrs:{plain:"",size:"small",type:"danger"},nativeOn:{click:function(t){return t.preventDefault(),e.deleteParse(o,e.parserTableList.parser)}}},[e._v(" "+e._s(e.$translateTitle("task.Delete"))+" ")])]}}])})],1)],1),a("vab-input",{ref:"uploadFinish",attrs:{params:e.inputParams},on:{fileInfo:e.fileInfo,files:e.files}}),a("div",{staticClass:"prosecond"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:e.$translateTitle("product.searchproductname"),clearable:""},model:{value:e.formInline.productname,callback:function(t){e.$set(e.formInline,"productname",t)},expression:"formInline.productname"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.searchProduct(0)}}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")])],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addproduct.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.createproduct"))+" ")])],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.exportpro.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.exportpro"))+" ")])],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleImport()}}},[e._v(" "+e._s(e.$translateTitle("product.importpro"))+" ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.proTableData,"header-cell-style":{"text-align":"center"},height:e.height,border:"",size:"mini"}},[a("el-table-column",{attrs:{label:"ProductID",prop:"objectId",width:"auto","show-overflow-tooltip":"",sortable:""}}),a("el-table-column",{attrs:{width:"auto","show-overflow-tooltip":"",sortable:"",prop:"name",label:e.$translateTitle("product.productname")}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",sortable:"",prop:"nodeType",width:"auto",label:e.$translateTitle("product.nodetype")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[3==r.nodeType?a("span",[e._v(" "+e._s(e.$translateTitle("product.direct"))+" ")]):e._e(),1==r.nodeType?a("span",[e._v(" "+e._s(e.$translateTitle("product.gateway"))+" ")]):e._e(),2==r.nodeType?a("span",[e._v(" "+e._s(e.$translateTitle("product.groupgateway"))+" ")]):0==r.nodeType?a("span",[e._v(" "+e._s(e.$translateTitle("product.equipment"))+" ")]):e._e()]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",sortable:"",prop:"nodeType",width:"auto",label:e.$translateTitle("product.classification")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(" "+e._s(r.category?r.category.name:"")+" ")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",sortable:"",prop:"createdAt",width:"auto",label:e.$translateTitle("product.addingtime")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.utc2beijing(r.createdAt)))])]}}])}),a("el-table-column",{ref:"rightCol",attrs:{label:e.$translateTitle("developer.operation"),fixed:"right",width:"auto","min-width":"280"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row,o=t.$index;return[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{underline:!1,size:"mini",type:"primary"},on:{click:function(t){return e.deviceToDetail(r)}}},[e._v(" "+e._s(e.$translateTitle("product.config"))+" ")]),a("el-button",{attrs:{underline:!1,size:"mini",type:"warning"},on:{click:function(t){return e.editorDict(r.objectId)}}},[e._v(" "+e._s(e.$translateTitle("product.dict"))+" ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.goKonva(r.objectId)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.konva"))+" ")]),a("el-button",{attrs:{underline:!1,size:"mini",type:"success"},on:{click:function(t){return e.editorProduct(r)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.edit"))+" ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.makeSure(r,o)}}},[e._v(" "+e._s(e.$translateTitle("task.Delete"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-size":e.length,"page-sizes":[10,20,30,50],total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.productCurrentChange,"size-change":e.productSizeChange}})],1)],1),a("div",{staticClass:"devproduct-prodialog"},[a("el-drawer",{directives:[{name:"drawerDrag",rawName:"v-drawerDrag"}],attrs:{"before-close":e.handleClose,"close-on-click-modal":!1,title:e.moduleTitle,visible:e.dialogFormVisible,"append-to-body":"",size:"80%",top:"5vh"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-alert",{directives:[{name:"show",rawName:"v-show",value:!e.currentDepartment.name,expression:"!currentDepartment.name"}],attrs:{closable:!1,description:"请先选择部门后,再来新增产品",title:"温馨提示",type:"success"}}),a("div",{staticClass:"devproduct-prodialog-content"},[a("div",{staticClass:"contentone"},[a("div",{staticStyle:{display:"flex"}},[a("span",[e._v(" "+e._s(e.$translateTitle("product.productinformation"))+" ")]),a("p",{staticStyle:{"flex-grow":"2",width:"auto",height:"1px",margin:"10px","border-top":"1px dashed #dddddd"}})]),a("el-form",{key:e.form.type,ref:"form",attrs:{"label-width":"产品名称"==e.$translateTitle("product.productname")?"120px":"160px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.productname"),prop:"name"}},[a("el-input",{attrs:{disabled:"edit"==e.custom_status,autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.device manufacturer"),prop:"devType"}},[a("el-input",{attrs:{disabled:"edit"==e.custom_status,autocomplete:"off"},model:{value:e.form.devType,callback:function(t){e.$set(e.form,"devType",t)},expression:"form.devType"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.classification"),prop:0==e.form.type?"":"categoryname"}},["edit"!=e.custom_status?a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:10}},[a("el-radio-group",{attrs:{disabled:"edit"==e.custom_status},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{label:1}},[e._v(" "+e._s(e.$translateTitle("product.Standard category"))+" ")]),a("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$translateTitle("product.Custom category"))+" ")])],1)],1),1==e.form.type?a("el-col",{staticStyle:{padding:"0"},attrs:{span:13}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.categoryname,callback:function(t){e.$set(e.form,"categoryname",t)},expression:"form.categoryname"}},[a("el-icon",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"append",size:"mini"},nativeOn:{click:function(t){return e.handlecateClick.apply(null,arguments)}},slot:"append"})],1)],1):e._e()],1):a("span",[e._v(e._s(e.product.category.name))])],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.Storage channel"),prop:"tdchannel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$translateTitle("task.Select")},model:{value:e.form.tdchannel,callback:function(t){e.$set(e.form,"tdchannel",t)},expression:"form.tdchannel"}},e._l(e.tdchannelList,(function(e){return a("el-option",{key:e.objectId,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.taskchannel"),prop:"taskchannel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$translateTitle("task.Select")},model:{value:e.form.taskchannel,callback:function(t){e.$set(e.form,"taskchannel",t)},expression:"form.taskchannel"}},e._l(e.taskchannelList,(function(e){return a("el-option",{key:e.objectId,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.Acquisition channel"),prop:"otherchannel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$translateTitle("task.Select"),multiple:"","value-key":"objectId"},model:{value:e.form.otherchannel,callback:function(t){e.$set(e.form,"otherchannel",t)},expression:"form.otherchannel"}},e._l(e.otherchannelList,(function(e){return a("el-option",{key:e.objectId,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"edit"!=e.custom_status,expression:"custom_status != 'edit'"}],attrs:{label:e.$translateTitle("product.Current department"),prop:"edit"!=e.custom_status?"relationApp":""}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.Current department"),readonly:""},model:{value:e.form.relationApp,callback:function(t){e.$set(e.form,"relationApp",t)},expression:"form.relationApp"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.nodetype"),prop:"nodeType"}},[a("el-radio-group",{model:{value:e.form.nodeType,callback:function(t){e.$set(e.form,"nodeType",t)},expression:"form.nodeType"}},[a("el-radio",{attrs:{label:3}},[e._v(" "+e._s(e.$translateTitle("product.direct"))+" ")]),a("el-radio",{attrs:{label:1}},[e._v(" "+e._s(e.$translateTitle("product.gateway"))+" ")]),a("el-radio",{attrs:{label:2}},[e._v(" "+e._s(e.$translateTitle("product.groupgateway"))+" ")]),a("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$translateTitle("product.equipment"))+" ")])],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.networking"),prop:"netType"}},[a("el-select",{attrs:{placeholder:e.$translateTitle("product.selectgateway")},model:{value:e.form.netType,callback:function(t){e.$set(e.form,"netType",t)},expression:"form.netType"}},e._l(e.channel,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("menu.icon"),prop:"icon"}},[e.imageUrl?a("div",[a("img",{staticClass:"avatar",attrs:{src:e.$FileServe+e.imageUrl}}),a("el-button",{staticStyle:{"vertical-align":"text-bottom"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return t.stopPropagation(),e.deleteImgsrc.apply(null,arguments)}}},[e._v(" 删除 ")])],1):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:function(t){return e.uploadCkick("product_ico")}}}),a("form",{ref:"uploadform",staticStyle:{position:"absolute",visibility:"hidden"},attrs:{enctype:"multipart/form-data",method:"POST"}},[a("input",{staticStyle:{position:"relative","z-index":"5",width:"100px",height:"100px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})]),a("br")]),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe"),prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1)]),a("div",{staticClass:"devproduct-prodialog-footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitForm()}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")]),a("el-button",{on:{click:function(t){return e.handleCloseDialogForm()}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")])],1),a("el-drawer",{attrs:{"append-to-body":!0,visible:e.cascaderDrawer,size:"40%"},on:{"update:visible":function(t){e.cascaderDrawer=t}}},[a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("vab-query-form",[a("vab-query-form-top-panel",[a("el-form",{attrs:{inline:!0,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.classification")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$translateTitle("task.Select")},on:{change:e.handleCateSearch},model:{value:e.queryForm.category,callback:function(t){e.$set(e.queryForm,"category",t)},expression:"queryForm.category"}},e._l(e.categoryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.Templatename")}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入模板名称"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}})],1),a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{staticClass:"el-icon-search",attrs:{"native-type":"submit",type:"primary"},on:{click:function(t){return e.queryprodut({})}}})],1)],1)],1)],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.tableData,"header-cell-style":{"text-align":"center"},height:e.$baseTableHeight(0)+40,border:"",size:"mini"}},[a("el-table-column",{attrs:{label:e.$translateTitle("developer.Templatename"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(r.name)+" "),a("el-popover",{attrs:{placement:"left",trigger:"click",width:"800"}},[a("dgiot-profile",{ref:"profile",attrs:{"is-product":!0}}),a("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},on:{click:function(t){return e.referenceHandle(r)}},slot:"reference"})],1)]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("department.category"),prop:"categoryname"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.category.name)+" ")]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.chooseTemplate(r)}}},[e._v(" "+e._s(e.$translateTitle("product.choose"))+" ")])]}}])})],1),a("vab-Pagination",{directives:[{name:"show",rawName:"v-show",value:e.queryForm.total>0,expression:"queryForm.total > 0"}],attrs:{limit:e.queryForm.pageSize,page:e.queryForm.pageNo,total:e.queryForm.total},on:{"update:limit":function(t){return e.$set(e.queryForm,"pageSize",t)},"update:page":function(t){return e.$set(e.queryForm,"pageNo",t)},pagination:e.categorytree}})],1)])],1),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogProfile,top:"1vh"},on:{"update:visible":function(t){e.dialogProfile=t}}},[a("dgiot-profile",{ref:"dialogProfile",attrs:{"is-product":!0}})],1),e.dictVisible?a("a-drawer",{staticStyle:{"z-index":"999"},attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.title_temp_dialog,visible:e.dictVisible,width:"60%"},on:{close:function(t){e.dictVisible=!e.dictVisible}}},[a("el-form",{ref:"dictTempForm",attrs:{model:e.dictTempForm,rules:e.rule,size:"mini"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"字典模板名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dictTempForm.name,callback:function(t){e.$set(e.dictTempForm,"name",t)},expression:"dictTempForm.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"字典模板类型",prop:"cType"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dictTempForm.cType,callback:function(t){e.$set(e.dictTempForm,"cType",t)},expression:"dictTempForm.cType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"字典模板状态",prop:"enable"}},[a("el-radio",{attrs:{border:"",label:"1"},model:{value:e.dictTempForm.enable,callback:function(t){e.$set(e.dictTempForm,"enable",t)},expression:"dictTempForm.enable"}},[e._v(" 启用 ")]),a("el-radio",{attrs:{border:"",label:"0"},model:{value:e.dictTempForm.enable,callback:function(t){e.$set(e.dictTempForm,"enable",t)},expression:"dictTempForm.enable"}},[e._v(" 禁用 ")])],1)],1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"字典模板数据"}},[a("el-tabs",{model:{value:e.elactiveName,callback:function(t){e.elactiveName=t},expression:"elactiveName"}},[a("el-tab-pane",{attrs:{label:"Table",name:"Table"}},[a("el-button",{staticClass:"mt-3",attrs:{icon:"el-icon-plus",size:"small",type:"primary"},nativeOn:{click:function(t){return e.addRow(e.dictTempForm.params)}}},[e._v(" 新 增 ")]),a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.dictTempForm.params,height:e.height}},[a("el-table-column",{attrs:{label:"序号",prop:"order"}}),a("el-table-column",{attrs:{label:"标识符",prop:"identifier"}}),a("el-table-column",{attrs:{label:"功能名称",prop:"name"}}),a("el-table-column",{attrs:{label:"数据类型",prop:"type"}}),a("el-table-column",{attrs:{label:"数据地址",prop:"address"}}),a("el-table-column",{attrs:{label:"数据长度",prop:"bytes"}}),a("el-table-column",{attrs:{label:"是否必填",prop:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.required?a("span",[e._v("是")]):a("span",[e._v("否")])]}}],null,!1,2053984958)}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){t.row;var r=t.$index;return[a("el-button",{attrs:{plain:"",size:"mini",title:"删除",type:"danger"},nativeOn:{click:function(t){return e.delRow(r,e.dictTempForm.params)}}},[e._v(" 删除 ")]),a("el-button",{attrs:{plain:"",size:"mini",title:"编辑",type:"info"},nativeOn:{click:function(t){return e.editRow(r,e.dictTempForm.params)}}},[e._v(" 编辑 ")])]}}],null,!1,2846750080)})],1)],1),a("el-tab-pane",{attrs:{label:"Json",name:"Json"}},[a("vab-json-editor",{attrs:{mode:"code",lang:"zh"},on:{"has-error":e.onError},model:{value:e.dictTempForm.params,callback:function(t){e.$set(e.dictTempForm,"params",t)},expression:"dictTempForm.params"}})],1)],1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"描述"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},placeholder:"请输入描述",type:"textarea"},model:{value:e.dictTempForm.description,callback:function(t){e.$set(e.dictTempForm,"description",t)},expression:"dictTempForm.description"}})],1),a("el-form-item",{staticStyle:{"text-align":"center"},attrs:{size:"mini"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.onJsonSave("dictTempForm")}}},[e._v(" 提交 ")]),a("el-button",{on:{click:function(t){e.dictVisible=!1}}},[e._v("取消")])],1)],1)],1):e._e(),a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.closeDict,"close-on-click-modal":!1,title:e.title_dict_edit_dialog,visible:e.edit_dict_temp_dialog,top:"5vh",width:"60%"},on:{"update:visible":function(t){e.edit_dict_temp_dialog=t},open:function(t){return e.opendialog("tempparams")}}},[a("el-form",{ref:"tempparams",attrs:{model:e.tempparams,"label-position":"left","label-width":"100px",size:"mini"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"序号",prop:"order"}},[a("el-input",{model:{value:e.tempparams.order,callback:function(t){e.$set(e.tempparams,"order",e._n(t))},expression:"tempparams.order"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.identifier"),prop:"identifier"}},[a("el-input",{model:{value:e.tempparams.identifier,callback:function(t){e.$set(e.tempparams,"identifier",t)},expression:"tempparams.identifier"}})],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name"}},[a("el-input",{model:{value:e.tempparams.name,callback:function(t){e.$set(e.tempparams,"name",t)},expression:"tempparams.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.datatype"),prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.tempTypeChange},model:{value:e.tempparams.type,callback:function(t){e.$set(e.tempparams,"type",t)},expression:"tempparams.type"}},[a("el-option",{attrs:{label:e.$translateTitle("product.init"),value:"int"}}),a("el-option",{attrs:{label:e.$translateTitle("product.float"),value:"float"}}),a("el-option",{attrs:{label:e.$translateTitle("product.double"),value:"double"}}),a("el-option",{attrs:{label:e.$translateTitle("product.bool"),value:"bool"}}),a("el-option",{attrs:{label:e.$translateTitle("product.enum"),value:"enum"}}),a("el-option",{attrs:{label:e.$translateTitle("product.string"),value:"string"}}),a("el-option",{attrs:{label:"switch",value:"switch"}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.unit")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$translateTitle("product.unit"),filterable:""},model:{value:e.tempparams.unit,callback:function(t){e.$set(e.tempparams,"unit",t)},expression:"tempparams.unit"}},e._l(e.allunit,(function(e,t){return a("el-option",{key:t,attrs:{label:e.data.Name+"/"+e.data.Symbol,value:e.data.Symbol}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"协议类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.tempparams.protocol,callback:function(t){e.$set(e.tempparams,"protocol",t)},expression:"tempparams.protocol"}},e._l(["normal","modbus","mingcheng","xinchuangwei","hex"],(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"modbus"==e.tempparams.protocol,expression:"tempparams.protocol == 'modbus'"}],attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据格式"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.tempparams.originaltype,callback:function(t){e.$set(e.tempparams,"originaltype",t)},expression:"tempparams.originaltype"}},e._l([{value:"bit",label:"位"},{value:"short16_AB",label:"16位 有符号(AB)"},{value:"short16_BA",label:"16位 有符号(BA)"},{value:"ushort16_AB",label:"16位 无符号(AB)"},{value:"ushort16_BA",label:"16位 无符号(BA)"},{value:"long32_ABCD",label:"32位 有符号(ABCD)"},{value:"long32_CDAB",label:"32位 有符号(CDAB)"},{value:"ulong32_ABCD",label:"32位 无符号(ABCD)"},{value:"ulong32_CDAB",label:"32位 无符号(CDAB)"},{value:"float32_ABCD",label:"32位 浮点数(ABCD)"},{value:"float32_CDAB",label:"32位 浮点数(CDAB)"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"modbus"==e.tempparams.protocol,expression:"tempparams.protocol == 'modbus'"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,height:e.height,border:"",size:"small"}},[a("el-table-column",{attrs:{align:"center",label:"从机地址(16进制加0X,例:0X10,否则是十进制)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-input",{model:{value:e.tempparams.slaveid,callback:function(t){e.$set(e.tempparams,"slaveid",t)},expression:"tempparams.slaveid"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(r))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"寄存器状态","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.tempparams.operatetype,callback:function(t){e.$set(e.tempparams,"operatetype",t)},expression:"tempparams.operatetype"}},e._l([{value:"writeCoil",label:"0X05:写单个线圈寄存器"},{value:"writeHreg",label:"0X06:写单个保持寄存器"},{value:"writeCoils",label:"0X0f:写多个线圈寄存器"},{value:"writeHregs",label:"0X10:写多个保持寄存器"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(r.slaveid))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"数据地址(16进制加0X,例:0X10,否则是十进制)","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-input",{model:{value:e.tempparams.address,callback:function(t){e.$set(e.tempparams,"address",t)},expression:"tempparams.address"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(r.slaveid))])]}}])}),"writeCoils"==e.tempparams.operatetype||"writeHregs"==e.tempparams.operatetype?a("el-table-column",{attrs:{align:"center",label:"寄存器个数","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-input",{model:{value:e.tempparams.registersnumber,callback:function(t){e.$set(e.tempparams,"registersnumber",t)},expression:"tempparams.registersnumber"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(r.slaveid))])]}}],null,!1,713879905)}):e._e(),a("el-table-column",{attrs:{align:"center",label:"写入字节数","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-input",{model:{value:e.tempparams.bytes,callback:function(t){e.$set(e.tempparams,"bytes",t)},expression:"tempparams.bytes"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(r.slaveid))])]}}])})],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"modbus"!=e.tempparams.protocol,expression:"tempparams.protocol != 'modbus'"}],attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据地址"}},[a("el-input",{attrs:{placeholder:"数据地址"},model:{value:e.tempparams.address,callback:function(t){e.$set(e.tempparams,"address",t)},expression:"tempparams.address"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据长度"}},[a("el-input",{attrs:{placeholder:"数据长度（字节）"},model:{value:e.tempparams.bytes,callback:function(t){e.$set(e.tempparams,"bytes",e._n(t))},expression:"tempparams.bytes"}})],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-tooltip",{staticStyle:{float:"left"},attrs:{effect:"dark",placement:"right-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 1. 采集值 设备上行数据经采集公式计算后显示 。 "),a("br"),e._v(" 公式中的%s为占位符，是固定字段。 "),a("br"),e._v(" 如： "),a("br"),e._v(" 加：%s+10 "),a("br"),e._v(" 减：%s-10 "),a("br"),e._v(" 乘：%s*10 "),a("br"),e._v(" 除：%s/10 "),a("br"),e._v(" 余数：%s%10 "),a("br")]),a("i",{staticClass:"el-icon-question"})]),a("el-form-item",{attrs:{label:"采集公式"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{rows:1,type:"textarea"},model:{value:e.tempparams.collection,callback:function(t){e.$set(e.tempparams,"collection",t)},expression:"tempparams.collection"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-tooltip",{staticStyle:{float:"left"},attrs:{effect:"dark",placement:"right-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 1. 设置值 平台下行数据经设置公式计算后设置 。 "),a("br"),e._v(" 公式中的%s为占位符，是固定字段。 "),a("br"),e._v(" 如： "),a("br"),e._v(" 加：%s+10 "),a("br"),e._v(" 减：%s-10 "),a("br"),e._v(" 乘：%s*10 "),a("br"),e._v(" 除：%s/10 "),a("br"),e._v(" 余数：%s%10 "),a("br")]),a("i",{staticClass:"el-icon-question"})]),a("el-form-item",{attrs:{label:"设置公式"}},[a("el-input",{attrs:{rows:1,type:"textarea"},model:{value:e.tempparams.setting,callback:function(t){e.$set(e.tempparams,"setting",t)},expression:"tempparams.setting"}})],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"必填"}},[a("el-radio",{attrs:{label:!0,border:""},model:{value:e.tempparams.required,callback:function(t){e.$set(e.tempparams,"required",t)},expression:"tempparams.required"}},[e._v(" 是 ")]),a("el-radio",{attrs:{label:!1,border:""},model:{value:e.tempparams.required,callback:function(t){e.$set(e.tempparams,"required",t)},expression:"tempparams.required"}},[e._v(" 否 ")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"只读"}},[a("el-radio",{attrs:{label:!0,border:""},model:{value:e.tempparams.readonly,callback:function(t){e.$set(e.tempparams,"readonly",t)},expression:"tempparams.readonly"}},[e._v(" 是 ")]),a("el-radio",{attrs:{label:!1,border:""},model:{value:e.tempparams.readonly,callback:function(t){e.$set(e.tempparams,"readonly",t)},expression:"tempparams.readonly"}},[e._v(" 否 ")])],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"列表显示"}},[a("el-radio",{attrs:{label:!0,border:""},model:{value:e.tempparams.isshow,callback:function(t){e.$set(e.tempparams,"isshow",t)},expression:"tempparams.isshow"}},[e._v(" 是 ")]),a("el-radio",{attrs:{label:!1,border:""},model:{value:e.tempparams.isshow,callback:function(t){e.$set(e.tempparams,"isshow",t)},expression:"tempparams.isshow"}},[e._v(" 否 ")])],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:12}},["switch"==e.tempparams.type?a("el-form-item",{attrs:{label:"开"}},[a("el-input",{model:{value:e.tempparams.activevalue,callback:function(t){e.$set(e.tempparams,"activevalue",t)},expression:"tempparams.activevalue"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},["switch"==e.tempparams.type?a("el-form-item",{attrs:{label:"关"}},[a("el-input",{model:{value:e.tempparams.inactivevalue,callback:function(t){e.$set(e.tempparams,"inactivevalue",t)},expression:"tempparams.inactivevalue"}})],1):e._e()],1)],1),"enum"!=e.tempparams.type&&"switch"!=e.tempparams.type?a("el-form-item",{attrs:{label:"默认值",prop:"default"}},["bool"==e.tempparams.type?a("el-select",{staticClass:"notauto",attrs:{readonly:""},model:{value:e.tempparams.default,callback:function(t){e.$set(e.tempparams,"default",t)},expression:"tempparams.default"}},[a("el-option",{attrs:{value:!0,label:"是"}}),a("el-option",{attrs:{value:!1,label:"否"}})],1):"int"==e.tempparams.type?a("el-input",{model:{value:e.tempparams.default,callback:function(t){e.$set(e.tempparams,"default",e._n(t))},expression:"tempparams.default"}}):a("el-input",{model:{value:e.tempparams.default,callback:function(t){e.$set(e.tempparams,"default",t)},expression:"tempparams.default"}})],1):e._e(),"enum"==e.tempparams.type?a("el-form-item",{attrs:{label:"Enum数据"}},[a("el-tabs",{model:{value:e.elactiveName1,callback:function(t){e.elactiveName1=t},expression:"elactiveName1"}},[a("el-tab-pane",{attrs:{label:"Table",name:"Table1"}},[a("el-button",{staticClass:"mt-3",attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},nativeOn:{click:function(t){return e.addDomain.apply(null,arguments)}}},[e._v(" 新 增 ")]),a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tempparams.specs,height:e.height}},[a("el-table-column",{attrs:{align:"center",label:"属性"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-input",{model:{value:r.attribute,callback:function(t){e.$set(r,"attribute",t)},expression:"row.attribute"}})]}}],null,!1,145805847)}),a("el-table-column",{attrs:{align:"center",label:"属性值"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-input",{model:{value:r.attributevalue,callback:function(t){e.$set(r,"attributevalue",t)},expression:"row.attributevalue"}})]}}],null,!1,2139517436)}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{plain:"",size:"mini",title:"删除",type:"danger"},nativeOn:{click:function(t){return e.removeDomain(r)}}},[e._v(" 删除 ")])]}}],null,!1,1667144408)})],1)],1)],1)],1):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitFormTempDict()}}},[e._v(" 提交 ")])],1)],1)],1)],1),a("div",{staticClass:"import-dialog"},[a("el-dialog",{attrs:{"append-to-body":!0,visible:e.importDialogShow,title:"导入产品",width:"25%"},on:{"update:visible":function(t){e.importDialogShow=t}}},[a("el-form",{ref:"uploadProForm",attrs:{model:e.formPro}},[a("el-upload",{ref:"fileUpload",staticClass:"upload-demo",attrs:{action:e.uploadAction,"auto-upload":!1,data:e.uploadData,"file-list":e.fileList,headers:e.uploadHeaders,"on-change":e.handleChange,"on-error":e.handleUploadError,"on-success":e.handleUploadSuccess,"with-credentials":!0,accept:".xls, .xlsx, .zip"}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(" 选泽文件 ")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-left",attrs:{size:"small",type:"primary"},on:{click:e.submitUpload}},[e._v(" 上 传 ")]),a("el-button",{staticClass:"btn-right",attrs:{size:"small"},on:{click:function(t){e.importDialogShow=!1}}},[e._v(" 取 消 ")])],1)],1)],1)],1)},o=[],i=a("fb07"),n=a("e97b"),s=a("d0d7"),l=a.n(s),c=(a("3dec"),a("9c6a"),a("79da"),a("1d17"),a("98da"),a("d6a4"),a("a0e0"),a("16b8"),a("f1e1"),a("c4bc"),a("e170"),a("04d6"),a("4c87"),a("b463"),a("a44e"),a("4ccb"),a("3559"),a("d06e"),a("b340"),a("6924"),a("472c"),a("256c"),a("de71"),a("7876"),a("37a7"),a("d2d8"),a("e2e1"),a("2c1e"),a("26c7"),a("ee7e"),a("f05b"),a("6a4d"),a("11de"),a("172c"),a("0c75"),a("69a3"),a("d30f"),a("3b7f"),a("aadd"),a("4656"),a("30b0")),d=a("ed08"),u=a("89e8"),p=a("5880"),m=a("7212"),f=a("e0e9"),g=a("1285"),h=a("5da9"),b=a("7497"),v=a("0af3"),y=a("ef68"),w=a("03b1"),T=a("6818"),k={};T.keys().forEach((function(e){var t=T(e);k[e.replace(/^\.\/(.*)\.\w+$/,"$1")]=t.default}));var x={components:Object(n["a"])({"dgiot-profile":c["default"]},k),data:function(){return{inputParams:{},storageArr:["默认-行式存储","默认-列式存储","InfluxDB-行式存储","InfluxDB-列式存储","TDEngine-列式存储"],channeltype:"2",channeldialog:!1,channelResource:[],selectedRow:{},tableData:[],product:{},allTemp:[],category:[],descriptions:{tableType:"things",things:[],productId:"",dictTableList:[],decoderTableList:{},productDetail:{decoder:{code:""},thing:{properties:[]},config:{parser:[],profile:[],basedate:{params:[]}}},parserTableList:[],tableLoading:!1},queryForm:{name:"",category:"",productId:"",productFlag:!1,pageNo:1,pageSize:20,searchDate:[],limt:10,skip:0,total:0,order:"-createdAt",keys:"count(*)"},cascaderDrawer:!1,drawerWidth:Number($(window).width())-240,height:this.$baseTableHeight(0),config:{},dataList:[{}],parserView:!1,parserTable:!1,parserTableList:{parser:[]},parserFromId:"",dialogVisible:!1,moduleTitle:this.$translateTitle("product.createproduct"),allunit:[],productInfo:{},edit_dict_temp_dialog:!1,title_dict_edit_dialog:"新增字典数据",tempparams:{name:"",identifier:"",type:"",order:0,address:"",bytes:"",registersnumber:"",default:0,required:!1,readonly:!0,specs:[{attribute:"",attributevalue:""}],struct:{},unit:"",inactivevalue:"",activevalue:""},elactiveName:"Table",elactiveName1:"Table1",editDictTempId:"",title_temp_dialog:"",dictTempForm:"",rule:[],dictVisible:!1,listLoading:!1,custom_row:{},custom_status:"add",hashkey:"",length:10,total:0,start:0,activeName:"first",formInline:{productname:""},uploadHeaders:{sessionToken:Cookies.get("access_token")},uploadAction:"",uploadData:{},fileList:[],productIdentifier:"",proTableData:[],formLabelWidth:"120px",dialogFormVisible:!1,importDialogShow:!1,cType:"",form:{type:1,storageStrategy:"",name:"",tdchannel:"7b290e5a0a",category:"",taskchannel:"6c48effac2",otherchannel:[],nodeType:3,desc:"",netType:"",devType:"",categoryid:"",producttempid:"",productSecret:"",roles:[],relationApp:""},taskchannelList:[],tdchannelList:[],otherchannelList:[],formPro:{name:"",url:""},rules:{name:[{required:!0,message:"请输入产品",trigger:"blur"}],tdchannel:[{required:!0,message:"请选择存储通道",trigger:"blur"}],storageStrategy:[{required:!0,message:"请选择存储策略",trigger:"blur"}],taskchannel:[{required:!0,message:"请选择任务通道",trigger:"blur"}],otherchannel:[{required:!0,message:"请选择采集通道",trigger:"blur"}],devType:[{required:!0,message:"请输入设备厂家",trigger:"blur"}],categoryname:[{required:!0,message:"请选择所属分类",trigger:"change"}],nodeType:[{required:!0,message:"请选择节点类型",trigger:"change"}],netType:[{required:!0,message:"请选择联网方式",trigger:"change"}],relationApp:[{required:!0,message:"请选择产品可见角色",trigger:"change"}]},option:[],ruleoptions:[],channel:[{label:"蜂窝(2G/3G/4G)",value:"CELLULAR"},{label:"NB-IOT通道",value:"NB-IOT"},{label:"BLE(低功耗蓝牙)",value:"Bluetooth"},{label:"5G通道(直连)",value:"5G"},{label:"WIFI通道(直连)",value:"WIFI"},{label:"ZigBee通道",value:"ZigBee"},{label:"Modbus",value:"Modbus"},{label:"LoRa(WAN)(直连)",value:"LoRaWAN"},{label:"OPC UA",value:" OPC UA"},{label:"ZETA通道",value:"ZETA"},{label:"网线连接(直连)",value:"网线连接"},{label:"自定义",value:"OTHER"}],dialogProfile:!1,imageUrl:"",selectfromtype:"",productid:"",parserDict:[],formConfig:{},editIndex:0,Parserzh:"",parseren:"",loading:!1,categoryList:[],fileServer:"",access_token:"",projectid:"",projectName:"",allTableDate:[],showTree:!1,showcateTree:!1,multipleSelection:[]}},computed:Object(n["a"])({},Object(p["mapGetters"])({defaultKonva:"topo/defaultKonva",token:"user/token",currentDepartment:"user/currentDepartment"})),mounted:function(){var e=this.$route.query.project,t=void 0===e?"":e;this.formInline.productname=t,this.Get_Re_Channel(),this.queryprodut({}),this.searchProduct(0)},beforeDestroy:function(){this.projectName=""},methods:{handleIconClick:function(e){var t=this;return Object(i["a"])(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialogProfile=!t.dialogProfile,e.next=3,t.$refs.dialogProfile.StepsListRowClick(t.selectedRow);case 3:case"end":return e.stop()}}),e)})))()},handlecateClick:function(){this.categorytree(),this.cascaderDrawer=!0},handleSelectionChange:function(e){this.multipleSelection=e;var t=[];dgiotlog.log("multipleSelection",this.multipleSelection,this.selectfromtype),_.isObject(e)||e.forEach((function(e){t.push(e.objectId)})),"otherchannel"==this.selectfromtype?this.form[this.selectfromtype]=t:(dgiotlog.log(this.cType),this.form[this.selectfromtype]=e.objectId),dgiotlog.log("multipleSelection",this.form)},getResource:function(e,t,a){var r=this;return Object(i["a"])(l.a.mark((function o(){return l.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:r.cType=a,r.selectfromtype=e,r.channeltype=t;case 3:case"end":return o.stop()}}),o)})))()},getChannel:function(e,t,a){var r={};return r=""==a?e.filter((function(e){return e.type==t})):e.filter((function(e){return e.type==t&&e.cType==a})),r},Get_Re_Channel:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){var a,r,o;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={count:"objectId",order:"-createdAt",keys:"count(*)",where:{}},t.next=3,Object(u["queryChannel"])(a);case 3:r=t.sent,o=r.results,e.channelResource=o,e.taskchannelList=e.getChannel(o,"2","INSTRUCT"),e.tdchannelList=e.getChannel(o,"2","TD"),e.otherchannelList=e.getChannel(o,"1","");case 9:case"end":return t.stop()}}),t)})))()},referenceHandle:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$refs.profile.StepsListRowClick(e);case 2:case"end":return a.stop()}}),a)})))()},queryprodut:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i,n,s,c,d,u;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.categorys,o=t.$baseColorfullLoading(),e.limit||(e=t.queryForm),i={limit:e.limit,order:e.order,skip:e.skip,keys:e.keys,include:"category",where:{category:r?{$in:r}:{$ne:null},name:e.name?{$regex:e.name,$options:"i"}:{$ne:null}}},a.prev=4,a.next=7,Object(y["queryProductTemplet"])(i);case 7:n=a.sent,s=n.results,c=void 0===s?[]:s,d=n.count,u=void 0===d?0:d,o.close(),t.tableData=c,t.queryForm.total=u,a.next=22;break;case 17:a.prev=17,a.t0=a["catch"](4),o.close(),dgiotlog.log(a.t0),t.$message.error("".concat(a.t0));case 22:case"end":return a.stop()}}),a,null,[[4,17]])})))()},goKonva:function(e){this.$router.push({path:"/Topo?productid",query:{productid:e}})},uploadCkick:function(e){this.loading=!0,this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click")),this.inputParams={file:"",scene:"app",path:"product/ico/",filename:"".concat(this.productid,".").concat(e)}},fileInfo:function(e){dgiotlog.log("info",e),this.imageUrl=e.path,this.loading=!1},files:function(e,t){this.inputParams.filename="".concat(this.productid,".").concat(t),this.inputParams.file=e},getAllunit:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(f["getAllunit"])("unit",200);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]);case 6:case"end":return t.stop()}}),t)})))()},submitEnum:function(){var e=this;"Enum"==this.tempparams.type&&this.tempparams.specs.map((function(t){var a=t["attribute"];e.tempparams.struct[a]=t["attributevalue"]}))},addDomain:function(){this.tempparams.specs.push({attribute:"",attributevalue:""})},removeDomain:function(e){var t=this.tempparams.specs.indexOf(e);-1!==t&&this.tempparams.specs.splice(t,1)},delRow:function(e,t){t.splice(e,1)},editRow:function(e,t,a){this.editIndexId=t,this.title_dict_edit_dialog="修改字典数据",this.edit_dict_temp_dialog=!0,this.tempparams=e},closeDict:function(){this.edit_dict_temp_dialog=!this.edit_dict_temp_dialog},onJsonSave:function(e){var t=this;this.$refs[e].validate((function(e){dgiotlog.log(t.editDictTempId),e&&t.put_Dict_temp(t.editDictTempId,t.dictTempForm)}))},put_Dict_temp:function(e,t){var a=this;return Object(i["a"])(l.a.mark((function r(){var o,i,n,s,c;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return dgiotlog.log(t),o=a.productInfo.config,i=void 0===o?{basedate:{}}:o,i.basedate=t,n={config:i},r.next=6,Object(m["putProduct"])(e,n);case 6:s=r.sent,c=s.updatedAt,void 0!=c?(a.dictVisible=!1,a.$message("字典数据更新成功")):a.$message("字典数据更新失败");case 9:case"end":return r.stop()}}),r)})))()},submitFormTempDict:function(){this.submitEnum(),this.edit_dict_temp_dialog=!1,void 0!=this.editIndexId?(this.dictTempForm.params[this.editIndexId]=this.tempparams,this.$message("编辑成功")):(this.dictTempForm.params.push(this.tempparams),this.$message("新增成功"))},opendialog:function(e){var t=this;this.$nextTick((function(){t.$refs[e].clearValidate()}))},tempTypeChange:function(e){"bool"==e?(this.tempparams.default=!0,this.tempparams.default=!0):this.tempparams.default="int"==e?0:void 0},addRow:function(e){this.editIndexId=void 0,this.title_dict_edit_dialog="新增字典数据",this.edit_dict_temp_dialog=!0,this.tempparams={name:"",identifier:"",type:"",order:0,address:"",bytes:"",registersnumber:"",default:0,required:!1,readonly:!0,specs:[{attribute:"",attributevalue:""}],struct:{},collection:"%s",setting:"%s",unit:""}},onError:function(){this.$message("非Json数据类型")},selectApp:function(e){var t=this;e&&Object(h["getServer"])(e).then((function(e){e&&(t.fileServer=e.file,t.access_token=e.access_token)}))},treeData:function(e){var t=JSON.parse(JSON.stringify(e));return t.filter((function(e){var a=t.filter((function(t){return e.objectId==t.parent.objectId}));return a.length>0&&(e.children=a),0==e.parent.objectId}))},deleteImgsrc:function(){this.imageUrl=""},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return new Blob([r],{type:a})},submitUpload:function(){var e=this;this.uploadAction="/product",this.$nextTick((function(){e.uploadData.appid=Cookies.get("appids"),e.$refs.fileUpload.submit()}))},handleUploadSuccess:function(e,t,a){this.$message({type:"success",message:"产品导入成功"}),this.importDialogShow=!1,this.$refs["uploadProForm"].resetFields(),this.searchProduct()},handleUploadError:function(e,t,a){this.$message({showClose:!0,message:e})},handleChange:function(e,t){t.length>0&&(this.fileList=[t[t.length-1]])},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},searchProduct:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i,n,s,c,d;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.listLoading=!0,0==e&&(t.start=0),r=[],o={count:"objectId",order:"-updatedAt",limit:t.length,skip:t.start,include:"category,producttemplet",where:{name:t.formInline.productname.length?{$regex:t.formInline.productname}:{$ne:null}}},a.next=7,t.$query_object("Product",o);case 7:i=a.sent,n=i.results,s=void 0===n?[]:n,c=i.count,d=void 0===c?0:c,s&&(s.map((function(e){""!=e.category&&e.category&&"report"!=e.devType&&r.push(e.category)})),t.listLoading=!1,t.proTableData=s,t.total=d),a.next=20;break;case 15:a.prev=15,a.t0=a["catch"](0),t.listLoading=!1,dgiotlog.log(a.t0),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(a.t0),"error","vab-hey-message-error");case 20:case"end":return a.stop()}}),a,null,[[0,15]])})))()},handleClose:function(){this.dialogFormVisible=!1},chooseTemplate:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.getcategoryname(e.category);case 2:r=a.sent,t.selectedRow=e,t.$set(t.form,"categoryid",e.category.objectId),t.$set(t.form,"categoryname",r+"/"+e.name),t.$set(t.form,"producttempid",e.objectId),t.form.thing=e.thing?e.thing:{},t.cascaderDrawer=!t.cascaderDrawer,console.log("select",e);case 10:case"end":return a.stop()}}),a)})))()},getcategoryname:function(e){return Object(i["a"])(l.a.mark((function t(){var a,r,o;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(w["getCategory"])(e.parent.objectId);case 2:return a=t.sent,r=a.name,o="所有领域"==r?e.name:r+"/"+e.name,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})))()},handleCloseDialogForm:function(){var e=this;this.dialogFormVisible=!1,this.$nextTick((function(){e.$refs["form"].resetFields()}))},properties:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"things";this.descriptions.tableLoading=!0,dgiotlog.log(e),this.descriptions.things=e,this.descriptions.tableType=a,setTimeout((function(){return t.descriptions.tableLoading=!1}),1200)},addproduct:function(){this.custom_status="add",this.moduleTitle=this.$translateTitle("product.createproduct"),this.imageUrl="",this.form={name:"",type:1,category:"",nodeType:3,desc:"",netType:" ",devType:"",productSecret:"",relationApp:this.currentDepartment.name,roles:[],categoryname:""},this.productid=moment(new Date).valueOf().toString(),this.dialogFormVisible=!0},getParent:function(e,t,a){var r=this;return t.map((function(o){e==o.id?(a.unshift(o.value),r.getParent(o.parentid,t,a)):0==o.parentid&&o.id==e&&a.unshift(o.value)})),this.form.category=a[0],a},getIndustryParent:function(e,t){var a=this;t.map((function(r){r.value==e&&a.getParent(r.id,t,[])}))},editorParser:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i,n,s;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.parserFromId=e,a.prev=1,a.next=4,Object(m["getProduct"])(e);case 4:r=a.sent,o=r.config,i=void 0===o?{parser:[]}:o,n=r.thing,s=void 0===n?{}:n,t.parserTableList=i,dgiotlog.log(t.parserTableList),t.parserDict=_.merge(s,i),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](1),t.parserTableList={parser:[]},dgiotlog.log("eeeeeeeeeeeee",a.t0);case 18:t.parserTable=!0;case 19:case"end":return a.stop()}}),a,null,[[1,14]])})))()},editParse:function(e,t){this.formConfig=t,this.editIndex=e,this.dialogVisible=!0},saveParse:function(e){var t=arguments,a=this;return Object(i["a"])(l.a.mark((function r(){var o;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=t.length>1&&void 0!==t[1]?t[1]:-1,o+2>0&&(a.parserTableList.parser[o]=_.merge({},e)),r.prev=2,r.next=5,Object(m["putProduct"])(a.parserFromId,{config:o+2>0?a.parserTableList:e});case 5:r.sent,a.$message.success(a.$translateTitle("user.Save the template successfully")),a.dialogVisible=!1,a.parserTable=!1,r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](2),a.$message.error(a.$translateTitle("user.Save the template error")+"".concat(r.t0)),dgiotlog.log(r.t0,"eeee");case 15:dgiotlog.log(e);case 16:case"end":return r.stop()}}),r,null,[[2,11]])})))()},previewParse:function(e){this.parserView=!0,this.formConfig=e,dgiotlog.log("previewParse",e)},addParse:function(e){e["parser"].push({name:Object(d["uuid"])(6),enname:Object(d["uuid"])(6),config:{}})},deleteParse:function(e,t){t.splice(e,1)},editorDict:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.getAllunit(),a.next=3,Object(m["getProduct"])(e);case 3:r=a.sent,o=r.config,i=void 0===o?{basedate:{}}:o,t.productInfo=r,dgiotlog.log(" this.parserDict",t.parserDict),t.editDictTempId=e,t.dictTempForm={name:"",cType:"",enable:"1",description:"",params:[]},t.title_temp_dialog="创建字典模板",dgiotlog.log(i),i.basedate&&i.basedate.name&&(t.title_temp_dialog="修改字典模板",t.dictTempForm=i.basedate),t.rule={name:[{required:!0,message:"请输入字典模板名称",trigger:"blur"}],cType:[{required:!0,message:"请输入字典模板类型",trigger:"blur"}],enable:[{required:!0,message:"请选择状态",trigger:"change"}]},dgiotlog.log(t.dictTempForm,"config"),t.dictVisible=!0;case 15:case"end":return a.stop()}}),a)})))()},editorProduct:function(e){this.product=e,this.imageUrl="",this.moduleTitle=this.$translateTitle("product.editproduct"),this.custom_status="edit",this.custom_row=e,this.dialogFormVisible=!0,this.productid=e.objectId,this.form.desc=e.desc,this.form.category=e.category,this.form.producttemplet=e.producttemplet,this.form.config=e.config,this.form.name=e.name,this.form.nodeType=e.nodeType,this.$set(this.form,"type",e.channel?e.channel.type:""),this.$set(this.form,"tdchannel",e.channel?e.channel.tdchannel:""),this.$set(this.form,"taskchannel",e.channel?e.channel.taskchannel:""),this.$set(this.form,"otherchannel",e.channel?e.channel.otherchannel:[]),this.$set(this.form,"storageStrategy",e.channel?e.channel.storageStrategy:""),this.form.netType=e.netType,this.form.devType=e.devType,this.form.categoryname=e.category?e.category.name:"",this.form.productSecret=e.productSecret,this.form.nodeType=e.nodeType,e.icon&&(this.imageUrl=e.icon),console.log("row",e),dgiotlog.log("form",this.form)},categorytree:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){var a,r,o;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={order:"createdAt",keys:"count(*)",where:{level:{$in:[0,1]}}},t.next=3,Object(w["queryCategory"])(a);case 3:r=t.sent,o=r.results,e.categoryList=o,dgiotlog.log("this",e.categoryList);case 7:case"end":return t.stop()}}),t)})))()},handleCateSearch:function(e){var t=this;if(this.queryForm.category=e,this.showcateTree=!this.showcateTree,"a60a85475a"==e)this.queryprodut({});else{var a={keys:"objectId",where:{parent:{className:"Category",objectId:e,__type:"Pointer"}}};Object(w["queryCategory"])(a).then((function(a){var r=[];r.push(e),a.results.forEach((function(e){r.push(e.objectId)})),dgiotlog.log("ids",r),t.queryprodut({categorys:r})}))}},submitForm:function(){var e=this,t={name:this.form.name,nodeType:this.form.nodeType,netType:this.form.netType,icon:this.imageUrl,devType:this.form.devType,desc:this.form.desc,thing:this.form.thing?this.form.thing:{},category:{objectId:0==Number(this.form.type)?"5ca6049839":this.form.categoryid,__type:"Pointer",className:"Category"},producttemplet:{objectId:0==Number(this.form.type)?"0":this.form.producttempid,__type:"Pointer",className:"ProductTemplet"},channel:{type:this.form.type,tdchannel:this.form.tdchannel,taskchannel:this.form.taskchannel,otherchannel:this.form.otherchannel,storageStrategy:this.form.storageStrategy}};this.$refs.form.validate((function(a){if(a)if("add"===e.custom_status){var r=Math.ceil(25*Math.random()),o=Base64.encode(String.fromCharCode(65+r)+Math.ceil(1e7*Math.random())+Number(new Date)),i="role:"+e.form.relationApp,n={};n[i]={read:!0,write:!0},n["*"]={read:!0};var s={productSecret:o,ACL:n,topics:[],decoder:{},config:{konva:{Stage:e.defaultKonva}}},l=_.merge(t,s);dgiotlog.log("createProduct",l),e.createProduct(l)}else console.log("editProduct",t),delete t.category,delete t.producttemplet,e.editProduct(t);else e.$message("必填项未填")}))},doUpload:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.target.files[0],o=t.$baseColorfullLoading(3),a.prev=2,a.next=5,Object(v["ImportParse"])("Product",r);case 5:i=a.sent,o.close(),dgiotlog.log("eresresrror",i),t.$message.success(""),a.next=16;break;case 11:a.prev=11,a.t0=a["catch"](2),o.close(),dgiotlog.log("error",a.t0),t.$message.error("".concat(a.t0));case 16:t.$dgiotBus.$emit("reload-router-view");case 17:case"end":return a.stop()}}),a,null,[[2,11]])})))()},createProduct:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$create_object("Product",e);case 2:r=a.sent,r.objectId?t.initQuery("产品创建成功","success"):t.$message({type:"error",message:r.error});case 4:case"end":return a.stop()}}),a)})))()},editProduct:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$update_object("Product",t.custom_row.objectId,e);case 2:r=a.sent,r.updatedAt?t.initQuery("产品修改成功","success"):t.$message({type:"error",message:r.error});case 4:case"end":return a.stop()}}),a)})))()},initQuery:function(e,t){this.$message({type:t||"info",message:e}),this.dialogFormVisible=!1,this.resetProductForm(),this.$refs["form"].resetFields(),this.searchProduct()},resetProductForm:function(){this.form={name:"",category:"",nodeType:3,desc:"",netType:"",devType:"",productSecret:"",roles:[],relationApp:""},this.imageUrl=""},deviceToDetail:function(e){this.$router.push({path:"/roles/detailproduct",query:{id:e.objectId}})},GoTodevices:function(e){this.$router.push({path:"/roles/thing",query:{productid:e.objectId}})},makeSure:function(e,t){var a=this,r={count:"objectId",skip:0,limit:1,where:{product:e.objectId}};Object(g["queryDevice"])(r).then((function(t){t.count>0?a.$message("请先删除该产品下设备"):Object(m["delProduct"])(e.objectId).then((function(e){e&&(a.$message({type:"success",message:"删除成功"}),a.searchProduct())}))}))},productSizeChange:function(e){this.length=e,this.searchProduct()},productCurrentChange:function(e){this.start=(e-1)*this.length,this.searchProduct()},blackDict:function(e,t){var a=this;return Object(i["a"])(l.a.mark((function r(){var o,i;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o={data:t,key:e,type:"Product"},r.next=3,Object(f["postDict"])(o);case 3:i=r.sent,i?a.$message({type:"success",message:"备份成功"}):a.$message({type:"error",message:"备份失败"});case 5:case"end":return r.stop()}}),r)})))()},CloneData:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i,n;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={category:e.attributes.category,devType:e.attributes.devType,name:e.attributes.name,thing:e.attributes.thing},a.next=3,Object(b["getHashClass"])("Product",r);case 3:o=a.sent,i=o.objectId,n=o.code,200==n&&t.blackDict(i,r);case 7:case"end":return a.stop()}}),a)})))()},proudctClone:function(e){e.attributes.config.cloneState=!0,e.attributes.config.cloneState=!0;var t=e,a=Object(m["putProduct"])(e.id,t);a&&this.CloneData(e)},proudctEdit:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#?drawProudctid=").concat(e.objectId,"&proudctid=").concat(e.objectId);localStorage.setItem("rowId",e.objectId),window.open(r,"__blank")},proudctView:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#/views/").concat(e.objectId);window.open(r,"__blank")},goTopoview:function(){var e=window.location.origin+"/spa",t="production";e="development"==t?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var a="".concat(e,"/#/view");window.open(a,"__blank")},handleImport:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.uploader.click();case 2:case"end":return t.stop()}}),t)})))()},exportpro:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$baseColorfullLoading(2),t.prev=1,t.next=4,Object(v["ExportParse"])("Product",{});case 4:r=t.sent,a.close(),e.$convertRes2Blob(r),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),a.close(),e.$message.error("".concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}},C=x,I=(a("9715"),a("8e71"),a("bdd7")),S=Object(I["a"])(C,r,o,!1,null,"a3314782",null);t["default"]=S.exports},"2c3e7":function(e,t,a){},"30b0":function(e,t,a){"use strict";a.r(t);var r,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"custom-table",staticClass:"devproduct devproduct-container",class:{"vab-fullscreen":e.isFullscreen}},[a("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.wmxhandleClose,"close-on-click-modal":!1,title:e.wmxSituation+"自定义属性",top:"5vh",visible:e.wmxdialogVisible,width:"60%"},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[a("wmxdetail",{ref:"sizeForm",attrs:{"size-form1":e.sizeForm},on:{addDas:e.addDas,addDomain:e.addDomain,removeDas:e.removeDas,removeDomain:e.removeDomain,submitForm:e.submitFormwmx,wmxhandleClose:e.wmxhandleClose}})],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.viewobjectmodel"),visible:e.schemadialogVisible},on:{"update:visible":function(t){e.schemadialogVisible=t}}},[a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editor1"}},[a("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}})])]),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.preserve}},[e._v(" "+e._s(e.$translateTitle("equipment.update"))+" ")])],1)]),a("el-dialog",{attrs:{"append-to-body":!0,title:e.formConfig.uid,top:"1vh",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{"append-to-body":"",visible:e.parserView},on:{"update:visible":function(t){e.parserView=t}}},[a("f-render",{attrs:{config:e.formConfig,pure:""},model:{value:e.formConfig,callback:function(t){e.formConfig=t},expression:"formConfig"}})],1),a("div",{staticClass:"prosecond"},[a("vab-query-form",[a("vab-query-form-top-panel",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,"label-width":"100px",model:e.formInline},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.$translateTitle("resource.category")}},[a("div",{staticClass:"border-panel"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"mini"},on:{clear:e.clearCategory},model:{value:e.formInline.category,callback:function(t){e.$set(e.formInline,"category",t)},expression:"formInline.category"}},e._l(e.categoryList,(function(t,r){return a("el-option",{key:r,attrs:{label:t.name,value:t.objectId},nativeOn:{click:function(a){return e.categoryChange(t)}}})})),1)],1)]),a("el-form-item",{attrs:{label:e.$translateTitle("alert.product name")}},[a("el-input",{staticStyle:{width:"90%"},attrs:{clearable:"",placeholder:e.$translateTitle("product.searchproductname"),size:"mini"},model:{value:e.queryForm.name,callback:function(t){e.$set(e.queryForm,"name",t)},expression:"queryForm.name"}},[a("el-button",{staticStyle:{padding:"0 !important",margin:"0 !important"},attrs:{slot:"append",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.queryProduttemp({})}},slot:"append"})],1)],1)],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.$loadsh.isEmpty(e.productDetail),expression:"!$loadsh.isEmpty(productDetail)"}],attrs:{size:"mini",type:"primary"},on:{click:function(t){e.isFullscreen=!e.isFullscreen}}},[a("dgiot-icon",{attrs:{icon:e.isFullscreen?"fullscreen-exit-fill":"fullscreen-fill"}}),e._v(" "+e._s(e.isFullscreen?e.$translateTitle("alert.Exit Full Screen"):e.$translateTitle("alert.full screen"))+" ")],1)],1)],1),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{lg:4,md:5,sm:6,xl:3,xs:4}},[a("ul",{staticClass:"infinite-list",staticStyle:{overflow:"auto"},style:{height:e.tableHeight+"px"}},e._l(e.categorysonList,(function(t,r){return a("li",{key:r,staticClass:"infinite-list-item",attrs:{disabled:""},on:{click:function(a){return a.stopPropagation(),e.categorysonChange(t)}}},[a("el-link",{attrs:{type:e.linkType==t.name?"success":""}},[e._v(" "+e._s(t.name)+"    ")]),a("el-button",{staticClass:"el-icon-plus",attrs:{plain:"",size:"mini",type:"text"},on:{click:function(a){return a.stopPropagation(),e.addproducttemp(t)}}})],1)})),0)]),a("el-col",{attrs:{lg:5,md:6,sm:6,xl:3,xs:4}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.proTableData,"header-cell-style":{"text-align":"center"},height:e.tableHeight,"highlight-current-row":"",size:"medium"},on:{"row-click":e.StepsListRowClick}},[a("el-table-column",{attrs:{label:e.$translateTitle("product.productname"),prop:"name","show-overflow-tooltip":"",sortable:"",width:"auto"}}),a("el-table-column",{attrs:{fixed:"right",label:e.$translateTitle("developer.operation"),width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{staticClass:"el-icon-edit",attrs:{title:e.$translateTitle("developer.delete"),type:"text"},on:{click:function(t){return t.stopPropagation(),e.editproducttemp(r)}}}),a("el-button",{staticClass:"el-icon-delete",staticStyle:{color:"red"},attrs:{title:e.$translateTitle("developer.delete"),type:"text"},on:{click:function(t){return t.stopPropagation(),e.deleteproducttemp(r)}}})]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.length,"page-sizes":[10,20,30,50],total:e.total},on:{"current-change":e.productCurrentChange,"size-change":e.productSizeChange}})],1)],1),a("el-col",{attrs:{lg:15,md:13,sm:12,xl:18,xs:16}},[a("profile-descriptions",{ref:"ProfileDescription",attrs:{"decoder-table-list":e.decoderTableList,"dict-table-list":e.dictTableList,"parser-table-list":e.parserTableList,"product-detail":e.productDetail,"product-id":e.producttempId,"table-loading":e.tableLoading,"table-type":e.tableType,"thing-key":e.thingKey,things:e.things}})],1)],1)],1),a("profile-drawer",{ref:"drawer",attrs:{"parser-table":e.parserTable,"parser-tables":e.parserTables}}),a("profile-dict",{ref:"dict",attrs:{allunit:e.allunit,"data-list":e.dataList,"dict-visible":e.dictVisible,"edit-flag":e.edit_dict_temp_dialog,"parser-table":e.parserTable,rules:e.dictrules,tempparam:e.tempparams,"title-dict":e.title_dict_edit_dialog,"title-temp-dialog":e.title_temp_dialog}}),a("product-templet",{ref:"templet",on:{"fetch-data":function(t){return e.queryProduttemp({})}}}),a("el-drawer",{attrs:{"append-to-body":"","before-close":e.handleClose,"close-on-click-modal":!1,size:"50%",title:e.moduleTitle,top:"5vh",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"devproduct-prodialog-content"},[a("div",{staticClass:"contentone"},[a("el-form",{ref:"form",attrs:{"label-width":"150px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.Producttemplatename"),prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.classification")}},[a("el-input",{attrs:{disabled:e.addflag,placeholder:e.$translateTitle("product.pleaseselectyourcate")},on:{focus:function(t){e.showTree=!e.showTree}},model:{value:e.form.categoryname,callback:function(t){e.$set(e.form,"categoryname",t)},expression:"form.categoryname"}}),e.showTree?a("div",[a("el-tree",{attrs:{data:e.categorytree,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1):e._e()],1),a("el-form-item",{attrs:{label:e.$translateTitle("menu.icon"),prop:"icon"}},[e.imageUrl?a("div",[a("img",{staticClass:"avatar",attrs:{src:e.$FileServe+e.imageUrl}}),a("el-button",{staticStyle:{"vertical-align":"text-bottom"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return t.stopPropagation(),e.deleteImgsrc.apply(null,arguments)}}},[e._v(" 删除 ")])],1):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:function(t){return e.uploadCkick("producttemp_ico")}}}),a("form",{ref:"uploadform",staticStyle:{position:"absolute",visibility:"hidden"},attrs:{enctype:"multipart/form-data",method:"POST"}},[a("input",{staticStyle:{position:"relative","z-index":"5",width:"100px",height:"100px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})]),a("br")]),a("vab-input",{ref:"uploadFinish",attrs:{params:e.inputParams},on:{fileInfo:e.fileInfo,files:e.files}}),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe"),prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1)]),a("div",{staticClass:"devproduct-prodialog-footer",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitForm()}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")]),a("el-button",{on:{click:function(t){return e.handleCloseDialogForm()}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")])],1)])],1)},i=[],n=a("fb07"),s=a("e97b"),l=a("d0d7"),c=a.n(l),d=(a("3dec"),a("9c6a"),a("79da"),a("1d17"),a("98da"),a("4656"),a("16b8"),a("f1e1"),a("e170"),a("f764"),a("04d6"),a("c4bc"),a("d6a4"),a("03b1")),u=a("5880"),p=a("7212"),m=a("e0e9"),f=a("d0fd"),g=a("5da9"),h=a("7497"),b=a("ed07"),v=a("ef68"),y=a("0af3"),w=a("ed08"),T=a("aed5"),$=a("83b1"),k=a("d292"),x=a("6818"),C={};x.keys().forEach((function(e){var t=x(e);C[e.replace(/^\.\/(.*)\.\w+$/,"$1")]=t.default}));var I={components:Object(s["a"])(Object(s["a"])({},C),{},{wmxdetail:T["default"]}),props:{},data:function(){return{tableHeight:this.$baseTableHeight(0),dataList:[{}],dictrules:{},isFullscreen:!1,things:[],tableType:"things",multipleTable:[],thingKey:moment(new Date).valueOf().toString(),productDetail:{decoder:{code:""},thing:{properties:[]},config:{parser:[],profile:[],basedate:{params:[]}}},linkType:"",productOptions:[],DbaTable:[],parserView:!1,parserTable:!1,parserType:"",parserTables:[],parserTableList:[],dictTableList:[],decoderTableList:{},productConfig:{},parserFromId:"",dialogVisible:!1,moduleTitle:this.$translateTitle("product.createproducttemplate"),allunit:[],productInfo:{},edit_dict_temp_dialog:!1,title_dict_edit_dialog:"新增字典数据",tempparams:{name:"",identifier:"",type:"",order:0,address:"",bytes:"",default:0,required:!1,readonly:!0,specs:[{attribute:"",attributevalue:""}],struct:{},unit:""},elactiveName:"Table",elactiveName1:"Table1",editDictTempId:"",title_temp_dialog:"",dictTempForm:{},rule:[],dictVisible:!1,listLoading:!1,tableLoading:!1,custom_row:{},custom_status:"add",hashkey:"",defaultProps:{children:"children",label:"label"},length:10,total:0,start:0,activeName:"first",formInline:{productname:"",category:""},uploadHeaders:{sessionToken:Cookies.get("access_token")},uploadAction:"",uploadData:{},fileList:[],producttempId:"",productIdentifier:"",proTableData:[],formLabelWidth:"120px",dialogFormVisible:!1,importDialogShow:!1,categorytree:[],inputParams:{},form:{name:"",decoder:{},thing:{},config:{},nodeType:0,netType:"",icon:""},formPro:{name:"",url:""},rules:{name:[{required:!0,message:"请输入产品",trigger:"blur"}]},option:[],ruleoptions:[],channel:[{label:"蜂窝(2G/3G/4G)(直连)",value:"CELLULAR"},{label:"NB-IOT通道",value:"NB-IOT"},{label:"BLE(低功耗蓝牙)",value:"Bluetooth"},{label:"5G通道(直连)",value:"5G"},{label:"WIFI通道(直连)",value:"WIFI"},{label:"ZigBee通道",value:"ZigBee"},{label:"Modbus",value:"Modbus"},{label:"LoRa(WAN)(直连)",value:"LoRaWAN"},{label:"OPC UA",value:" OPC UA"},{label:"ZETA通道",value:"ZETA"},{label:"网线连接(直连)",value:"网线连接"},{label:"自定义",value:"OTHER"}],imageUrl:"",parserDict:[],formConfig:{},editIndex:0,Parserzh:"",parseren:"",loading:!1,categoryList:[],categorysonList:[],queryForm:{name:""},categoryListOptions:[],fileServer:"",access_token:"",projectid:"",allTableDate:[],showTree:!1,addflag:!0,wmxdialogVisible:!1,schemadialogVisible:!1,wmxSituation:"新增",modifyIndex:-1}},computed:Object(s["a"])({},Object(u["mapGetters"])({token:"user/token",roleTree:"user/roleTree",sizeForm:"konva/sizeForm"})),watch:{productDetail:{handler:function(e){this.$nextTick((function(){var t;null!==e&&void 0!==e&&null!==(t=e.thing)&&void 0!==t&&t.properties&&this.properties(e.thing.properties)}))},immediate:!0,deep:!0}},mounted:function(){var e=this;this.$dgiotBus.$off("profileDialog"),this.$dgiotBus.$on("profileDialog",(function(t){var a=t.config,r=t.type,o=t.flag,i=t.productInfo;t.parserType;e.productDetail=i,e.productInfo=i,e.parserType=r,e.productConfig=_.merge({basedate:{params:{}}},a),e.editorParser(a,r,o)}));var t=this.$route.query.project,a=void 0===t?"":t;this.formInline.productname=a,this.querycategorylist(),this.featchTable(),this.queryProduttemp({})},methods:Object(s["a"])(Object(s["a"])({doUpload:function(e){var t=this;return Object(n["a"])(c.a.mark((function a(){var r,o,i;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.target.files[0],o=t.$baseColorfullLoading(3),a.prev=2,a.next=5,Object(y["ImportParse"])("Product",r);case 5:i=a.sent,o.close(),dgiotlog.log("eresresrror",i),t.$message.success(""),a.next=16;break;case 11:a.prev=11,a.t0=a["catch"](2),o.close(),dgiotlog.log("error",a.t0),t.$message.error("".concat(a.t0));case 16:t.$dgiotBus.$emit("reload-router-view");case 17:case"end":return a.stop()}}),a,null,[[2,11]])})))()},querycategorylist:function(){var e=this;return Object(n["a"])(c.a.mark((function t(){var a,r,o;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={order:"createdAt",keys:"count(*)",where:{level:{$in:[0,1]}}},t.next=3,Object(d["queryCategory"])(a);case 3:r=t.sent,o=r.results,e.categoryList=o,o&&"/dashboard/profile"==e.$route.fullPath&&e.$nextTick((function(){e.categoryChange({name:"所有领域"})}));case 7:case"end":return t.stop()}}),t)})))()},StepsListRowClick:function(e){var t=this;return Object(n["a"])(c.a.mark((function a(){var r,o,i,n;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={},o=!0,a.prev=2,i=o=!1,a.next=6,Object(v["getProductTemplet"])(e.objectId);case 6:n=a.sent,r=_.merge(n,{decoder:{code:""},thing:{properties:[]},config:{parser:[],profile:[],basedate:{params:[]}}}),t.$baseMessage(t.$translateTitle("alert.Data request successfully"),"success","vab-hey-message-success"),o&&i.close(),a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](2),dgiotlog.log(a.t0),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(a.t0),"error","vab-hey-message-error");case 16:dgiotlog.log("productDetail",r),t.producttempId=e.objectId,t.productDetail=r,t.$refs.ProfileDescription.productDetail=r;case 20:case"end":return a.stop()}}),a,null,[[2,12]])})))()},clearCategory:function(){this.linkType="",this.queryProduttemp({})},categoryChange:function(e){var t=this;this.linkType=e.name;var a=this.$baseColorfullLoading();this.categorysonList=[];var r={order:"createdAt",include:"parent",where:{}};"所有领域"==e.name?(r.where={level:{$gte:1}},Object(d["queryCategory"])(r).then((function(e){t.categorysonList=e.results})),this.queryProduttemp({})):(r.where={parent:e.objectId},Object(d["queryCategory"])(r).then((function(a){t.categorysonList=[e].concat(a.results);var r=[];t.categorysonList.forEach((function(e){r.push(e.objectId)})),t.queryProduttemp({categorys:{$in:r}})}))),a.close()},categorysonChange:function(e){this.linkType=e.name,this.queryProduttemp({category:e.objectId})},addproducttemp:function(e){this.fetchData(),this.addflag=!0,this.form={name:"",decoder:{},thing:{},config:{},nodeType:0,netType:"",categoryname:e.name,categoryid:e.objectId},this.dialogFormVisible=!0,this.producttempId=moment(new Date).valueOf().toString()},editproducttemp:function(e){dgiotlog.log("row",e),this.fetchData(),this.addflag=!1,this.form=e,this.producttempId=e.objectId,this.$set(this.form,"categoryname",e.category?e.category.name:""),this.$set(this.form,"categoryid",e.category?e.category.objectId:""),this.dialogFormVisible=!0},deleteproducttemp:function(e){var t=this;Object(v["delProductTemplet"])(e.objectId).then((function(a){a?t.$message({type:"success",message:"产品模板删除成功"}):t.$message({type:"error",message:"产品模板删除失败"}),t.queryProduttemp({category:e.category.objectId})}))},handleNodeClick:function(e){this.$set(this.form,"categoryid",e.objectId),this.$set(this.form,"categoryname",e.name),this.showTree=!this.showTree},fetchData:function(){var e=this;return Object(n["a"])(c.a.mark((function t(){var a,r,o,i,n;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.queryForm.name.length?'{ "$regex": "'+e.queryForm.name+'"}':'{ "$ne": "null" }',r={class:"Category",filter:'{"order": "createdAt","keys":["parent","name","level"],"where":{"level": {"$gte": 1}, "name":'+a+"}}",parent:"parent"},t.next=4,Object(k["post_tree"])(r);case 4:o=t.sent,i=o.results,n=void 0===i?[]:i,e.categorytree=n;case 8:case"end":return t.stop()}}),t)})))()},queryProduttemp:function(e){var t=this;return Object(n["a"])(c.a.mark((function a(){var r,o,i,n,s,l,d;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.$baseColorfullLoading(),o={order:"-createdAt",keys:"count(*)",include:"category,name",where:{name:t.queryForm.name?{$regex:t.queryForm.name,$options:"i"}:{$ne:null}}},e.category&&(o.where.category=e.category),e.categorys&&(o.where.category=e.categorys),a.prev=4,a.next=7,Object(v["queryProductTemplet"])(o);case 7:i=a.sent,n=i.results,s=void 0===n?[]:n,l=i.count,d=void 0===l?0:l,r.close(),t.proTableData=s,t.total=d,a.next=22;break;case 17:a.prev=17,a.t0=a["catch"](4),r.close(),dgiotlog.log(a.t0),t.$message.error("".concat(a.t0));case 22:case"end":return a.stop()}}),a,null,[[4,17]])})))()},properties:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"things";this.tableLoading=!0,this.things=e,this.tableType=a,Object($["setTimeout"])((function(){return t.tableLoading=!1}),1200)},previewParse:function(e){this.parserView=!0,this.formConfig=e},addParse:function(e){e.push({name:this.parserType+"name",enname:this.parserType+"English Name",uid:Object(w["uuid"])(6),config:{},type:this.parserType,identifier:"identifier",visible:!0,table:"Device",class:"profile",description:this.parserType+"description"}),this.saveParse(e,-1,!1)},editParse:function(e,t){var a=this;dgiotlog.log(t),this.formConfig=t,this.editIndex=e,this.parserTable=!1,this.$nextTick((function(){a.dialogVisible=!0}))},deleteParse:function(e,t,a){dgiotlog.log("uid",e),a.forEach((function(t,r){t.uid==e&&a.splice(r,1),dgiotlog.log("rows",a)})),this.saveParse(a,-1,!1)},editorParser:function(e,t,a){var r,o,i,n,s=this.productDetail,l=s.objectId,c=s.thing,d=void 0===c?{}:c,u=[],p=[],m=[];this.producttempId=l,this.parserFromId=l,this.editDictTempId=l,this.parserType=t,this.tableType=t,this.productConfig=_.merge({basedate:{params:{}}},e);var f=["parser","profile","basedate.params"];f.includes(t)&&(dgiotlog.log("type",t),this.parserTable=a,this.parserTables=this.productDetail.config["".concat(this.tableType)],this.parserTableList=this.productDetail.config["".concat(this.tableType)],this.dictTableList=this.productConfig.config.basedate.params||[]),dgiotlog.log("this.parserTableList",this.parserTableList,this.parserTables,this.tableType),null!==(r=this.productDetail)&&void 0!==r&&null!==(o=r.basedate)&&void 0!==o&&null!==(i=o.params)&&void 0!==i&&i.length&&this.productDetail.basedate.params.forEach((function(e){u.push({field:e.identifier,label:e.name,default:e.default})})),null!==d&&void 0!==d&&null!==(n=d.properties)&&void 0!==n&&n.length&&d.properties.forEach((function(e){p.push({field:e.identifier,label:e.name,default:e.default||""})})),localStorage.setItem("_sourceDict",JSON.stringify(u)),localStorage.setItem("_sourceModule",p),localStorage.setItem("_sourceField",m),this.decoderTableList={},dgiotlog.log("this.tableType ",this.tableType)},saveParse:function(e){var t=arguments,a=this;return Object(n["a"])(c.a.mark((function r(){var o,i,n;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=t.length>1&&void 0!==t[1]?t[1]:-1,i=!(t.length>2&&void 0!==t[2])||t[2],n=a.productConfig.config["".concat(a.parserType)],o+1>0?n[o]=_.merge({},e):a.productConfig.config["".concat(a.parserType)]=e,r.prev=4,r.next=7,Object(p["putProduct"])(a.parserFromId,{config:a.productConfig.config});case 7:r.sent,a.$message.success(a.$translateTitle("user.Save the template successfully")),a.dialogVisible=!1,i&&(a.parserTable=!1,a.queryProduttemp({})),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](4),a.$message.error(a.$translateTitle("user.Save the template error")+"".concat(r.t0)),dgiotlog.log(r.t0,"eeee");case 17:dgiotlog.log(e);case 18:case"end":return r.stop()}}),r,null,[[4,13]])})))()},featchTable:function(){var e=this;return Object(n["a"])(c.a.mark((function t(){var a,r,o;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setTreeFlag(!1),t.prev=1,t.next=4,Object(b["getTable"])();case 4:a=t.sent,r=a.results,o=void 0===r?[]:r,e.DbaTable=o,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),dgiotlog.log(t.t0),e.$message.error("".concat(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},uploadCkick:function(e){this.loading=!0,this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click")),this.inputParams={file:"",scene:"app",path:"producttemp/ico/",filename:"".concat(this.producttempId,".").concat(e)}},fileInfo:function(e){dgiotlog.log("info",e),this.imageUrl=e.path,this.loading=!1},files:function(e,t){this.inputParams.filename="".concat(this.producttempId,".").concat(t),this.inputParams.file=e},getAllunit:function(){var e=this;return Object(n["a"])(c.a.mark((function t(){var a,r;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(m["getAllunit"])("unit",200);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]);case 6:case"end":return t.stop()}}),t)})))()},onJsonSave:function(e,t){var a=this;dgiotlog.log("this.$refs",this.$refs.dict),this.$refs.dict.$refs[e].validate((function(e){dgiotlog.log(a.editDictTempId),e&&a.put_Dict_temp(a.editDictTempId,t)}))},put_Dict_temp:function(e,t){var a=this;return Object(n["a"])(c.a.mark((function r(){var o,i,n,s,l;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return dgiotlog.log(t),o=a.productInfo.config,i=void 0===o?{basedate:{}}:o,i.basedate=t,n={config:i},r.next=6,Object(p["putProduct"])(e,n);case 6:s=r.sent,l=s.updatedAt,void 0!=l?(a.dictVisible=!1,a.$message("字典数据更新成功")):a.$message("字典数据更新失败");case 9:case"end":return r.stop()}}),r)})))()},changeNode:function(e,t){0!=t&&(this.form.netType=""),this.channel=0==e?[{label:"蜂窝(2G/3G/4G)",value:"CELLULAR"},{label:"NB-IOT通道",value:"NB-IOT"},{label:"BLE(低功耗蓝牙)",value:"Bluetooth"},{label:"5G通道",value:"5G"},{label:"WIFI通道",value:"WIFI"},{label:"ZigBee通道",value:"ZigBee"},{label:"LoRa(WAN)",value:"LoRaWAN"},{label:"Modbus",value:"Modbus"},{label:"OPC UA",value:" OPC UA"},{label:"ZETA通道",value:"ZETA"},{label:"网线连接",value:"网线连接"},{label:"自定义",value:"OTHER"}]:[{label:"蜂窝(2G/3G/4G)",value:"CELLULAR"},{label:"5G通道",value:"5G"},{label:"WIFI通道",value:"WIFI"},{label:"NB-IOT通道",value:"NB-IOT"},{label:"LoRaWAN",value:"LoRaWAN"},{label:"网线连接",value:"网线连接"},{label:"自定义",value:"OTHER"}]},selectApp:function(e){var t=this;e&&Object(g["getServer"])(e).then((function(e){e&&(t.fileServer=e.file,t.access_token=e.access_token)}))},deleteImgsrc:function(){this.imageUrl=""},handleClose:function(){this.dialogFormVisible=!1},handleCloseDialogForm:function(){var e=this;this.dialogFormVisible=!1,this.$nextTick((function(){e.$refs["form"].resetFields()}))},submitForm:function(){var e=this,t={"*":{read:!0,write:!0}},a={name:this.form.name,category:{objectId:this.form.categoryid,__type:"Pointer",className:"Category"},icon:this.imageUrl?this.imageUrl:"",desc:this.form.desc?this.form.desc:""};this.$refs.form.validate((function(r){r?e.addflag?(a.ACL=t,dgiotlog.log("params",a),Object(v["postProductTemplet"])(a).then((function(t){t.objectId?e.$message({type:"success",message:"产品模板创建成功"}):e.$message({type:"error",message:"产品模板创建失败"}),e.queryProduttemp({category:e.form.categoryid}),e.dialogFormVisible=!1}))):Object(v["putProductTemplet"])(e.producttempId,a).then((function(t){dgiotlog.log("resresresres",t),t.updatedAt?e.$message({type:"success",message:"产品模板修改成功"}):e.$message({type:"error",message:"产品模板修改失败"}),e.queryProduttemp({category:e.form.categoryid}),e.dialogFormVisible=!1})):e.$message("必填项未填")}))},productSizeChange:function(e){this.length=e,this.queryProduttemp({})},productCurrentChange:function(e){this.start=(e-1)*this.length,this.queryProduttemp({})},blackDict:function(e,t){var a=this;return Object(n["a"])(c.a.mark((function r(){var o,i;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o={data:t,key:e,type:"Product"},r.next=3,Object(m["postDict"])(o);case 3:i=r.sent,i?a.$message({type:"success",message:"备份成功"}):a.$message({type:"error",message:"备份失败"});case 5:case"end":return r.stop()}}),r)})))()},CloneData:function(e){var t=this;return Object(n["a"])(c.a.mark((function a(){var r,o,i,n;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={category:e.attributes.category,devType:e.attributes.devType,name:e.attributes.name,thing:e.attributes.thing},a.next=3,Object(h["getHashClass"])("Product",r);case 3:o=a.sent,i=o.objectId,n=o.code,200==n&&t.blackDict(i,r);case 7:case"end":return a.stop()}}),a)})))()},proudctClone:function(e){e.attributes.config.cloneState=!0,e.attributes.config.cloneState=!0;var t=e,a=Object(p["putProduct"])(e.id,t);a&&this.CloneData(e)},proudctEdit:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#?drawProudctid=").concat(e.objectId,"&proudctid=").concat(e.objectId);localStorage.setItem("rowId",e.objectId),window.open(r,"__blank")},proudctView:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#/views/").concat(e.objectId);window.open(r,"__blank")},goTopoview:function(){var e=window.location.origin+"/spa",t="production";e="development"==t?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var a="".concat(e,"/#/view");window.open(a,"__blank")},lockingParse:function(e,t,a){var r=a["".concat(t)].disable,o=void 0!==r&&r;a["".concat(t)].disable=!o,this.saveParse(a,-1,!1)},exportpro:function(){this.allTableDate?Object(f["export_txt_to_zip"])(JSON.stringify(this.allTableDate),"Dict","Dict"):this.$message({type:"warning",message:"数据为空,无法导出"})}},Object(u["mapMutations"])({setSizeForm:"konva/setSizeForm",setTreeFlag:"settings/setTreeFlag"})),{},{getFormOrginalData:function(){return{devicetype:this.devicetype,strategy:"20",resource:1,identifier:"",dis:"0X10",dinumber:"null",type:"int",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",isshow:!0,unit:"",string:"",date:"String类型的UTC时间戳 (毫秒)",specs:{},precision:3,round:"all",struct:[{attribute:"",attributevalue:""}],rate:1,offset:0,order:0,protocol:"normal",operatetype:"readCoils",originaltype:"int",slaveid:"0X10",collection:"%s",control:"%d",nobound:[],editdatatype:!1,iscount:"0",countstrategy:20,countround:"all",countcollection:"%s",daslist:[]}},createProperty:function(){this.setSizeForm(this.getFormOrginalData()),this.wmxdialogVisible=!0,this.wmxSituation="新增"},wmxhandleClose:function(){this.wmxdialogVisible=!1,this.setSizeForm(this.getFormOrginalData())},removeDomain:function(e){var t=this.sizeForm.struct.indexOf(e);-1!==t&&this.sizeForm.struct.splice(t,1)},addDomain:function(){this.sizeForm.struct.push({attribute:"",attributevalue:""})},deletewmx:function(e){var t=this;this.productDetail.thing.properties.splice(e,1);var a={thing:{properties:this.productDetail.thing.properties}};Object(v["putProductTemplet"])(this.producttempId,a).then((function(e){e.updatedAt?t.$message({type:"success",message:"删除成功"}):t.$message({type:"warning",message:"删除失败"})})).catch((function(e){dgiotlog.log(e)}))},wmxDataFill:function(e,t){this.modifyIndex=t,this.wmxdialogVisible=!0,this.wmxSituation="编辑";var a={},r=[];if(e.dataType.das.forEach((function(e){r.push({addr:e})})),-1!=["float","double","int","long"].indexOf(e.dataType.type))a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,daslist:r,endnumber:this.$objGet(e,"dataType.specs.max"),startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),precision:this.$objGet(e,"dataType.specs.precision"),dis:this.$objGet(e,"dataForm.address"),round:this.$objGet(e,"dataForm.round"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),slaveid:this.$objGet(e,"dataForm.slaveid"),collection:"",control:"",strategy:"",required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,editdatatype:!0},e.dataForm&&(a.collection=e.dataForm.collection,a.control=e.dataForm.control,a.strategy=e.dataForm.strategy);else if("bool"==e.dataType.type)a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,true:e.dataType.specs[1],false:e.dataType.specs[0],daslist:r,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!1,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0};else if("image"==e.dataType.type)a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,imagevalue:e.dataType.imagevalue,daslist:r,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!1,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0};else if("enum"==e.dataType.type){var o=[];for(var i in e.dataType.specs)o.push({attribute:i,attributevalue:e.dataType.specs[i]});a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,specs:e.dataType.specs,struct:o,daslist:r,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0}}else"struct"==e.dataType.type?a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,struct:e.dataType.specs,daslist:r,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,identifier:void 0==e.dataForm?"":e.identifier,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0}:"text"==e.dataType.type?a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,string:e.dataType.size,daslist:r,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),order:this.$objGet(e,"dataForm.order"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,strategy:void 0==e.dataForm?"":e.dataForm.strategy,editdatatype:!0}:"date"==e.dataType.type?a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,daslist:r,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),order:this.$objGet(e,"dataForm.order"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,editdatatype:!0}:"geopoint"==e.dataType.type&&(a={name:e.name,devicetype:e.devicetype,type:e.dataType.type,gpstype:e.dataType.gpstype,collection:void 0==e.dataForm?"":e.dataForm.collection,control:void 0==e.dataForm?"":e.dataForm.control,strategy:void 0==e.dataForm?"":e.dataForm.strategy,daslist:r,startnumber:this.$objGet(e,"dataType.specs.min"),step:this.$objGet(e,"dataType.specs.step"),unit:this.$objGet(e,"dataType.specs.unit"),round:this.$objGet(e,"dataForm.round"),dis:this.$objGet(e,"dataForm.address"),order:this.$objGet(e,"dataForm.order"),dinumber:this.$objGet(e,"dataForm.data"),rate:this.$objGet(e,"dataForm.rate"),offset:this.$objGet(e,"dataForm.offset"),protocol:this.$objGet(e,"dataForm.protocol"),operatetype:this.$objGet(e,"dataForm.operatetype"),originaltype:this.$objGet(e,"dataForm.originaltype"),slaveid:this.$objGet(e,"dataForm.slaveid"),iscount:this.$objGet(e,"dataForm.iscount"),countstrategy:this.$objGet(e,"dataForm.countstrategy"),countround:this.$objGet(e,"dataForm.countround"),countcollection:this.$objGet(e,"dataForm.countcollection"),required:!0,ico:e.ico,isread:e.accessMode,isshow:e.isshow,identifier:e.identifier,editdatatype:!0});this.setSizeForm(a)},addDas:function(){this.sizeForm.daslist.push({addr:""})},removeDas:function(e){var t=this.sizeForm.daslist.indexOf(e);-1!==t&&this.sizeForm.daslist.splice(t,1)},submitFormwmx:function(e){var t=this,a=[];e.daslist.map((function(e){var t=e["addr"];a.push(t)})),dgiotlog.log("sizeForm",e);var r={name:e.name,devicetype:e.devicetype,dataForm:{round:e.round,data:e.dinumber,address:e.dis,rate:e.rate,offset:e.offset,order:e.order,protocol:e.protocol,operatetype:e.operatetype,originaltype:e.originaltype,slaveid:e.slaveid,collection:e.collection,control:e.control,strategy:e.strategy,iscount:e.iscount,countstrategy:e.countstrategy,countround:e.countround,countcollection:e.countcollection},ico:e.ico,required:!0,accessMode:e.isread,isshow:e.isshow,identifier:e.identifier};if("float"==e.type||"double"==e.type||"int"==e.type||"long"==e.type){var o={dataType:{type:e.type.toLowerCase(),specs:{max:e.endnumber,min:e.startnumber,step:e.step,precision:Number(e.precision),unit:""==e.unit?"":e.unit},das:a}};Object.assign(r,o)}else if("image"==e.type)o={dataType:{das:a,type:e.type.toLowerCase(),imagevalue:e.imagevalue,specs:{}}},Object.assign(r,o);else if("bool"==e.type)o={dataType:{das:a,type:e.type.toLowerCase(),specs:{0:e.false,1:e.true}}},Object.assign(r,o);else if("enum"==e.type){var i={};e.struct.map((function(e){var t=e["attribute"];i[t]=e["attributevalue"]})),o={dataType:{das:a,type:e.type.toLowerCase(),specs:i}},Object.assign(r,o)}else"struct"==e.type?(o={dataType:{das:a,type:e.type.toLowerCase(),specs:e.struct}},Object.assign(r,o)):"text"==e.type?(o={dataType:{das:a,type:e.type.toLowerCase(),size:e.string,specs:{}}},Object.assign(r,o)):"date"==e.type?(o={dataType:{das:a,type:e.type.toLowerCase(),specs:{}}},Object.assign(r,o)):"geopoint"==e.type&&(o={dataType:{das:a,type:e.type.toLowerCase(),gpstype:e.gpstype,specs:{}}},Object.assign(r,o));delete r.index,dgiotlog.log("obj",r),"新增"==this.wmxSituation?this.productDetail.thing.properties.unshift(r):"编辑"==this.wmxSituation&&(this.productDetail.thing.properties[this.modifyIndex]=r,this.thingKey=moment(new Date).valueOf().toString()),dgiotlog.log(this.wmxSituation,this.productDetail.thing.properties);var n={thing:{properties:this.productDetail.thing.properties}};Object(v["putProductTemplet"])(this.producttempId,n).then((function(e){e.updatedAt?t.$message({type:"success",message:t.wmxSituation+"成功"}):t.$message({type:"warning",message:t.wmxSituation+"失败"})})),this.wmxdialogVisible=!1},checkschema:function(){var e=this;this.schemadialogVisible=!0,Object($["setTimeout"])((function(){r=ace.edit("editor1"),r.session.setMode("ace/mode/json"),r.setTheme("ace/theme/eclipse"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),r.setValue(JSON.stringify(e.productDetail.thing,null,4))}),1)},preserve:function(){var e=this,t={thing:JSON.parse(r.getValue())};Object(v["putProductTemplet"])(this.producttempId,t).then((function(t){e.$message({type:"success",message:e.wmxSituation+"成功"})})),this.schemadialogVisible=!1},goKonva:function(e){this.$router.push({path:"/Topo?productid",query:{productid:e}})}})},S=I,j=(a("b4d4"),a("bdd7")),F=Object(j["a"])(S,o,i,!1,null,"380f720e",null);t["default"]=F.exports},4968:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"devproduct devproduct-container"},[a("vab-input",{ref:"uploadFinish",on:{fileInfo:e.fileInfo}}),a("div",{staticClass:"prosecond"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.classification")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$translateTitle("task.Select")},on:{change:e.handleCateSearch},model:{value:e.queryForm.category,callback:function(t){e.$set(e.queryForm,"category",t)},expression:"queryForm.category"}},e._l(e.categoryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:e.$translateTitle("product.searchproductname")},model:{value:e.formInline.productname,callback:function(t){e.$set(e.formInline,"productname",t)},expression:"formInline.productname"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.searchProduct(0)}}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")])],1),a("el-form-item",{staticStyle:{float:"right","text-align":"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addproduct}},[e._v(" "+e._s(e.$translateTitle("product.createproduct"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.exportpro}},[e._v(" "+e._s(e.$translateTitle("product.exportpro"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleImport()}}},[e._v(" "+e._s(e.$translateTitle("product.importpro"))+" ")])],1)],1),a("div",{staticClass:"protable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.tableData,"header-cell-style":{"text-align":"center"}}},[a("el-table-column",{attrs:{label:"ProductID",prop:"objectId","show-overflow-tooltip":"",sortable:""}}),a("el-table-column",{attrs:{label:e.$translateTitle("product.productname")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.productgrouping")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.netType))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("product.addingtime"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.utc2beijing(r.createdAt)))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:e.$translateTitle("developer.operation"),width:"340"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row,o=t.$index;return[a("el-button",{attrs:{size:"mini",type:"primary",underline:!1},on:{click:function(t){return e.deviceToDetail(r)}}},[e._v(" "+e._s(e.$translateTitle("product.config"))+" ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.goKonva(r.objectId)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.konva"))+" ")]),a("el-button",{attrs:{size:"mini",type:"success",underline:!1},on:{click:function(t){return e.editorProduct(r)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.edit"))+" ")]),a("el-popover",{ref:"popover-"+o,staticStyle:{"margin-left":"10px"},attrs:{placement:"top",width:"300"}},[a("p",[e._v("确定删除这个"+e._s(r.name)+"产品吗？")]),a("div",{staticStyle:{margin:"0","text-align":"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.scope._self.$refs["popover-"+o].doClose()}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.makeSure(e.scope,o)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1),a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)]}}])})],1)],1),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.length,"page-sizes":[10,20,30,50],total:e.total},on:{"current-change":e.productCurrentChange,"size-change":e.productSizeChange}})],1)],1),a("div",{staticClass:"devproduct-prodialog"},[a("el-drawer",{attrs:{"before-close":e.handleClose,"close-on-click-modal":!1,size:"60%",title:e.moduleTitle,top:"5vh",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"devproduct-prodialog-content"},[a("div",{staticClass:"contentone"},[a("div",{staticStyle:{display:"flex"}},[a("span",[e._v(" "+e._s(e.$translateTitle("product.productinformation"))+" ")]),a("p",{staticStyle:{"flex-grow":"2",width:"auto",height:"1px",margin:"10px","border-top":"1px dashed #dddddd"}})]),a("el-form",{ref:"form",attrs:{"label-width":"产品名称"==e.$translateTitle("product.productname")?"120px":"160px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.productname"),prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.productgrouping"),prop:"devType"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.devType,callback:function(t){e.$set(e.form,"devType",t)},expression:"form.devType"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("product.classification"),prop:"category"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},[a("el-option",{staticStyle:{height:"auto",padding:"0"},attrs:{value:e.treeDataValue}},[a("el-tree",{ref:"workGroup",attrs:{data:e.categoryTreeData,"default-expand-all":"","expand-on-click-node":!1,"node-key":"index"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,o=t.data;return a("div",{staticClass:"custom-tree-node"},[a("span",{class:{selected:!1},on:{click:function(t){return e.handleCateClick(r,o)}}},[e._v(" "+e._s(r.label)+" ")])])}}])})],1)],1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.applicationtype"),prop:"relationApp"}},[a("el-input",{attrs:{disabled:"edit"==e.custom_status&&""!=e.form.relationApp,placeholder:e.$translateTitle("product.pleaseselectyourapp"),readonly:""},on:{focus:function(t){e.showTree=!e.showTree}},model:{value:e.form.relationApp,callback:function(t){e.$set(e.form,"relationApp",t)},expression:"form.relationApp"}}),e.showTree?a("div",[a("el-tree",{attrs:{data:e.allApps,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1):e._e()],1),a("el-form-item",{attrs:{label:e.$translateTitle("menu.icon"),prop:"icon"}},[e.imageUrl?a("div",[a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}),a("el-button",{staticStyle:{"vertical-align":"text-bottom"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return t.stopPropagation(),e.deleteImgsrc.apply(null,arguments)}}},[e._v(" 删除 ")])],1):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:e.uploadCkick}}),a("form",{ref:"uploadform",staticStyle:{position:"absolute",visibility:"hidden"},attrs:{enctype:"multipart/form-data",method:"POST"}},[a("input",{staticStyle:{position:"relative","z-index":"5",width:"100px",height:"100px",cursor:"pointer",opacity:"0"},attrs:{type:"file"},on:{change:function(t){return e.upload(t)}}})]),a("br")]),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe"),prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1)],1)]),a("div",{staticClass:"devproduct-prodialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")]),a("el-button",{on:{click:function(t){return e.handleCloseDialogForm()}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")])],1)])],1)],1)},o=[],i=a("fb07"),n=a("e97b"),s=a("d0d7"),l=a.n(s),c=(a("3dec"),a("9c6a"),a("79da"),a("1d17"),a("98da"),a("d6a4"),a("16b8"),a("f1e1"),a("c4bc"),a("e170"),a("04d6"),a("a0e0"),a("4c87"),a("b463"),a("a44e"),a("4ccb"),a("3559"),a("d06e"),a("b340"),a("6924"),a("472c"),a("256c"),a("de71"),a("7876"),a("37a7"),a("d2d8"),a("e2e1"),a("2c1e"),a("26c7"),a("ee7e"),a("f05b"),a("6a4d"),a("11de"),a("172c"),a("0c75"),a("69a3"),a("d30f"),a("3b7f"),a("aadd"),a("f764"),a("5662"),a("ed08")),d=a("5880"),u=a("7212"),p=a("e0e9"),m=a("1285"),f=a("5da9"),g=a("7497"),h=a("0af3"),b=a("ef68"),v=a("03b1"),y=a("d292"),w=a("6818"),T={};w.keys().forEach((function(e){var t=w(e);T[e.replace(/^\.\/(.*)\.\w+$/,"$1")]=t.default}));var k={components:{},data:function(){return{selectedRow:{},tableData:[],allTemp:[],category:[],descriptions:{tableType:"things",things:[],productId:"",dictTableList:[],decoderTableList:{},productDetail:{decoder:{code:""},thing:{properties:[]},config:{parser:[],profile:[],basedate:{params:[]}}},parserTableList:[],tableLoading:!1},queryForm:{name:"",category:"",productId:"",productFlag:!1,pageNo:1,pageSize:20,searchDate:[],limt:10,skip:0,total:0,order:"-createdAt",keys:"count(*)"},cascaderDrawer:!1,drawerWidth:Number($(window).width())-240,height:this.$baseTableHeight(0),config:{},dataList:[{}],parserView:!1,parserTable:!1,parserTableList:{parser:[]},parserFromId:"",dialogVisible:!1,moduleTitle:this.$translateTitle("product.createproduct"),allunit:[],productInfo:{},edit_dict_temp_dialog:!1,title_dict_edit_dialog:"新增字典数据",tempparams:{name:"",identifier:"",type:"",order:0,address:"",bytes:"",registersnumber:"",default:0,required:!1,readonly:!0,specs:[{attribute:"",attributevalue:""}],struct:{},unit:"",inactivevalue:"",activevalue:""},elactiveName:"Table",elactiveName1:"Table1",editDictTempId:"",title_temp_dialog:"",dictTempForm:"",rule:[],dictVisible:!1,listLoading:!1,custom_row:{},custom_status:"add",hashkey:"",defaultProps:{children:"children",label:"label"},length:10,total:0,start:0,activeName:"first",formInline:{productname:""},uploadHeaders:{sessionToken:Cookies.get("access_token")},uploadAction:"",uploadData:{},fileList:[],proTableData:[],dialogFormVisible:!1,importDialogShow:!1,cType:"",treeDataValue:"",categoryTreeData:[],curCatementId:"",form:{type:1,storageStrategy:"",name:"",category:"",nodeType:3,desc:"",netType:"",devType:"",productSecret:"",roles:[],relationApp:""},formPro:{name:"",url:""},rules:{name:[{required:!0,message:"请输入产品",trigger:"blur"}],devType:[{required:!0,message:"请输入产品标识，用于区分不同设备",trigger:"blur"}],category:[{required:!0,message:"请选择所属分类",trigger:"change"}],nodeType:[{required:!0,message:"请选择节点类型",trigger:"change"}],netType:[{required:!0,message:"请选择联网方式",trigger:"change"}],relationApp:[{required:!0,message:"请选择产品可见角色",trigger:"change"}]},option:[],ruleoptions:[],dialogProfile:!1,imageUrl:"",selectfromtype:"",productid:"",parserDict:[],formConfig:{},editIndex:0,Parserzh:"",parseren:"",loading:!1,allApps:[],categoryList:[],fileServer:"",access_token:"",projectid:"",projectName:"",allTableDate:[],showTree:!1,showcateTree:!1,multipleSelection:[]}},computed:Object(n["a"])({},Object(d["mapGetters"])({token:"user/token",roleTree:"user/roleTree"})),mounted:function(){this.queryProdut({}),this.categorytree(),this.categorylist(),this.searchProduct(0)},beforeDestroy:function(){this.projectName=""},methods:{handleIconClick:function(e){var t=this;return Object(i["a"])(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialogProfile=!t.dialogProfile,e.next=3,t.$refs.dialogProfile.StepsListRowClick(t.selectedRow);case 3:case"end":return e.stop()}}),e)})))()},handleCateClick:function(e,t){dgiotlog.log("node",e),dgiotlog.log("data",t),this.form.category=t.objectId,this.curCatementId=t.name},queryProdut:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i,n,s,c,d,u;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.categorys,o=t.$baseColorfullLoading(),e.limit||(e=t.queryForm),dgiotlog.log("args",e),i={limit:e.limit,order:e.order,skip:e.skip,keys:e.keys,where:{category:r?{$in:r}:{$ne:null},name:e.name?{$regex:e.name,$options:"i"}:{$ne:null}}},dgiotlog.log("params",i),a.prev=6,a.next=9,Object(b["queryProductTemplet"])(i);case 9:n=a.sent,s=n.results,c=void 0===s?[]:s,d=n.count,u=void 0===d?0:d,o.close(),t.tableData=c,t.queryForm.total=u,a.next=24;break;case 19:a.prev=19,a.t0=a["catch"](6),o.close(),dgiotlog.log(a.t0),t.$message.error("".concat(a.t0));case 24:case"end":return a.stop()}}),a,null,[[6,19]])})))()},goKonva:function(e){this.$router.push({path:"/Topo?productid",query:{productid:e}})},uploadCkick:function(){this.loading=!0,this.$refs["uploadFinish"].$refs.uploader.dispatchEvent(new MouseEvent("click"))},fileInfo:function(e){dgiotlog.log("info",e),this.imageUrl=e.url,this.loading=!1},getAllunit:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(p["getAllunit"])("unit",200);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]);case 6:case"end":return t.stop()}}),t)})))()},submitEnum:function(){var e=this;"Enum"==this.tempparams.type&&this.tempparams.specs.map((function(t){var a=t["attribute"];e.tempparams.struct[a]=t["attributevalue"]}))},addDomain:function(){this.tempparams.specs.push({attribute:"",attributevalue:""})},removeDomain:function(e){var t=this.tempparams.specs.indexOf(e);-1!==t&&this.tempparams.specs.splice(t,1)},delRow:function(e,t){t.splice(e,1)},editRow:function(e,t,a){this.editIndexId=t,this.title_dict_edit_dialog="修改字典数据",this.edit_dict_temp_dialog=!0,this.tempparams=e},closeDict:function(){this.edit_dict_temp_dialog=!this.edit_dict_temp_dialog},onJsonSave:function(e){var t=this;this.$refs[e].validate((function(e){dgiotlog.log(t.editDictTempId),e&&t.put_Dict_temp(t.editDictTempId,t.dictTempForm)}))},put_Dict_temp:function(e,t){var a=this;return Object(i["a"])(l.a.mark((function r(){var o,i,n,s,c;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return dgiotlog.log(t),o=a.productInfo.config,i=void 0===o?{basedate:{}}:o,i.basedate=t,n={config:i},r.next=6,Object(u["putProduct"])(e,n);case 6:s=r.sent,c=s.updatedAt,void 0!=c?(a.dictVisible=!1,a.$message("字典数据更新成功")):a.$message("字典数据更新失败");case 9:case"end":return r.stop()}}),r)})))()},submitFormTempDict:function(){this.submitEnum(),this.edit_dict_temp_dialog=!1,void 0!=this.editIndexId?(this.dictTempForm.params[this.editIndexId]=this.tempparams,this.$message("编辑成功")):(this.dictTempForm.params.push(this.tempparams),this.$message("新增成功"))},opendialog:function(e){var t=this;this.$nextTick((function(){t.$refs[e].clearValidate()}))},tempTypeChange:function(e){"bool"==e?(this.tempparams.default=!0,this.tempparams.default=!0):this.tempparams.default="int"==e?0:void 0},addRow:function(e){this.editIndexId=void 0,this.title_dict_edit_dialog="新增字典数据",this.edit_dict_temp_dialog=!0,this.tempparams={name:"",identifier:"",type:"",order:0,address:"",bytes:"",registersnumber:"",default:0,required:!1,readonly:!0,specs:[{attribute:"",attributevalue:""}],struct:{},collection:"%s",setting:"%s",unit:""}},onError:function(){this.$message("非Json数据类型")},handleNodeClick:function(e){dgiotlog.log(e,"data"),this.$set(this.form,"relationApp",e.name),this.showTree=!this.showTree},selectApp:function(e){var t=this;e&&Object(f["getServer"])(e).then((function(e){e&&(t.fileServer=e.file,t.access_token=e.access_token)}))},treeData:function(e){var t=JSON.parse(JSON.stringify(e));return t.filter((function(e){var a=t.filter((function(t){return e.objectId==t.parent.objectId}));return a.length>0&&(e.children=a),0==e.parent.objectId}))},deleteImgsrc:function(){this.imageUrl=""},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return new Blob([r],{type:a})},submitUpload:function(){var e=this;this.uploadAction="/product",this.$nextTick((function(){e.uploadData.appid=Cookies.get("appids"),e.$refs.fileUpload.submit()}))},handleUploadSuccess:function(e,t,a){this.$message({type:"success",message:"产品导入成功"}),this.importDialogShow=!1,this.$refs["uploadProForm"].resetFields(),this.searchProduct()},handleUploadError:function(e,t,a){this.$message({showClose:!0,message:e})},handleChange:function(e,t){t.length>0&&(this.fileList=[t[t.length-1]])},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},searchProduct:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i,n,s,c,d;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.listLoading=!0,0==e&&(t.start=0),r=[],o={count:"objectId",order:"-updatedAt",limit:t.length,skip:t.start,where:{name:t.formInline.productname.length?{$regex:t.formInline.productname}:{$ne:null}}},a.next=7,t.$query_object("Product",o);case 7:i=a.sent,n=i.results,s=void 0===n?[]:n,c=i.count,d=void 0===c?0:c,s&&(s.map((function(e){""!=e.category&&e.category&&"report"!=e.devType&&r.push(e.category)})),t.listLoading=!1,t.proTableData=s,t.total=d),t.getApps(),a.next=21;break;case 16:a.prev=16,a.t0=a["catch"](0),t.listLoading=!1,dgiotlog.log(a.t0),t.$baseMessage(t.$translateTitle("alert.Data request error")+"".concat(a.t0),"error","vab-hey-message-error");case 21:case"end":return a.stop()}}),a,null,[[0,16]])})))()},getApps:function(){this.allApps=this.roleTree},handleClose:function(){this.dialogFormVisible=!1},chooseTemplate:function(e){dgiotlog.log("row",e),this.selectedRow=e,this.form.category=e.category,this.cascaderDrawer=!this.cascaderDrawer},handleCloseDialogForm:function(){var e=this;this.dialogFormVisible=!1,this.$nextTick((function(){e.$refs["form"].resetFields()}))},properties:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"things";this.descriptions.tableLoading=!0,dgiotlog.log(e),this.descriptions.things=e,this.descriptions.tableType=a,setTimeout((function(){return t.descriptions.tableLoading=!1}),1200)},addproduct:function(){this.custom_status="add",this.moduleTitle=this.$translateTitle("product.createproduct"),this.imageUrl="",this.handleNodeClick(this.allApps[0]),this.form={name:"",type:1,category:"",nodeType:3,desc:"",netType:" ",devType:"",productSecret:"",relationApp:this.allApps[0].name,roles:[]},this.dialogFormVisible=!0},getParent:function(e,t,a){var r=this;return t.map((function(o){e==o.id?(a.unshift(o.value),r.getParent(o.parentid,t,a)):0==o.parentid&&o.id==e&&a.unshift(o.value)})),this.form.category=a[0],a},getIndustryParent:function(e,t){var a=this;t.map((function(r){r.value==e&&a.getParent(r.id,t,[])}))},editorParser:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i,n,s;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.parserFromId=e,a.prev=1,a.next=4,Object(u["getProduct"])(e);case 4:r=a.sent,o=r.config,i=void 0===o?{parser:[]}:o,n=r.thing,s=void 0===n?{}:n,t.parserTableList=i,dgiotlog.log(t.parserTableList),t.parserDict=_.merge(s,i),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](1),t.parserTableList={parser:[]},dgiotlog.log("eeeeeeeeeeeee",a.t0);case 18:t.parserTable=!0;case 19:case"end":return a.stop()}}),a,null,[[1,14]])})))()},editParse:function(e,t){this.formConfig=t,this.editIndex=e,this.dialogVisible=!0},saveParse:function(e){var t=arguments,a=this;return Object(i["a"])(l.a.mark((function r(){var o;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=t.length>1&&void 0!==t[1]?t[1]:-1,o+2>0&&(a.parserTableList.parser[o]=_.merge({},e)),r.prev=2,r.next=5,Object(u["putProduct"])(a.parserFromId,{config:o+2>0?a.parserTableList:e});case 5:r.sent,a.$message.success(a.$translateTitle("user.Save the template successfully")),a.dialogVisible=!1,a.parserTable=!1,r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](2),a.$message.error(a.$translateTitle("user.Save the template error")+"".concat(r.t0)),dgiotlog.log(r.t0,"eeee");case 15:dgiotlog.log(e);case 16:case"end":return r.stop()}}),r,null,[[2,11]])})))()},previewParse:function(e){this.parserView=!0,this.formConfig=e,dgiotlog.log("previewParse",e)},addParse:function(e){e["parser"].push({name:Object(c["uuid"])(6),enname:Object(c["uuid"])(6),config:{}})},deleteParse:function(e,t){t.splice(e,1)},editorDict:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.getAllunit(),a.next=3,Object(u["getProduct"])(e);case 3:r=a.sent,o=r.config,i=void 0===o?{basedate:{}}:o,t.productInfo=r,dgiotlog.log(" this.parserDict",t.parserDict),t.editDictTempId=e,t.dictTempForm={name:"",cType:"",enable:"1",description:"",params:[]},t.title_temp_dialog="创建字典模板",dgiotlog.log(i),i.basedate&&i.basedate.name&&(t.title_temp_dialog="修改字典模板",t.dictTempForm=i.basedate),t.rule={name:[{required:!0,message:"请输入字典模板名称",trigger:"blur"}],cType:[{required:!0,message:"请输入字典模板类型",trigger:"blur"}],enable:[{required:!0,message:"请选择状态",trigger:"change"}]},dgiotlog.log(t.dictTempForm,"config"),t.dictVisible=!0;case 15:case"end":return a.stop()}}),a)})))()},editorProduct:function(e){this.imageUrl="",this.moduleTitle=this.$translateTitle("product.editproduct"),this.custom_status="edit",this.custom_row=e,this.dialogFormVisible=!0,this.productid=e.objectId,this.getIndustryParent(e.category,this.categoryList),this.form.desc=e.desc,this.form.name=e.name,this.form.nodeType=e.nodeType,this.form.netType=e.netType,this.form.devType=e.devType,this.form.productSecret=e.productSecret,e.icon&&(this.imageUrl=e.icon);var t=[];for(var a in e.ACL)t.push(a),a.includes("role")&&(dgiotlog.log(a,"key"),this.form.relationApp=a?a.substr(5):"")},categorylist:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){var a,r,o;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={order:"createdAt",keys:"count(*)",where:{level:{$in:[0,1]}}},t.next=3,Object(v["queryCategory"])(a);case 3:r=t.sent,o=r.results,e.categoryList=o,dgiotlog.log("this",e.categoryList);case 7:case"end":return t.stop()}}),t)})))()},categorytree:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){var a,r,o,i,n;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.queryForm.name.length?'{ "$regex": "'+e.queryForm.name+'"}':'{ "$ne": "null" }',e.listLoading=!0,r={class:"Category",filter:'{"order": "createdAt","keys":["parent","name","level"],"where":{"level": {"$gte": 1}, "name":'+a+"}}",parent:"parent"},dgiotlog.log(r),t.next=6,Object(y["post_tree"])(r);case 6:o=t.sent,i=o.results,n=void 0===i?[]:i,e.categoryTreeData=n,e.listLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},handleCateSearch:function(e){var t=this;if(this.queryForm.category=e,this.showcateTree=!this.showcateTree,"a60a85475a"==e)this.queryProdut({});else{var a={keys:"objectId",where:{parent:{className:"Category",objectId:e,__type:"Pointer"}}};Object(v["queryCategory"])(a).then((function(a){var r=[];r.push(e),a.results.forEach((function(e){r.push(e.objectId)})),dgiotlog.log("ids",r),t.queryProdut({categorys:r})}))}},submitForm:function(){var e=this;this.form.name,this.form.nodeType,this.form.netType,this.imageUrl,this.form.devType,this.form.desc;this.$refs.form.validate((function(t){t?e.custom_status:e.$message("必填项未填")}))},doUpload:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.target.files[0],o=t.$baseColorfullLoading(3),a.prev=2,a.next=5,Object(h["ImportParse"])("Product",r);case 5:i=a.sent,o.close(),dgiotlog.log("eresresrror",i),t.$message.success(""),a.next=16;break;case 11:a.prev=11,a.t0=a["catch"](2),o.close(),dgiotlog.log("error",a.t0),t.$message.error("".concat(a.t0));case 16:t.$dgiotBus.$emit("reload-router-view");case 17:case"end":return a.stop()}}),a,null,[[2,11]])})))()},createProduct:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$create_object("Product",e);case 2:r=a.sent,r.objectId?t.initQuery("产品创建成功","success"):t.$message({type:"error",message:r.error});case 4:case"end":return a.stop()}}),a)})))()},editProduct:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$update_object("Product",t.custom_row.objectId,e);case 2:r=a.sent,r.updatedAt?t.initQuery("产品修改成功","success"):t.$message({type:"error",message:r.error});case 4:case"end":return a.stop()}}),a)})))()},initQuery:function(e,t){this.$message({type:t||"info",message:e}),this.dialogFormVisible=!1,this.resetProductForm(),this.$refs["form"].resetFields(),this.searchProduct()},resetProductForm:function(){this.form={name:"",category:"",nodeType:3,desc:"",netType:"",devType:"",productSecret:"",roles:[],relationApp:""},this.imageUrl=""},deviceToDetail:function(e){this.$router.push({path:"/roles/detailproduct",query:{id:e.objectId}})},GoTodevices:function(e){this.$router.push({path:"/roles/thing",query:{productid:e.objectId}})},makeSure:function(e,t){var a=this,r={count:"objectId",skip:0,limit:1,where:{product:row.objectId}};Object(m["queryDevice"])(r).then((function(r){r.count>0?a.$message("请先删除该产品下设备"):Object(u["delProduct"])(row.objectId).then((function(r){r&&(a.$message({type:"success",message:"删除成功"}),e._self.$refs["popover-".concat(t)].doClose(),a.searchProduct())}))}))},productSizeChange:function(e){this.length=e,this.searchProduct()},productCurrentChange:function(e){this.start=(e-1)*this.length,this.searchProduct()},blackDict:function(e,t){var a=this;return Object(i["a"])(l.a.mark((function r(){var o,i;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o={data:t,key:e,type:"Product"},r.next=3,Object(p["postDict"])(o);case 3:i=r.sent,i?a.$message({type:"success",message:"备份成功"}):a.$message({type:"error",message:"备份失败"});case 5:case"end":return r.stop()}}),r)})))()},CloneData:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i,n;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={category:e.attributes.category,devType:e.attributes.devType,name:e.attributes.name,thing:e.attributes.thing},a.next=3,Object(g["getHashClass"])("Product",r);case 3:o=a.sent,i=o.objectId,n=o.code,200==n&&t.blackDict(i,r);case 7:case"end":return a.stop()}}),a)})))()},proudctClone:function(e){e.attributes.config.cloneState=!0,e.attributes.config.cloneState=!0;var t=e,a=Object(u["putProduct"])(e.id,t);a&&this.CloneData(e)},proudctEdit:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#?drawProudctid=").concat(e.objectId,"&proudctid=").concat(e.objectId);localStorage.setItem("rowId",e.objectId),window.open(r,"__blank")},proudctView:function(e){var t=window.location.origin+"/spa",a="production";t="development"==a?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var r="".concat(t,"/#/views/").concat(e.objectId);window.open(r,"__blank")},goTopoview:function(){var e=window.location.origin+"/spa",t="production";e="development"==t?this.$globalConfig.localTopoUrl:window.location.origin+"/spa";var a="".concat(e,"/#/view");window.open(a,"__blank")},handleImport:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.uploader.click();case 2:case"end":return t.stop()}}),t)})))()},exportpro:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$baseColorfullLoading(2),t.prev=1,t.next=4,Object(h["ExportParse"])("Product",{});case 4:r=t.sent,a.close(),e.$convertRes2Blob(r),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),a.close(),e.$message.error("".concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}},x=k,C=(a("d13b"),a("6d8e"),a("bdd7")),I=Object(C["a"])(x,r,o,!1,null,"0eef7c4d",null);t["default"]=I.exports},"611d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"proddetail"},[r("dgiot-profile",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{"product-info":e.productInfo}}),r("div",[r("el-tabs",{ref:"_tabs",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:e.$translateTitle("product.productinformation"),name:"first"}},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"10px",background:"#ffffff"}},[r("vab-query-form",[r("vab-query-form-left-panel",{attrs:{disabled:!e.productName.length}},[r("div",{staticClass:"addtopic"},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.exportProduct(e.productName)}}},[e._v(" "+e._s(e.$translateTitle("product.exportpro"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.setTemplate(e.productInfo)}}},[e._v(" "+e._s(e.$translateTitle("product.Set as template"))+" ")])],1)]),r("vab-query-form-right-panel",[r("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),r("div",[r("el-descriptions",{directives:[{name:"loading",rawName:"v-loading",value:""==e.productName,expression:"productName == ''"}],attrs:{border:"",column:3,"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":e.$translateTitle("developer.Waitingtoreturn"),height:e.$baseTableHeight(0)-60,size:"'medium'"}},[r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.productname")}},[e._v(" "+e._s(e.productdetail.name)+" ")]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.ProductSecret")}},[0==e.isshow?r("span",[e._v(" ******************** "),r("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"primary",underline:!1},on:{click:function(t){e.isshow=!0}}},[e._v(" "+e._s(e.$translateTitle("product.display"))+" ")])],1):r("span",[r("span",{directives:[{name:"copyText",rawName:"v-copyText",value:e.ProductSecret,expression:"ProductSecret"}]},[e._v(e._s(e.ProductSecret))]),r("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"primary",underline:!1},on:{click:function(t){e.isshow=!1}}},[e._v(" "+e._s(e.$translateTitle("product.hidden"))+" ")])],1)]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.numberofequipment")}},[r("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary",underline:!1},nativeOn:{click:function(t){return e.goToDevices.apply(null,arguments)}}},[e._v(" "+e._s(e.form.ProductAll)+" ")])],1),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.nodetype")}},[1==e.productdetail.nodeType?r("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.gateway"))+" ")]):r("td",{staticClass:"notbottom"},[e._v(" "+e._s(e.$translateTitle("product.equipment"))+" ")])]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.addingtime"),span:2}},[e._v(" "+e._s(e.productdetail.createdAt)+" ")]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.classification")}},[e._v(" "+e._s(e.productdetail.categoryname)+" ")]),r("el-descriptions-item",[r("template",{slot:"label"},[r("el-tooltip",{staticStyle:{"margin-left":"5px",color:"#cccccc"},attrs:{content:e.$translateTitle("product.text1"),effect:"light",placement:"top"}},[r("i",{staticClass:"el-icon-question"})]),e._v(" "+e._s(e.$translateTitle("product.dynamicregistration"))+" ")],1),0==e.dynamicReg?r("span",{staticStyle:{color:"#cccccc"}},[e._v(" "+e._s(e.$translateTitle("product.close"))+" ")]):r("span",[e._v(e._s(e.$translateTitle("product.open")))]),r("el-switch",{attrs:{"active-color":"#5eb058","active-value":!0,"inactive-color":"#cccccc","inactive-value":!1},on:{change:function(t){return e.handelUpdate(t,e.dynamicReg)}},model:{value:e.dynamicReg,callback:function(t){e.dynamicReg=t},expression:"dynamicReg"}})],2),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.networking")}},["CELLULAR"==e.productdetail.netType?r("td",[e._v(" "+e._s(e.$translateTitle("product.honeycomb"))+"(2G/3G/4G) ")]):"WIFI"==e.productdetail.netType?r("td",[e._v("WiFi")]):"ETHERNET"==e.productdetail.netType?r("td",[e._v(" "+e._s(e.$translateTitle("product.ethernet"))+" ")]):"LORA"==e.productdetail.netType?r("td",[e._v("LoRaWAN")]):r("td",[e._v(" "+e._s(e.productdetail.netType)+" ")])]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("developer.describe")}},[e._v(" "+e._s(e.productdetail.desc||"")+" ")]),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.physicalmodel")}},[r("el-button",{attrs:{disabled:0==e.productInfo.thing.properties.length,type:"text"},on:{click:function(t){e.activeName="third"}}},[e._v(" "+e._s(e.productInfo.thing.properties.length||0)+" ")])],1),r("el-descriptions-item",{attrs:{label:e.$translateTitle("product.parser")}},[r("template",{slot:"label"},[r("el-link",{attrs:{type:"success"},nativeOn:{click:function(t){return e.feateditorParser1(e.productInfo,"parser",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.parser"))+" ")])],1),r("el-link",{attrs:{type:e.productInfo.config.parser.length?"success":"default"},nativeOn:{click:function(t){return e.feateditorParser1(e.productInfo,"parser",!1)}}},[e._v(" "+e._s(e.productInfo.config.parser.length||0)+" ")])],2),r("el-descriptions-item",[r("template",{slot:"label"},[r("el-link",{attrs:{type:"success"},on:{click:function(t){return e.feateditorParser1(e.productInfo,"profile",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.profile"))+" ")])],1),r("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.feateditorParser1(e.productInfo,"profile",!1)}}},[e._v(" "+e._s(e.productInfo.config.profile.length||0)+" ")])],2)],1)],1)],1)]),r("el-tab-pane",{attrs:{label:"Topic"+e.$translateTitle("product.list"),name:"second"}},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"10px",background:"#ffffff"}},[r("vab-query-form",[r("vab-query-form-left-panel",[r("div",{staticClass:"addtopic"},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){e.topicdialogVisible=!0}}},[e._v(" "+e._s(e.$translateTitle("product.customtopicclass"))+" ")])],1)]),r("vab-query-form-right-panel",[r("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),r("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.topicData.slice((e.topicstart-1)*e.topiclength,e.topicstart*e.topiclength),height:e.$baseTableHeight(0)-60},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"left",label:"Topic"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(" "+e._s(a.topic.replace("${ProductId}",e.productId))+" ")])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.operationauthority")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return["pub"==a.type?r("span",[e._v(" "+e._s(e.$translateTitle("product.pub"))+" ")]):e._e(),"sub"==a.type?r("span",[e._v(" "+e._s(e.$translateTitle("product.sub"))+" ")]):e._e()]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe"),prop:"desc"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,o=t.$index;return[a.isdef?e._e():r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.updatetopic(o)}}},[e._v(" "+e._s(e.$translateTitle("developer.edit"))+" ")]),a.isdef?e._e():r("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},nativeOn:{click:function(t){return e.deletetopic(a,o)}},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),r("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.topiclength,"page-sizes":[10,20,30,50],total:e.topicData.length},on:{"current-change":e.topicCurrentChange,"size-change":e.topicSizeChange}})],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.definetopicclass"),visible:e.topicdialogVisible,width:"40%"},on:{"update:visible":function(t){e.topicdialogVisible=t}}},[r("div",{staticClass:"topiccontent"},[r("div",{staticStyle:{"box-sizing":"border-box",padding:"10px","font-size":"16px",background:"#e6f9fc"}},[r("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.$translateTitle("product.text2"))+" ")]),r("div",{staticClass:"topicform"},[r("el-form",{ref:"topicform",attrs:{model:e.topicform,rules:e.topicrule}},[r("el-form-item",{attrs:{label:"Topic类：",prop:"topic"}},[r("el-input",{model:{value:e.topicform.topic,callback:function(t){e.$set(e.topicform,"topic",t)},expression:"topicform.topic"}},[r("template",{slot:"prepend"},[e._v(" "+e._s("thing/"+e.productId+"/${DevAddr}/")+" ")])],2)],1),r("el-form-item",{attrs:{label:e.$translateTitle("product.operationauthority"),prop:"type"}},[r("el-select",{attrs:{placeholder:e.$translateTitle("product.selectdeviceoperationpermission")},model:{value:e.topicform.type,callback:function(t){e.$set(e.topicform,"type",t)},expression:"topicform.type"}},[r("el-option",{attrs:{label:e.$translateTitle("product.sub"),value:"sub"}}),r("el-option",{attrs:{label:e.$translateTitle("product.pub"),value:"pub"}})],1)],1),r("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.topicform.desc,callback:function(t){e.$set(e.topicform,"desc",t)},expression:"topicform.desc"}})],1)],1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.topicdialogVisible=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.subTopic("topicform",e.topicform.isupdated)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1),r("el-tab-pane",{attrs:{label:e.$translateTitle("product.physicalmodel"),name:"third"}},[r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addMachine"),visible:e.machine,width:"30%"},on:{"update:visible":function(t){e.machine=t}}},[r("div",[r("el-form",{ref:"sizeForm",attrs:{"label-position":"left","label-width":"80px",model:e.machineForm,size:"mini"}},[r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.devicetype"),prop:"devicetype"}},[r("el-input",{model:{value:e.machineForm.name,callback:function(t){e.$set(e.machineForm,"name",t)},expression:"machineForm.name"}})],1)],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){e.machine=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),r("el-button",{attrs:{size:"mini"},nativeOn:{click:function(t){return e.savemachine(e.machineForm)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),r("div",[r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{lg:4,md:5,sm:6,xl:3,xs:24}},[r("vab-query-form",{staticClass:"query-form"},[r("vab-query-form-top-panel",[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addMachine.apply(null,arguments)}}},[e._v(" 添加类型 ")])],1)],1),r("el-table",{staticStyle:{width:"60vh",overflow:"auto"},attrs:{border:"",data:e.FromMachine,height:e.$baseTableHeight(0)-60,"row-class-name":e.tableRowClassName},on:{"row-click":e.clickmachine},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:"序号",prop:"sort",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index;return[r("span",[e._v(" "+e._s(a+1)+" ")])]}}])}),r("el-table-column",{attrs:{align:"center",label:"设备类型",prop:"name"}})],1)],1),r("el-col",{attrs:{lg:20,md:19,sm:18,xl:21,xs:24}},[r("vab-query-form",{staticClass:"query-form"},[r("vab-query-form-right-panel",{staticStyle:{width:"100%"}},[r("div",{staticClass:"stripe-panel"},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.checkAddTest.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.collectionformulaofobjectmodel"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.checkschema.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.viewobjectmodel"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.createProperty.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.newcustomattribute"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.addcategory.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.newstandardattribute"))+" ")])],1)])],1),r("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{border:"",data:e.wmxData.slice((e.wmxstart-1)*e.wmxPageSize,e.wmxstart*e.wmxPageSize),"default-expand-all":!1,"default-sort":{prop:"date",order:"descending"},height:e.$baseTableHeight(0)-60,"row-class-name":e.getRowClass,"row-key":"identifier"},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return"struct"==o.dataType.type?[r("el-table",{staticStyle:{"box-sizing":"border-box",width:"60%","text-align":"center"},attrs:{data:o.dataType.specs},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}],null,!0)},[r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.identifier))])]}}],null,!0)}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionaltypes")}},[r("span",[e._v(" "+e._s(e.$translateTitle("product.attribute"))+" ")])]),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionname"),prop:"name"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datadefinition")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.dataType.type))])]}}],null,!0)})],1)]:void 0}}],null,!0)}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.order"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.order)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.devicetype"),prop:"devicetype",width:"80"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Rounds"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.round)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.Strategy"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.strategy)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocol"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.dataForm.protocol)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionaltypes"),width:"90"}},[r("span",[e._v(e._s(e.$translateTitle("product.attribute")))])]),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier"),prop:"identifier",width:"100"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.functionname"),prop:"name"}}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datatype"),width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.dataType.type))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.datadefinition")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[!a.dataType.specs||"double"!=a.dataType.type&&"float"!=a.dataType.type&&"int"!=a.dataType.type?"string"==a.dataType.type?r("span",[e._v(" "+e._s(e.$translateTitle("product.datalength")+":"+a.dataType.size+e.$translateTitle("product.byte"))+" ")]):"date"==a.dataType.type?r("span"):"struct"!=a.dataType.type?r("span",[e._v(" "+e._s(a.dataType.specs)+" ")]):r("span"):r("span",[e._v(" "+e._s(e.$translateTitle("product.rangeofvalues")+a.dataType.specs.min+"~"+a.dataType.specs.max)+" ")])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,o=t.$index;return[r("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(t){return e.deletewmx(a)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.wmxDataFill(a,o)}}},[e._v(" "+e._s(e.$translateTitle("task.Edit"))+" ")])]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.wmxPageSize,"page-sizes":[10,20,30,50],total:e.wmxData.length},on:{"current-change":e.wmxCurrentChange,"size-change":e.wmxSizeChange}})],1)],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addfunction"),visible:e.originwmx,width:"50%"},on:{"update:visible":function(t){e.originwmx=t}}},[r("div",[r("div",{staticStyle:{margin:"20px 0"}},[r("label",{attrs:{for:""}},[e._v(" "+e._s(e.$translateTitle("product.classification"))+" ")]),r("el-cascader",{attrs:{options:e.treeData},on:{change:e.handleChange},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.getPropData(0)}}},[e._v(" "+e._s(e.$translateTitle("developer.search"))+" ")])],1),r("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[r("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.PropData},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.data.SuperId))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.identifier")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.type))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.applicabletype")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.data.CategoryName))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.addProCategory(a)}}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])]}}])})],1)],1),r("div",[r("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.productlength,"page-sizes":[10,20,30,50],small:"",total:e.producttotal},on:{"current-change":e.productCurrentChange,"size-change":e.productSizeChange}})],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini"},nativeOn:{click:function(t){e.originwmx=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){e.originwmx=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)]),r("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.wmxhandleClose,"close-on-click-modal":!1,title:e.wmxSituation+"自定义属性",top:"5vh",visible:e.wmxdialogVisible,width:"60%"},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[r("dgiot-wmx",{ref:"sizeForm",attrs:{"size-form1":e.sizeForm},on:{addDas:e.addDas,addDomain:e.addDomain,removeDas:e.removeDas,removeDomain:e.removeDomain,submitForm:e.submitForm,wmxhandleClose:e.wmxhandleClose}})],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.addparameter"),top:"15vh",visible:e.structdialog,width:"40%"},on:{"update:visible":function(t){e.structdialog=t}}},[r("div",{staticClass:"structheader"},[r("el-form",{ref:"structform",attrs:{model:e.structform,rules:e.structrule,size:"small"}},[r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.functionname"),prop:"name"}},[r("el-input",{model:{value:e.structform.name,callback:function(t){e.$set(e.structform,"name",t)},expression:"structform.name"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("product.identifier"),prop:"identifier"}},[r("el-input",{model:{value:e.structform.identifier,callback:function(t){e.$set(e.structform,"identifier",t)},expression:"structform.identifier"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.datatype"),prop:"type"}},[r("el-select",{model:{value:e.structform.type,callback:function(t){e.$set(e.structform,"type",t)},expression:"structform.type"}},[r("el-option",{attrs:{label:e.$translateTitle("product.init"),value:"int"}}),r("el-option",{attrs:{label:e.$translateTitle("product.float"),value:"float"}}),r("el-option",{attrs:{label:e.$translateTitle("product.double"),value:"double"}}),r("el-option",{attrs:{label:e.$translateTitle("product.bool"),value:"bool"}}),r("el-option",{attrs:{label:e.$translateTitle("product.enum"),value:"enum"}}),r("el-option",{attrs:{label:e.$translateTitle("product.string"),value:"string"}}),r("el-option",{attrs:{label:e.$translateTitle("product.date"),value:"date"}})],1)],1)],1)],1),r("div",[r("el-form-item",{attrs:{label:"数据标识",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"dis"}},[r("el-input",{attrs:{placeholder:"数据标识"},model:{value:e.structform.dis,callback:function(t){e.$set(e.structform,"dis",t)},expression:"structform.dis"}})],1)],1),r("el-col",{attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:11}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"数据长度(字节)"},model:{value:e.structform.dinumber,callback:function(t){e.$set(e.structform,"dinumber",e._n(t))},expression:"structform.dinumber"}})],1)],1)],1)],1),r("div",[r("el-form-item",{attrs:{label:"取值范围",required:""}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"startnumber"}},[r("el-input",{attrs:{placeholder:e.$translateTitle("product.minimumvalue"),type:"number"},on:{input:function(t){return e.changeStructValue("structform")}},model:{value:e.structform.startnumber,callback:function(t){e.$set(e.structform,"startnumber",e._n(t))},expression:"structform.startnumber"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{prop:"endnumber"}},[r("el-input",{attrs:{placeholder:e.$translateTitle("product.maximumvalue"),type:"number"},model:{value:e.structform.endnumber,callback:function(t){e.$set(e.structform,"endnumber",e._n(t))},expression:"structform.endnumber"}})],1)],1)],1),r("el-form-item",{attrs:{label:"步长",prop:"step"}},[r("el-input",{attrs:{"controls-position":"right",min:0,precision:2,step:.01},model:{value:e.structform.step,callback:function(t){e.$set(e.structform,"step",t)},expression:"structform.step"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("product.unit")}},[r("el-select",{attrs:{filterable:"",placeholder:e.$translateTitle("product.unit")},model:{value:e.structform.unit,callback:function(t){e.$set(e.structform,"unit",t)},expression:"structform.unit"}},e._l(e.allunit,(function(e,t){return r("el-option",{key:t,attrs:{label:e.data.Name+"/"+e.data.Symbol,value:e.data.Symbol}})})),1)],1)],1),"bool"==e.structform.type?r("div",[r("el-form-item",{attrs:{label:e.$translateTitle("product.attribute"),required:""}},[r("div",{staticStyle:{height:"40px"}},[r("el-col",{attrs:{span:11}},[r("el-form-item",[r("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attributevalue"),readonly:"",type:"number"},model:{value:e.structform.truevalue,callback:function(t){e.$set(e.structform,"truevalue",t)},expression:"structform.truevalue"}})],1)],1),r("el-col",{attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"true"}},[r("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egopen")},model:{value:e.structform.true,callback:function(t){e.$set(e.structform,"true",t)},expression:"structform.true"}})],1)],1)],1),r("div",{staticStyle:{"margin-top":"20px"}},[r("el-col",{attrs:{span:11}},[r("el-form-item",[r("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.attributevalue"),readonly:"",type:"number"},model:{value:e.structform.falsevalue,callback:function(t){e.$set(e.structform,"falsevalue",t)},expression:"structform.falsevalue"}})],1)],1),r("el-col",{attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"true"}},[r("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$translateTitle("product.egclost")},model:{value:e.structform.false,callback:function(t){e.$set(e.structform,"false",t)},expression:"structform.false"}})],1)],1)],1)])],1):e._e(),"enum"==e.structform.type?r("div",[e._l(e.structform.specs,(function(t,a){return r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.structform.specs.length,expression:"structform.specs.length"}],key:a,attrs:{required:""}},[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.attribute")+a,prop:"specs."+a+".attribute",rules:[{required:!0,message:"输入属性"}]}},[r("el-input",{attrs:{placeholder:e.$translateTitle("product.egnumber0")},model:{value:t.attribute,callback:function(a){e.$set(t,"attribute",a)},expression:"item.attribute"}})],1)],1),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.attribute")+a,prop:"specs."+a+".attributevalue",rules:[{required:!0,message:"输入属性值"}]}},[r("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:t.attributevalue,callback:function(a){e.$set(t,"attributevalue",a)},expression:"item.attributevalue"}})],1)],1),r("el-col",{staticClass:"line",attrs:{span:2}}),r("el-col",{staticClass:"line",attrs:{span:4}},[r("el-link",{staticStyle:{"margin-top":"30px","margin-left":"5px"},attrs:{icon:"el-icon-minus",type:"primary",underline:!1},on:{click:function(a){return a.preventDefault(),e.removeDomain1(t)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])],1)],1)})),r("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},nativeOn:{click:function(t){return e.addDomain1.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.add"))+" ")])],2):e._e(),"string"==e.structform.type?r("div",[r("el-form-item",{attrs:{label:e.$translateTitle("product.datalength"),prop:"string"}},[r("el-input",{attrs:{type:"number"},model:{value:e.structform.string,callback:function(t){e.$set(e.structform,"string",e._n(t))},expression:"structform.string"}},[r("template",{slot:"append"},[e._v(" "+e._s(e.$translateTitle("product.byte"))+" ")])],2)],1)],1):e._e(),"date"==e.structform.type?r("div",[r("el-form-item",{attrs:{label:e.$translateTitle("product.timeformat")}},[r("el-input",{attrs:{readonly:""},model:{value:e.structform.date,callback:function(t){e.$set(e.structform,"date",t)},expression:"structform.date"}})],1)],1):e._e(),r("el-form-item",{attrs:{label:e.$translateTitle("product.readandwritetype"),prop:"isread"}},[r("el-radio-group",{attrs:{size:"medium"},model:{value:e.structform.isread,callback:function(t){e.$set(e.structform,"isread",t)},expression:"structform.isread"}},[r("el-radio",{attrs:{label:"rw"}},[e._v(" "+e._s(e.$translateTitle("product.readandwrite"))+" ")]),r("el-radio",{attrs:{label:"r"}},[e._v(" "+e._s(e.$translateTitle("product.onlyread"))+" ")])],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.structdialog=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.submitStruct("structform")}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)])],1),r("el-tab-pane",{staticStyle:{diaplay:"none"},attrs:{disabled:!0,label:e.$translateTitle("product.matteranalysis"),name:"fourth"}},[r("div",{staticClass:"protolheader"},[r("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.addRules}},[r("el-form-item",{attrs:{label:e.$translateTitle("product.protocolname"),prop:"name"}},[r("el-input",{attrs:{placeholder:e.$translateTitle("product.protocolname")},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("plugins.version")}},[r("el-input",{attrs:{placeholder:e.$translateTitle("plugins.version")},model:{value:e.formInline.version,callback:function(t){e.$set(e.formInline,"version",t)},expression:"formInline.version"}})],1),r("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[r("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:e.formInline.desc,callback:function(t){e.$set(e.formInline,"desc",t)},expression:"formInline.desc"}})],1),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.subAce("formInline",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.subAce1("formInline")}}},[e._v(" "+e._s(e.$translateTitle("product.setaspublic"))+" ")]),r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.chaxun.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.publicagreementlibrary"))+" ")])],1),r("el-form-item",{staticStyle:{display:"block"}},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.protol.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.compile"))+" ")]),r("el-button",{attrs:{size:"small",type:"success"},nativeOn:{click:function(t){return e.updatesubdialog.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.thermalloading"))+" ")])],1)],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.tdthermalloading"),visible:e.protoldialog,width:"50%"},on:{"update:visible":function(t){e.protoldialog=t}}},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.protolchannel,"row-class-name":e.getChannelEnable},on:{"selection-change":e.handleSelectionChange},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.name))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s("channel/"+a.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):r("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.cType))])]}}])})],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updateAllChannel.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.publicagreementlibrary"),visible:e.dialogTableVisible,width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[r("el-table",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.gridData},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocolname")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.data.name))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("plugins.version")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.data.version))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.data.desc))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("equipment.createdAt")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(e.utc2beijing(a.createdAt)))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.editordata(a)}}},[e._v(" "+e._s(e.$translateTitle("product.clone"))+" ")]),r("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(t){return e.deletedata(a.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),r("div",{staticClass:"elpagination",staticStyle:{padding:"20px 0"}},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.decoderlength,"page-sizes":[10,20,30,50],total:e.decodertotal},on:{"current-change":e.devicerCurrentChange,"size-change":e.decoderSizeChange}})],1)],1),r("div",[r("div",{staticStyle:{background:"#ffffff"}},[r("label",{attrs:{id:"plug-name1"}})]),r("pre",{staticClass:"ace_editor ace-monokai ace_dark",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[r("textarea",{staticClass:"ace_text-input"})]),r("div",{staticStyle:{background:"#ffffff"}},[r("label",{attrs:{id:"plug-name2"}})]),r("div",{staticStyle:{padding:"5px",color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd"}},[r("span",[e._v(e._s(e.$translateTitle("product.controloutput")))])]),r("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:"editor2"}},[r("textarea",{staticClass:"ace_text-input"})])])],1),r("el-tab-pane",{attrs:{label:e.$translateTitle("product.physicalaccess"),name:"fiveth"}},[r("vab-query-form",[r("vab-query-form-left-panel",[r("div",{staticClass:"productchannel",staticStyle:{padding:"10px","text-align":"right"}},[r("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.showAllChannel.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("developer.createchannel"))+" ")])],1)]),r("vab-query-form-right-panel",[r("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"click"}})],1)],1),r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelData,height:e.$baseTableHeight(0)-60,"row-class-name":e.getChannelEnable},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.name))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s("channel/"+a.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):3==a.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.missionchannel"))+" ")]):e._e()]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.cType))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(t){return e.deleteRelation(a)}}},[e._v(" "+e._s(e.$translateTitle("developer.remove"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.subProTopic(a)}}},[e._v(" "+e._s(e.$translateTitle("product.subscriptionlog"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.updatesub(a)}}},[e._v(" "+e._s(e.$translateTitle("product.overloadconfiguration"))+" ")])]}}])})],1),r("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.channellength,"page-sizes":[10,20,30,50],total:e.channeltotal},on:{"current-change":e.channelCurrentChange,"size-change":e.channelSizeChange}})],1)],1)],1),r("el-tab-pane",{attrs:{label:e.$translateTitle("product.materialstorage"),name:"seven"}},[r("vab-query-form",[r("vab-query-form-left-panel",[r("div",{staticClass:"productchannel",staticStyle:{padding:"10px","text-align":"right"}},[r("el-popover",{attrs:{placement:"right",title:e.$translateTitle("developer.tipsforcustomdatamodel"),trigger:"hover",width:"600"},on:{show:e.questionModel}},[r("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editorinsert"}},[r("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1),r("el-button",{attrs:{slot:"reference",icon:"el-icon-question",size:"mini",type:"primary"},slot:"reference"},[e._v(" "+e._s(e.$translateTitle("developer.customizedatamodelhelp"))+" ")])],1),r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.resourceShowAllChannel.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("developer.createchannel"))+" ")])],1)]),r("vab-query-form-right-panel",[r("vab-help",{attrs:{src:"https://tech.iotn2n.com/w/docs/details?id=6",title:"产品下的所有设备都会继承该产品的 Topic 类",trigger:"manual"}})],1)],1),r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resourcechannelData,height:e.$baseTableHeight(0)-60,"row-class-name":e.getChannelEnable},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.name))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s("channel/"+a.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):r("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.cType))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(t){return e.deleteRelation(a)}}},[e._v(" "+e._s(e.$translateTitle("developer.remove"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.subProTopic(a)}}},[e._v(" "+e._s(e.$translateTitle("product.subscriptionlog"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.customize(a)}}},[e._v(" "+e._s(e.$translateTitle("product.custommodel"))+" ")])]}}])})],1),r("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.resourcelength,"page-sizes":[10,20,30,50],total:e.resourcetotal},on:{"current-change":e.resourcechannelCurrentChange,"size-change":e.resourcechannelSizeChange}})],1)],1)],1)],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.viewobjectmodel"),visible:e.schemadialogVisible},on:{"update:visible":function(t){e.schemadialogVisible=t}}},[r("div",[r("div",{staticStyle:{background:"#ffffff"}},[r("label",{attrs:{id:"plug-name"}})]),r("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editor1"}},[r("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}})])]),r("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.preserve.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("equipment.update"))+" ")])],1)]),r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("equipment.addchannel"),visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[r("div",{staticClass:"addchannel"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allchannelData,height:"400"},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.name))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s("channel/"+a.objectId))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1==a.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):2==a.type?r("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")]):r("span",[e._v(" "+e._s(e.$translateTitle("developer.missionchannel"))+" ")])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("span",[e._v(e._s(a.cType))])]}}])}),r("el-table-column",{attrs:{label:e.$translateTitle("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){return e.addProductChannel(a.objectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.add"))+" ")])]}}])})],1),r("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[r("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.allChannellength,"page-sizes":[10,20,30,50],total:e.allChanneltotal},on:{"current-change":e.allChannelCurrentChange,"size-change":e.allChannelSizeChange}})],1)],1)]),r("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.handleCloseSubdialog,"close-on-click-modal":!1,title:e.channelname+"日志",visible:e.subdialog,width:"85%"},on:{"update:visible":function(t){e.subdialog=t}}},[r("div",{staticStyle:{"margin-top":"20px"}},[r("pre",{staticClass:"ace_editor",staticStyle:{width:"100%","min-height":"300px"},attrs:{id:"subdialog"}},[e._v("                    "),r("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}}),e._v("      ")])]),r("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[r("el-switch",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"自动刷新"},on:{change:e.stopsub},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}})],1)]),r("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.closeWuDialog,"close-on-click-modal":!1,"show-close":!1,top:"1vh",visible:e.resourcedialogFormVisible,width:"90%"},on:{"update:visible":function(t){e.resourcedialogFormVisible=t}}},[r("el-form",{ref:"resourceform",attrs:{model:e.resourceform}},[r("div",{staticClass:"wumoxing"},[r("el-row",[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-form-item",{attrs:{label:e.$translateTitle("product.physicalmodel")}},[r("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editormodel"}},[r("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)]),r("el-col",{attrs:{span:16}},[r("div",{staticClass:"grid-content bg-purple-light"},[r("el-form-item",{attrs:{label:e.$translateTitle("product.customizedatamodel")}},[r("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editorcreate"}},[r("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)])],1)],1)]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){return e.closeWuDialog.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.quit"))+" ")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addData.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")])],1)],1),r("el-dialog",{attrs:{"append-to-body":!0,title:e.$translateTitle("product.export"),visible:e.exportDialogShow,width:"25%"},on:{"update:visible":function(t){e.exportDialogShow=t}}},[r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"btn-right",attrs:{size:"small"},nativeOn:{click:function(t){e.exportDialogShow=!1}}},[e._v(" "+e._s(e.$translateTitle("tagsView.close"))+" ")])],1)]),r("el-dialog",{attrs:{"append-to-body":!0,"before-close":e.handleCloseCollecttion,"close-on-click-modal":!1,fullscreen:!0,title:e.$translateTitle("product.viewcollectionformula"),visible:e.collectionDialogVisible,width:"100%"},on:{"update:visible":function(t){e.collectionDialogVisible=t}}},[r("el-row",[r("el-col",{attrs:{span:6}},[r("div",{staticClass:"diaCollLeftCls"},[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activeIndex}},[e._l(e.wmxData,(function(t,a){return[r("el-menu-item",{key:a+"",attrs:{index:t.identifier},nativeOn:{click:function(r){return e.menuTabClick(t,a)}}},[t.dataType.specs?r("ol",[e._v(" "+e._s(t.identifier+"        "+t.name+"        取值范围"+t.dataType.specs.min+"~"+t.dataType.specs.max)+" ")]):r("ol",[e._v(" "+e._s(t.identifier+"        "+t.name)+" ")])])]}))],2)],1)]),r("el-col",{attrs:{span:18}},[r("el-tabs",{attrs:{closable:"",type:"card"},on:{"tab-click":e.handleRightTopTabClick,"tab-remove":e.removeTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,(function(t,a){return r("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[r("div",{staticClass:"diaCollRightCls"},[r("el-row",{staticStyle:{margin:"10px"}},[r("el-button",{attrs:{type:"success"}},[e._v(" "+e._s(e.$translateTitle("rule.Test"))+" ")]),r("el-button",{attrs:{type:"info"},nativeOn:{click:function(t){return e.onReductionTap(a)}}},[e._v(" "+e._s(e.$translateTitle("product.reduction"))+" ")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.onSaveTap(a)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")])],1),r("pre",{staticClass:"ace_editor3",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:t.name}},[r("textarea",{staticClass:"ace_text-input"})])],1)])})),1)],1)],1)],1)],1)},o=[],i=a("fe51"),n=(a("137f"),a("bdd7")),s=Object(n["a"])(i["a"],r,o,!1,null,"e2cdf9ea",null);t["default"]=s.exports},"6d8e":function(e,t,a){"use strict";a("a954")},7574:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"custom-table",staticClass:"custom-table-container",class:{"vab-fullscreen":e.isFullscreen}},[r("input",{ref:"uploader",staticStyle:{display:"none"},attrs:{accept:"zip",type:"file"},on:{change:function(t){return e.doUpload(t)}}}),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"tableSort",attrs:{border:e.border,data:e.list,height:e.height,size:e.lineHeight,stripe:e.stripe},scopedSlots:e._u([{key:"empty",fn:function(){return[r("el-image",{staticClass:"vab-data-empty",attrs:{src:a("c2ad")}})]},proxy:!0}])},[r("el-table-column",{attrs:{align:"center",label:"className",prop:"className","show-overflow-tooltip":"",sortable:""}}),r("el-table-column",{attrs:{align:"center",label:"fields","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-popover",{attrs:{placement:"top",trigger:"hover"}},[a.fields?r("vab-json-editor",{attrs:{lang:"zh",mode:"code"},model:{value:a.fields,callback:function(t){e.$set(a,"fields",t)},expression:"row.fields"}}):e._e(),r("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{size:"medium"}},[e._v("fields")])],1)],1)]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleExport("export",a)}}},[e._v(" "+e._s(e.$translateTitle("product.export"))+" ")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleExport("import",a)}}},[e._v(" "+e._s(e.$translateTitle("product.import"))+" ")])]}}])})],1)],1)},o=[],i=a("fb07"),n=a("d0d7"),s=a.n(n),l=a("ed07"),c=a("0af3"),d={name:"Parse",components:{},data:function(){return{isFullscreen:!1,border:!0,height:this.$baseTableHeight(0)+100,stripe:!1,lineHeight:"medium",list:[],listLoading:!0,parseFile:"",parseClass:""}},computed:{},mounted:function(){this.fetchData()},created:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{handleExport:function(e,t){var a=this;return Object(i["a"])(s.a.mark((function r(){var o,i,n;return s.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=t.className,a.parseClass=o,"export"!=e){r.next=19;break}return i=a.$baseColorfullLoading(2),r.prev=4,r.next=7,Object(c["ExportParse"])(a.parseClass,{});case 7:n=r.sent,i.close(),a.$convertRes2Blob(n),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](4),i.close(),a.$message.error("".concat(r.t0));case 16:i.close(),r.next=20;break;case 19:a.$refs.uploader.click();case 20:dgiotlog.log(e,t);case 21:case"end":return r.stop()}}),r,null,[[4,12]])})))()},doUpload:function(e){var t=this;return Object(i["a"])(s.a.mark((function a(){var r,o;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.parseFile=e.target.files[0],r=t.$baseColorfullLoading(3),a.prev=2,a.next=5,Object(c["ImportParse"])(t.parseClass,t.parseFile);case 5:o=a.sent,r.close(),dgiotlog.log("eresresrror",o),t.$message.success(""),a.next=16;break;case 11:a.prev=11,a.t0=a["catch"](2),r.close(),dgiotlog.log("error",a.t0),t.$message.error("".concat(a.t0));case 16:case"end":return a.stop()}}),a,null,[[2,11]])})))()},fetchData:function(){var e=this;return Object(i["a"])(s.a.mark((function t(){var a,r,o;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(l["getTable"])();case 3:a=t.sent,r=a.results,o=void 0===r?[]:r,e.list=o,e.listLoading=!1;case 8:case"end":return t.stop()}}),t)})))()}}},u=d,p=a("bdd7"),m=Object(p["a"])(u,r,o,!1,null,null,null);t["default"]=m.exports},"7a05":function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},8199:function(e,t,a){"use strict";a.r(t);var r,o,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"things-parse"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:4}},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.AllDict,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"ID",prop:"objectId"}}),a("el-table-column",{attrs:{label:e.$translateTitle("task.productname"),prop:"name"}})],1)],1),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"protolheader"},[a("el-form",{ref:"thingsParseModel",attrs:{inline:!0,model:e.thingsParseModel,rules:e.thingsParseRules}},[a("el-form-item",{attrs:{label:e.$translateTitle("product.protocolname"),prop:"name"}},[a("el-input",{attrs:{placeholder:e.$translateTitle("product.protocolname")},model:{value:e.thingsParseModel.name,callback:function(t){e.$set(e.thingsParseModel,"name",t)},expression:"thingsParseModel.name"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("plugins.version")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("plugins.version")},model:{value:e.thingsParseModel.version,callback:function(t){e.$set(e.thingsParseModel,"version",t)},expression:"thingsParseModel.version"}})],1),a("el-form-item",{attrs:{label:e.$translateTitle("developer.describe")}},[a("el-input",{attrs:{placeholder:e.$translateTitle("developer.describe")},model:{value:e.thingsParseModel.desc,callback:function(t){e.$set(e.thingsParseModel,"desc",t)},expression:"thingsParseModel.desc"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.subAce("thingsParseModel",!0)}}},[e._v(" "+e._s(e.$translateTitle("product.preservation"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.subAce1("thingsParseModel")}}},[e._v(" "+e._s(e.$translateTitle("product.setaspublic"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.chaxun}},[e._v(" "+e._s(e.$translateTitle("product.publicagreementlibrary"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.protol}},[e._v(" "+e._s(e.$translateTitle("product.compile"))+" ")]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.updatesubdialog}},[e._v(" "+e._s(e.$translateTitle("product.thermalloading"))+" ")])],1)],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.tdthermalloading"),visible:e.protoldialog,width:"50%"},on:{"update:visible":function(t){e.protoldialog=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.protolchannel,"row-class-name":e.getChannelEnable},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.name))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s("channel/"+r.objectId))])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[1==r.type?a("span",[e._v(" "+e._s(e.$translateTitle("developer.collectionchannel"))+" ")]):a("span",[e._v(" "+e._s(e.$translateTitle("developer.resourcechannel"))+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$translateTitle("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.cType))])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updateAllChannel.apply(null,arguments)}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.$translateTitle("product.publicagreementlibrary"),visible:e.dialogTableVisible,width:"50%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"},attrs:{data:e.gridData}},[a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("product.protocolname")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.data.name))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("plugins.version")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.data.version))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.describe")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(r.data.desc))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("application.createtime")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.utc2beijing(r.createdAt)))])]}}])}),a("el-table-column",{attrs:{align:"center",label:e.$translateTitle("developer.operation"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editordata(r)}}},[e._v(" "+e._s(e.$translateTitle("product.clone"))+" ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deletedata(r.ObjectId)}}},[e._v(" "+e._s(e.$translateTitle("developer.delete"))+" ")])]}}])})],1),a("div",{staticClass:"elpagination",staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":e.decoderlength,"page-sizes":[10,20,30,50],total:e.decodertotal},on:{"current-change":e.devicerCurrentChange,"size-change":e.decoderSizeChange}})],1)],1),e.AllDict?a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name1"}})]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[a("textarea",{staticClass:"ace_text-input"})]),a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),a("div",{staticStyle:{padding:"5px","margin-right":"80px",color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd"}},[a("span",[e._v(e._s(e.$translateTitle("product.controloutput")))])]),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-top":"0","margin-bottom":"0"},attrs:{id:"editor2"}},[a("textarea",{staticClass:"ace_text-input"})])]):e._e()],1)],1)],1)},n=[],s=a("fb07"),l=a("d0d7"),c=a.n(l),d=(a("1d17"),a("37c6"),a("c4bc"),a("16b8"),a("a0e0"),a("3dec"),a("f1e1"),a("0c40"),a("79da"),a("98da"),a("1285")),u=a("89e8"),p=a("e0e9"),m=a("7212"),f=a("bb22"),g="",h="",b={name:"ThingsParse",props:{},data:function(){var e=function(e,t,a){var r=/[0-9a-zA-Z]/;r.test(t)?a():a(new Error("协议名称由数字和字母组合"))};return{currentRow:null,AllDict:[],productName:"",form:{Productname:"",ProductKey:"",ProductAll:0},decoderstart:0,decodertotal:0,decoderlength:10,protolchannel:[],productdetail:{},thingsParseModel:{name:"",version:"",desc:"",resource:!1},thingsParseRules:{name:[{required:!0,message:"请输入协议名称",trigger:"blur"},{validator:e,trigger:"blur"}]},dialogTableVisible:!1,gridData:[],protoldialog:!1}},computed:{tableFilterData:function(){return null}},mounted:function(){o=ace.edit("editor2"),o.session.setMode("ace/mode/text"),o.setTheme("ace/theme/monokai"),o.setReadOnly(!0),o.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.Industry(),this.getAllunit(),this.getAllDict(),this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},methods:{handleCurrentChange:function(e){this.currentRow=e,this.$refs.singleTable.setCurrentRow(e),this.getProDetail(e.objectId)},getAllDict:function(){var e=this;return Object(s["a"])(c.a.mark((function t(){var a,r,o;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={where:{category:{$nin:["Evidence"]}},order:"updatedAt"},t.next=3,Object(m["queryProduct"])(a);case 3:r=t.sent,o=r.results,o&&(e.AllDict=o,e.handleCurrentChange(o[0]));case 6:case"end":return t.stop()}}),t)})))()},Industry:function(){var e=this;return Object(s["a"])(c.a.mark((function t(){var a,r;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.option=[],t.next=3,e.$getIndustry("category",100);case 3:a=t.sent,r=a.results,r.map((function(t){var a={};a.value=t.type,a.label=t.data.CategoryName,a.id=t.data.Id,a.parentid=t.data.SuperId,e.option.push(a)}));case 6:case"end":return t.stop()}}),t)})))()},getProDetail:function(e){var t=this;this.productId=e,r=ace.edit("editor"),r.session.setMode("ace/mode/erlang"),r.setTheme("ace/theme/monokai"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.$get_object("Product",e).then((function(e){if(e){for(var a in dgiotlog.log("response",e.decoder),t.productName=e.name,e)t.productdetail[a]=e[a];t.option.map((function(e){t.productdetail.category==e.value&&(t.productdetail.category=e.label)})),t.productdetail.createdAt=t.utc2beijing(e.createdAt),t.productdetail.id=e.id,t.dynamicReg=e.dynamicReg,t.productdetail.isshow=0,t.form.Productname=e.name,t.ProductSecret=e.productSecret,t.form.Productkey=t.productId,t.productimg=e.icon,e.decoder?(h=e.decoder.code,t.thingsParseModel.name=e.decoder.name,t.thingsParseModel.version=e.decoder.version,t.thingsParseModel.desc=e.decoder.desc):(t.$baseMessage("暂无decoder,将显示默认值","warning",!1),h="JSUlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQolJSUgQGNvcHlyaWdodCAoQykgMjAxOCwgPHNodXdhPgolJSUgQGRvYwolJSUg5Y2P6K6u6Kej5p6QRGVtbwolJSUgQGVuZAolJSUgQ3JlYXRlZCA6IDA4LiDljYHkuIDmnIggMjAxOCAxNDo0OQolJSUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi1tb2R1bGUoc2h1d2FfZGVtb19kZWNvZGVyKS4KLWF1dGhvcigic2h1d2EiKS4KLWRlZmluZShNU0dfVFlQRSwgPDwiREVNTyI+PikuCi1wcm90b2NvbChbPDwiREVNTyI+Pl0pLgoKLWV4cG9ydChbcGFyc2VfZnJhbWUvMiwgdG9fZnJhbWUvMV0pLgoKCnBhcnNlX2ZyYW1lKEJ1ZmYsIE9wdHMpIC0+CiAgICBwYXJzZV9mcmFtZShCdWZmLCBbXSwgT3B0cykuCgoKcGFyc2VfZnJhbWUoPDw+PiwgQWNjLCBfT3B0cykgLT4KICAgIHs8PD4+LCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBSZXN0L2JpbmFyeT4+ID0gQmluLCBBY2MsIF9PcHRzKSB3aGVuIGJ5dGVfc2l6ZShSZXN0KSA9PCA2IC0+CiAgICB7QmluLCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBMZW46MTYvbGl0dGxlLWludGVnZXIsIExlbjoxNi9saXR0bGUtaW50ZWdlciwgMTYjNjgsIFJlc3QvYmluYXJ5Pj4gPSBCaW4sIEFjYywgT3B0cykgLT4KICAgIGNhc2UgYnl0ZV9zaXplKFJlc3QpIC0gMiA+PSBMZW4gb2YKICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgIGNhc2UgUmVzdCBvZgogICAgICAgICAgICAgICAgPDxVc2VyWm9uZTpMZW4vYnl0ZXMsIENyYzo4LCAxNiMxNiwgUmVzdDEvYmluYXJ5Pj4gLT4KICAgICAgICAgICAgICAgICAgICBBY2MxID0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBzaHV3YV91dGlsczpnZXRfcGFyaXR5KFVzZXJab25lKSA9Oj0gQ3JjIG9mCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnJhbWUgPSAjewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PCJtc2d0eXBlIj4+ID0+ID9NU0dfVFlQRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPDwiZGF0YSI+PiA9PiBVc2VyWm9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjICsrIFtGcmFtZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSAtPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjYwogICAgICAgICAgICAgICAgICAgICAgICBlbmQsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VfZnJhbWUoUmVzdDEsIEFjYzEsIE9wdHMpOwogICAgICAgICAgICAgICAgXyAtPgogICAgICAgICAgICAgICAgICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykKICAgICAgICAgICAgZW5kOwogICAgICAgIGZhbHNlIC0+CiAgICAgICAgICAgIHtCaW4sIEFjY30KICAgIGVuZDsKcGFyc2VfZnJhbWUoPDxfOjgsIFJlc3QvYmluYXJ5Pj4sIEFjYywgT3B0cykgLT4KICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykuCgoKJSUg57uE6KOF5oiQ5bCB5YyFLCDlj4LmlbDkuLpNYXDlvaLlvI8KdG9fZnJhbWUoI3s8PCJtc2d0eXBlIj4+IDo9ID9NU0dfVFlQRX0gPSBGcmFtZSkgLT4KICAgIFBheWxvYWQgPSB0ZXJtX3RvX2JpbmFyeShGcmFtZSksCiAgICA8PDE2IzAzLCBQYXlsb2FkL2JpbmFyeSwgMTYjMjM+Pi4="),t.productdetail.thing||(t.productdetail.thing={properties:[]}),t.wmxData=t.productdetail.thing.properties.filter((function(e){return e.name&&e.dataType})),r.setValue(Base64.decode(h)),r.gotoLine(r.session.getLength()),t.queryDeviceCount(t.productId)}}))},queryDeviceCount:function(e){var t=this;return Object(s["a"])(c.a.mark((function a(){return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(d["getDeviceCountByProduct"])(e);case 2:t.form.ProductAll=a.sent;case 3:case"end":return a.stop()}}),a)})))()},editordata:function(e){this.thingsParseModel.name=e.data.name,this.thingsParseModel.version=e.data.version,this.thingsParseModel.desc=e.data.desc,this.thingsParseModel.resource=e.data.enable,r.setValue(Base64.decode(e.data.code)),this.dialogTableVisible=!1},getAllunit:function(){var e=this;return Object(s["a"])(c.a.mark((function t(){var a,r;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.allunit=[],t.next=3,Object(p["getAllunit"])("unit",100);case 3:a=t.sent,r=a.results,e.allunit=r.concat([]),e.allunit.unshift({data:{Name:"无",Symbol:""}});case 7:case"end":return t.stop()}}),t)})))()},subAce:function(e,t){var a=this;this.$refs[e].validate((function(i){if(i){var n={name:e.name,version:e.version,code:Base64.encode(r.getValue()),desc:e.desc},s={decoder:n};a.$update_object("Product",a.productId,s).then((function(e){0==a.issub&&(a.$message({type:"success",message:"保存成功"}),1==t&&(g+="保存成功",o.setValue(g))),a.issub=!0}))}else a.$message({type:"warning",message:"输入格式有误"})}))},subAce1:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a={where:{"data.name":t.thingsParseModel.name,"data.version":t.thingsParseModel.version}};t.$query_object("Dict",a).then((function(e){e.results&&e.results.length>=1?t.$message("此协议版本已存在"):t.$get_object("Product",t.productId).then((function(e){if(e){var a={name:t.thingsParseModel.name,version:t.thingsParseModel.version,code:Base64.encode(r.getValue()),desc:t.thingsParseModel.desc},o={type:"decoder",data:a,ACL:e.ACL};t.$create_object("Dict",o).then((function(e){e.error?t.$message({type:"error",message:e.error}):t.$message({type:"success",message:"保存到公共协议库成功"})})).catch((function(e){dgiotlog.log(e)}))}}))}))}else t.$message({type:"warning",message:"输入格式有误"})}))},decoderSizeChange:function(e){this.decoder.length=e,this.chaxun()},devicerCurrentChange:function(e){this.decoderstart=(e-1)*this.decoderlength,this.chaxun()},updateAllChannel:function(){var e=this;if(0==this.multipleSelection.length)this.protoldialog=!1;else{var t=[];this.multipleSelection.map((function(e){t.push(new Promise((function(t,a){return Object(f["subupadte"])(e.id,"update").then((function(e){e&&t(e)})).catch((function(e){a(e)}))})))})),Promise.all(t).then((function(t){e.$message({message:"热加载成功",type:"success"}),t.length==e.multipleSelection.length&&(e.protoldialog=!1)})).catch((function(t){e.$message({message:t,type:"error"})}))}},handleSelectionChange:function(e){this.multipleSelection=e},utc2beijing:function(e){var t=new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return t},getChannelEnable:function(e,t){return 1==e.isEnable?"green_active":"red_active"},deletedata:function(e){var t=this;this.$del_object("Dict",e).then((function(e){e&&(t.$message("成功删除"),t.chaxun())}))},updatesubdialog:function(){var e=this;this.protoldialog=!0;var t="1",a={__type:"Pointer",className:"Product",objectId:this.productId};Object(u["getChannelCountByProduct"])(10,0,a,t).then((function(t){t.count>0?(e.protolchannel=t.results,e.$refs.multipleTable.toggleAllSelection()):(e.protolchannel={},e.$refs.multipleTable.toggleAllSelection())})).catch((function(t){dgiotlog.log(t),e.$baseMessage("请求出错",t.error,3e3)}))},chaxun:function(){var e=this,t={skip:this.decoderstart,limit:this.decoderlength,order:"-createdAt",where:{type:"decoder"}};this.$query_object("Dict",t).then((function(t){t&&(e.decodertotal=t.count,e.dialogTableVisible=!0,e.gridData=t.results)}))},protol:function(){var e=this,t="";Object(f["Compile"])(Base64.encode(r.getValue())).then((function(a){a&&(e.$message({type:"success",message:"编译成功"}),t="编译成功"+a.mod+"\r\n",e.warningeditror=a.warnings,e.warningeditror.map((function(e){t+=e+"\r\n"})),g+=t,o.setValue(g))})).catch((function(a){e.warningeditror=a.error,e.warningeditror.map((function(e){t+=e+"\r\n"})),g+=t,o.setValue(g)}))}}},v=b,y=(a("b973"),a("bdd7")),_=Object(y["a"])(v,i,n,!1,null,null,null);t["default"]=_.exports},"8b52":function(e,t,a){"use strict";a("1c21")},"8e71":function(e,t,a){"use strict";a("9348")},9348:function(e,t,a){},9715:function(e,t,a){"use strict";a("c41a")},a954:function(e,t,a){},ad9f:function(e,t,a){},b2d2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"platform",staticClass:"platform"},[a("div",{staticClass:"home_dialog"},[a("el-dialog",{attrs:{"append-to-body":!0,title:e.deviceInfo.name,visible:e.deviceFlag,width:"100vh"},on:{"update:visible":function(t){e.deviceFlag=t}}},[a("info",{attrs:{devicedetail:e.deviceInfo}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deviceFlag=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.cancel"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.deviceFlag=!1}}},[e._v(" "+e._s(e.$translateTitle("developer.determine"))+" ")])],1)],1)],1),a("div",{staticClass:"map_header",style:{height:e.queryForm.workGroupTreeShow?"160px":"auto"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"0px"!=e.cardHeight,expression:"cardHeight != '0px'"}],staticClass:"map_card"},[a("el-row",[a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,md:6,sm:12,xl:6,xs:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:0==e.loadingConfig["product_count"],expression:"loadingConfig['product_count'] == false"}],staticClass:"box-card",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-spinner":"el-icon-loading","element-loading-text":e.$translateTitle("developer.Waitingtoreturn")}},[a("el-col",{attrs:{span:12}},[a("dgiot-icon",{attrs:{icon:"projector-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("router-link",{attrs:{to:"/dashboard/productlist"}},[a("p",[e._v(e._s(e.$translateTitle("home.pro_count")))]),a("p",[e._v(e._s(e._product_count))])])],1)],1)],1),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,md:6,sm:12,xl:6,xs:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:0==e.loadingConfig["app_count"],expression:"loadingConfig['app_count'] == false"}],staticClass:"box-card",attrs:{"element-loading-text":e.$translateTitle("developer.Waitingtoreturn")}},[a("el-col",{attrs:{span:12}},[a("dgiot-icon",{attrs:{icon:"apps-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("router-link",{attrs:{to:"/roles/applicationManagement"}},[a("p",[e._v(e._s(e.$translateTitle("home.app_count")))]),a("p",[e._v(e._s(e._app_count))])])],1)],1)],1),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,md:6,sm:12,xl:6,xs:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:0==e.loadingConfig["device_count"],expression:"loadingConfig['device_count'] == false"}],staticClass:"box-card",attrs:{"element-loading-text":e.$translateTitle("developer.Waitingtoreturn")}},[a("el-col",{attrs:{span:12}},[a("dgiot-icon",{attrs:{icon:"device-recover-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("router-link",{attrs:{to:"/dashboard/devicelist"}},[a("p",[e._v(e._s(e.$translateTitle("home.dev_count")))]),a("p",[e._v(e._s(e._dev_count))])])],1)],1)],1),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,md:6,sm:12,xl:6,xs:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:0==e.loadingConfig["warn_count"],expression:"loadingConfig['warn_count'] == false"}],staticClass:"box-card",attrs:{"element-loading-text":e.$translateTitle("developer.Waitingtoreturn")}},[a("el-col",{staticClass:"card-left",attrs:{span:12}},[a("dgiot-icon",{attrs:{icon:"projector-2-fill"}})],1),a("el-col",{staticClass:"card-right",attrs:{span:12}},[a("router-link",{attrs:{to:"/CloudOt/alarm"}},[a("p",[e._v(" "+e._s(e.$translateTitle("equipment.Total number of alarms"))+" ")]),a("p",[e._v(e._s(e.warnCount))])])],1)],1)],1)],1)],1),a("vab-query-form",[a("vab-query-form-top-panel",[a("el-form",{attrs:{inline:!0,"label-width":"100px",model:e.queryForm},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:e.$translateTitle("equipment.products")}},[a("el-select",{staticClass:"selectdetail",attrs:{size:"small"},on:{change:e.selectProdChange},model:{value:e.queryForm.account,callback:function(t){e.$set(e.queryForm,"account",t)},expression:"queryForm.account"}},e._l(e._Product,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.objectId}})})),1)],1),a("el-form-item",{attrs:{label:e.$translateTitle("home.updatedAt")}},[a("el-date-picker",{attrs:{"end-placeholder":"结束日期",format:"yyyy-MM-dd","start-placeholder":"开始日期",type:"daterange","value-format":"yyyy-MM-dd"},model:{value:e.queryForm.searchDate,callback:function(t){e.$set(e.queryForm,"searchDate",t)},expression:"queryForm.searchDate"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryData}},[e._v(" "+e._s(e.$translateTitle("concentrator.search"))+" ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){20==e.leftRow?e.leftRow=24:e.leftRow=20}}},[e._v(" "+e._s(20==e.leftRow?e.$translateTitle("konva.hide"):e.$translateTitle("konva.show"))+" "+e._s(e.$translateTitle("konva.right"))+" ")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.toggleCard(e.cardHeight)}}},[e._v(" "+e._s("0px"!=e.cardHeight?e.$translateTitle("konva.hide"):e.$translateTitle("konva.show"))+" "+e._s(e.$translateTitle("konva.card"))+" ")])],1)],1)],1)],1)],1),a("el-card",{attrs:{shadow:"hover"}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){return e.queryData()}},model:{value:e.mapType,callback:function(t){e.mapType=t},expression:"mapType"}},[a("el-radio-button",{attrs:{label:"tencent"}},[e._v("腾讯地图")]),a("el-radio-button",{attrs:{label:"baidu"}},[e._v("百度地图")])],1),a("vab-qq-map",{directives:[{name:"show",rawName:"v-show",value:"tencent"==e.mapType,expression:"mapType == 'tencent'"}],ref:"qqmap",staticStyle:{height:"80vh"},attrs:{list:e.list}}),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"baidu"==e.mapType,expression:"mapType == 'baidu'"}],attrs:{row:24}},[a("el-col",{attrs:{span:e.leftRow,xs:24}},[a("el-row",{attrs:{span:24}},[a("div",{staticClass:"chart_map",staticStyle:{position:"relative"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"card_left"},[a("el-row",{staticClass:"card_left-row",attrs:{gutter:24}},[a("el-col",{staticClass:"card_left-row-col",attrs:{span:6}},[a("Card",{staticClass:"card_left-row-col-card",staticStyle:{"background-color":"#ffad33","border-color":"#ffad33"}},[a("div",{staticStyle:{"text-align":"center"}},[a("Tag",{staticStyle:{background:"rgb(255, 173, 51)"},attrs:{checkable:"",color:"warning"}},[e._v(" "+e._s(e.offlineData.length||0)+" ")]),a("p",[e._v(e._s(e.$translateTitle("zetadevices.offline")))])],1)])],1),a("el-col",{staticClass:"card_left-row-col",attrs:{offset:2,span:6}},[a("Card",{staticClass:"card_left-row-col-card",staticStyle:{"background-color":"#19be6b","border-color":"#19be6b"}},[a("div",{staticStyle:{"text-align":"center"}},[a("Tag",{staticStyle:{background:"rgb(25, 190, 107)"},attrs:{checkable:"",color:"success"}},[e._v(" "+e._s(e.dev_online_count||0)+" ")]),a("p",[e._v(e._s(e.$translateTitle("zetadevices.online")))])],1)])],1),a("el-col",{staticClass:"card_left-row-col",attrs:{offset:2,span:6}},[a("Card",{staticClass:"card_left-row-col-card",staticStyle:{"background-color":"#f16643","border-color":"#f16643"}},[a("div",{staticStyle:{"text-align":"center"}},[a("Tag",{staticStyle:{background:"rgb(241, 102, 67)"},attrs:{checkable:"",color:"error"}},[e._v(" "+e._s(e.warnCount)+" ")])],1),a("p",[e._v(" "+e._s(e.$translateTitle("leftbar.alarms"))+" ")])])],1)],1)],1),a("div",{staticClass:"card",staticStyle:{position:"absolute",right:"100px","z-index":"1000"}},[a("p",{staticStyle:{margin:"0","font-size":"18px",color:"#f16643","text-align":"center"}},[e._v(" "+e._s(e.$translateTitle("zetadevices.offline"))+" ")]),a("Card",{staticStyle:{width:"80px",height:"80px",color:"#fff","background-color":"#ffad33","border-color":"#ffad33","border-radius":"50%",opacity:"0.89"}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",[e._v(e._s(e.offlineData.length||0))])])]),a("p",{staticStyle:{margin:"0","font-size":"18px",color:"rgb(25, 190, 107)","text-align":"center"}},[e._v(" "+e._s(e.$translateTitle("zetadevices.online"))+" ")]),a("Card",{staticStyle:{width:"80px",height:"80px",margin:"5px 0",color:"#fff","background-color":"#19be6b","border-color":"#19be6b","border-radius":"50%",opacity:"0.89"}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",[e._v(e._s(e.dev_online_count||0))])])]),a("p",{staticStyle:{margin:"0","font-size":"18px",color:"rgb(241, 102, 67)","text-align":"center"}},[e._v(" "+e._s(e.$translateTitle("leftbar.alarms"))+" ")]),a("Card",{staticStyle:{width:"80px",height:"80px",color:"#fff","background-color":"#f16643","border-color":"#f16643","border-radius":"50%",opacity:"0.89"}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",[e._v(e._s(e.warnCount))])])])],1),a("baidu-map",{staticClass:"baidu_map",attrs:{id:"baidu_map",ak:e.ak,center:e.center,"scroll-wheel-zoom":!0,zoom:e.sizeZoom}},[a("bm-control",[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.sizeZoom=19}}},[e._v(" "+e._s(e.$translateTitle("home.max"))+" ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.sizeZoom=10}}},[e._v(" "+e._s(e.$translateTitle("home.restore"))+" ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.sizeZoom=3}}},[e._v(" "+e._s(e.$translateTitle("home.min"))+" ")]),a("el-button",{staticClass:"ri-fullscreen-fill",attrs:{size:"mini"},on:{click:function(t){return e.toggleFull()}}}),a("bm-panorama",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT",offset:{width:500,height:0}}}),a("bm-overview-map",{attrs:{"is-open":!0}}),a("bm-scale",{attrs:{offset:{width:260,height:0}}}),a("bm-city-list",{attrs:{offset:{width:330,height:0}}}),a("bm-map-type",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT","map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],offset:{width:400,height:0}}})],1),a("bml-marker-clusterer",{attrs:{"average-center":!0}},e._l(e._tableData,(function(t,r){return a("div",{key:r},[a("bm-marker",{ref:"bm_info"+r,refInFor:!0,attrs:{icon:{url:1==t.icon?e.icoPath.icoPath1:e.icoPath.icoPath2,size:{width:100,height:100}},position:{lng:t.location.longitude,lat:t.location.latitude}},on:{click:function(a){return e.showDeatils(t,r)}}},[a("bm-info-window",{key:r,staticStyle:{display:"none"},attrs:{position:{lng:t.location.longitude,lat:t.location.latitude},show:t.show},on:{close:function(a){return e.closeInfo(t,r)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.deviceInfo,expression:"deviceInfo"}],staticClass:"deviceInfo",staticStyle:{width:"400px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-image",{staticStyle:{width:"120px",height:"120px"},attrs:{"preview-src-list":[""+e.productIco],src:e.productIco}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline empty",staticStyle:{width:"100px",height:"100px"}})])])],1),a("el-col",{attrs:{span:14}},[a("p",{attrs:{title:e.deviceInfo.name}},[a("el-link",{attrs:{type:"primary"}},[e._v(" "+e._s(e.$translateTitle("equipment.devicename"))+" ")]),e._v(" :"+e._s(e.deviceInfo.name)+" ")],1),a("p",[a("el-link",{attrs:{type:"primary"}},[e._v(" "+e._s(e.$translateTitle("equipment.address"))+" ")]),e._v(" : "+e._s(e.deviceInfo.detail&&e.deviceInfo.detail.address?e.deviceInfo.detail.address:"")+" ")],1),a("p",[a("el-link",{attrs:{type:"primary"}},[e._v(" "+e._s(e.$translateTitle("zetadevices.devicestatus"))+" ")]),e._v(" ： "),a("el-link",{attrs:{type:"ONLINE"===e.deviceInfo.status?"success":"warning",underline:!1}},[e._v(" "+e._s("ONLINE"===e.deviceInfo.status?e.$translateTitle("zetadevices.online"):e.$translateTitle("zetadevices.offline"))+" ")])],1),a("el-divider"),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.goLink("real-time",t)}}},[e._v(" "+e._s(e.$translateTitle("equipment.real-Time"))+" ")])],1),a("el-col",{attrs:{span:6}},[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.goLink("konva",t)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.konva"))+" ")])],1),a("el-col",{attrs:{span:6}},[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.goLink("video",t)}}},[e._v(" "+e._s(e.$translateTitle("concentrator.video"))+" ")])],1)],1)],1)],1)],1)])],1)],1)})),0),a("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),a("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT","auto-location":!0,"show-address-bar":!0}})],1)],1)])],1),a("el-col",{attrs:{span:24-e.leftRow,xs:24}},[a("div",{staticClass:"home_card"},[a("el-tabs",{on:{"tab-click":e.resizeTheChart},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$translateTitle("home.info"),name:"first"}},[a("div",{staticClass:"box-card"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-button",[e._v(" "+e._s(e.$translateTitle("home.info"))+" ")])],1),a("div",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[e.Product?a("el-table",{staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e.Product,"header-cell-style":{"text-align":"center"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:e.$translateTitle("menu.icon"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("el-image",{staticStyle:{width:"26px",height:"26px"},attrs:{"preview-src-list":[""+t.icon],src:t.icon}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])])]}}],null,!1,3281234111)}),a("el-table-column",{attrs:{label:e.$translateTitle("task.productname"),prop:"name","show-overflow-tooltip":!0,width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",{on:{click:function(t){return e.goDevice(r.name)}}},[e._v(" "+e._s(r.name)+" ")])]}}],null,!1,699248853)}),a("el-table-column",{attrs:{label:e.$translateTitle("home.dev_count")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",{on:{click:function(t){return e.goDevice(r.name)}}},[e._v(" "+e._s(r.deviceChild.length)+" ")])]}}],null,!1,100581394)})],1):e._e()],1)])],1)],1)])],1),a("el-col",{attrs:{md:24,sm:24,xl:24,xs:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(" "+e._s(e.$translateTitle("equipment.Equipment Overview"))+" ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-refresh",type:"text"},on:{click:function(t){return e.resizeTheChart()}}})],1),a("div",{staticClass:"text item"},[a("vab-chart",{ref:"charts",attrs:{data:e._ChartStatus,"data-empty":!e.ChartStatus.rows,extend:e.chartExtend,height:"160px",loading:e.loading,settings:e.chartSettings,type:"ring"}})],1)])],1)],1),a("el-tab-pane",{attrs:{label:e.$translateTitle("home.dev_unline"),name:"second"}},[a("div",{staticClass:"box-card"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-badge",{staticClass:"item",attrs:{value:e._dev_off_count}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e._goDevice("dev_unline")}}},[e._v(" "+e._s(e.$translateTitle("home.dev_unline"))+" ")])],1)],1),a("div",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-table",{staticClass:"_el-table",staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e._offlineData,"header-cell-style":{"text-align":"center"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:e.$translateTitle("equipment.devicename"),prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",{attrs:{title:r.name+e.$translateTitle("home.Last online Time")+r.updatedAt},on:{click:function(t){return e.showInfo(r.objectId)}}},[e._v(" "+e._s(r.name)+" ")])]}}])})],1)],1)])],1)],1)])],1)]),a("el-tab-pane",{attrs:{label:e.$translateTitle("home.dev_online"),name:"third"}},[a("div",{staticClass:"box-card"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-badge",{staticClass:"item",attrs:{value:e._dev_online_count}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e._goDevice("dev_online")}}},[e._v(" "+e._s(e.$translateTitle("home.dev_online"))+" ")])],1)],1),a("div",[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-table",{staticClass:"_el-table",staticStyle:{width:"100%"},attrs:{"cell-style":{"text-align":"center"},data:e._onlineData,"header-cell-style":{"text-align":"center"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:e.$translateTitle("equipment.devicename"),prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",{attrs:{title:r.name+e.$translateTitle("home.Last online Time")+r.updatedAt},on:{click:function(t){return e.showInfo(r.objectId)}}},[e._v(" "+e._s(r.name)+" ")])]}}])})],1)],1)])],1)],1)])],1)])],1)],1)])],1)],1)],1)])},o=[],i=a("fb07"),n=a("e97b"),s=a("d0d7"),l=a.n(s),c=(a("16b8"),a("c4bc"),a("a0e0"),a("3dec"),a("f1e1"),a("9c6a"),a("f764"),a("5662"),a("fdeb")),d=a.n(c),u=a("327b"),p=a.n(u),m=a("7212"),f=a("1285"),g=a("5880"),h=a("bc35"),b=a("bb22"),v=a("ed08"),y=a("c4e6"),_=a("9c01"),w=a("cb88"),T=a("14ba");window.dgiot.dgiotEnv=Object({NODE_ENV:"production",VUE_APP_TITLE:"物联网开发平台",VUE_APP_AUTHOR:"iotn2n",VUE_APP_UPDATE_TIME:"2022-01-12 11:32:20",VUE_APP_VERSION:"4.4.5",VUE_APP_Keywords:"一站式物联网PaaS平台|物联网应用服务",VUE_APP_Description:"提供物联网垂直领域应用使能平台及解决方案",VUE_APP_URL:"https://dev.iotn2n.com",BASE_URL:""});var k={name:"Index",components:{BmInfoWindow:w["BmInfoWindow"],info:y["default"],BmScale:w["BmScale"],BmMapType:w["BmMapType"],BmOverviewMap:w["BmOverviewMap"],BmPanorama:w["BmPanorama"],BmControl:w["BmControl"],BaiduMap:w["BaiduMap"],BmNavigation:w["BmNavigation"],BmGeolocation:w["BmGeolocation"],BmCityList:w["BmCityList"],BmMarker:w["BmMarker"],BmlMarkerClusterer:w["BmlMarkerClusterer"]},data:function(){var e;return this.chartSettings={radius:[5,40],offsetY:100},this.chartExtend={yAxisType:["percent"],tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"}},{list:{toolbar:!1,latitude:"28.475997",longitude:"121.331121",zoom:15},mapType:"dgiot_iframe"==window.name?"tencent":"baidu",isShow:!0,ak:null!==(e=T["secret"].baidu.map)&&void 0!==e?e:"fnc5Z92jC7CwfBGz8Dk66E9sXEIYZ6TG",center:{lng:121.337516,lat:28.48195},icoPath:{icoPath1:d.a,icoPath2:p.a},router:"",topicKey:"",loadingConfig:{product_count:!1,app_count:!1,device_count:!1,warn_count:!1},warnCount:0,count:0,productIco:"",ChartStatus:{columns:["状态","数量"],rows:[{"状态":"在线","数量":0},{"状态":"离线","数量":0}]},clientId:"dgiot_clientId_",infoWindow:{show:!0,contents:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},loading:!0,marker:{},deviceFlag:!1,deviceInfo:{detail:{}},Product:[],imgurl:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",subtopic:"",isConnect:!1,queryForm:{account:"",searchDate:"",pageNo:1,pageSize:20,workGroupName:"",workGroupTreeShow:!1,access_token:""},roleProps:{children:"children",label:"name"},leftWidth:"",cardHeight:"",fixedPaddingTop:"",curDepartmentId:"",leftRow:24,treeDataValue:"",deptTreeData:[],show:!1,sizeZoom:19,tableData:[],offlineData:[],onlineData:[],chartSetting:{yAxis:{type:"value",minInterval:1}},msgtopic:"",NODE_ENV:"production",category:[],activeName:"second",filterBox:"filterBox-first",project_count:0,app_count:0,product_count:0,dev_count:0,active:!1,dev_active_count:0,dev_online_count:0,dev_off_count:0,projectList:[],formInline:{starttime:"",project:""}}},computed:Object(n["a"])({},Object(g["mapGetters"])({objectId:"user/objectId",roleTree:"user/roleTree",collapse:"settings/collapse",_Product:"user/_Product",language:"settings/language",_dev_count:"dashboard/_dev_count",_project_count:"dashboard/_project_count",_app_count:"dashboard/_app_count",_product_count:"dashboard/_product_count",token:"user/token",_dev_online_count:"dashboard/_dev_online_count",_onlineData:"dashboard/_onlineData",_dev_off_count:"dashboard/_dev_off_count",_offlineData:"dashboard/_offlineData",_ChartStatus:"dashboard/_ChartStatus",_tableData:"dashboard/_tableData",_pcimg:"dashboard/_pcimg",_role:"acl/role",_mimg:"dashboard/_mimg",mqttInfo:"mqttDB/mqttInfo"})),watch:{topicKey:{handler:function(e){var t=this;this.$dgiotBus.$off(e),this.$dgiotBus.$on(e,(function(e){var a=e.payload;t.mqttMsg(a)}))},deep:!0,limit:!0}},created:function(){},mounted:function(){this.router=this.$dgiotBus.router(this.$route.fullPath),this.$dgiotBus.$off("qqMapClcik"),this.$dgiotBus.$on("qqMapClcik",(function(e){console.log(e)})),this.queryForm.account="zh"==this.language?"全部产品":"All Products",this.initDgiotMqtt()},activated:function(){this.resizeTheChart()},destroyed:function(){this.resizeTheChart()},methods:Object(n["a"])(Object(n["a"])({initDgiotMqtt:function(){var e=this;this.$nextTick(Object(i["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getProduct();case 2:return t.next=4,e.queryData();case 4:return t.next=6,e.setTreeFlag(!0);case 6:case"end":return t.stop()}}),t)}))))},getWarnCount:function(){var e=arguments,t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i,n;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:{count:"objectId",where:{}},r.where["createdAt"]={$gt:{__type:"Date",iso:moment().subtract(1,"days").format("YYYY-MM-DD")}},r.where["updatedAt"]={$lt:{__type:"Date",iso:moment(new Date).format("YYYY-MM-DD")}},a.prev=3,a.next=6,t.$query_object("Maintenance",r);case 6:o=a.sent,i=o.count,n=void 0===i?0:i,t.warnCount=n,a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](3),t.$message.error("".concat(a.t0));case 15:case"end":return a.stop()}}),a,null,[[3,12]])})))()},toggleFull:function(e){this.count++,this.count%2==0?this.$exitFull("baidu_map"):this.$beFull("baidu_map")},resizeTheChart:function(){var e=this;this.loading=!0;var t=this.$refs["charts"];t&&(t.$children[0].resize(),setTimeout((function(){e.loading=!1}),2e3))},tableRowClassName:function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":2===t?"success-row":""}},Object(g["mapMutations"])({setTreeFlag:"settings/setTreeFlag",resaveMqttInfo:"mqttDB/resaveMqttInfo",set_Product:"user/set_Product",set_dev_count:"dashboard/set_dev_count",set_project_count:"dashboard/set_project_count",set_app_count:"dashboard/set_app_count",set_product_count:"dashboard/set_product_count",set_dev_online_count:"dashboard/set_dev_online_count",set_onlineData:"dashboard/set_onlineData",set_dev_off_count:"dashboard/set_dev_off_count",set_offlineData:"dashboard/set_offlineData",set_ChartStatus:"dashboard/set_ChartStatus",set_tableData:"dashboard/set_tableData"})),{},{deviceToDetail:function(e){this.$router.push({path:"/roles/editdevices",query:{deviceid:e.objectId,nodeType:"2",ischildren:"false"}})},getCategory:function(e){var t="";return this.category.filter((function(a){a.type==e&&(t=a.data.CategoryName)})),t},closeInfo:function(e,t){},showDeatils:function(e,t){var a=this;return Object(i["a"])(l.a.mark((function r(){var o,i,n,s;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=a.$baseColorfullLoading(0),a.productIco="",r.next=4,Object(f["getDevice"])(e.objectId);case 4:return a.deviceInfo=r.sent,r.next=7,Object(m["queryProduct"])({count:"objectId",order:"-updatedAt",keys:"icon",where:{objectId:a.deviceInfo.product.objectId}});case 7:i=r.sent,n=i.results,s=void 0===n?[{icon:""}]:n,a.productIco=s[0].icon,e.show=!0,setTimeout((function(){o.close(),dgiotlog.info(a.$refs["bm_info".concat(t)]),a.$refs["bm_info".concat(t)][0].$children[0].show=!0}),1e3);case 13:case"end":return r.stop()}}),r)})))()},showInfo:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var r,o,i;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(f["getDevice"])(e);case 2:t.deviceInfo=a.sent,r=t.deviceInfo.product.objectId||"undefined",o=t.deviceInfo.devaddr||"undefined",i=[{topic:"thing/".concat(r,"/").concat(o,"/post"),type:"pub",desc:"设备上报",isdef:!0},{topic:"thing/".concat(r,"/").concat(o),type:"sub",desc:"消息下发",isdef:!0}],t.deviceInfo.product.topics?t.deviceInfo.topicData=t.deviceInfo.product.topics.concat(i):t.deviceInfo.topicData=i,t.deviceFlag=!0;case 8:case"end":return a.stop()}}),a)})))()},mqttMsg:function(e){var t=Object(v["isBase64"])(e)?Base64.decode(e):e,a=JSON.parse(t).value,r=JSON.parse(t).vuekey;switch(this.loadingConfig["".concat(r)]=!0,r){case"app_count":this.app_count=a.count,this.set_app_count(this.app_count);break;case"project_count":this.project_count=a.count,this.set_project_count(this.project_count);break;case"product_count":this.product_count=a.count,this.set_product_count(this.product_count),this.Product=a.results;break;case"dev_online_count":this.dev_online_count=a.count,this.set_dev_online_count(this.dev_online_count),this.onlineData=a.results,this.set_onlineData(this.onlineData);break;case"dev_off_count":this.dev_off_count=a.count,this.offlineData=a.results,this.set_dev_off_count(this.dev_off_count),this.set_offlineData(this.offlineData);break;case"warn_count":this.warnCount=a.count;break;case"ChartStatus":this.ChartStatus=a.chartData,this.set_ChartStatus(this.ChartStatus),this.resizeTheChart(),this.$forceUpdate();break;case"baiduMap":this.tableData=a,this.tableData.forEach((function(e){e.show=!1,e.color="0"===e.icon?"yellow":"1"===e.icon?"blue":"red"})),this.set_tableData(this.tableData),this.$forceUpdate();break;case"device_count":this.dev_count=a.count,this.set_dev_count(this.dev_count);break;default:break}this.$forceUpdate()},toggleCard:function(e){"0px"!=e?($(".map_card").css({height:"0px"}),this.cardHeight="0px"):($(".map_card").css({height:"98px"}),this.cardHeight="98px")},toggleLeftWidth:function(e){"0px"!=e?($(".vab-side-bar").css({width:"0px"}),$(".vab-main").css({"margin-left":"0px"}),this.leftWidth="0px"):($(".vab-side-bar").css({width:"200px"}),$(".vab-main").css({"margin-left":"200px"}),this.leftWidth="200px")},selectProdChange:function(e){},queryData:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$nextTick((function(){if("tencent"==e.mapType&&(e.setTreeFlag(!1),e.$refs.qqmap.$children[0].qqmap)){console.clear(),console.error(e.$refs.qqmap.$children[0]," this.$refs.qqmap.$children[0].qqmap"),document.querySelector(".lngTips").style.display="none",window.qq.maps.event.addListener(e.$refs.qqmap.$children[0].qqmap,"mousemove",(function(e){document.querySelector(".lngTips").style.display="none"}));var t=new window.qq.maps.LatLng(28.475997,121.331121),a=new qq.maps.InfoWindow({map:e.$refs.qqmap.$children[0].qqmap,position:t,content:'<div><h3>国家水泵产品质量检验中心(浙江)\n</h3><p>浙江省台州市温岭市迎宾大道温岭市泵业创新服务综合体\n</p><img class="pic" style="width:320px" src="https://sv6.map.qq.com/mmthumb?svid=18091033131005101120600&amp;from=web"></div>'});a.open(),e.$refs.qqmap.$children[0].qqmap.setZoom(18)}})),e.subtopic="dashboard/".concat(e.token,"/post"),e.topicKey=e.$dgiotBus.topicKey(e.router,e.subtopic),e.$dgiotBus.$emit("MqttSubscribe",{router:e.router,topic:e.subtopic,qos:0,ttl:108e5}),t.next=6,Object(b["Startdashboard"])(_["default"]);case 6:t.sent,setTimeout((function(){_["default"].forEach((function(t){var a=t.vuekey;e.loadingConfig["".concat(a)]=!0}))}),3e3);case 8:case"end":return t.stop()}}),t)})))()},getProduct:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["queryProduct"])({count:"objectId",order:"-updatedAt",keys:"name,icon",where:{}});case 2:a=t.sent,r=a.results,r.unshift({name:"zh"==e.language?"全部产品":"All Products",objectId:"0"}),e.set_Product(r);case 6:case"end":return t.stop()}}),t)})))()},change:function(e){e&&$(".el-tree").css({height:"100px",display:"block","overflow-x":"auto"})},handleNodeClick:function(e,t){var a=this;return Object(i["a"])(l.a.mark((function r(){var o,i,n,s,c;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=a._role.map((function(e){return e.name})),$(".el-tree").css({height:"0px",display:"none","overflow-x":"auto"}),$(".el-select-dropdown").css({display:"none"}),a.queryForm.workGroupName=e.label,a.treeDataValue=e.label,!o.includes(e.name)){r.next=9;break}a.queryForm.access_token=a.token,r.next=19;break;case 9:if(1==t.level){r.next=18;break}return r.next=12,Object(h["getToken"])(e.name);case 12:i=r.sent,n=i.access_token,s=void 0===n?"":n,a.queryForm.access_token=s,r.next=19;break;case 18:a.queryForm.access_token=a.token;case 19:a.queryForm.workGroupTreeShow=!a.queryForm.workGroupTreeShow,e.name,c=e.objectId,a.curDepartmentId=c;case 22:case"end":return r.stop()}}),r)})))()},handleChange:function(){},handleClickVisit:function(e){this.$router.push({path:"/Topo",query:{productid:e.objectId}})},goDevice:function(e){this.$router.push({path:"/dashboard/devicelist",query:{product:e}})},_goDevice:function(e){this.$router.push({path:"/dashboard/devicelist",query:{deciceType:e}})},goLink:function(e,t){var a;switch(e){case"real-time":this.$router.push({path:"/roles/editdevices",query:{deviceid:this.deviceInfo.objectId,nodeType:2,ischildren:"false"}});break;case"konva":this.$router.push({path:"/Topo",query:{productid:this.deviceInfo.product.objectId,devaddr:this.deviceInfo.devaddr,deviceid:this.deviceInfo.objectId,type:"device"}});break;case"video":var r=this.deviceInfo.basedata;if(null===r||void 0===r||null===(a=r.videoSrc)||void 0===a||!a.length)return this.$message.info(this.$translateTitle("equipment.The device is not bound to the video address yet")),!1;this.$router.push({path:"/Tools/player",query:{type:r.videoType||"m3u8",url:r.videoSrc}});break}},Gotoproduct:function(e){this.$router.push({path:"/dashboard/productlist",query:{project:e}})}})},x=k,C=(a("8b52"),a("bdd7")),I=Object(C["a"])(x,r,o,!1,null,"78a93952",null);t["default"]=I.exports},b4d4:function(e,t,a){"use strict";a("ad9f")},b973:function(e,t,a){"use strict";a("7a05")},c41a:function(e,t,a){e.exports={"menu-color":"rgba(255,255,255,.95)","menu-color-active":"rgba(255,255,255,.95)","menu-background":"#282c34","column-second-menu-background":"#fff"}},d13b:function(e,t,a){"use strict";a("248a")}}]);