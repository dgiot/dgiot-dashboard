/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2022-01-07 06:31:30
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors-dgiot-7ace1fb6"],{"18f2":function(n,t,e){var r=e("257d").Buffer;n.exports=function(n){if(n instanceof Uint8Array){if(0===n.byteOffset&&n.byteLength===n.buffer.byteLength)return n.buffer;if("function"===typeof n.buffer.slice)return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}if(r.isBuffer(n)){for(var t=new Uint8Array(n.length),e=n.length,o=0;o<e;o++)t[o]=n[o];return t.buffer}throw new Error("Argument must be a Buffer")}},"1ac6":function(n,t,e){},2292:function(n,t,e){e("33b6")},"267b":function(n,t,e){e("cf92")},"2896b":function(n,t){n.exports=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var t=document.activeElement,e=[],r=0;r<n.rangeCount;r++)e.push(n.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return n.removeAllRanges(),function(){"Caret"===n.type&&n.removeAllRanges(),n.rangeCount||e.forEach((function(t){n.addRange(t)})),t&&t.focus()}}},"2f47":function(n,t,e){"use strict";var r=e("d593"),o=e("83033");function u(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=C,t.resolve=S,t.resolveObject=D,t.format=T,t.Url=u;var i=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],f=["{","}","|","\\","^","`"].concat(l),s=["'"].concat(f),m=["%","/","?",";","#"].concat(s),d=["/","?","#"],p=255,g=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=e("99f3");function C(n,t,e){if(n&&o.isObject(n)&&n instanceof u)return n;var r=new u;return r.parse(n,t,e),r}function T(n){return o.isString(n)&&(n=C(n)),n instanceof u?n.format():u.prototype.format.call(n)}function S(n,t){return C(n,!1,!0).resolve(t)}function D(n,t){return n?C(n,!1,!0).resolveObject(t):t}u.prototype.parse=function(n,t,e){if(!o.isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var u=n.indexOf("?"),c=-1!==u&&u<n.indexOf("#")?"?":"#",l=n.split(c),f=/\\/g;l[0]=l[0].replace(f,"/"),n=l.join(c);var C=n;if(C=C.trim(),!e&&1===n.split("#").length){var T=a.exec(C);if(T)return this.path=C,this.href=C,this.pathname=T[1],T[2]?(this.search=T[2],this.query=t?w.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=i.exec(C);if(S){S=S[0];var D=S.toLowerCase();this.protocol=D,C=C.substr(S.length)}if(e||S||C.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===C.substr(0,2);!x||S&&b[S]||(C=C.substr(2),this.slashes=!0)}if(!b[S]&&(x||S&&!y[S])){for(var A,R,E=-1,O=0;O<d.length;O++){var F=C.indexOf(d[O]);-1!==F&&(-1===E||F<E)&&(E=F)}R=-1===E?C.lastIndexOf("@"):C.lastIndexOf("@",E),-1!==R&&(A=C.slice(0,R),C=C.slice(R+1),this.auth=decodeURIComponent(A)),E=-1;for(O=0;O<m.length;O++){F=C.indexOf(m[O]);-1!==F&&(-1===E||F<E)&&(E=F)}-1===E&&(E=C.length),this.host=C.slice(0,E),C=C.slice(E),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var B=this.hostname.split(/\./),M=(O=0,B.length);O<M;O++){var I=B[O];if(I&&!I.match(g)){for(var N="",P=0,_=I.length;P<_;P++)I.charCodeAt(P)>127?N+="x":N+=I[P];if(!N.match(g)){var j=B.slice(0,O),L=B.slice(O+1),W=I.match(h);W&&(j.push(W[1]),L.unshift(W[2])),L.length&&(C="/"+L.join(".")+C),this.hostname=j.join(".");break}}}this.hostname.length>p?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=r.toASCII(this.hostname));var z=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+z,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==C[0]&&(C="/"+C))}if(!v[D])for(O=0,M=s.length;O<M;O++){var H=s[O];if(-1!==C.indexOf(H)){var q=encodeURIComponent(H);q===H&&(q=escape(H)),C=C.split(H).join(q)}}var V=C.indexOf("#");-1!==V&&(this.hash=C.substr(V),C=C.slice(0,V));var K=C.indexOf("?");if(-1!==K?(this.search=C.substr(K),this.query=C.substr(K+1),t&&(this.query=w.parse(this.query)),C=C.slice(0,K)):t&&(this.search="",this.query={}),C&&(this.pathname=C),y[D]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var $=this.search||"";this.path=z+$}return this.href=this.format(),this},u.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var t=this.protocol||"",e=this.pathname||"",r=this.hash||"",u=!1,i="";this.host?u=n+this.host:this.hostname&&(u=n+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(u+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(i=w.stringify(this.query));var c=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==u?(u="//"+(u||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):u||(u=""),r&&"#"!==r.charAt(0)&&(r="#"+r),c&&"?"!==c.charAt(0)&&(c="?"+c),e=e.replace(/[?#]/g,(function(n){return encodeURIComponent(n)})),c=c.replace("#","%23"),t+u+e+c+r},u.prototype.resolve=function(n){return this.resolveObject(C(n,!1,!0)).format()},u.prototype.resolveObject=function(n){if(o.isString(n)){var t=new u;t.parse(n,!1,!0),n=t}for(var e=new u,r=Object.keys(this),i=0;i<r.length;i++){var c=r[i];e[c]=this[c]}if(e.hash=n.hash,""===n.href)return e.href=e.format(),e;if(n.slashes&&!n.protocol){for(var a=Object.keys(n),l=0;l<a.length;l++){var f=a[l];"protocol"!==f&&(e[f]=n[f])}return y[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(n.protocol&&n.protocol!==e.protocol){if(!y[n.protocol]){for(var s=Object.keys(n),m=0;m<s.length;m++){var d=s[m];e[d]=n[d]}return e.href=e.format(),e}if(e.protocol=n.protocol,n.host||b[n.protocol])e.pathname=n.pathname;else{var p=(n.pathname||"").split("/");while(p.length&&!(n.host=p.shift()));n.host||(n.host=""),n.hostname||(n.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),e.pathname=p.join("/")}if(e.search=n.search,e.query=n.query,e.host=n.host||"",e.auth=n.auth,e.hostname=n.hostname||n.host,e.port=n.port,e.pathname||e.search){var g=e.pathname||"",h=e.search||"";e.path=g+h}return e.slashes=e.slashes||n.slashes,e.href=e.format(),e}var v=e.pathname&&"/"===e.pathname.charAt(0),w=n.host||n.pathname&&"/"===n.pathname.charAt(0),C=w||v||e.host&&n.pathname,T=C,S=e.pathname&&e.pathname.split("/")||[],D=(p=n.pathname&&n.pathname.split("/")||[],e.protocol&&!y[e.protocol]);if(D&&(e.hostname="",e.port=null,e.host&&(""===S[0]?S[0]=e.host:S.unshift(e.host)),e.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host=null),C=C&&(""===p[0]||""===S[0])),w)e.host=n.host||""===n.host?n.host:e.host,e.hostname=n.hostname||""===n.hostname?n.hostname:e.hostname,e.search=n.search,e.query=n.query,S=p;else if(p.length)S||(S=[]),S.pop(),S=S.concat(p),e.search=n.search,e.query=n.query;else if(!o.isNullOrUndefined(n.search)){if(D){e.hostname=e.host=S.shift();var x=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@");x&&(e.auth=x.shift(),e.host=e.hostname=x.shift())}return e.search=n.search,e.query=n.query,o.isNull(e.pathname)&&o.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!S.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var A=S.slice(-1)[0],R=(e.host||n.host||S.length>1)&&("."===A||".."===A)||""===A,E=0,O=S.length;O>=0;O--)A=S[O],"."===A?S.splice(O,1):".."===A?(S.splice(O,1),E++):E&&(S.splice(O,1),E--);if(!C&&!T)for(;E--;E)S.unshift("..");!C||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),R&&"/"!==S.join("/").substr(-1)&&S.push("");var F=""===S[0]||S[0]&&"/"===S[0].charAt(0);if(D){e.hostname=e.host=F?"":S.length?S.shift():"";x=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@");x&&(e.auth=x.shift(),e.host=e.hostname=x.shift())}return C=C||e.host&&S.length,C&&!F&&S.unshift(""),S.length?e.pathname=S.join("/"):(e.pathname=null,e.path=null),o.isNull(e.pathname)&&o.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=n.auth||e.auth,e.slashes=e.slashes||n.slashes,e.href=e.format(),e},u.prototype.parseHost=function(){var n=this.host,t=c.exec(n);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),n=n.substr(0,n.length-t.length)),n&&(this.hostname=n)}},"33b6":function(n,t){(function(){"use strict";var n=function(n){var t=n,e=function(){return t},r=function(n){t=n};return{get:e,set:r}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n){var t=function(){return n.get()};return{isEnabled:t}},r=function(n,t){return n.fire("VisualChars",{state:t})},o=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},u=function(n){return function(t){return o(t)===n}},i=function(n){return function(t){return typeof t===n}},c=u("string"),a=i("boolean"),l=i("number"),f=function(){},s=function(n){return function(){return n}},m=function(n){return n},d=s(!1),p=s(!0),g=function(){return h},h=function(){var n=function(n){return n()},t=m,e={fold:function(n,t){return n()},isSome:d,isNone:p,getOr:t,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(void 0),or:t,orThunk:n,map:g,each:f,bind:g,exists:d,forall:p,filter:function(){return g()},toArray:function(){return[]},toString:s("none()")};return e}(),v=function(n){var t=s(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},isSome:p,isNone:d,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return v(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:h},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},b=function(n){return null===n||void 0===n?h:v(n)},y={some:v,none:g,from:b},w=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r},C=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];t(o,e)}},T=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e},S=Object.keys,D=function(n,t){for(var e=S(n),r=0,o=e.length;r<o;r++){var u=e[r],i=n[u];t(i,u)}};"undefined"!==typeof window?window:Function("return this;")();var x=3,A=function(n){return n.dom.nodeType},R=function(n){return n.dom.nodeValue},E=function(n){return function(t){return A(t)===n}},O=E(x),F=function(n,t,e){if(!(c(e)||a(e)||l(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")},k=function(n,t,e){F(n.dom,t,e)},B=function(n,t){var e=n.dom.getAttribute(t);return null===e?void 0:e},M=function(n,t){n.dom.removeAttribute(t)},I=function(n,t){var e=B(n,t);return void 0===e||""===e?[]:e.split(" ")},N=function(n,t,e){var r=I(n,t),o=r.concat([e]);return k(n,t,o.join(" ")),!0},P=function(n,t,e){var r=T(I(n,t),(function(n){return n!==e}));return r.length>0?k(n,t,r.join(" ")):M(n,t),!1},_=function(n){return void 0!==n.dom.classList},j=function(n){return I(n,"class")},L=function(n,t){return N(n,"class",t)},W=function(n,t){return P(n,"class",t)},z=function(n,t){_(n)?n.dom.classList.add(t):L(n,t)},U=function(n){var t=_(n)?n.dom.classList:j(n);0===t.length&&M(n,"class")},H=function(n,t){if(_(n)){var e=n.dom.classList;e.remove(t)}else W(n,t);U(n)},q=function(n,t){var e=t||document,r=e.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return $(r.childNodes[0])},V=function(n,t){var e=t||document,r=e.createElement(n);return $(r)},K=function(n,t){var e=t||document,r=e.createTextNode(n);return $(r)},$=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},X=function(n,t,e){return y.from(n.dom.elementFromPoint(t,e)).map($)},G={fromHtml:q,fromTag:V,fromText:K,fromDom:$,fromPoint:X},Y={" ":"nbsp","­":"shy"},J=function(n,t){var e="";return D(n,(function(n,t){e+=t})),new RegExp("["+e+"]",t?"g":"")},Z=function(n){var t="";return D(n,(function(n){t&&(t+=","),t+="span.mce-"+n})),t},Q=J(Y),nn=J(Y,!0),tn=Z(Y),en="mce-nbsp",rn=function(n){return'<span data-mce-bogus="1" class="mce-'+Y[n]+'">'+n+"</span>"},on=function(n){var t=R(n);return O(n)&&void 0!==t&&Q.test(t)},un=function(n,t){var e=[],r=n.dom,o=w(r.childNodes,G.fromDom);return C(o,(function(n){t(n)&&(e=e.concat([n])),e=e.concat(un(n,t))})),e},cn=function(n,t){while(n.parentNode){if(n.parentNode===t)return n;n=n.parentNode}},an=function(n){return n.replace(nn,rn)},ln=function(n){return"span"===n.nodeName.toLowerCase()&&n.classList.contains("mce-nbsp-wrap")},fn=function(n,t){var e=un(G.fromDom(t),on);C(e,(function(t){var e=t.dom.parentNode;if(ln(e))z(G.fromDom(e),en);else{var r=an(n.dom.encode(R(t))),o=n.dom.create("div",null,r),u=void 0;while(u=o.lastChild)n.dom.insertAfter(u,t.dom);n.dom.remove(t.dom)}}))},sn=function(n,t){var e=n.dom.select(tn,t);C(e,(function(t){ln(t)?H(G.fromDom(t),en):n.dom.remove(t,!0)}))},mn=function(n){var t=n.getBody(),e=n.selection.getBookmark(),r=cn(n.selection.getNode(),t);r=void 0!==r?r:t,sn(n,r),fn(n,r),n.selection.moveToBookmark(e)},dn=function(n,t){r(n,t.get());var e=n.getBody();!0===t.get()?fn(n,e):sn(n,e)},pn=function(n,t){t.set(!t.get());var e=n.selection.getBookmark();dn(n,t),n.selection.moveToBookmark(e)},gn=function(n,t){n.addCommand("mceVisualChars",(function(){pn(n,t)}))},hn=function(n){return n.getParam("visualchars_default_state",!1)},vn=function(n){return!1!==n.getParam("forced_root_block")},bn=function(n,t){n.on("init",(function(){dn(n,t)}))},yn=tinymce.util.Tools.resolve("tinymce.util.Delay"),wn=function(n,t){var e=yn.debounce((function(){mn(n)}),300);vn(n)&&n.on("keydown",(function(r){!0===t.get()&&(13===r.keyCode?mn(n):e())})),n.on("remove",e.stop)},Cn=function(n,t){return function(e){e.setActive(t.get());var r=function(n){return e.setActive(n.state)};return n.on("VisualChars",r),function(){return n.off("VisualChars",r)}}},Tn=function(n,t){var e=function(){return n.execCommand("mceVisualChars")};n.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:e,onSetup:Cn(n,t)}),n.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:e,onSetup:Cn(n,t)})};function Sn(){t.add("visualchars",(function(t){var r=n(hn(t));return gn(t,r),Tn(t,r),wn(t,r),bn(t,r),e(r)}))}Sn()})()},3753:function(n,t,e){e("38a4")},"38a4":function(n,t){(function(){"use strict";var n=function(n){var t=n,e=function(){return t},r=function(n){t=n};return{get:e,set:r}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n,t){n.fire("VisualBlocks",{state:t})},r=function(n,t,r){var o=n.dom;o.toggleClass(n.getBody(),"mce-visualblocks"),r.set(!r.get()),e(n,r.get())},o=function(n,t,e){n.addCommand("mceVisualBlocks",(function(){r(n,t,e)}))},u=function(n){return n.getParam("visualblocks_default_state",!1,"boolean")},i=function(n,t,e){n.on("PreviewFormats AfterPreviewFormats",(function(t){e.get()&&n.dom.toggleClass(n.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)})),n.on("init",(function(){u(n)&&r(n,t,e)}))},c=function(n,t){return function(e){e.setActive(t.get());var r=function(n){return e.setActive(n.state)};return n.on("VisualBlocks",r),function(){return n.off("VisualBlocks",r)}}},a=function(n,t){var e=function(){return n.execCommand("mceVisualBlocks")};n.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:e,onSetup:c(n,t)}),n.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:e,onSetup:c(n,t)})};function l(){t.add("visualblocks",(function(t,e){var r=n(!1);o(t,e,r),a(t,r),i(t,e,r)}))}l()})()},"4efa":function(n,t,e){e("705c")},"58e6":function(n,t,e){e("9acd")},"5b35":function(n,t){n.exports=/[\0-\x1F\x7F-\x9F]/},"6b14":function(n,t,e){"use strict";e.r(t),e.d(t,"__extends",(function(){return o})),e.d(t,"__assign",(function(){return u})),e.d(t,"__rest",(function(){return i})),e.d(t,"__decorate",(function(){return c})),e.d(t,"__param",(function(){return a})),e.d(t,"__metadata",(function(){return l})),e.d(t,"__awaiter",(function(){return f})),e.d(t,"__generator",(function(){return s})),e.d(t,"__createBinding",(function(){return m})),e.d(t,"__exportStar",(function(){return d})),e.d(t,"__values",(function(){return p})),e.d(t,"__read",(function(){return g})),e.d(t,"__spread",(function(){return h})),e.d(t,"__spreadArrays",(function(){return v})),e.d(t,"__spreadArray",(function(){return b})),e.d(t,"__await",(function(){return y})),e.d(t,"__asyncGenerator",(function(){return w})),e.d(t,"__asyncDelegator",(function(){return C})),e.d(t,"__asyncValues",(function(){return T})),e.d(t,"__makeTemplateObject",(function(){return S})),e.d(t,"__importStar",(function(){return x})),e.d(t,"__importDefault",(function(){return A})),e.d(t,"__classPrivateFieldGet",(function(){return R})),e.d(t,"__classPrivateFieldSet",(function(){return E}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(n,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},r(n,t)};function o(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var u=function(){return u=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},u.apply(this,arguments)};function i(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]])}return e}function c(n,t,e,r){var o,u=arguments.length,i=u<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(i=(u<3?o(i):u>3?o(t,e,i):o(t,e))||i);return u>3&&i&&Object.defineProperty(t,e,i),i}function a(n,t){return function(e,r){t(e,r,n)}}function l(n,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(n,t)}function f(n,t,e,r){function o(n){return n instanceof e?n:new e((function(t){t(n)}))}return new(e||(e=Promise))((function(e,u){function i(n){try{a(r.next(n))}catch(t){u(t)}}function c(n){try{a(r["throw"](n))}catch(t){u(t)}}function a(n){n.done?e(n.value):o(n.value).then(i,c)}a((r=r.apply(n,t||[])).next())}))}function s(n,t){var e,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(n){return function(t){return a([n,t])}}function a(u){if(e)throw new TypeError("Generator is already executing.");while(i)try{if(e=1,r&&(o=2&u[0]?r["return"]:u[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(n,i)}catch(c){u=[6,c],r=0}finally{e=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var m=Object.create?function(n,t,e,r){void 0===r&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){void 0===r&&(r=e),n[r]=t[e]};function d(n,t){for(var e in n)"default"===e||Object.prototype.hasOwnProperty.call(t,e)||m(t,n,e)}function p(n){var t="function"===typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"===typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(n,t){var e="function"===typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,o,u=e.call(n),i=[];try{while((void 0===t||t-- >0)&&!(r=u.next()).done)i.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(e=u["return"])&&e.call(u)}finally{if(o)throw o.error}}return i}function h(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(g(arguments[t]));return n}function v(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var r=Array(n),o=0;for(t=0;t<e;t++)for(var u=arguments[t],i=0,c=u.length;i<c;i++,o++)r[o]=u[i];return r}function b(n,t,e){if(e||2===arguments.length)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return n.concat(r||Array.prototype.slice.call(t))}function y(n){return this instanceof y?(this.v=n,this):new y(n)}function w(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=e.apply(n,t||[]),u=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(n){o[n]&&(r[n]=function(t){return new Promise((function(e,r){u.push([n,t,e,r])>1||c(n,t)}))})}function c(n,t){try{a(o[n](t))}catch(e){s(u[0][3],e)}}function a(n){n.value instanceof y?Promise.resolve(n.value.v).then(l,f):s(u[0][2],n)}function l(n){c("next",n)}function f(n){c("throw",n)}function s(n,t){n(t),u.shift(),u.length&&c(u[0][0],u[0][1])}}function C(n){var t,e;return t={},r("next"),r("throw",(function(n){throw n})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=n[r]?function(t){return(e=!e)?{value:y(n[r](t)),done:"return"===r}:o?o(t):t}:o}}function T(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n="function"===typeof p?p(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(e){t[e]=n[e]&&function(t){return new Promise((function(r,u){t=n[e](t),o(r,u,t.done,t.value)}))}}function o(n,t,e,r){Promise.resolve(r).then((function(t){n({value:t,done:e})}),t)}}function S(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}var D=Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n["default"]=t};function x(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)"default"!==e&&Object.prototype.hasOwnProperty.call(n,e)&&m(t,n,e);return D(t,n),t}function A(n){return n&&n.__esModule?n:{default:n}}function R(n,t,e,r){if("a"===e&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?r:"a"===e?r.call(n):r?r.value:t.get(n)}function E(n,t,e,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?n!==t||!o:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(n,e):o?o.value=e:t.set(n,e),e}},"75d5":function(n,t,e){e("f2a5")},83033:function(n,t,e){"use strict";n.exports={isString:function(n){return"string"===typeof n},isObject:function(n){return"object"===typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}}},"9acd":function(n,t){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n){return n},e=function(){return e=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},e.apply(this,arguments)},r="\ufeff",o=function(n){return n.replace(/\uFEFF/g,"")},u=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r},i="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",c={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:i},a={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},l=[new RegExp(c.aletter),new RegExp(c.midnumlet),new RegExp(c.midletter),new RegExp(c.midnum),new RegExp(c.numeric),new RegExp(c.cr),new RegExp(c.lf),new RegExp(c.newline),new RegExp(c.extend),new RegExp(c.format),new RegExp(c.katakana),new RegExp(c.extendnumlet),new RegExp("@")],f="",s=new RegExp("^"+c.punctuation+"$"),m=/^\s+$/,d=l,p=a.OTHER,g=function(n){for(var t=p,e=d.length,r=0;r<e;++r){var o=d[r];if(o&&o.test(n)){t=r;break}}return t},h=function(n){var t={};return function(e){if(t[e])return t[e];var r=n(e);return t[e]=r,r}},v=function(n){var t=h(g);return u(n,t)},b=function(n,t){var e=n[t],r=n[t+1];if(t<0||t>n.length-1&&0!==t)return!1;if(e===a.ALETTER&&r===a.ALETTER)return!1;var o=n[t+2];if(e===a.ALETTER&&(r===a.MIDLETTER||r===a.MIDNUMLET||r===a.AT)&&o===a.ALETTER)return!1;var u=n[t-1];return(e!==a.MIDLETTER&&e!==a.MIDNUMLET&&r!==a.AT||r!==a.ALETTER||u!==a.ALETTER)&&((e!==a.NUMERIC&&e!==a.ALETTER||r!==a.NUMERIC&&r!==a.ALETTER)&&((e!==a.MIDNUM&&e!==a.MIDNUMLET||r!==a.NUMERIC||u!==a.NUMERIC)&&((e!==a.NUMERIC||r!==a.MIDNUM&&r!==a.MIDNUMLET||o!==a.NUMERIC)&&(e!==a.EXTEND&&e!==a.FORMAT&&u!==a.EXTEND&&u!==a.FORMAT&&r!==a.EXTEND&&r!==a.FORMAT&&((e!==a.CR||r!==a.LF)&&(e===a.NEWLINE||e===a.CR||e===a.LF||(r===a.NEWLINE||r===a.CR||r===a.LF||(e!==a.KATAKANA||r!==a.KATAKANA)&&((r!==a.EXTENDNUMLET||e!==a.ALETTER&&e!==a.NUMERIC&&e!==a.KATAKANA&&e!==a.EXTENDNUMLET)&&((e!==a.EXTENDNUMLET||r!==a.ALETTER&&r!==a.NUMERIC&&r!==a.KATAKANA)&&e!==a.AT)))))))))},y=f,w=m,C=s,T=function(n){return"http"===n||"https"===n},S=function(n,t){var e;for(e=t;e<n.length;e++)if(w.test(n[e]))break;return e},D=function(n,t){var e=S(n,t+1),r=n.slice(t+1,e).join(y);return"://"===r.substr(0,3)?e:t},x=function(n,t,e,r){for(var o=[],u=[],i=0;i<e.length;++i)if(u.push(n[i]),b(e,i)){var c=t[i];if((r.includeWhitespace||!w.test(c))&&(r.includePunctuation||!C.test(c))){var a=i-u.length+1,l=i+1,f=t.slice(a,l).join(y);if(T(f)){var s=D(t,i),m=n.slice(l,s);Array.prototype.push.apply(u,m),i=s}o.push(u)}u=[]}return o},A=function(){return{includeWhitespace:!1,includePunctuation:!1}},R=function(n,t,o){o=e(e({},A()),o);for(var u=[],i=[],c=0;c<n.length;c++){var a=t(n[c]);a!==r&&(u.push(n[c]),i.push(a))}var l=v(i);return x(u,i,l,o)},E=R,O=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),F=function(n,t){var e=t.getBlockElements(),r=t.getShortEndedElements(),u=function(n){return e[n.nodeName]||r[n.nodeName]},i=[],c="",a=new O(n,n);while(n=a.next())3===n.nodeType?c+=o(n.data):u(n)&&c.length&&(i.push(c),c="");return c.length&&i.push(c),i},k=function(n){return n.replace(/\u200B/g,"")},B=function(n){return n.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},M=function(n,e){var r=k(F(n,e).join("\n"));return E(r.split(""),t).length},I=function(n,t){var e=F(n,t).join("");return B(e)},N=function(n,t){var e=F(n,t).join("").replace(/\s/g,"");return B(e)},P=function(n,t){return function(){return t(n.getBody(),n.schema)}},_=function(n,t){return function(){return t(n.selection.getRng().cloneContents(),n.schema)}},j=function(n){return P(n,M)},L=function(n){return{body:{getWordCount:j(n),getCharacterCount:P(n,I),getCharacterCountWithoutSpaces:P(n,N)},selection:{getWordCount:_(n,M),getCharacterCount:_(n,I),getCharacterCountWithoutSpaces:_(n,N)},getCount:j(n)}},W=function(n,t){n.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(t.body.getWordCount()),String(t.selection.getWordCount())],["Characters (no spaces)",String(t.body.getCharacterCountWithoutSpaces()),String(t.selection.getCharacterCountWithoutSpaces())],["Characters",String(t.body.getCharacterCount()),String(t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},z=function(n,t){n.addCommand("mceWordCount",(function(){return W(n,t)}))},U=tinymce.util.Tools.resolve("tinymce.util.Delay"),H=function(n,t){n.fire("wordCountUpdate",{wordCount:{words:t.body.getWordCount(),characters:t.body.getCharacterCount(),charactersWithoutSpaces:t.body.getCharacterCountWithoutSpaces()}})},q=function(n,t){H(n,t)},V=function(n,t,e){var r=U.debounce((function(){return q(n,t)}),e);n.on("init",(function(){q(n,t),U.setEditorTimeout(n,(function(){n.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",r)}),0)}))},K=function(n){var t=function(){return n.execCommand("mceWordCount")};n.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:t}),n.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:t})};function $(t){void 0===t&&(t=300),n.add("wordcount",(function(n){var e=L(n);return z(n,e),K(n),V(n,e,t),e}))}$()})()},c592:function(n,t){n.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},cf92:function(n,t){(function(){"use strict";var n=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},t=function(t){return function(e){return n(e)===t}},e=function(n){return function(t){return typeof t===n}},r=function(n){return function(t){return n===t}},o=t("string"),u=t("object"),i=t("array"),c=r(null),a=e("boolean"),l=r(void 0),f=function(n){return null===n||void 0===n},s=function(n){return!f(n)},m=e("function"),d=e("number"),p=function(){},g=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(t.apply(null,e))}},h=function(n,t){return function(e){return n(t(e))}},v=function(n){return function(){return n}},b=function(n){return n},y=function(n,t){return n===t};function w(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.concat(e);return n.apply(null,o)}}var C=function(n){return function(t){return!n(t)}},T=function(n){return function(){throw new Error(n)}},S=v(!1),D=v(!0),x=function(){return A},A=function(){var n=function(n){return n()},t=b,e={fold:function(n,t){return n()},isSome:S,isNone:D,getOr:t,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:v(null),getOrUndefined:v(void 0),or:t,orThunk:n,map:x,each:p,bind:x,exists:S,forall:D,filter:function(){return x()},toArray:function(){return[]},toString:v("none()")};return e}(),R=function(n){var t=v(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},isSome:D,isNone:S,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return R(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:A},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},E=function(n){return null===n||void 0===n?A:R(n)},O={some:R,none:x,from:E},F=Array.prototype.slice,k=Array.prototype.indexOf,B=Array.prototype.push,M=function(n,t){return k.call(n,t)},I=function(n,t){return M(n,t)>-1},N=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return!0}return!1},P=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},_=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r},j=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];t(o,e)}},L=function(n,t){for(var e=n.length-1;e>=0;e--){var r=n[e];t(r,e)}},W=function(n,t){for(var e=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o],c=t(i,o)?e:r;c.push(i)}return{pass:e,fail:r}},z=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e},U=function(n,t,e){return L(n,(function(n,r){e=t(e,n,r)})),e},H=function(n,t,e){return j(n,(function(n,r){e=t(e,n,r)})),e},q=function(n,t,e){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(t(u,r))return O.some(u);if(e(u,r))break}return O.none()},V=function(n,t){return q(n,t,S)},K=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return O.some(e)}return O.none()},$=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!i(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);B.apply(t,n[e])}return t},X=function(n,t){return $(_(n,t))},G=function(n,t){for(var e=0,r=n.length;e<r;++e){var o=n[e];if(!0!==t(o,e))return!1}return!0},Y=function(n){var t=F.call(n,0);return t.reverse(),t},J=function(n,t){for(var e={},r=0,o=n.length;r<o;r++){var u=n[r];e[String(u)]=t(u,r)}return e},Z=function(n){return[n]},Q=function(n,t){var e=F.call(n,0);return e.sort(t),e},nn=function(n,t){return t>=0&&t<n.length?O.some(n[t]):O.none()},tn=function(n){return nn(n,0)},en=function(n){return nn(n,n.length-1)},rn=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return O.none()},on=function(){return on=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},on.apply(this,arguments)};function un(n,t,e){if(e||2===arguments.length)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return n.concat(r||Array.prototype.slice.call(t))}var cn=function(n){var t,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,t=n.apply(null,r)),t}},an=function(n,t,e,r){var o=n.isiOS()&&!0===/ipad/i.test(e),u=n.isiOS()&&!o,i=n.isiOS()||n.isAndroid(),c=i||r("(pointer:coarse)"),a=o||!u&&i&&r("(min-device-width:768px)"),l=u||i&&!a,f=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(e),s=!l&&!a&&!f;return{isiPad:v(o),isiPhone:v(u),isTablet:v(a),isPhone:v(l),isTouch:v(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:v(f),isDesktop:v(s)}},ln=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}},fn=function(n,t){var e=ln(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return dn(r(1),r(2))},sn=function(n,t){var e=String(t).toLowerCase();return 0===n.length?mn():fn(n,e)},mn=function(){return dn(0,0)},dn=function(n,t){return{major:n,minor:t}},pn={nu:dn,detect:sn,unknown:mn},gn=function(n,t){return rn(t.brands,(function(t){var e=t.brand.toLowerCase();return V(n,(function(n){var t;return e===(null===(t=n.brand)||void 0===t?void 0:t.toLowerCase())})).map((function(n){return{current:n.name,version:pn.nu(parseInt(t.version,10),0)}}))}))},hn=function(n,t){var e=String(t).toLowerCase();return V(n,(function(n){return n.search(e)}))},vn=function(n,t){return hn(n,t).map((function(n){var e=pn.detect(n.versionRegexes,t);return{current:n.name,version:e}}))},bn=function(n,t){return hn(n,t).map((function(n){var e=pn.detect(n.versionRegexes,t);return{current:n.name,version:e}}))},yn=function(n,t){return n.substring(t)},wn=function(n,t,e){return""===t||n.length>=t.length&&n.substr(e,e+t.length)===t},Cn=function(n,t){return Sn(n,t)?yn(n,t.length):n},Tn=function(n,t){return-1!==n.indexOf(t)},Sn=function(n,t){return wn(n,t,0)},Dn=function(n,t){return wn(n,t,n.length-t.length)},xn=function(n){return function(t){return t.replace(n,"")}},An=xn(/^\s+|\s+$/g),Rn=function(n){return n.length>0},En=function(n){return!Rn(n)},On=function(n){var t=parseFloat(n);return isNaN(t)?O.none():O.some(t)},Fn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,kn=function(n){return function(t){return Tn(t,n)}},Bn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return Tn(n,"edge/")&&Tn(n,"chrome")&&Tn(n,"safari")&&Tn(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fn],search:function(n){return Tn(n,"chrome")&&!Tn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return Tn(n,"msie")||Tn(n,"trident")}},{name:"Opera",versionRegexes:[Fn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:kn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:kn("firefox")},{name:"Safari",versionRegexes:[Fn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(Tn(n,"safari")||Tn(n,"mobile/"))&&Tn(n,"applewebkit")}}],Mn=[{name:"Windows",search:kn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return Tn(n,"iphone")||Tn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:kn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:kn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:kn("linux"),versionRegexes:[]},{name:"Solaris",search:kn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:kn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:kn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],In={browsers:v(Bn),oses:v(Mn)},Nn="Edge",Pn="Chrome",_n="IE",jn="Opera",Ln="Firefox",Wn="Safari",zn=function(){return Un({current:void 0,version:pn.unknown()})},Un=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isEdge:r(Nn),isChrome:r(Pn),isIE:r(_n),isOpera:r(jn),isFirefox:r(Ln),isSafari:r(Wn)}},Hn={unknown:zn,nu:Un,edge:v(Nn),chrome:v(Pn),ie:v(_n),opera:v(jn),firefox:v(Ln),safari:v(Wn)},qn="Windows",Vn="iOS",Kn="Android",$n="Linux",Xn="OSX",Gn="Solaris",Yn="FreeBSD",Jn="ChromeOS",Zn=function(){return Qn({current:void 0,version:pn.unknown()})},Qn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isWindows:r(qn),isiOS:r(Vn),isAndroid:r(Kn),isOSX:r(Xn),isLinux:r($n),isSolaris:r(Gn),isFreeBSD:r(Yn),isChromeOS:r(Jn)}},nt={unknown:Zn,nu:Qn,windows:v(qn),ios:v(Vn),android:v(Kn),linux:v($n),osx:v(Xn),solaris:v(Gn),freebsd:v(Yn),chromeos:v(Jn)},tt=function(n,t,e){var r=In.browsers(),o=In.oses(),u=t.bind((function(n){return gn(r,n)})).orThunk((function(){return vn(r,n)})).fold(Hn.unknown,Hn.nu),i=bn(o,n).fold(nt.unknown,nt.nu),c=an(i,u,n,e);return{browser:u,os:i,deviceType:c}},et={detect:tt},rt=function(n){return window.matchMedia(n).matches},ot=cn((function(){return et.detect(navigator.userAgent,O.from(navigator.userAgentData),rt)})),ut=function(){return ot()},it=function(n,t,e){return 0!==(n.compareDocumentPosition(t)&e)},ct=function(n,t){return it(n,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},at=8,lt=9,ft=11,st=1,mt=3,dt=function(n,t){var e=t||document,r=e.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return ht(r.childNodes[0])},pt=function(n,t){var e=t||document,r=e.createElement(n);return ht(r)},gt=function(n,t){var e=t||document,r=e.createTextNode(n);return ht(r)},ht=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},vt=function(n,t,e){return O.from(n.dom.elementFromPoint(t,e)).map(ht)},bt={fromHtml:dt,fromTag:pt,fromText:gt,fromDom:ht,fromPoint:vt},yt=function(n,t){var e=n.dom;if(e.nodeType!==st)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},wt=function(n){return n.nodeType!==st&&n.nodeType!==lt&&n.nodeType!==ft||0===n.childElementCount},Ct=function(n,t){var e=void 0===t?document:t.dom;return wt(e)?[]:_(e.querySelectorAll(n),bt.fromDom)},Tt=function(n,t){var e=void 0===t?document:t.dom;return wt(e)?O.none():O.from(e.querySelector(n)).map(bt.fromDom)},St=function(n,t){return n.dom===t.dom},Dt=function(n,t){var e=n.dom,r=t.dom;return e!==r&&e.contains(r)},xt=function(n,t){return ct(n.dom,t.dom)},At=function(n,t){return ut().browser.isIE()?xt(n,t):Dt(n,t)},Rt=yt,Et=Object.keys,Ot=Object.hasOwnProperty,Ft=function(n,t){for(var e=Et(n),r=0,o=e.length;r<o;r++){var u=e[r],i=n[u];t(i,u)}},kt=function(n,t){return Bt(n,(function(n,e){return{k:e,v:t(n,e)}}))},Bt=function(n,t){var e={};return Ft(n,(function(n,r){var o=t(n,r);e[o.k]=o.v})),e},Mt=function(n){return function(t,e){n[e]=t}},It=function(n,t,e,r){var o={};return Ft(n,(function(n,o){(t(n,o)?e:r)(n,o)})),o},Nt=function(n,t){var e={};return It(n,t,Mt(e),p),e},Pt=function(n,t){var e=[];return Ft(n,(function(n,r){e.push(t(n,r))})),e},_t=function(n){return Pt(n,b)},jt=function(n){return Et(n).length},Lt=function(n,t){return Wt(n,t)?O.from(n[t]):O.none()},Wt=function(n,t){return Ot.call(n,t)},zt=function(n,t){return Wt(n,t)&&void 0!==n[t]&&null!==n[t]},Ut=function(n){for(var t in n)if(Ot.call(n,t))return!1;return!0},Ht=["tfoot","thead","tbody","colgroup"],qt=function(n){return I(Ht,n)},Vt=function(n,t){return{rows:n,columns:t}},Kt=function(n,t){return{row:n,column:t}},$t=function(n,t,e){return{element:n,rowspan:t,colspan:e}},Xt=function(n,t,e,r){return{element:n,rowspan:t,colspan:e,isNew:r}},Gt=function(n,t,e,r,o,u){return{element:n,rowspan:t,colspan:e,row:r,column:o,isLocked:u}},Yt=function(n,t,e){return{element:n,cells:t,section:e}},Jt=function(n,t,e,r){return{element:n,cells:t,section:e,isNew:r}},Zt=function(n,t,e){return{element:n,isNew:t,isLocked:e}},Qt=function(n,t,e,r){return{element:n,cells:t,section:e,isNew:r}},ne=function(n,t,e,r){return{startRow:n,startCol:t,finishRow:e,finishCol:r}},te=function(n,t,e){return{element:n,colspan:t,column:e}},ee=function(n,t){return{element:n,columns:t}};"undefined"!==typeof window?window:Function("return this;")();var re=function(n){var t=n.dom.nodeName;return t.toLowerCase()},oe=function(n){return n.dom.nodeType},ue=function(n){return function(t){return oe(t)===n}},ie=function(n){return oe(n)===at||"#comment"===re(n)},ce=ue(st),ae=ue(mt),le=ue(lt),fe=ue(ft),se=function(n){return function(t){return ce(t)&&re(t)===n}},me=function(n){return bt.fromDom(n.dom.ownerDocument)},de=function(n){return le(n)?n:me(n)},pe=function(n){return bt.fromDom(de(n).dom.defaultView)},ge=function(n){return O.from(n.dom.parentNode).map(bt.fromDom)},he=function(n){return O.from(n.dom.parentElement).map(bt.fromDom)},ve=function(n,t){var e=m(t)?t:S,r=n.dom,o=[];while(null!==r.parentNode&&void 0!==r.parentNode){var u=r.parentNode,i=bt.fromDom(u);if(o.push(i),!0===e(i))break;r=u}return o},be=function(n){return O.from(n.dom.previousSibling).map(bt.fromDom)},ye=function(n){return O.from(n.dom.nextSibling).map(bt.fromDom)},we=function(n){return _(n.dom.childNodes,bt.fromDom)},Ce=function(n,t){var e=n.dom.childNodes;return O.from(e[t]).map(bt.fromDom)},Te=function(n){return Ce(n,0)},Se=function(n){return fe(n)&&s(n.dom.host)},De=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),xe=v(De),Ae=De?function(n){return bt.fromDom(n.dom.getRootNode())}:de,Re=function(n){var t=Ae(n);return Se(t)?O.some(t):O.none()},Ee=function(n){return bt.fromDom(n.dom.host)},Oe=function(n){if(xe()&&s(n.target)){var t=bt.fromDom(n.target);if(ce(t)&&Fe(t)&&n.composed&&n.composedPath){var e=n.composedPath();if(e)return tn(e)}}return O.from(n.target)},Fe=function(n){return s(n.dom.shadowRoot)},ke=function(n){var t=ae(n)?n.dom.parentNode:n.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var e=t.ownerDocument;return Re(bt.fromDom(t)).fold((function(){return e.body.contains(t)}),h(ke,Ee))},Be=function(){return Me(bt.fromDom(document))},Me=function(n){var t=n.dom.body;if(null===t||void 0===t)throw new Error("Body is not available yet");return bt.fromDom(t)},Ie=function(n,t,e){return z(ve(n,e),t)},Ne=function(n,t){return z(we(n),t)},Pe=function(n,t){var e=[];return j(we(n),(function(n){t(n)&&(e=e.concat([n])),e=e.concat(Pe(n,t))})),e},_e=function(n,t,e){return Ie(n,(function(n){return yt(n,t)}),e)},je=function(n,t){return Ne(n,(function(n){return yt(n,t)}))},Le=function(n,t){return Ct(t,n)};function We(n,t,e,r,o){return n(e,r)?O.some(e):m(o)&&o(e)?O.none():t(e,r,o)}var ze=function(n,t,e){var r=n.dom,o=m(e)?e:S;while(r.parentNode){r=r.parentNode;var u=bt.fromDom(r);if(t(u))return O.some(u);if(o(u))break}return O.none()},Ue=function(n,t,e){var r=function(n,t){return t(n)};return We(r,ze,n,t,e)},He=function(n,t){var e=function(n){return t(bt.fromDom(n))},r=V(n.dom.childNodes,e);return r.map(bt.fromDom)},qe=function(n,t){var e=function(n){for(var r=0;r<n.childNodes.length;r++){var o=bt.fromDom(n.childNodes[r]);if(t(o))return O.some(o);var u=e(n.childNodes[r]);if(u.isSome())return u}return O.none()};return e(n.dom)},Ve=function(n,t,e){return ze(n,(function(n){return yt(n,t)}),e)},Ke=function(n,t){return He(n,(function(n){return yt(n,t)}))},$e=function(n,t){return Tt(t,n)},Xe=function(n,t,e){var r=function(n,t){return yt(n,t)};return We(r,Ve,n,t,e)},Ge=function(n,t,e){if(!(o(e)||a(e)||d(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")},Ye=function(n,t,e){Ge(n.dom,t,e)},Je=function(n,t){var e=n.dom;Ft(t,(function(n,t){Ge(e,t,n)}))},Ze=function(n,t){Ft(t,(function(t,e){t.fold((function(){tr(n,e)}),(function(t){Ge(n.dom,e,t)}))}))},Qe=function(n,t){var e=n.dom.getAttribute(t);return null===e?void 0:e},nr=function(n,t){return O.from(Qe(n,t))},tr=function(n,t){n.dom.removeAttribute(t)},er=function(n){return H(n.dom.attributes,(function(n,t){return n[t.name]=t.value,n}),{})},rr=function(n,t,e){return void 0===e&&(e=y),n.exists((function(n){return e(n,t)}))},or=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},ur=function(n,t,e){return n.isSome()&&t.isSome()?O.some(e(n.getOrDie(),t.getOrDie())):O.none()},ir=function(n,t){return void 0!==n&&null!==n?t(n):O.none()},cr=function(n){return n.bind(b)},ar=function(n,t){return n?O.some(t):O.none()},lr=function(n){return void 0!==n.style&&m(n.style.getPropertyValue)},fr=function(n,t,e){if(!o(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);lr(n)&&n.style.setProperty(t,e)},sr=function(n,t){lr(n)&&n.style.removeProperty(t)},mr=function(n,t,e){var r=n.dom;fr(r,t,e)},dr=function(n,t){var e=n.dom;Ft(t,(function(n,t){fr(e,t,n)}))},pr=function(n,t){var e=n.dom,r=window.getComputedStyle(e),o=r.getPropertyValue(t);return""!==o||ke(n)?o:gr(e,t)},gr=function(n,t){return lr(n)?n.style.getPropertyValue(t):""},hr=function(n,t){var e=n.dom,r=gr(e,t);return O.from(r).filter((function(n){return n.length>0}))},vr=function(n,t){var e=n.dom;sr(e,t),rr(nr(n,"style").map(An),"")&&tr(n,"style")},br=function(n,t){var e=n.dom,r=t.dom;lr(e)&&lr(r)&&(r.style.cssText=e.style.cssText)},yr=function(n,t,e){return void 0===e&&(e=0),nr(n,t).map((function(n){return parseInt(n,10)})).getOr(e)},wr=function(n,t){return yr(n,t,1)},Cr=function(n){return se("col")(n)?yr(n,"span",1)>1:wr(n,"colspan")>1},Tr=function(n){return wr(n,"rowspan")>1},Sr=function(n,t){return parseInt(pr(n,t),10)},Dr=v(10),xr=v(10),Ar=function(n,t){return Rr(n,t,D)},Rr=function(n,t,e){return X(we(n),(function(n){return yt(n,t)?e(n)?[n]:[]:Rr(n,t,e)}))},Er=function(n,t,e){if(void 0===e&&(e=S),e(t))return O.none();if(I(n,re(t)))return O.some(t);var r=function(n){return yt(n,"table")||e(n)};return Ve(t,n.join(","),r)},Or=function(n,t){return Er(["td","th"],n,t)},Fr=function(n){return Ar(n,"th,td")},kr=function(n){return yt(n,"colgroup")?je(n,"col"):X(Ir(n),(function(n){return je(n,"col")}))},Br=function(n,t){return Xe(n,"table",t)},Mr=function(n){return Ar(n,"tr")},Ir=function(n){return Br(n).fold(v([]),(function(n){return je(n,"colgroup")}))},Nr=function(n,t){return _(n,(function(n){if("colgroup"===re(n)){var e=_(kr(n),(function(n){var t=yr(n,"span",1);return $t(n,1,t)}));return Yt(n,e,"colgroup")}e=_(Fr(n),(function(n){var t=yr(n,"rowspan",1),e=yr(n,"colspan",1);return $t(n,t,e)}));return Yt(n,e,t(n))}))},Pr=function(n){return ge(n).map((function(n){var t=re(n);return qt(t)?t:"tbody"})).getOr("tbody")},_r=function(n){var t=Mr(n),e=Ir(n),r=un(un([],e,!0),t,!0);return Nr(r,Pr)},jr=function(n,t){return Nr(n,(function(){return t}))},Lr=function(n,t,e){var r=n.cells,o=r.slice(0,t),u=r.slice(t),i=o.concat(e).concat(u);return Ur(n,i)},Wr=function(n,t,e){return Lr(n,t,[e])},zr=function(n,t,e){var r=n.cells;r[t]=e},Ur=function(n,t){return Qt(n.element,t,n.section,n.isNew)},Hr=function(n,t){var e=n.cells,r=_(e,t);return Qt(n.element,r,n.section,n.isNew)},qr=function(n,t){return n.cells[t]},Vr=function(n,t){return qr(n,t).element},Kr=function(n){return n.cells.length},$r=function(n){var t=W(n,(function(n){return"colgroup"===n.section}));return{rows:t.fail,cols:t.pass}},Xr=function(n,t,e){var r=_(n.cells,e);return Qt(t(n.element),r,n.section,!0)},Gr="data-snooker-locked-cols",Yr=function(n){return nr(n,Gr).bind((function(n){return O.from(n.match(/\d+/g))})).map((function(n){return J(n,D)}))},Jr=function(n){var t=H($r(n).rows,(function(n,t){return j(t.cells,(function(t,e){t.isLocked&&(n[e]=!0)})),n}),{}),e=Pt(t,(function(n,t){return parseInt(t,10)}));return Q(e)},Zr=function(n,t){return n+","+t},Qr=function(n,t,e){return O.from(n.access[Zr(t,e)])},no=function(n,t,e){var r=to(n,(function(n){return e(t,n.element)}));return r.length>0?O.some(r[0]):O.none()},to=function(n,t){var e=X(n.all,(function(n){return n.cells}));return z(e,t)},eo=function(n){var t={},e=0;return j(n.cells,(function(n){var r=n.colspan;P(r,(function(o){var u=e+o;t[u]=te(n.element,r,u)})),e+=r})),t},ro=function(n){var t={},e=[],r=tn(n).map((function(n){return n.element})).bind(Br),o=r.bind(Yr).getOr({}),u=0,i=0,c=0,a=W(n,(function(n){return"colgroup"===n.section})),l=a.pass,f=a.fail;j(f,(function(n){var r=[];j(n.cells,(function(n){var e=0;while(void 0!==t[Zr(c,e)])e++;for(var u=zt(o,e.toString()),a=Gt(n.element,n.rowspan,n.colspan,c,e,u),l=0;l<n.colspan;l++)for(var f=0;f<n.rowspan;f++){var s=c+f,m=e+l,d=Zr(s,m);t[d]=a,i=Math.max(i,m+1)}r.push(a)})),u++,e.push(Yt(n.element,r,n.section)),c++}));var s=en(l).map((function(n){var t=eo(n),e=ee(n.element,_t(t));return{colgroups:[e],columns:t}})).getOrThunk((function(){return{colgroups:[],columns:{}}})),m=s.columns,d=s.colgroups,p=Vt(u,i);return{grid:p,access:t,all:e,columns:m,colgroups:d}},oo=function(n){var t=_r(n);return ro(t)},uo=function(n){return X(n.all,(function(n){return n.cells}))},io=function(n){return _t(n.columns)},co=function(n){return Et(n.columns).length>0},ao=function(n,t){return O.from(n.columns[t])},lo={fromTable:oo,generate:ro,getAt:Qr,findItem:no,filterItems:to,justCells:uo,justColumns:io,hasColumns:co,getColumnAt:ao},fo=function(n,t){var e=t.column,r=t.column+t.colspan-1,o=t.row,u=t.row+t.rowspan-1;return e<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&u>=n.startRow},so=function(n,t){return t.column>=n.startCol&&t.column+t.colspan-1<=n.finishCol&&t.row>=n.startRow&&t.row+t.rowspan-1<=n.finishRow},mo=function(n,t){for(var e=!0,r=w(so,t),o=t.startRow;o<=t.finishRow;o++)for(var u=t.startCol;u<=t.finishCol;u++)e=e&&lo.getAt(n,o,u).exists(r);return e?O.some(t):O.none()},po=function(n,t){return ne(Math.min(n.row,t.row),Math.min(n.column,t.column),Math.max(n.row+n.rowspan-1,t.row+t.rowspan-1),Math.max(n.column+n.colspan-1,t.column+t.colspan-1))},go=function(n,t,e){var r=lo.findItem(n,t,St),o=lo.findItem(n,e,St);return r.bind((function(n){return o.map((function(t){return po(n,t)}))}))},ho=function(n,t,e){return go(n,t,e).bind((function(t){return mo(n,t)}))},vo=function(n,t,e,r){return lo.findItem(n,t,St).bind((function(t){var o=e>0?t.row+t.rowspan-1:t.row,u=r>0?t.column+t.colspan-1:t.column,i=lo.getAt(n,o+e,u+r);return i.map((function(n){return n.element}))}))},bo=function(n,t,e){return go(n,t,e).map((function(t){var e=lo.filterItems(n,w(fo,t));return _(e,(function(n){return n.element}))}))},yo=function(n,t){var e=function(n,t){return At(t,n)};return lo.findItem(n,t,e).map((function(n){return n.element}))},wo=function(n,t,e){return Br(n).bind((function(r){var o=Do(r);return vo(o,n,t,e)}))},Co=function(n,t,e){var r=Do(n);return bo(r,t,e)},To=function(n,t,e,r,o){var u=Do(n),i=St(n,e)?O.some(t):yo(u,t),c=St(n,o)?O.some(r):yo(u,r);return i.bind((function(n){return c.bind((function(t){return bo(u,n,t)}))}))},So=function(n,t,e){var r=Do(n);return ho(r,t,e)},Do=lo.fromTable,xo=function(n,t){var e=ge(n);e.each((function(e){e.dom.insertBefore(t.dom,n.dom)}))},Ao=function(n,t){var e=ye(n);e.fold((function(){var e=ge(n);e.each((function(n){Eo(n,t)}))}),(function(n){xo(n,t)}))},Ro=function(n,t){var e=Te(n);e.fold((function(){Eo(n,t)}),(function(e){n.dom.insertBefore(t.dom,e.dom)}))},Eo=function(n,t){n.dom.appendChild(t.dom)},Oo=function(n,t,e){Ce(n,e).fold((function(){Eo(n,t)}),(function(n){xo(n,t)}))},Fo=function(n,t){xo(n,t),Eo(t,n)},ko=function(n,t){j(t,(function(t){xo(n,t)}))},Bo=function(n,t){j(t,(function(e,r){var o=0===r?n:t[r-1];Ao(o,e)}))},Mo=function(n,t){j(t,(function(t){Eo(n,t)}))},Io=function(n){n.dom.textContent="",j(we(n),(function(n){No(n)}))},No=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Po=function(n){var t=we(n);t.length>0&&ko(n,t),No(n)},_o=function(n,t){var e=function(e){if(!n(e))throw new Error("Can only get "+t+" value of a "+t+" node");return r(e).getOr("")},r=function(t){return n(t)?O.from(t.dom.nodeValue):O.none()},o=function(e,r){if(!n(e))throw new Error("Can only set raw "+t+" value of a "+t+" node");e.dom.nodeValue=r};return{get:e,getOption:r,set:o}},jo=_o(ae,"text"),Lo=function(n){return jo.get(n)},Wo=function(n){return jo.getOption(n)},zo=function(n,t){return jo.set(n,t)},Uo=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Ho(){var n=function(n){return bt.fromDom(n.dom.cloneNode(!1))},t=function(n){return de(n).dom},e=function(n){return!!ce(n)&&("body"===re(n)||I(Uo,re(n)))},r=function(n){return!!ce(n)&&I(["br","img","hr","input"],re(n))},o=function(n){return ce(n)&&"false"===Qe(n,"contenteditable")},u=function(n,t){return n.dom.compareDocumentPosition(t.dom)},i=function(n,t){var e=er(n);Je(t,e)},c=function(n){var t=re(n);return I(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},a=function(n){return ce(n)?nr(n,"lang"):O.none()};return{up:v({selector:Ve,closest:Xe,predicate:ze,all:ve}),down:v({selector:Le,predicate:Pe}),styles:v({get:pr,getRaw:hr,set:mr,remove:vr}),attrs:v({get:Qe,set:Ye,remove:tr,copyTo:i}),insert:v({before:xo,after:Ao,afterAll:Bo,append:Eo,appendAll:Mo,prepend:Ro,wrap:Fo}),remove:v({unwrap:Po,remove:No}),create:v({nu:bt.fromTag,clone:n,text:bt.fromText}),query:v({comparePosition:u,prevSibling:be,nextSibling:ye}),property:v({children:we,name:re,parent:ge,document:t,isText:ae,isComment:ie,isElement:ce,isSpecial:c,getLanguage:a,getText:Lo,setText:zo,isBoundary:e,isEmptyTag:r,isNonEditable:o}),eq:St,is:Rt}}var qo=function(n,t,e,r){var o=e[0],u=e.slice(1);return r(n,t,o,u)},Vo=function(n,t,e){return e.length>0?qo(n,t,e,Ko):O.none()},Ko=function(n,t,e,r){var o=t(n,e);return U(r,(function(e,r){var o=t(n,r);return $o(n,e,o)}),o)},$o=function(n,t,e){return t.bind((function(t){return e.filter(w(n.eq,t))}))},Xo=function(n,t){return w(n.eq,t)},Go=function(n,t,e,r){void 0===r&&(r=S);var o=[t].concat(n.up().all(t)),u=[e].concat(n.up().all(e)),i=function(n){var t=K(n,r);return t.fold((function(){return n}),(function(t){return n.slice(0,t+1)}))},c=i(o),a=i(u),l=V(c,(function(t){return N(a,Xo(n,t))}));return{firstpath:c,secondpath:a,shared:l}},Yo=Vo,Jo=Go,Zo=Ho(),Qo=function(n,t){return Yo(Zo,(function(t,e){return n(e)}),t)},nu=function(n,t,e){return Jo(Zo,n,t,e)},tu=function(n){return Ve(n,"table")},eu=function(n,t,e){var r=function(n){return function(t){return void 0!==e&&e(t)||St(t,n)}};return St(n,t)?O.some({boxes:O.some([n]),start:n,finish:t}):tu(n).bind((function(o){return tu(t).bind((function(u){if(St(o,u))return O.some({boxes:Co(o,n,t),start:n,finish:t});if(At(o,u)){var i=_e(t,"td,th",r(o)),c=i.length>0?i[i.length-1]:t;return O.some({boxes:To(o,n,o,t,u),start:n,finish:c})}if(At(u,o)){i=_e(n,"td,th",r(u));var a=i.length>0?i[i.length-1]:n;return O.some({boxes:To(u,n,o,t,u),start:n,finish:a})}return nu(n,t).shared.bind((function(i){return Xe(i,"table",e).bind((function(e){var i=_e(t,"td,th",r(e)),c=i.length>0?i[i.length-1]:t,a=_e(n,"td,th",r(e)),l=a.length>0?a[a.length-1]:n;return O.some({boxes:To(e,n,o,t,u),start:l,finish:c})}))}))}))}))},ru=function(n,t){var e=Le(n,t);return e.length>0?O.some(e):O.none()},ou=function(n,t){return V(n,(function(n){return yt(n,t)}))},uu=function(n,t,e){return $e(n,t).bind((function(t){return $e(n,e).bind((function(n){return Qo(tu,[t,n]).map((function(e){return{first:t,last:n,table:e}}))}))}))},iu=function(n,t){return Ve(n,"table").bind((function(e){return $e(e,t).bind((function(t){return eu(t,n).bind((function(n){return n.boxes.map((function(t){return{boxes:t,start:n.start,finish:n.finish}}))}))}))}))},cu=function(n,t,e,r,o){return ou(n,o).bind((function(n){return wo(n,t,e).bind((function(n){return iu(n,r)}))}))},au=function(n,t){return ru(n,t)},lu=function(n,t,e){return uu(n,t,e).bind((function(t){var e=function(t){return St(n,t)},r="thead,tfoot,tbody,table",o=Ve(t.first,r,e),u=Ve(t.last,r,e);return o.bind((function(n){return u.bind((function(e){return St(n,e)?So(t.table,t.first,t.last):O.none()}))}))}))},fu=function(n){if(!i(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],e={};return j(n,(function(r,o){var u=Et(r);if(1!==u.length)throw new Error("one and only one name per case");var c=u[0],a=r[c];if(void 0!==e[c])throw new Error("duplicate key detected:"+c);if("cata"===c)throw new Error("cannot have a case named cata (sorry)");if(!i(a))throw new Error("case arguments must be an array");t.push(c),e[c]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var u=e.length;if(u!==a.length)throw new Error("Wrong number of arguments to case "+c+". Expected "+a.length+" ("+a+"), got "+u);var i=function(n){var r=Et(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));var o=G(t,(function(n){return I(r,n)}));if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[c].apply(null,e)};return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+t.length);var u=t[o];return u.apply(null,e)},match:i,log:function(n){console.log(n,{constructors:t,constructor:c,params:e})}}}})),e},su={generate:fu},mu=su.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),du=function(n,t,e,r){return n.fold(t,e,r)},pu=mu.none,gu=mu.multiple,hu=mu.single,vu=function(n,t,e){var r=function(){return au(n(),e).fold((function(){return t().fold(pu,hu)}),(function(n){return gu(n)}))};return{get:r}},bu=tinymce.util.Tools.resolve("tinymce.PluginManager"),yu=function(n,t){return bt.fromDom(n.dom.cloneNode(t))},wu=function(n){return yu(n,!1)},Cu=function(n){return yu(n,!0)},Tu=function(n,t){var e=bt.fromTag(t),r=er(n);return Je(e,r),e},Su=function(n,t){var e=Tu(n,t),r=we(Cu(n));return Mo(e,r),e},Du=function(n,t){var e=Tu(n,t);xo(n,e);var r=we(n);return Mo(e,r),No(n),e},xu=function(n,t){var e=function(t,e){if(!d(e)&&!e.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+e);var r=t.dom;lr(r)&&(r.style[n]=e+"px")},r=function(e){var r=t(e);if(r<=0||null===r){var o=pr(e,n);return parseFloat(o)||0}return r},o=r,u=function(n,t){return H(t,(function(t,e){var r=pr(n,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)},i=function(n,t,e){var r=u(n,e),o=t>r?t-r:0;return o};return{set:e,get:r,getOuter:o,aggregate:u,max:i}},Au=function(){var n=ut().browser;return n.isIE()||n.isEdge()},Ru=function(n,t){return On(n).getOr(t)},Eu=function(n,t,e){return Ru(pr(n,t),e)},Ou=function(n){return pr(n,"box-sizing")},Fu=function(n,t,e,r){var o=Eu(n,"padding-"+e,0),u=Eu(n,"padding-"+r,0),i=Eu(n,"border-"+e+"-width",0),c=Eu(n,"border-"+r+"-width",0);return t-o-u-i-c},ku=function(n,t){var e=n.dom,r=e.getBoundingClientRect().height||e.offsetHeight;return"border-box"===t?r:Fu(n,r,"top","bottom")},Bu=function(n,t){var e=n.dom,r=e.getBoundingClientRect().width||e.offsetWidth;return"border-box"===t?r:Fu(n,r,"left","right")},Mu=function(n){return Au()?ku(n,Ou(n)):Eu(n,"height",n.dom.offsetHeight)},Iu=function(n){return Au()?Bu(n,Ou(n)):Eu(n,"width",n.dom.offsetWidth)},Nu=function(n){return Bu(n,"content-box")},Pu=xu("width",(function(n){return n.dom.offsetWidth})),_u=function(n){return Pu.get(n)},ju=function(n){return Pu.getOuter(n)},Lu=Nu,Wu=Iu,zu=function(n,t){void 0===t&&(t=D);var e=n.grid,r=P(e.columns,b),o=P(e.rows,b);return _(r,(function(e){var r=function(){return X(o,(function(t){return lo.getAt(n,t,e).filter((function(n){return n.column===e})).toArray()}))},u=function(n){return 1===n.colspan&&t(n.element)},i=function(){return lo.getAt(n,0,e)};return Uu(r,u,i)}))},Uu=function(n,t,e){var r=n(),o=V(r,t),u=o.orThunk((function(){return O.from(r[0]).orThunk(e)}));return u.map((function(n){return n.element}))},Hu=function(n){var t=n.grid,e=P(t.rows,b),r=P(t.columns,b);return _(e,(function(t){var e=function(){return X(r,(function(e){return lo.getAt(n,t,e).filter((function(n){return n.row===t})).fold(v([]),(function(n){return[n]}))}))},o=function(n){return 1===n.rowspan},u=function(){return lo.getAt(n,t,0)};return Uu(e,o,u)}))},qu=function(n,t){if(t<0||t>=n.length-1)return O.none();var e=n[t].fold((function(){var e=Y(n.slice(0,t));return rn(e,(function(n,t){return n.map((function(n){return{value:n,delta:t+1}}))}))}),(function(n){return O.some({value:n,delta:0})})),r=n[t+1].fold((function(){var e=n.slice(t+1);return rn(e,(function(n,t){return n.map((function(n){return{value:n,delta:t+1}}))}))}),(function(n){return O.some({value:n,delta:1})}));return e.bind((function(n){return r.map((function(t){var e=t.delta+n.delta;return Math.abs(t.value-n.value)/e}))}))},Vu=function(n,t){return function(e){return"rtl"===Ku(e)?t:n}},Ku=function(n){return"rtl"===pr(n,"direction")?"rtl":"ltr"},$u=xu("height",(function(n){var t=n.dom;return ke(n)?t.getBoundingClientRect().height:t.offsetHeight})),Xu=function(n){return $u.get(n)},Gu=function(n){return $u.getOuter(n)},Yu=Mu,Ju=function(n,t){var e=function(e,r){return Ju(n+e,t+r)};return{left:n,top:t,translate:e}},Zu=Ju,Qu=function(n){var t=n.getBoundingClientRect();return Zu(t.left,t.top)},ni=function(n,t){return void 0!==n?n:void 0!==t?t:0},ti=function(n){var t=n.dom.ownerDocument,e=t.body,r=t.defaultView,o=t.documentElement;if(e===n.dom)return Zu(e.offsetLeft,e.offsetTop);var u=ni(null===r||void 0===r?void 0:r.pageYOffset,o.scrollTop),i=ni(null===r||void 0===r?void 0:r.pageXOffset,o.scrollLeft),c=ni(o.clientTop,e.clientTop),a=ni(o.clientLeft,e.clientLeft);return ei(n).translate(i-a,u-c)},ei=function(n){var t=n.dom,e=t.ownerDocument,r=e.body;return r===t?Zu(r.offsetLeft,r.offsetTop):ke(n)?Qu(t):Zu(0,0)},ri=function(n,t){return{row:n,y:t}},oi=function(n,t){return{col:n,x:t}},ui=function(n){var t=ti(n);return t.left+ju(n)},ii=function(n){return ti(n).left},ci=function(n,t){return oi(n,ii(t))},ai=function(n,t){return oi(n,ui(t))},li=function(n){return ti(n).top},fi=function(n,t){return ri(n,li(t))},si=function(n,t){return ri(n,li(t)+Gu(t))},mi=function(n,t,e){if(0===e.length)return[];var r=_(e.slice(1),(function(t,e){return t.map((function(t){return n(e,t)}))})),o=e[e.length-1].map((function(n){return t(e.length-1,n)}));return r.concat([o])},di=function(n){return-n},pi={delta:b,positions:function(n){return mi(fi,si,n)},edge:li},gi={delta:b,edge:ii,positions:function(n){return mi(ci,ai,n)}},hi={delta:di,edge:ui,positions:function(n){return mi(ai,ci,n)}},vi=Vu(gi,hi),bi={delta:function(n,t){return vi(t).delta(n,t)},positions:function(n,t){return vi(t).positions(n,t)},edge:function(n){return vi(n).edge(n)}},yi={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},wi=function(){var n="[0-9]+",t="[+-]?"+n,e="[eE]"+t,r="\\.",o=function(n){return"(?:"+n+")?"},u=["Infinity",n+r+o(n)+o(e),r+n+o(e),n+o(e)].join("|"),i="[+-]?(?:"+u+")";return new RegExp("^("+i+")(.*)$")}(),Ci=function(n,t){return N(t,(function(t){return N(yi[t],(function(t){return n===t}))}))},Ti=function(n,t){var e=O.from(wi.exec(n));return e.bind((function(n){var e=Number(n[1]),r=n[2];return Ci(r,t)?O.some({value:e,unit:r}):O.none()}))},Si=/(\d+(\.\d+)?)%/,Di=/(\d+(\.\d+)?)px|em/,xi=se("col"),Ai=function(n,t,e){var r=he(n).getOrThunk((function(){return Me(me(n))}));return t(n)/e(r)*100},Ri=function(n,t){mr(n,"width",t+"px")},Ei=function(n,t){mr(n,"width",t+"%")},Oi=function(n,t){mr(n,"height",t+"px")},Fi=function(n){return Yu(n)+"px"},ki=function(n,t,e,r){var o=Br(n).map((function(n){var r=e(n);return Math.floor(t/100*r)})).getOr(t);return r(n,o),o},Bi=function(n,t,e,r){var o=parseFloat(n);return Dn(n,"%")&&"table"!==re(t)?ki(t,o,e,r):o},Mi=function(n){var t=Fi(n);return t?Bi(t,n,Xu,Oi):Xu(n)},Ii=function(n,t,e){var r=e(n),o=wr(n,t);return r/o},Ni=function(n,t){return hr(n,t).orThunk((function(){return nr(n,t).map((function(n){return n+"px"}))}))},Pi=function(n){return Ni(n,"width")},_i=function(n){return Ni(n,"height")},ji=function(n){return Ai(n,_u,Lu)},Li=function(n){return xi(n)?_u(n):Wu(n)},Wi=function(n){return Ii(n,"rowspan",Mi)},zi=function(n){var t=Pi(n);return t.bind((function(n){return Ti(n,["fixed","relative","empty"])}))},Ui=function(n,t,e){mr(n,"width",t+e)},Hi=function(n){return _u(n)+"px"},qi=function(n){return Ai(n,_u,Lu)+"%"},Vi=function(n){return Pi(n).exists((function(n){return Si.test(n)}))},Ki=function(n){return Pi(n).exists((function(n){return Di.test(n)}))},$i=function(n){return Pi(n).isNone()},Xi=v(Si),Gi=se("col"),Yi=function(n){return Pi(n).getOrThunk((function(){return Li(n)+"px"}))},Ji=function(n){return _i(n).getOrThunk((function(){return Wi(n)+"px"}))},Zi=function(n){return _(lo.justColumns(n),(function(n){return O.from(n.element)}))},Qi=function(n){var t=ut().browser,e=t.isChrome()||t.isFirefox();return!Gi(n)||e},nc=function(n,t,e,r,o,u){return n.filter(r).fold((function(){return u(qu(e,t))}),(function(n){return o(n)}))},tc=function(n,t,e,r){var o=zu(n),u=lo.hasColumns(n)?Zi(n):o,i=[O.some(bi.edge(t))].concat(_(bi.positions(o,t),(function(n){return n.map((function(n){return n.x}))}))),c=C(Cr);return _(u,(function(n,t){return nc(n,t,i,c,(function(n){if(Qi(n))return e(n);var u=ir(o[t],b);return nc(u,t,i,c,(function(n){return r(O.some(_u(n)))}),r)}),r)}))},ec=function(n){return n.map((function(n){return n+"px"})).getOr("")},rc=function(n,t){return tc(n,t,Yi,ec)},oc=function(n,t,e){return tc(n,t,ji,(function(n){return n.fold((function(){return e.minCellWidth()}),(function(n){return n/e.pixelWidth()*100}))}))},uc=function(n,t,e){return tc(n,t,Li,(function(n){return n.getOrThunk(e.minCellWidth)}))},ic=function(n,t,e,r,o){var u=Hu(n),i=[O.some(e.edge(t))].concat(_(e.positions(u,t),(function(n){return n.map((function(n){return n.y}))})));return _(u,(function(n,t){return nc(n,t,i,C(Tr),r,o)}))},cc=function(n,t,e){return ic(n,t,e,Wi,(function(n){return n.getOrThunk(xr)}))},ac=function(n,t,e){return ic(n,t,e,Ji,ec)},lc=function(n,t){return function(){return ke(n)?t(n):parseFloat(hr(n,"width").getOr("0"))}},fc=function(n){var t=lc(n,_u),e=v(0),r=function(t,e){return uc(t,n,e)};return{width:t,pixelWidth:t,getWidths:r,getCellDelta:e,singleColumnWidth:v([0]),minCellWidth:e,setElementWidth:p,adjustTableWidth:p,isRelative:!0,label:"none"}},sc=function(n){var t=lc(n,(function(n){return parseFloat(qi(n))})),e=lc(n,_u),r=function(n){return n/e()*100},o=function(n,t){return[100-n]},u=function(){return Dr()/e()*100},i=function(e){var r=t(),o=e/100*r,u=r+o;Ei(n,u)},c=function(t,e){return oc(t,n,e)};return{width:t,pixelWidth:e,getWidths:c,getCellDelta:r,singleColumnWidth:o,minCellWidth:u,setElementWidth:Ei,adjustTableWidth:i,isRelative:!0,label:"percent"}},mc=function(n){var t=lc(n,_u),e=b,r=function(n,t){var e=Math.max(Dr(),n+t);return[e-n]},o=function(e){var r=t()+e;Ri(n,r)},u=function(t,e){return uc(t,n,e)};return{width:t,pixelWidth:t,getWidths:u,getCellDelta:e,singleColumnWidth:r,minCellWidth:Dr,setElementWidth:Ri,adjustTableWidth:o,isRelative:!1,label:"pixel"}},dc=function(n,t){var e=Xi().exec(t);return null!==e?sc(n):mc(n)},pc=function(n){var t=Pi(n);return t.fold((function(){return fc(n)}),(function(t){return dc(n,t)}))},gc={getTableSize:pc,pixelSize:mc,percentageSize:sc,noneSize:fc},hc=function(n,t,e,r,o,u){return{minRow:n,minCol:t,maxRow:e,maxCol:r,allCells:o,selectedCells:u}},vc=function(n,t){var e=n.grid.columns,r=n.grid.rows,o=r,u=e,i=0,c=0,a=[],l=[];return Ft(n.access,(function(n){if(a.push(n),t(n)){l.push(n);var e=n.row,r=e+n.rowspan-1,f=n.column,s=f+n.colspan-1;e<o?o=e:r>i&&(i=r),f<u?u=f:s>c&&(c=s)}})),hc(o,u,i,c,a,l)},bc=function(n,t,e){var r=n[e].element,o=bt.fromTag("td");Eo(o,bt.fromTag("br"));var u=t?Eo:Ro;u(r,o)},yc=function(n,t,e,r){for(var o=t.grid.columns,u=t.grid.rows,i=0;i<u;i++)for(var c=!1,a=0;a<o;a++)if(!(i<e.minRow||i>e.maxRow||a<e.minCol||a>e.maxCol)){var l=lo.getAt(t,i,a).filter(r).isNone();l?bc(n,c,i):c=!0}},wc=function(n,t,e,r){Ft(e.columns,(function(n){(n.column<t.minCol||n.column>t.maxCol)&&No(n.element)}));var o=z(Ar(n,"tr"),(function(n){return 0===n.dom.childElementCount}));j(o,No),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||j(Ar(n,"th,td"),(function(n){tr(n,"rowspan"),tr(n,"colspan")})),tr(n,Gr),tr(n,"data-snooker-col-series");var u=gc.getTableSize(n);u.adjustTableWidth(r)},Cc=function(n,t,e,r){if(0===r.minCol&&t.grid.columns===r.maxCol+1)return 0;var o=uc(t,n,e),u=H(o,(function(n,t){return n+t}),0),i=H(o.slice(r.minCol,r.maxCol+1),(function(n,t){return n+t}),0),c=i/u*e.pixelWidth(),a=c-e.pixelWidth();return e.getCellDelta(a)},Tc=function(n,t){var e=function(n){return yt(n.element,t)},r=Cu(n),o=_r(r),u=gc.getTableSize(n),i=lo.generate(o),c=vc(i,e),a="th:not("+t+"),td:not("+t+")",l=Rr(r,"th,td",(function(n){return yt(n,a)}));j(l,No),yc(o,i,c,e);var f=lo.fromTable(n),s=Cc(n,f,u,c);return wc(r,c,i,s),r},Sc=" ",Dc=function(n){return"img"===re(n)?1:Wo(n).fold((function(){return we(n).length}),(function(n){return n.length}))},xc=function(n){return Wo(n).filter((function(n){return 0!==n.trim().length||n.indexOf(Sc)>-1})).isSome()},Ac=["img","br"],Rc=function(n){var t=xc(n);return t||I(Ac,re(n))},Ec=function(n){return qe(n,Rc)},Oc=function(n){return Fc(n,Rc)},Fc=function(n,t){var e=function(n){for(var r=we(n),o=r.length-1;o>=0;o--){var u=r[o];if(t(u))return O.some(u);var i=e(u);if(i.isSome())return i}return O.none()};return e(n)},kc={scope:["row","col"]},Bc=function(n){return function(){var t=bt.fromTag("td",n.dom);return Eo(t,bt.fromTag("br",n.dom)),t}},Mc=function(n){return function(){return bt.fromTag("col",n.dom)}},Ic=function(n){return function(){return bt.fromTag("colgroup",n.dom)}},Nc=function(n){return function(){return bt.fromTag("tr",n.dom)}},Pc=function(n,t,e){var r=Su(n,t);return Ft(e,(function(n,t){null===n?tr(r,t):Ye(r,t,n)})),r},_c=function(n){return n},jc=function(n,t,e){var r=Ec(n);return r.map((function(r){var o=e.join(","),u=_e(r,o,(function(t){return St(t,n)}));return U(u,(function(n,t){var e=wu(t);return tr(e,"contenteditable"),Eo(n,e),e}),t)})).getOr(t)},Lc=function(n,t){Ft(kc,(function(e,r){return nr(n,r).filter((function(n){return I(e,n)})).each((function(n){return Ye(t,r,n)}))}))},Wc=function(n,t,e){var r=function(n,t){br(n.element,t),vr(t,"height"),1!==n.colspan&&vr(t,"width")},o=function(o){var u=bt.fromTag(re(o.element),t.dom),i=e.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=i.length>0?jc(o.element,u,i):u;return Eo(c,bt.fromTag("br")),r(o,u),Lc(o.element,u),n(o.element,u),u},u=function(e){var o=bt.fromTag(re(e.element),t.dom);return r(e,o),n(e.element,o),o};return{col:u,colgroup:Ic(t),row:Nc(t),cell:o,replace:Pc,colGap:Mc(t),gap:Bc(t)}},zc=function(n){return{col:Mc(n),colgroup:Ic(n),row:Nc(n),cell:Bc(n),replace:_c,colGap:Mc(n),gap:Bc(n)}},Uc=function(n,t){var e=t||document,r=e.createElement("div");return r.innerHTML=n,we(bt.fromDom(r))},Hc=function(n){return _(n,bt.fromDom)},qc=function(n){return n.nodeName.toLowerCase()},Vc=function(n){return bt.fromDom(n.getBody())},Kc=function(n){return n.getBoundingClientRect().width},$c=function(n){return n.getBoundingClientRect().height},Xc=function(n){return function(t){return St(t,Vc(n))}},Gc=function(n){return n?n.replace(/px$/,""):""},Yc=function(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n},Jc=function(n){tr(n,"data-mce-style");var t=function(n){return tr(n,"data-mce-style")};j(Fr(n),t),j(kr(n),t),j(Mr(n),t)},Zc=function(n,t){var e=n.dom.getStyle(t,"width")||n.dom.getAttrib(t,"width");return O.from(e).filter(Rn)},Qc=function(n){return/^(\d+(\.\d+)?)%$/.test(n)},na=function(n){return/^(\d+(\.\d+)?)px$/.test(n)},ta=function(n){return bt.fromDom(n.selection.getStart())},ea=function(n){return bt.fromDom(n.selection.getEnd())},ra=function(n){return du(n.get(),v([]),b,Z)},oa=function(n){var t=function(n,t){return nr(n,t).exists((function(n){return parseInt(n,10)>1}))},e=function(n){return t(n,"rowspan")||t(n,"colspan")},r=ra(n);return r.length>0&&G(r,e)?O.some(r):O.none()},ua=function(n,t,e){return du(t.get(),O.none,(function(t){return t.length<=1?O.none():lu(n,e.firstSelectedSelector,e.lastSelectedSelector).map((function(n){return{bounds:n,cells:t}}))}),O.none)},ia="data-mce-selected",ca="td["+ia+"],th["+ia+"]",aa="["+ia+"]",la="data-mce-first-selected",fa="td["+la+"],th["+la+"]",sa="data-mce-last-selected",ma="td["+sa+"],th["+sa+"]",da=aa,pa={selected:ia,selectedSelector:ca,firstSelected:la,firstSelectedSelector:fa,lastSelected:sa,lastSelectedSelector:ma},ga=function(n){return{element:n,mergable:O.none(),unmergable:O.none(),selection:[n]}},ha=function(n,t,e){return{element:e,mergable:ua(t,n,pa),unmergable:oa(n),selection:ra(n)}},va=function(n,t,e){return{element:n,clipboard:t,generators:e}},ba=function(n,t,e,r){return{selection:ra(n),clipboard:e,generators:r}},ya=function(n){return Br(n).bind((function(n){return au(n,pa.firstSelectedSelector)})).fold(v(n),(function(n){return n[0]}))},wa=function(n){return function(t,e){var r=re(t),o="col"===r||"colgroup"===r?ya(t):t;return Xe(o,n,e)}},Ca=wa("th,td,caption"),Ta=wa("th,td"),Sa=function(n){return ra(n)},Da=function(n,t){var e=Ta(n),r=e.bind((function(n){return Br(n)})).map((function(n){return Mr(n)}));return ur(e,r,(function(n,e){return z(e,(function(e){return N(Hc(e.dom.cells),(function(e){return"1"===Qe(e,t)||St(e,n)}))}))})).getOr([])},xa=function(n){return Br(n[0]).map((function(n){var t=Tc(n,da);return Jc(t),[t]}))},Aa=function(n,t){return _(t,(function(t){return n.selection.serializer.serialize(t.dom,{})})).join("")},Ra=function(n){return _(n,(function(n){return n.dom.innerText})).join("")},Ea=function(n,t,e){n.on("BeforeGetContent",(function(e){var r=function(t){e.preventDefault(),xa(t).each((function(t){e.content="text"===e.format?Ra(t):Aa(n,t)}))};!0===e.selection&&du(t.get(),p,r,p)})),n.on("BeforeSetContent",(function(r){if(!0===r.selection&&!0===r.paste){var o=Sa(t);tn(o).each((function(t){Br(t).each((function(o){var u=z(Uc(r.content),(function(n){return"meta"!==re(n)})),i=se("table");if(1===u.length&&i(u[0])){r.preventDefault();var c=bt.fromDom(n.getDoc()),a=zc(c),l=va(t,u[0],a);e.pasteCells(o,l).each((function(){n.focus()}))}}))}))}}))},Oa=su.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Fa=on({},Oa),ka=function(n,t){return 0===n.length?Fa.none():1===n.length?Fa.only(0):0===t?Fa.left(0,1):t===n.length-1?Fa.right(t-1,t):t>0&&t<n.length-1?Fa.middle(t-1,t,t+1):Fa.none()},Ba=function(n,t,e,r,o){var u=n.slice(0),i=ka(n,t),c=v(_(u,v(0))),a=function(n){return r.singleColumnWidth(u[n],e)},l=function(n,t){return o.calcLeftEdgeDeltas(u,n,t,e,r.minCellWidth(),r.isRelative)},f=function(n,t,i){return o.calcMiddleDeltas(u,n,t,i,e,r.minCellWidth(),r.isRelative)},s=function(n,t){return o.calcRightEdgeDeltas(u,n,t,e,r.minCellWidth(),r.isRelative)};return i.fold(c,a,l,f,s)},Ma=function(n,t,e){for(var r=0,o=n;o<t;o++)r+=void 0!==e[o]?e[o]:0;return r},Ia=function(n,t){var e=lo.justCells(n);return _(e,(function(n){var e=Ma(n.column,n.column+n.colspan,t);return{element:n.element,width:e,colspan:n.colspan}}))},Na=function(n,t){var e=lo.justColumns(n);return _(e,(function(n,e){return{element:n.element,width:t[e],colspan:n.colspan}}))},Pa=function(n,t){var e=lo.justCells(n);return _(e,(function(n){var e=Ma(n.row,n.row+n.rowspan,t);return{element:n.element,height:e,rowspan:n.rowspan}}))},_a=function(n,t){return _(n.all,(function(n,e){return{element:n.element,height:t[e]}}))},ja=function(n){return U(n,(function(n,t){return n+t}),0)},La=function(n,t){return lo.hasColumns(n)?Na(n,t):Ia(n,t)},Wa=function(n,t,e){var r=La(n,t);j(r,(function(n){e.setElementWidth(n.element,n.width)}))},za=function(n,t,e,r,o){var u=lo.fromTable(n),i=o.getCellDelta(t),c=o.getWidths(u,o),a=e===u.grid.columns-1,l=r.clampTableDelta(c,e,i,o.minCellWidth(),a),f=Ba(c,e,l,o,r),s=_(f,(function(n,t){return n+c[t]}));Wa(u,s,o),r.resizeTable(o.adjustTableWidth,l,a)},Ua=function(n,t,e,r){var o=lo.fromTable(n),u=cc(o,n,r),i=_(u,(function(n,r){return e===r?Math.max(t+n,xr()):n})),c=Pa(o,i),a=_a(o,i);j(a,(function(n){Oi(n.element,n.height)})),j(c,(function(n){Oi(n.element,n.height)}));var l=ja(i);Oi(n,l)},Ha=function(n,t,e,r,o){var u=lo.generate(t),i=r.getWidths(u,r),c=r.pixelWidth(),a=o.calcRedestributedWidths(i,c,e.pixelDelta,r.isRelative),l=a.newSizes,f=a.delta;Wa(u,l,r),r.adjustTableWidth(f)},qa=function(n,t,e,r){var o=lo.generate(t),u=r.getWidths(o,r);Wa(o,u,r)},Va=function(n){return _(n,v(0))},Ka=function(n,t,e,r,o){return o(n.slice(0,t)).concat(r).concat(o(n.slice(e)))},$a=function(n){return function(t,e,r,o){if(n(r)){var u=Math.max(o,t[e]-Math.abs(r)),i=Math.abs(u-t[e]);return r>=0?i:-i}return r}},Xa=$a((function(n){return n<0})),Ga=$a(D),Ya=function(){var n=function(n,t,e,r,o){var u=Xa(n,t,r,o);return Ka(n,t,e+1,[u,0],Va)},t=function(n,t,e,r){var o=(100+e)/100,u=Math.max(r,(n[t]+e)/o);return _(n,(function(n,e){var r=e===t?u:n/o;return r-n}))},e=function(e,r,o,u,i,c){return c?t(e,r,u,i):n(e,r,o,u,i)},r=function(n,t,r,o,u,i,c){return e(n,r,o,u,i,c)},o=function(n,t){return n(t)},u=function(n,e,r,o,u,i){if(i)return t(n,r,o,u);var c=Xa(n,r,o,u);return Va(n.slice(0,r)).concat([c])},i=function(n,t,e,r){if(r){var o=t+e,u=o/t,i=_(n,(function(n){return n/u}));return{delta:100*u-100,newSizes:i}}return{delta:e,newSizes:n}};return{resizeTable:o,clampTableDelta:Xa,calcLeftEdgeDeltas:e,calcMiddleDeltas:r,calcRightEdgeDeltas:u,calcRedestributedWidths:i}},Ja=function(){var n=function(n,t,e,r,o){var u=r>=0?e:t,i=Ga(n,u,r,o);return Ka(n,t,e+1,[i,-i],Va)},t=function(t,e,r,o,u,i){return n(t,r,o,u,i)},e=function(n,t,e){e&&n(t)},r=function(n,t,e,r,o,u){if(u)return Va(n);var i=r/n.length;return _(n,v(i))},o=function(n,t,e,r,o){if(o){if(e>=0)return e;var u=H(n,(function(n,t){return n+t-r}),0);return Math.max(-u,e)}return Xa(n,t,e,r)},u=function(n,t,e,r){return{delta:0,newSizes:n}};return{resizeTable:e,clampTableDelta:o,calcLeftEdgeDeltas:n,calcMiddleDeltas:t,calcRightEdgeDeltas:r,calcRedestributedWidths:u}},Za=function(n,t){var e=O.from(n.dom.documentElement).map(bt.fromDom).getOr(n);return{parent:v(e),view:v(n),origin:v(Zu(0,0)),isResizable:t}},Qa=function(n,t,e){var r=function(){return ti(t)};return{parent:v(t),view:v(n),origin:r,isResizable:e}},nl=function(n,t,e){return{parent:v(t),view:v(n),origin:v(Zu(0,0)),isResizable:e}},tl={only:Za,detached:Qa,body:nl},el=su.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),rl=function(n,t,e){var r=e.substring(0,e.length-n.length),o=parseFloat(r);return r===o.toString()?t(o):el.invalid(e)},ol=function(n){return Dn(n,"%")?rl("%",el.percent,n):Dn(n,"px")?rl("px",el.pixels,n):el.invalid(n)},ul=on(on({},el),{from:ol}),il=function(n,t){return _(n,(function(n){var e=ul.from(n);return e.fold((function(){return n}),(function(n){var e=n/t*100;return e+"%"}),(function(n){return n+"%"}))}))},cl=function(n,t,e){var r=e/t;return _(n,(function(n){var t=ul.from(n);return t.fold((function(){return n}),(function(n){return n*r+"px"}),(function(n){return n/100*e+"px"}))}))},al=function(n,t){var e=n.fold((function(){return v("")}),(function(n){var e=n/t;return v(e+"px")}),(function(){var n=100/t;return v(n+"%")}));return P(t,e)},ll=function(n,t,e){return n.fold((function(){return t}),(function(n){return cl(t,e,n)}),(function(n){return il(t,e)}))},fl=function(n,t,e){var r=ul.from(e),o=G(n,(function(n){return"0px"===n}))?al(r,n.length):ll(r,n,t);return pl(o)},sl=function(n,t){return 0===n.length?t:U(n,(function(n,t){return ul.from(t).fold(v(0),b,b)+n}),0)},ml=function(n,t){var e=Math.floor(n);return{value:e+t,remainder:n-e}},dl=function(n,t){return ul.from(n).fold(v(n),(function(n){return n+t+"px"}),(function(n){return n+t+"%"}))},pl=function(n){if(0===n.length)return n;var t=U(n,(function(n,t){var e=ul.from(t).fold((function(){return{value:t,remainder:0}}),(function(n){return ml(n,"px")}),(function(n){return{value:n+"%",remainder:0}}));return{output:[e.value].concat(n.output),remainder:n.remainder+e.remainder}}),{output:[],remainder:0}),e=t.output;return e.slice(0,e.length-1).concat([dl(e[e.length-1],Math.round(t.remainder))])},gl=ul.from,hl=function(n,t,e){j(t,(function(t){var r=n.slice(t.column,t.colspan+t.column),o=sl(r,Dr());mr(t.element,"width",o+e)}))},vl=function(n,t,e){j(t,(function(t,r){var o=sl([n[r]],Dr());mr(t.element,"width",o+e)}))},bl=function(n,t,e,r){j(e,(function(t){var e=n.slice(t.row,t.rowspan+t.row),o=sl(e,xr());mr(t.element,"height",o+r)})),j(t,(function(t,e){mr(t.element,"height",n[e])}))},yl=function(n){return gl(n).fold(v("px"),v("px"),v("%"))},wl=function(n,t,e){var r=lo.fromTable(n),o=r.all,u=lo.justCells(r),i=lo.justColumns(r);t.each((function(t){var e=yl(t),o=_u(n),c=rc(r,n),a=fl(c,o,t);lo.hasColumns(r)?vl(a,i,e):hl(a,u,e),mr(n,"width",t)})),e.each((function(t){var e=yl(t),i=Xu(n),c=ac(r,n,pi),a=fl(c,i,t);bl(a,o,u,e),mr(n,"height",t)}))},Cl=Vi,Tl=Ki,Sl=$i,Dl=function(n){var t=lo.fromTable(n);return t.grid},xl=function(n){var t=[],e=function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");t.push(n)},r=function(n){t=z(t,(function(t){return t!==n}))},o=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o={};j(n,(function(n,t){o[n]=e[t]})),j(t,(function(n){n(o)}))};return{bind:e,unbind:r,trigger:o}},Al=function(n){var t=kt(n,(function(n){return{bind:n.bind,unbind:n.unbind}})),e=kt(n,(function(n){return n.trigger}));return{registry:t,trigger:e}},Rl=function(n,t){var e=null,r=function(){c(e)||(clearTimeout(e),e=null)},o=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];r(),e=setTimeout((function(){e=null,n.apply(null,o)}),t)};return{cancel:r,throttle:o}},El=function(n){return n.slice(0).sort()},Ol=function(n,t){throw new Error("All required keys ("+El(n).join(", ")+") were not specified. Specified keys were: "+El(t).join(", ")+".")},Fl=function(n){throw new Error("Unsupported keys for object: "+El(n).join(", "))},kl=function(n,t){if(!i(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");j(t,(function(t){if(!o(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.")}))},Bl=function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+El(n).join(", ")+") were not.")},Ml=function(n){var t=El(n),e=V(t,(function(n,e){return e<t.length-1&&n===t[e+1]}));e.each((function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))},Il=function(n,t){return Nl(n,t,{validate:m,label:"function"})},Nl=function(n,t,e){if(0===t.length)throw new Error("You must specify at least one required field.");return kl("required",t),Ml(t),function(r){var o=Et(r),u=G(t,(function(n){return I(o,n)}));u||Ol(t,o),n(t,o);var i=z(t,(function(n){return!e.validate(r[n],n)}));return i.length>0&&Bl(i,e.label),r}},Pl=function(n,t){var e=z(t,(function(t){return!I(n,t)}));e.length>0&&Fl(e)},_l=function(n){return Il(Pl,n)},jl=_l(["compare","extract","mutate","sink"]),Ll=_l(["element","start","stop","destroy"]),Wl=_l(["forceDrop","drop","move","delayDrop"]),zl=function(){var n=O.none(),t=function(){n=O.none()},e=function(t,e){var r=n.map((function(n){return t.compare(n,e)}));return n=O.some(e),r},r=function(n,t){var r=t.extract(n);r.each((function(n){var r=e(t,n);r.each((function(n){o.trigger.move(n)}))}))},o=Al({move:xl(["info"])});return{onEvent:r,reset:t,events:o.registry}},Ul=function(){var n=Al({move:xl(["info"])});return{onEvent:p,reset:p,events:n.registry}},Hl=function(){var n=Ul(),t=zl(),e=n,r=function(){e.reset(),e=t},o=function(){e.reset(),e=n},u=function(n,t){e.onEvent(n,t)},i=function(){return e===t};return{on:r,off:o,isOn:i,onEvent:u,events:t.events}},ql=function(n,t,e){var r=!1,o=Al({start:xl([]),stop:xl([])}),u=Hl(),i=function(){d.stop(),u.isOn()&&(u.off(),o.trigger.stop())},c=Rl(i,200),a=function(n){d.start(n),u.on(),o.trigger.start()},l=function(n){c.cancel(),u.onEvent(n,t)};u.events.move.bind((function(e){t.mutate(n,e.info)}));var f=function(){r=!0},s=function(){r=!1},m=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r&&n.apply(null,t)}},d=t.sink(Wl({forceDrop:i,drop:m(i),move:m(l),delayDrop:m(c.throttle)}),e),p=function(){d.destroy()};return{element:d.element,go:a,on:f,off:s,destroy:p,events:o.registry}},Vl=function(n,t,e,r,o,u,i){return{target:n,x:t,y:e,stop:r,prevent:o,kill:u,raw:i}},Kl=function(n){var t=bt.fromDom(Oe(n).getOr(n.target)),e=function(){return n.stopPropagation()},r=function(){return n.preventDefault()},o=g(r,e);return Vl(t,n.clientX,n.clientY,e,r,o,n)},$l=function(n,t){return function(e){n(e)&&t(Kl(e))}},Xl=function(n,t,e,r,o){var u=$l(e,r);return n.dom.addEventListener(t,u,o),{unbind:w(Yl,n,t,u,o)}},Gl=function(n,t,e,r){return Xl(n,t,e,r,!1)},Yl=function(n,t,e,r){n.dom.removeEventListener(t,e,r)},Jl=D,Zl=function(n,t,e){return Gl(n,t,Jl,e)},Ql=Kl,nf=function(n,t){var e=Qe(n,t);return void 0===e||""===e?[]:e.split(" ")},tf=function(n,t,e){var r=nf(n,t),o=r.concat([e]);return Ye(n,t,o.join(" ")),!0},ef=function(n,t,e){var r=z(nf(n,t),(function(n){return n!==e}));return r.length>0?Ye(n,t,r.join(" ")):tr(n,t),!1},rf=function(n){return void 0!==n.dom.classList},of=function(n){return nf(n,"class")},uf=function(n,t){return tf(n,"class",t)},cf=function(n,t){return ef(n,"class",t)},af=function(n,t){rf(n)?n.dom.classList.add(t):uf(n,t)},lf=function(n){var t=rf(n)?n.dom.classList:of(n);0===t.length&&tr(n,"class")},ff=function(n,t){if(rf(n)){var e=n.dom.classList;e.remove(t)}else cf(n,t);lf(n)},sf=function(n,t){return rf(n)&&n.dom.classList.contains(t)},mf=function(n){var t=n.replace(/\./g,"-"),e=function(n){return t+"-"+n};return{resolve:e}},df=mf("ephox-dragster"),pf=df.resolve,gf=function(n){var t=on({layerClass:pf("blocker")},n),e=bt.fromTag("div");Ye(e,"role","presentation"),dr(e,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),af(e,pf("blocker")),af(e,t.layerClass);var r=v(e),o=function(){No(e)};return{element:r,destroy:o}},hf=function(n,t){return Zu(t.left-n.left,t.top-n.top)},vf=function(n){return O.some(Zu(n.x,n.y))},bf=function(n,t){n.mutate(t.left,t.top)},yf=function(n,t){var e=gf(t),r=Zl(e.element(),"mousedown",n.forceDrop),o=Zl(e.element(),"mouseup",n.drop),u=Zl(e.element(),"mousemove",n.move),i=Zl(e.element(),"mouseout",n.delayDrop),c=function(){e.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()},a=function(n){Eo(n,e.element())},l=function(){No(e.element())};return Ll({element:e.element,start:a,stop:l,destroy:c})},wf=jl({compare:hf,extract:vf,sink:yf,mutate:bf}),Cf=function(n,t){void 0===t&&(t={});var e=void 0!==t.mode?t.mode:wf;return ql(n,e,t)},Tf=function(n){return Xe(n,"[contenteditable]")},Sf=function(n,t){return void 0===t&&(t=!1),!ut().browser.isIE()&&ke(n)?n.dom.isContentEditable:Tf(n).fold(v(t),(function(n){return"true"===Df(n)}))},Df=function(n){return n.dom.contentEditable},xf=mf("ephox-snooker"),Af=xf.resolve,Rf=function(){var n=Al({drag:xl(["xDelta","yDelta"])}),t=function(t,e){n.trigger.drag(t,e)};return{mutate:t,events:n.registry}},Ef=function(){var n=Al({drag:xl(["xDelta","yDelta","target"])}),t=O.none(),e=Rf();e.events.drag.bind((function(e){t.each((function(t){n.trigger.drag(e.xDelta,e.yDelta,t)}))}));var r=function(n){t=O.some(n)},o=function(){return t};return{assign:r,get:o,mutate:e.mutate,events:n.registry}},Of=function(n,t,e,r,o){var u=bt.fromTag("div");return dr(u,{position:"absolute",left:t-r/2+"px",top:e+"px",height:o+"px",width:r+"px"}),Je(u,{"data-column":n,role:"presentation"}),u},Ff=function(n,t,e,r,o){var u=bt.fromTag("div");return dr(u,{position:"absolute",left:t+"px",top:e-o/2+"px",height:o+"px",width:r+"px"}),Je(u,{"data-row":n,role:"presentation"}),u},kf=Af("resizer-bar"),Bf=Af("resizer-rows"),Mf=Af("resizer-cols"),If=7,Nf=function(n,t){return X(n.all,(function(n,e){return t(n.element)?[e]:[]}))},Pf=function(n,t){var e=[];return P(n.grid.columns,(function(r){var o=lo.getColumnAt(n,r).map((function(n){return n.element}));o.forall(t)&&e.push(r)})),z(e,(function(e){var r=lo.filterItems(n,(function(n){return n.column===e}));return G(r,(function(n){return t(n.element)}))}))},_f=function(n){var t=Le(n.parent(),"."+kf);j(t,No)},jf=function(n,t,e){var r=n.origin();j(t,(function(t){t.each((function(t){var o=e(r,t);af(o,kf),Eo(n.parent(),o)}))}))},Lf=function(n,t,e,r){jf(n,t,(function(n,t){var o=Of(t.col,t.x-n.left,e.top-n.top,If,r);return af(o,Mf),o}))},Wf=function(n,t,e,r){jf(n,t,(function(n,t){var o=Ff(t.row,e.left-n.left,t.y-n.top,r,If);return af(o,Bf),o}))},zf=function(n,t,e,r,o){var u=ti(e),i=t.isResizable,c=r.length>0?pi.positions(r,e):[],a=c.length>0?Nf(n,i):[],l=z(c,(function(n,t){return N(a,(function(n){return t===n}))}));Wf(t,l,u,ju(e));var f=o.length>0?bi.positions(o,e):[],s=f.length>0?Pf(n,i):[],m=z(f,(function(n,t){return N(s,(function(n){return t===n}))}));Lf(t,m,u,Gu(e))},Uf=function(n,t){if(_f(n),n.isResizable(t)){var e=lo.fromTable(t),r=Hu(e),o=zu(e);zf(e,n,t,r,o)}},Hf=function(n,t){var e=Le(n.parent(),"."+kf);j(e,t)},qf=function(n){Hf(n,(function(n){mr(n,"display","none")}))},Vf=function(n){Hf(n,(function(n){mr(n,"display","block")}))},Kf=function(n){return sf(n,Bf)},$f=function(n){return sf(n,Mf)},Xf=Af("resizer-bar-dragging"),Gf=function(n){var t=Ef(),e=Cf(t,{}),r=O.none(),o=function(n,t){return O.from(Qe(n,t))};t.events.drag.bind((function(n){o(n.target,"data-row").each((function(t){var e=Sr(n.target,"top");mr(n.target,"top",e+n.yDelta+"px")})),o(n.target,"data-column").each((function(t){var e=Sr(n.target,"left");mr(n.target,"left",e+n.xDelta+"px")}))}));var u=function(n,t){var e=Sr(n,t),r=yr(n,"data-initial-"+t,0);return e-r};e.events.stop.bind((function(){t.get().each((function(t){r.each((function(e){o(t,"data-row").each((function(n){var r=u(t,"top");tr(t,"data-initial-top"),d.trigger.adjustHeight(e,r,parseInt(n,10))})),o(t,"data-column").each((function(n){var r=u(t,"left");tr(t,"data-initial-left"),d.trigger.adjustWidth(e,r,parseInt(n,10))})),Uf(n,e)}))}))}));var i=function(r,o){d.trigger.startAdjust(),t.assign(r),Ye(r,"data-initial-"+o,Sr(r,o)),af(r,Xf),mr(r,"opacity","0.2"),e.go(n.parent())},c=Zl(n.parent(),"mousedown",(function(n){Kf(n.target)&&i(n.target,"top"),$f(n.target)&&i(n.target,"left")})),a=function(t){return St(t,n.view())},l=function(n){return Xe(n,"table",a).filter(Sf)},f=Zl(n.view(),"mouseover",(function(t){l(t.target).fold((function(){ke(t.target)&&_f(n)}),(function(t){r=O.some(t),Uf(n,t)}))})),s=function(){c.unbind(),f.unbind(),e.destroy(),_f(n)},m=function(t){Uf(n,t)},d=Al({adjustHeight:xl(["table","delta","row"]),adjustWidth:xl(["table","delta","column"]),startAdjust:xl([])});return{destroy:s,refresh:m,on:e.on,off:e.off,hideBars:w(qf,n),showBars:w(Vf,n),events:d.registry}},Yf=function(n,t,e){var r=pi,o=bi,u=Gf(n),i=Al({beforeResize:xl(["table","type"]),afterResize:xl(["table","type"]),startDrag:xl([])});return u.events.adjustHeight.bind((function(n){var t=n.table;i.trigger.beforeResize(t,"row");var e=r.delta(n.delta,t);Ua(t,e,n.row,r),i.trigger.afterResize(t,"row")})),u.events.startAdjust.bind((function(n){i.trigger.startDrag()})),u.events.adjustWidth.bind((function(n){var r=n.table;i.trigger.beforeResize(r,"col");var u=o.delta(n.delta,r),c=e(r);za(r,u,n.column,t,c),i.trigger.afterResize(r,"col")})),{on:u.on,off:u.off,hideBars:u.hideBars,showBars:u.showBars,destroy:u.destroy,events:i.registry}},Jf={create:Yf},Zf=function(n,t){return n.fire("newrow",{node:t})},Qf=function(n,t){return n.fire("newcell",{node:t})},ns=function(n,t,e,r,o){n.fire("ObjectResizeStart",{target:t,width:e,height:r,origin:o})},ts=function(n,t,e,r,o){n.fire("ObjectResized",{target:t,width:e,height:r,origin:o})},es=function(n,t,e,r,o){n.fire("TableSelectionChange",{cells:t,start:e,finish:r,otherCells:o})},rs=function(n){n.fire("TableSelectionClear")},os=function(n,t,e){n.fire("TableModified",on(on({},e),{table:t}))},us={structure:!1,style:!0},is={structure:!0,style:!1},cs={structure:!0,style:!0},as="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",ls={"border-collapse":"collapse",width:"100%"},fs=P(5,(function(n){var t=n+1+"px";return{title:t,value:t}})),ss=_(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(function(n){return{title:n,value:n.toLowerCase()}})),ms=function(n){var t;if(Ms(n)){var e=n.dom,r=null!==(t=e.getParent(n.selection.getStart(),e.isBlock))&&void 0!==t?t:n.getBody(),o=Lu(bt.fromDom(r));return on(on({},ls),{width:o+"px"})}return Is(n)?Nt(ls,(function(n,t){return"width"!==t})):ls},ds={border:"1"},ps="preservetable",gs=function(n){return n.getParam("table_sizing_mode","auto")},hs=function(n){return n.getParam("table_responsive_width")},vs=function(n){return n.getParam("table_border_widths",fs,"array")},bs=function(n){return n.getParam("table_border_styles",ss,"array")},ys=function(n){return n.getParam("table_default_attributes",ds,"object")},ws=function(n){return n.getParam("table_default_styles",ms(n),"object")},Cs=function(n){return n.getParam("table_resize_bars",!0,"boolean")},Ts=function(n){return n.getParam("table_tab_navigation",!0,"boolean")},Ss=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},Ds=function(n){return n.getParam("table_row_advtab",!0,"boolean")},xs=function(n){return n.getParam("table_advtab",!0,"boolean")},As=function(n){return n.getParam("table_appearance_options",!0,"boolean")},Rs=function(n){return n.getParam("table_grid",!0,"boolean")},Es=function(n){return n.getParam("table_style_by_css",!1,"boolean")},Os=function(n){return n.getParam("table_cell_class_list",[],"array")},Fs=function(n){return n.getParam("table_row_class_list",[],"array")},ks=function(n){return n.getParam("table_class_list",[],"array")},Bs=function(n){return"relative"===gs(n)||!0===hs(n)},Ms=function(n){return"fixed"===gs(n)||!1===hs(n)},Is=function(n){return"responsive"===gs(n)},Ns=function(n){return n.getParam("table_toolbar",as)},Ps=function(n){return n.getParam("table_use_colgroups",!1,"boolean")},_s=function(n){var t="section",e=n.getParam("table_header_type",t,"string"),r=["section","cells","sectionCells","auto"];return I(r,e)?e:t},js=function(n){var t=["preservetable","resizetable"],e=n.getParam("table_column_resizing",ps,"string");return V(t,(function(n){return n===e})).getOr(ps)},Ls=function(n){return"preservetable"===js(n)},Ws=function(n){return"resizetable"===js(n)},zs=function(n){var t=n.getParam("table_clone_elements");return o(t)?O.some(t.split(/[ ,]/)):Array.isArray(t)?O.some(t):O.none()},Us=function(n){var t=n.getParam("object_resizing",!0);return o(t)?"table"===t:t},Hs=function(n){return n.getParam("table_background_color_map",[],"array")},qs=function(n){return n.getParam("table_border_color_map",[],"array")},Vs=function(n,t){return Bs(n)?gc.percentageSize(t):Ms(n)?gc.pixelSize(t):gc.getTableSize(t)},Ks=function(n){tr(n,"width")},$s=function(n){var t=qi(n);wl(n,O.some(t),O.none()),Ks(n)},Xs=function(n){var t=Hi(n);wl(n,O.some(t),O.none()),Ks(n)},Gs=function(n){vr(n,"width");var t=kr(n),e=t.length>0?t:Fr(n);j(e,(function(n){vr(n,"width"),Ks(n)})),Ks(n)},Ys=$s,Js=Xs,Zs=Gs,Qs=function(n){var t=lo.fromTable(n);lo.hasColumns(t)||j(Fr(n),(function(n){var t=pr(n,"width");mr(n,"width",t),tr(n,"width")}))},nm=function(){var n=bt.fromTag("div");return dr(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Eo(Be(),n),n},tm=function(n,t){return n.inline?tl.body(Vc(n),nm(),t):tl.only(bt.fromDom(n.getDoc()),t)},em=function(n,t){n.inline&&No(t.parent())},rm="bar-",om=function(n){return"false"!==Qe(n,"data-mce-resize")},um=function(n){var t,e,r=O.none(),o=O.none(),u=O.none(),i=function(n){return"TABLE"===n.nodeName},c=function(){return o},a=function(){return u.getOr(tl.only(bt.fromDom(n.getBody()),om))},l=function(t){return Vs(n,t)},f=function(){return Ls(n)?Ja():Ya()},s=function(n){return Dl(n).columns},m=function(r,o,u){var i=Dn(o,"e");if(""===e&&Ys(r),u!==t&&""!==e){mr(r,"width",e);var c=f(),a=l(r),m=Ls(n)||i?s(r)-1:0;za(r,u-t,m,c,a)}else if(Qc(e)){var d=parseFloat(e.replace("%","")),p=u*d/t;mr(r,"width",p+"%")}na(e)&&Qs(r)},d=function(){o.each((function(n){n.destroy()})),u.each((function(t){em(n,t)}))};return n.on("init",(function(){var t=tm(n,om);if(u=O.some(t),Us(n)&&Cs(n)){var e=f(),i=Jf.create(t,e,l);i.on(),i.events.startDrag.bind((function(t){r=O.some(n.selection.getRng())})),i.events.beforeResize.bind((function(t){var e=t.table.dom;ns(n,e,Kc(e),$c(e),rm+t.type)})),i.events.afterResize.bind((function(t){var e=t.table,o=e.dom;Jc(e),r.each((function(t){n.selection.setRng(t),n.focus()})),ts(n,o,Kc(o),$c(o),rm+t.type),n.undoManager.add()})),o=O.some(i)}})),n.on("ObjectResizeStart",(function(r){var o=r.target;if(i(o)){var u=bt.fromDom(o);j(n.dom.select(".mce-clonedresizable"),(function(t){n.dom.addClass(t,"mce-"+js(n)+"-columns")})),!Tl(u)&&Ms(n)?Js(u):!Cl(u)&&Bs(n)&&Ys(u),Sl(u)&&Sn(r.origin,rm)&&Ys(u),t=r.width,e=Is(n)?"":Zc(n,o).getOr("")}})),n.on("ObjectResized",(function(t){var e=t.target;if(i(e)){var r=bt.fromDom(e),o=t.origin;Sn(o,"corner-")&&m(r,o,t.width),Jc(r),os(n,r.dom,us)}})),n.on("SwitchMode",(function(){c().each((function(t){n.mode.isReadOnly()?t.hideBars():t.showBars()}))})),{lazyResize:c,lazyWire:a,destroy:d}},im=function(n,t){return{element:n,offset:t}},cm=function(n,t,e){return n.property().isText(t)&&0===n.property().getText(t).trim().length||n.property().isComment(t)?e(t).bind((function(t){return cm(n,t,e).orThunk((function(){return O.some(t)}))})):O.none()},am=function(n,t){if(n.property().isText(t))return n.property().getText(t).length;var e=n.property().children(t);return e.length},lm=function(n,t){var e=cm(n,t,n.query().prevSibling).getOr(t);if(n.property().isText(e))return im(e,am(n,e));var r=n.property().children(e);return r.length>0?lm(n,r[r.length-1]):im(e,am(n,e))},fm=lm,sm=Ho(),mm=function(n){return fm(sm,n)},dm=function(n,t){var e=wr(n,"colspan");if(1===e){var r=zi(n);r.each((function(e){var r=e.value/2;Ui(n,r,e.unit),Ui(t,r,e.unit)}))}},pm=se("th"),gm=function(n){return G(n,(function(n){return pm(n.element)}))},hm=function(n,t){return n&&t?"sectionCells":n?"section":"cells"},vm=function(n){var t="thead"===n.section,e=rr(bm(n.cells),"th");return t||e?{type:"header",subType:hm(t,e)}:"tfoot"===n.section?{type:"footer"}:{type:"body"}},bm=function(n){var t=z(n,(function(n){return pm(n.element)}));return 0===t.length?O.some("td"):t.length===n.length?O.some("th"):O.none()},ym=function(n){var t=_(n,(function(n){return vm(n).type})),e=I(t,"header"),r=I(t,"footer");if(e||r){var o=I(t,"body");return!e||o||r?e||o||!r?O.none():O.some("footer"):O.some("header")}return O.some("body")},wm=function(n){return rn(n.all,(function(n){var t=vm(n);return"header"===t.type?O.from(t.subType):O.none()}))},Cm=function(n,t,e){return Zt(e(n.element,t),!0,n.isLocked)},Tm=function(n,t){return n.section!==t?Qt(n.element,n.cells,t,n.isNew):n},Sm=function(){return{transformRow:Tm,transformCell:function(n,t,e){var r=e(n.element,t),o="td"!==re(r)?Du(r,"td"):r;return Zt(o,n.isNew,n.isLocked)}}},Dm=function(){return{transformRow:Tm,transformCell:Cm}},xm=function(){return{transformRow:function(n,t){var e="thead"===t?"tbody":t;return Tm(n,e)},transformCell:Cm}},Am=function(){return{transformRow:b,transformCell:Cm}},Rm=function(n,t){var e=lo.fromTable(n),r=wm(e).getOr(t);switch(r){case"section":return Sm();case"sectionCells":return Dm();case"cells":return xm()}},Em={getTableSectionType:Rm,section:Sm,sectionCells:Dm,cells:xm,fallback:Am},Om=function(n,t,e,r){e===r?tr(n,t):Ye(n,t,e)},Fm=function(n,t,e){en(je(n,t)).fold((function(){return Ro(n,e)}),(function(n){return Ao(n,e)}))},km=function(n,t){var e=Ke(n,t).getOrThunk((function(){var e=bt.fromTag(t,me(n).dom);return"thead"===t?Fm(n,"caption,colgroup",e):"colgroup"===t?Fm(n,"caption",e):Eo(n,e),e}));return Io(e),e},Bm=function(n,t){var e=[],r=[],o=function(n){return _(n,(function(n){n.isNew&&e.push(n.element);var t=n.element;return Io(t),j(n.cells,(function(n){n.isNew&&r.push(n.element),Om(n.element,"colspan",n.colspan,1),Om(n.element,"rowspan",n.rowspan,1),Eo(t,n.element)})),t}))},u=function(n){return X(n,(function(n){return _(n.cells,(function(n){return Om(n.element,"span",n.colspan,1),n.element}))}))},i=function(t,e){var r=km(n,e),i="colgroup"===e?u:o,c=i(t);Mo(r,c)},c=function(t){Ke(n,t).each(No)},a=function(n,t){n.length>0?i(n,t):c(t)},l=[],f=[],s=[],m=[];return j(t,(function(n){switch(n.section){case"thead":l.push(n);break;case"tbody":f.push(n);break;case"tfoot":s.push(n);break;case"colgroup":m.push(n);break}})),a(m,"colgroup"),a(l,"thead"),a(f,"tbody"),a(s,"tfoot"),{newRows:e,newCells:r}},Mm=function(n){return _(n,(function(n){var t=wu(n.element);return j(n.cells,(function(n){var e=Cu(n.element);Om(e,"colspan",n.colspan,1),Om(e,"rowspan",n.rowspan,1),Eo(t,e)})),t}))},Im=function(n,t){return _(n,(function(n){return qr(n,t)}))},Nm=function(n,t){return n[t]},Pm=function(n,t){if(0===n.length)return 0;var e=n[0],r=K(n,(function(n){return!t(e.element,n.element)}));return r.getOr(n.length)},_m=function(n,t,e,r){var o=Nm(n,t),u="colgroup"===o.section,i=Pm(o.cells.slice(e),r),c=u?1:Pm(Im(n.slice(t),e),r);return{colspan:i,rowspan:c}},jm=function(n,t){var e=_(n,(function(n){return _(n.cells,S)})),r=function(n,t,r,o){for(var u=n;u<n+r;u++)for(var i=t;i<t+o;i++)e[u][i]=!0};return _(n,(function(o,u){var i=X(o.cells,(function(o,i){if(!1===e[u][i]){var c=_m(n,u,i,t);return r(u,i,c.rowspan,c.colspan),[Xt(o.element,c.rowspan,c.colspan,o.isNew)]}return[]}));return Jt(o.element,i,o.section,o.isNew)}))},Lm=function(n,t,e){var r=[];j(n.colgroups,(function(o){for(var u=[],i=0;i<n.grid.columns;i++){var c=lo.getColumnAt(n,i).map((function(n){return Zt(n.element,e,!1)})).getOrThunk((function(){return Zt(t.colGap(),!0,!1)}));u.push(c)}r.push(Qt(o.element,u,"colgroup",e))}));for(var o=0;o<n.grid.rows;o++){for(var u=[],i=0;i<n.grid.columns;i++){var c=lo.getAt(n,o,i).map((function(n){return Zt(n.element,e,n.isLocked)})).getOrThunk((function(){return Zt(t.gap(),!0,!1)}));u.push(c)}var a=n.all[o],l=Qt(a.element,u,a.section,e);r.push(l)}return r},Wm=function(n,t){return Lm(n,t,!1)},zm=function(n){return jm(n,St)},Um=function(n,t){return rn(n.all,(function(n){return V(n.cells,(function(n){return St(t,n.element)}))}))},Hm=function(n,t,e){var r=_(t.selection,(function(t){return Or(t).bind((function(t){return Um(n,t)})).filter(e)})),o=or(r);return ar(o.length>0,o)},qm=function(n,t,e,r,o){return function(u,i,c,a,l){var f=lo.fromTable(i),s=O.from(null===l||void 0===l?void 0:l.section).getOrThunk(Em.fallback),m=t(f,c).map((function(t){var e=Wm(f,a),r=n(e,t,St,o(a),s),u=Jr(r.grid),i=zm(r.grid);return{info:t,grid:i,cursor:r.cursor,lockedColumns:u}}));return m.bind((function(n){var t=Bm(i,n.grid),o=O.from(null===l||void 0===l?void 0:l.sizing).getOrThunk((function(){return gc.getTableSize(i)})),c=O.from(null===l||void 0===l?void 0:l.resize).getOrThunk(Ja);return e(i,n.grid,n.info,{sizing:o,resize:c,section:s}),r(i),Uf(u,i),tr(i,Gr),n.lockedColumns.length>0&&Ye(i,Gr,n.lockedColumns.join(",")),O.some({cursor:n.cursor,newRows:t.newRows,newCells:t.newCells})}))}},Vm=function(n,t){return Or(t.element).bind((function(e){return Um(n,e).map((function(n){var e=on(on({},n),{generators:t.generators,clipboard:t.clipboard});return e}))}))},Km=function(n,t){return Hm(n,t,D).map((function(n){return{cells:n,generators:t.generators,clipboard:t.clipboard}}))},$m=function(n,t){return t.mergable},Xm=function(n,t){return t.unmergable},Gm=function(n,t){return Hm(n,t,D)},Ym=function(n,t){return Hm(n,t,(function(n){return!n.isLocked}))},Jm=function(n,t){return Um(n,t).exists((function(n){return!n.isLocked}))},Zm=function(n,t){return G(t,(function(t){return Jm(n,t)}))},Qm=function(n,t){return $m(n,t).filter((function(t){return Zm(n,t.cells)}))},nd=function(n,t){return Xm(n,t).filter((function(t){return Zm(n,t)}))},td=function(n,t,e,r){var o=$r(n).rows;if(0===o.length)return n;for(var u=t.startRow;u<=t.finishRow;u++)for(var i=t.startCol;i<=t.finishCol;i++){var c=o[u],a=qr(c,i).isLocked;zr(c,i,Zt(r(),!1,a))}return n},ed=function(n,t,e,r){for(var o=$r(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<Kr(o[0]);c++){var a=o[i],l=qr(a,c),f=l.element,s=e(f,t);!0===s&&!1===u?zr(a,c,Zt(r(),!0,l.isLocked)):!0===s&&(u=!1)}return n},rd=function(n,t){return H(n,(function(n,e){return N(n,(function(n){return t(n.element,e.element)}))?n:n.concat([e])}),[])},od=function(n,t,e,r){return t>0&&t<n[0].cells.length&&j(n,(function(n){var o=n.cells[t-1],u=n.cells[t],i=e(u.element,o.element);i&&zr(n,t,Zt(r(),!0,u.isLocked))})),n},ud=function(n,t,e,r){var o=$r(n).rows;if(t>0&&t<o.length){var u=o[t-1].cells,i=rd(u,e);j(i,(function(n){for(var u=O.none(),i=t;i<o.length;i++)for(var c=function(t){var c=o[i],a=qr(c,t),l=e(a.element,n.element);l&&(u.isNone()&&(u=O.some(r())),u.each((function(n){zr(c,t,Zt(n,!0,a.isLocked))})))},a=0;a<Kr(o[0]);a++)c(a)}))}return n},id=function(n){var t=function(t){return id(n)},e=function(t){return id(n)},r=function(t){return id(t(n))},o=function(t){return id(n)},u=function(t){t(n)},i=function(t){return t(n)},c=function(t,e){return e(n)},a=function(t){return t(n)},l=function(t){return t(n)},f=function(){return O.some(n)};return{isValue:D,isError:S,getOr:v(n),getOrThunk:v(n),getOrDie:v(n),or:t,orThunk:e,fold:c,map:r,mapError:o,each:u,bind:i,exists:a,forall:l,toOptional:f}},cd=function(n){var t=function(n){return n()},e=function(){return T(String(n))()},r=b,o=function(n){return n()},u=function(t){return cd(n)},i=function(t){return cd(t(n))},c=function(t){return cd(n)},a=function(t,e){return t(n)};return{isValue:S,isError:D,getOr:b,getOrThunk:t,getOrDie:e,or:r,orThunk:o,fold:a,map:u,mapError:i,each:p,bind:c,exists:S,forall:D,toOptional:O.none}},ad=function(n,t){return n.fold((function(){return cd(t)}),id)},ld={value:id,error:cd,fromOption:ad},fd=function(n,t,e){if(n.row>=t.length||n.column>Kr(t[0]))return ld.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=t.slice(n.row),o=r[0].cells.slice(n.column),u=Kr(e[0]),i=e.length;return ld.value({rowDelta:r.length-i,colDelta:o.length-u})},sd=function(n,t){var e=Kr(n[0]),r=Kr(t[0]);return{rowDelta:0,colDelta:e-r}},md=function(n,t){var e=n.length,r=t.length;return{rowDelta:e-r,colDelta:0}},dd=function(n,t,e,r){var o="colgroup"===t.section?e.col:e.cell;return P(n,(function(n){return Zt(o(),!0,r(n))}))},pd=function(n,t,e,r){var o=n[n.length-1];return n.concat(P(t,(function(){var n="colgroup"===o.section?e.colgroup:e.row,t=Xr(o,n,b),u=dd(t.cells.length,t,e,(function(n){return Wt(r,n.toString())}));return Ur(t,u)})))},gd=function(n,t,e,r){return _(n,(function(n){var o=dd(t,n,e,S);return Lr(n,r,o)}))},hd=function(n,t,e){return _(n,(function(n){return H(e,(function(e,r){var o=dd(1,n,t,D)[0];return Wr(e,r,o)}),n)}))},vd=function(n,t,e){var r=t.colDelta<0?gd:b,o=t.rowDelta<0?pd:b,u=Jr(n),i=Kr(n[0]),c=N(u,(function(n){return n===i-1})),a=r(n,Math.abs(t.colDelta),e,c?i-1:i),l=Jr(a);return o(a,Math.abs(t.rowDelta),e,J(l,D))},bd=function(n,t,e,r){var o=qr(n[t],e),u=w(r,o.element),i=n[t];return n.length>1&&Kr(i)>1&&(e>0&&u(Vr(i,e-1))||e<i.cells.length-1&&u(Vr(i,e+1))||t>0&&u(Vr(n[t-1],e))||t<n.length-1&&u(Vr(n[t+1],e)))},yd=function(n,t,e,r,o,u){for(var i=n.row,c=n.column,a=e.length,l=Kr(e[0]),f=i+a,s=c+l+u.length,m=J(u,D),d=i;d<f;d++)for(var p=0,g=c;g<s;g++)if(m[g])p++;else{bd(t,d,g,o)&&ed(t,Vr(t[d],g),o,r.cell);var h=g-c-p,v=qr(e[d-i],h),b=v.element,y=r.replace(b);zr(t[d],g,Zt(y,!0,v.isLocked))}return t},wd=function(n,t,e){var r=Kr(t[0]),o=$r(t).cols.length+n.row,u=P(r-n.column,(function(t){return t+n.column})),i=V(u,(function(n){return G(e,(function(t){return t!==n}))})).getOr(r-1);return{row:o,column:i}},Cd=function(n,t,e){return z(e,(function(e){return e>=n.column&&e<=Kr(t[0])+n.column}))},Td=function(n,t,e,r,o){var u=Jr(t),i=wd(n,t,u),c=$r(e).rows,a=Cd(i,c,u),l=fd(i,t,c);return l.map((function(n){var e=on(on({},n),{colDelta:n.colDelta-a.length}),u=vd(t,e,r),l=Jr(u),f=Cd(i,c,l);return yd(i,u,c,r,o,f)}))},Sd=function(n,t,e,r,o){od(t,n,o,r.cell);var u=md(e,t),i=vd(e,u,r),c=md(t,i),a=vd(t,c,r);return _(a,(function(t,e){return Lr(t,n,i[e].cells)}))},Dd=function(n,t,e,r,o){ud(t,n,o,r.cell);var u=Jr(t),i=sd(t,e),c=on(on({},i),{colDelta:i.colDelta-u.length}),a=vd(t,c,r),l=$r(a),f=l.cols,s=l.rows,m=Jr(a),d=sd(e,t),p=on(on({},d),{colDelta:d.colDelta+m.length}),g=hd(e,r,m),h=vd(g,p,r);return f.concat(s.slice(0,n)).concat(h).concat(s.slice(n,s.length))},xd=function(n,t,e,r){return Xr(n,(function(n){return r(n,e)}),t)},Ad=function(n,t,e,r,o){var u=$r(n),i=u.rows,c=u.cols,a=i.slice(0,t),l=i.slice(t),f=xd(i[e],(function(n,e){var u=t>0&&t<i.length&&r(Vr(i[t-1],e),Vr(i[t],e)),c=u?qr(i[t],e):Zt(o(n.element,r),!0,n.isLocked);return c}),r,o);return c.concat(a).concat([f]).concat(l)},Rd=function(n,t,e,r,o,u,i){if("colgroup"!==e&&r)return qr(n,t);var c=qr(n,o);return Zt(i(c.element,u),!0,!1)},Ed=function(n,t,e,r,o){return _(n,(function(n){var u=t>0&&t<Kr(n)&&r(Vr(n,t-1),Vr(n,t)),i=Rd(n,t,n.section,u,e,r,o);return Wr(n,t,i)}))},Od=function(n,t){return X(n,(function(n){var e=n.cells,r=U(t,(function(n,t){return t>=0&&t<n.length?n.slice(0,t).concat(n.slice(t+1)):n}),e);return r.length>0?[Qt(n.element,r,n.section,n.isNew)]:[]}))},Fd=function(n,t,e){var r=$r(n),o=r.rows,u=r.cols;return u.concat(o.slice(0,t)).concat(o.slice(e+1))},kd=function(n,t,e,r){return void 0!==Vr(n[t],e)&&t>0&&r(Vr(n[t-1],e),Vr(n[t],e))},Bd=function(n,t,e){return t>0&&e(Vr(n,t-1),Vr(n,t))},Md=function(n,t,e,r){return kd(n,t,e,r)||Bd(n[t],e,r)},Id=function(n,t){var e=G(t,b)&&gm(n.cells);return e?D:function(n,e,r){var o=re(n.element);return!("th"===o&&t[r])}},Nd=function(n,t){var e=G(t,b)&&gm(n);return e?D:function(n,e,r){var o=re(n.element);return!("th"===o&&t[e])}},Pd=function(n,t,e,r){var o=function(n){return"row"===n?Tr(t):Cr(t)},u=function(n){return o(n)?n+"group":n};if(n)return pm(t)?u(e):null;if(r&&pm(t)){var i="row"===e?"col":"row";return u(i)}return null},_d=function(n,t){return function(e,r,o){return O.some(Pd(n,e.element,"col",t[o]))}},jd=function(n,t){return function(e,r){return O.some(Pd(n,e.element,"row",t[r]))}},Ld=function(n,t,e){return Zt(e(n.element,t),!0,n.isLocked)},Wd=function(n,t,e,r,o,u,i){var c=function(n){return N(t,(function(t){return e(n.element,t.element)}))};return _(n,(function(n,t){return Hr(n,(function(n,a){if(c(n)){var l=i(n,t,a)?o(n,e,r):n;return u(l,t,a).each((function(n){Ze(l.element,{scope:O.from(n)})})),l}return n}))}))},zd=function(n,t,e){return X(n,(function(r,o){return Md(n,o,t,e)?[]:[qr(r,t)]}))},Ud=function(n,t,e){var r=n[t];return X(r.cells,(function(r,o){return Md(n,t,o,e)?[]:[r]}))},Hd=function(n,t,e,r,o){var u=$r(n).rows,i=X(t,(function(n){return zd(u,n,r)})),c=_(n,(function(n){return gm(n.cells)})),a=Nd(i,c),l=jd(e,c);return Wd(n,i,r,o,Ld,l,a)},qd=function(n,t,e,r,o,u,i){var c=$r(n),a=c.cols,l=c.rows,f=l[t[0]],s=X(t,(function(n){return Ud(l,n,o)})),m=_(f.cells,(function(n,t){return gm(zd(l,t,o))})),d=un([],l,!0);j(t,(function(n){d[n]=i.transformRow(l[n],e)}));var p=a.concat(d),g=Id(f,m),h=_d(r,m);return Wd(p,s,o,u,i.transformCell,h,g)},Vd=function(n,t,e,r){var o=$r(n).rows,u=_(t,(function(n){return qr(o[n.row],n.column)}));return Wd(n,u,e,r,Ld,O.none,D)},Kd=function(n){var t=function(n,t){var e=N(n,(function(n){return n.column===t.column}));return e?n:n.concat([t])};return H(n,t,[]).sort((function(n,t){return n.column-t.column}))},$d=se("col"),Xd=se("colgroup"),Gd=function(n){return"tr"===re(n)||Xd(n)},Yd=function(n){var t=yr(n,"colspan",1),e=yr(n,"rowspan",1);return{element:n,colspan:t,rowspan:e}},Jd=function(n,t){void 0===t&&(t=Yd);var e=function(t){return $d(t.element)?n.col(t):n.cell(t)},r=function(t){return Xd(t.element)?n.colgroup(t):n.row(t)},o=function(n){if(Gd(n))return r({element:n});var o=e(t(n));return u=O.some({item:n,replacement:o}),o},u=O.none(),i=function(n,t){return u.fold((function(){return o(n)}),(function(e){return t(n,e.item)?e.replacement:o(n)}))};return{getOrInit:i}},Zd=function(n){return function(t){var e=[],r=function(n,t){return V(e,(function(e){return t(e.item,n)}))},o=function(r){var o="td"===n?{scope:null}:{},u=t.replace(r,n,o);return e.push({item:r,sub:u}),u},u=function(n,t){return Gd(n)||$d(n)?n:r(n,t).fold((function(){return o(n)}),(function(e){return t(n,e.item)?e.sub:o(n)}))};return{replaceOrInit:u}}},Qd=function(n){return nr(n,"scope").map((function(n){return n.substr(0,3)}))},np=function(n){var t=function(t){var e=Qd(t);return e.each((function(n){return Ye(t,"scope",n)})),function(){var r=n.cell({element:t,colspan:1,rowspan:1});return vr(r,"width"),vr(t,"width"),e.each((function(n){return Ye(r,"scope",n)})),r}},e=function(n){var t=function(){var t=or(_(n,Qd));if(0===t.length)return O.none();var e=t[0],r=["row","col"],o=N(t,(function(n){return n!==e&&I(r,n)}));return o?O.none():O.from(e)};return vr(n[0],"width"),t().fold((function(){return tr(n[0],"scope")}),(function(t){return Ye(n[0],"scope",t+"group")})),v(n[0])};return{unmerge:t,merge:e}},tp={modification:Jd,transform:Zd,merging:np},ep=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],rp=function(n,t){var e=n.property().name(t);return I(["ol","ul"],e)},op=function(n,t){var e=n.property().name(t);return I(ep,e)},up=function(n,t){return I(["br","img","hr","input"],n.property().name(t))},ip=Ho(),cp=function(n){return op(ip,n)},ap=function(n){return rp(ip,n)},lp=function(n){return up(ip,n)},fp=function(n){var t=function(n){return"br"===re(n)},e=function(n){return G(n,(function(n){return t(n)||ae(n)&&0===Lo(n).trim().length}))},r=function(n){return"li"===re(n)||ze(n,ap).isSome()},o=function(n){return ye(n).map((function(n){return!!cp(n)||!!lp(n)&&"img"!==re(n)})).getOr(!1)},u=function(n){return Oc(n).bind((function(e){var u=o(e);return ge(e).map((function(o){return!0===u||r(o)||t(e)||cp(o)&&!St(n,o)?[]:[bt.fromTag("br")]}))})).getOr([])},i=function(){var t=X(n,(function(n){var t=we(n);return e(t)?[]:t.concat(u(n))}));return 0===t.length?[bt.fromTag("br")]:t},c=i();Io(n[0]),Mo(n[0],c)},sp=function(n){return Sf(n,!0)},mp=function(n){var t=Fr(n);0===t.length&&No(n)},dp=function(n,t){return{grid:n,cursor:t}},pp=function(n){return rn(n,(function(n){return rn(n.cells,(function(n){var t=n.element;return ar(sp(t),t)}))}))},gp=function(n,t,e){var r,o,u=$r(n).rows;return O.from(null===(o=null===(r=u[t])||void 0===r?void 0:r.cells[e])||void 0===o?void 0:o.element).filter(sp).orThunk((function(){return pp(u)}))},hp=function(n,t,e){var r=gp(n,t,e);return dp(n,r)},vp=function(n){var t=function(n,t){var e=N(n,(function(n){return n.row===t.row}));return e?n:n.concat([t])};return H(n,t,[]).sort((function(n,t){return n.row-t.row}))},bp=function(n,t,e,r){var o=t[0].row,u=vp(t),i=U(u,(function(n,t){var u=Ad(n.grid,o,t.row+n.delta,e,r.getOrInit);return{grid:u,delta:n.delta+1}}),{grid:n,delta:0}).grid;return hp(i,o,t[0].column)},yp=function(n,t,e,r){var o=vp(t),u=o[o.length-1],i=u.row+u.rowspan,c=U(o,(function(n,t){return Ad(n,i,t.row,e,r.getOrInit)}),n);return hp(c,i,t[0].column)},wp=function(n,t,e,r){var o=t.details,u=Kd(o),i=u[0].column,c=U(u,(function(n,t){var o=Ed(n.grid,i,t.column+n.delta,e,r.getOrInit);return{grid:o,delta:n.delta+1}}),{grid:n,delta:0}).grid;return hp(c,o[0].row,i)},Cp=function(n,t,e,r){var o=t.details,u=o[o.length-1],i=u.column+u.colspan,c=Kd(o),a=U(c,(function(n,t){return Ed(n,i,t.column,e,r.getOrInit)}),n);return hp(a,o[0].row,i)},Tp=function(n,t,e,r){var o=Kd(t),u=_(o,(function(n){return n.column})),i=Hd(n,u,!0,e,r.replaceOrInit);return hp(i,t[0].row,t[0].column)},Sp=function(n,t,e,r){var o=Vd(n,t,e,r.replaceOrInit);return hp(o,t[0].row,t[0].column)},Dp=function(n,t,e,r){var o=Kd(t),u=_(o,(function(n){return n.column})),i=Hd(n,u,!1,e,r.replaceOrInit);return hp(i,t[0].row,t[0].column)},xp=function(n,t,e,r){var o=Vd(n,t,e,r.replaceOrInit);return hp(o,t[0].row,t[0].column)},Ap=function(n,t){return function(e,r,o,u,i){var c=vp(r),a=_(c,(function(n){return n.row})),l=qd(e,a,n,t,o,u.replaceOrInit,i);return hp(l,r[0].row,r[0].column)}},Rp=Ap("thead",!0),Ep=Ap("tbody",!1),Op=Ap("tfoot",!1),Fp=function(n,t,e,r){var o=Kd(t.details),u=Od(n,_(o,(function(n){return n.column}))),i=u.length>0?u[0].cells.length-1:0;return hp(u,o[0].row,Math.min(o[0].column,i))},kp=function(n,t,e,r){var o=vp(t),u=Fd(n,o[0].row,o[o.length-1].row),i=u.length>0?u.length-1:0;return hp(u,Math.min(t[0].row,i),t[0].column)},Bp=function(n,t,e,r){var o=t.cells;fp(o);var u=td(n,t.bounds,e,r.merge(o));return dp(u,O.from(o[0]))},Mp=function(n,t,e,r){var o=function(n,t){return ed(n,t,e,r.unmerge(t))},u=U(t,o,n);return dp(u,O.from(t[0]))},Ip=function(n,t,e,r){var o=function(n,t){var e=lo.fromTable(n);return Lm(e,t,!0)},u=o(t.clipboard,t.generators),i=Kt(t.row,t.column),c=Td(i,n,u,t.generators,e);return c.fold((function(){return dp(n,O.some(t.element))}),(function(n){return hp(n,t.row,t.column)}))},Np=function(n,t,e){var r=jr(n,e.section),o=lo.generate(r);return Lm(o,t,!0)},Pp=function(n,t,e,r){var o=$r(n).rows,u=t.cells[0].column,i=o[t.cells[0].row],c=Np(t.clipboard,t.generators,i),a=Sd(u,n,c,t.generators,e);return hp(a,t.cells[0].row,t.cells[0].column)},_p=function(n,t,e,r){var o=$r(n).rows,u=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,i=o[t.cells[0].row],c=Np(t.clipboard,t.generators,i),a=Sd(u,n,c,t.generators,e);return hp(a,t.cells[0].row,t.cells[0].column)},jp=function(n,t,e,r){var o=$r(n).rows,u=t.cells[0].row,i=o[u],c=Np(t.clipboard,t.generators,i),a=Dd(u,n,c,t.generators,e);return hp(a,t.cells[0].row,t.cells[0].column)},Lp=function(n,t,e,r){var o=$r(n).rows,u=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,i=o[t.cells[0].row],c=Np(t.clipboard,t.generators,i),a=Dd(u,n,c,t.generators,e);return hp(a,t.cells[0].row,t.cells[0].column)},Wp=function(n,t){var e=lo.fromTable(n),r=Gm(e,t);return r.bind((function(n){var t=n[n.length-1],r=n[0].column,o=t.column+t.colspan,u=$(_(e.all,(function(n){return z(n.cells,(function(n){return n.column>=r&&n.column<o}))})));return bm(u)})).getOr("")},zp=function(n,t){var e=lo.fromTable(n),r=Gm(e,t);return r.bind(bm).getOr("")},Up=function(n,t){var e=lo.fromTable(n),r=Gm(e,t);return r.bind((function(n){var t=n[n.length-1],r=n[0].row,o=t.row+t.rowspan,u=e.all.slice(r,o);return ym(u)})).getOr("")},Hp=function(n,t,e,r){return qa(n,t,e,r.sizing)},qp=function(n,t,e,r){return Ha(n,t,e,r.sizing,r.resize)},Vp=function(n,t){return N(t,(function(n){return 0===n.column&&n.isLocked}))},Kp=function(n,t){return N(t,(function(t){return t.column+t.colspan>=n.grid.columns&&t.isLocked}))},$p=function(n,t){var e=zu(n),r=Kd(t);return H(r,(function(n,t){var r=e[t.column],o=r.map(ju).getOr(0);return n+o}),0)},Xp=function(n){return function(t,e){return Gm(t,e).filter((function(e){var r=n?Vp:Kp;return!r(t,e)})).map((function(n){return{details:n,pixelDelta:$p(t,n)}}))}},Gp=function(n,t){return Ym(n,t).map((function(t){return{details:t,pixelDelta:-$p(n,t)}}))},Yp=function(n){return function(t,e){return Km(t,e).filter((function(e){var r=n?Vp:Kp;return!r(t,e.cells)}))}},Jp=tp.transform("th"),Zp=tp.transform("td"),Qp=qm(bp,Gm,p,p,tp.modification),ng=qm(yp,Gm,p,p,tp.modification),tg=qm(wp,Xp(!0),qp,p,tp.modification),eg=qm(Cp,Xp(!1),qp,p,tp.modification),rg=qm(Fp,Gp,qp,mp,tp.modification),og=qm(kp,Gm,p,mp,tp.modification),ug=qm(Tp,Ym,p,p,Jp),ig=qm(Dp,Ym,p,p,Zp),cg=qm(Rp,Ym,p,p,Jp),ag=qm(Ep,Ym,p,p,Zp),lg=qm(Op,Ym,p,p,Zp),fg=qm(Sp,Ym,p,p,Jp),sg=qm(xp,Ym,p,p,Zp),mg=qm(Bp,Qm,Hp,p,tp.merging),dg=qm(Mp,nd,Hp,p,tp.merging),pg=qm(Ip,Vm,Hp,p,tp.modification),gg=qm(Pp,Yp(!0),p,p,tp.modification),hg=qm(_p,Yp(!1),p,p,tp.modification),vg=qm(jp,Km,p,p,tp.modification),bg=qm(Lp,Km,p,p,tp.modification),yg=Wp,wg=zp,Cg=Up,Tg=function(n,t,e){var r=function(n){return"table"===re(Vc(n))},o=function(t){return!1===r(n)||Dl(t).rows>1},u=function(t){return!1===r(n)||Dl(t).columns>1},i=zs(n),c=Ws(n)?p:dm,a=function(t){switch(_s(n)){case"section":return Em.section();case"sectionCells":return Em.sectionCells();case"cells":return Em.cells();default:return Em.getTableSectionType(t,"section")}},l=function(e,r){return r.cursor.fold((function(){var r=Fr(e);return tn(r).filter(ke).map((function(r){t.clear(e);var o=n.dom.createRng();return o.selectNode(r.dom),n.selection.setRng(o),Ye(r,"data-mce-selected","1"),o}))}),(function(r){var o=mm(r),u=n.dom.createRng();return u.setStart(o.element.dom,o.offset),u.setEnd(o.element.dom,o.offset),n.selection.setRng(u),t.clear(e),O.some(u)}))},f=function(t,e,r,o,u){return function(c,f,s){void 0===s&&(s=!1),Jc(c);var m=o(),d=bt.fromDom(n.getDoc()),p=Wc(r,d,i),g={sizing:Vs(n,c),resize:Ws(n)?Ya():Ja(),section:a(c)};return e(c)?t(m,c,f,p,g).bind((function(t){j(t.newRows,(function(t){Zf(n,t.dom)})),j(t.newCells,(function(t){Qf(n,t.dom)}));var e=l(c,t);return ke(c)&&(Jc(c),s||os(n,c.dom,u)),e.map((function(n){return{rng:n,effect:u}}))})):O.none()}},s=f(og,o,p,e,is),m=f(rg,u,p,e,is),d=f(Qp,D,p,e,is),g=f(ng,D,p,e,is),h=f(tg,D,c,e,is),v=f(eg,D,c,e,is),b=f(mg,D,p,e,is),y=f(dg,D,p,e,is),w=f(gg,D,p,e,is),C=f(hg,D,p,e,is),T=f(vg,D,p,e,is),S=f(bg,D,p,e,is),x=f(pg,D,p,e,cs),A=f(fg,D,p,e,is),R=f(sg,D,p,e,is),E=f(ug,D,p,e,is),F=f(ig,D,p,e,is),k=f(cg,D,p,e,is),B=f(ag,D,p,e,is),M=f(lg,D,p,e,is),I=wg,N=yg,P=Cg;return{deleteRow:s,deleteColumn:m,insertRowsBefore:d,insertRowsAfter:g,insertColumnsBefore:h,insertColumnsAfter:v,mergeCells:b,unmergeCells:y,pasteColsBefore:w,pasteColsAfter:C,pasteRowsBefore:T,pasteRowsAfter:S,pasteCells:x,makeCellsHeader:A,unmakeCellsHeader:R,makeColumnsHeader:E,unmakeColumnsHeader:F,makeRowsHeader:k,makeRowsBody:B,makeRowsFooter:M,getTableRowType:P,getTableCellType:I,getTableColType:N}},Sg={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Dg=function(){return bt.fromTag("th")},xg=function(){return bt.fromTag("td")},Ag=function(){return bt.fromTag("col")},Rg=function(n,t,e,r){for(var o=bt.fromTag("tr"),u=0;u<n;u++){var i=r<t||u<e?Dg():xg();u<e&&Ye(i,"scope","row"),r<t&&Ye(i,"scope","col"),Eo(i,bt.fromTag("br")),Eo(o,i)}return o},Eg=function(n){var t=bt.fromTag("colgroup");return P(n,(function(){return Eo(t,Ag())})),t},Og=function(n,t,e,r){return P(n,(function(n){return Rg(t,e,r,n)}))},Fg=function(n,t,e,r,o,u){void 0===u&&(u=Sg);var i=bt.fromTag("table"),c="cells"!==o;dr(i,u.styles),Je(i,u.attributes),u.colGroups&&Eo(i,Eg(t));var a=Math.min(n,e);if(c&&e>0){var l=bt.fromTag("thead");Eo(i,l);var f="sectionCells"===o?a:0,s=Og(e,t,f,r);Mo(l,s)}var m=bt.fromTag("tbody");Eo(i,m);var d=c?n-a:n,p=c?0:e,g=Og(d,t,p,r);return Mo(m,g),i},kg=function(n){return n.dom.innerHTML},Bg=function(n){var t=bt.fromTag("div"),e=bt.fromDom(n.dom.cloneNode(!0));return Eo(t,e),kg(t)},Mg=function(n,t){n.selection.select(t.dom,!0),n.selection.collapse(!0)},Ig=function(n,t){$e(t,"td,th").each(w(Mg,n))},Ng=function(n,t){j(Le(t,"tr"),(function(t){Zf(n,t.dom),j(Le(t,"th,td"),(function(t){Qf(n,t.dom)}))}))},Pg=function(n){return o(n)&&-1!==n.indexOf("%")},_g=function(n,t,e,r,o){var u=ws(n),i={styles:u,attributes:ys(n),colGroups:Ps(n)};return n.undoManager.ignore((function(){var u=Fg(e,t,o,r,_s(n),i);Ye(u,"data-mce-id","__mce");var c=Bg(u);n.insertContent(c),n.addVisual()})),$e(Vc(n),'table[data-mce-id="__mce"]').map((function(t){return Ms(n)?Js(t):Is(n)?Zs(t):(Bs(n)||Pg(u.width))&&Ys(t),Jc(t),tr(t,"data-mce-id"),Ng(n,t),Ig(n,t),t.dom})).getOr(null)},jg=function(n,t,e,r,o){void 0===r&&(r={});var u=function(n){return d(n)&&n>0};if(u(t)&&u(e)){var i=r.headerRows||0,c=r.headerColumns||0;return _g(n,e,t,c,i)}return console.error(o),null},Lg=function(n){return function(){return n().fold((function(){return[]}),(function(n){return _(n,(function(n){return n.dom}))}))}},Wg=function(n){return function(t){var e=t.length>0?O.some(Hc(t)):O.none();n(e)}},zg=function(n){return function(t,e,r){void 0===r&&(r={});var o=jg(n,e,t,r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return n.undoManager.add(),o}},Ug=function(n,t,e,r){return{insertTable:zg(n),setClipboardRows:Wg(t.setRows),getClipboardRows:Lg(t.getRows),setClipboardCols:Wg(t.setColumns),getClipboardCols:Lg(t.getColumns),resizeHandler:e,selectionTargets:r}},Hg=function(n,t,e){var r=yr(n,t,1);1===e||r<=1?tr(n,t):Ye(n,t,Math.min(e,r))},qg=function(n,t,e){if(lo.hasColumns(n)){var r=z(lo.justColumns(n),(function(n){return n.column>=t&&n.column<e})),o=_(r,(function(n){var r=Cu(n.element);return Hg(r,"span",e-t),r})),u=bt.fromTag("colgroup");return Mo(u,o),[u]}return[]},Vg=function(n,t,e){return _(n.all,(function(n){var r=z(n.cells,(function(n){return n.column>=t&&n.column<e})),o=_(r,(function(n){var r=Cu(n.element);return Hg(r,"colspan",e-t),r})),u=bt.fromTag("tr");return Mo(u,o),u}))},Kg=function(n,t){var e=lo.fromTable(n),r=Ym(e,t);return r.map((function(n){var t=n[n.length-1],r=n[0].column,o=t.column+t.colspan,u=qg(e,r,o),i=Vg(e,r,o);return un(un([],u,!0),i,!0)}))},$g=function(n,t,e){var r=lo.fromTable(n),o=Gm(r,t);return o.bind((function(n){var t=Lm(r,e,!1),o=$r(t).rows,u=o.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),i=X(u,(function(n){var t=z(n.cells,(function(n){return!n.isLocked}));return t.length>0?[on(on({},n),{cells:t})]:[]})),c=zm(i);return ar(c.length>0,c)})).map((function(n){return Mm(n)}))},Xg=tinymce.util.Tools.resolve("tinymce.util.Tools"),Gg=function(n,t,e){var r,o=n.select("td,th",t),u=function(t,r){for(var o=0;o<r.length;o++){var u=n.getStyle(r[o],e);if("undefined"===typeof t&&(t=u),t!==u)return""}return t};return u(r,o)},Yg=function(n,t,e){e&&n.formatter.apply("align"+e,{},t)},Jg=function(n,t,e){e&&n.formatter.apply("valign"+e,{},t)},Zg=function(n,t){Xg.each("left center right".split(" "),(function(e){n.formatter.remove("align"+e,{},t)}))},Qg=function(n,t){Xg.each("top middle bottom".split(" "),(function(e){n.formatter.remove("valign"+e,{},t)}))},nh=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],th=function(n){return{value:n}},eh=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,rh=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,oh=function(n){return eh.test(n)||rh.test(n)},uh=function(n){return Cn(n,"#").toUpperCase()},ih=function(n){return oh(n)?O.some({value:uh(n)}):O.none()},ch=function(n){var t=n.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},ah=function(n){var t=ch(n.red)+ch(n.green)+ch(n.blue);return th(t)},lh=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,fh=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,sh=function(n,t,e,r){return{red:n,green:t,blue:e,alpha:r}},mh=function(n,t,e,r){var o=parseInt(n,10),u=parseInt(t,10),i=parseInt(e,10),c=parseFloat(r);return sh(o,u,i,c)},dh=function(n){if("transparent"===n)return O.some(sh(0,0,0,0));var t=lh.exec(n);if(null!==t)return O.some(mh(t[1],t[2],t[3],"1"));var e=fh.exec(n);return null!==e?O.some(mh(e[1],e[2],e[3],e[4])):O.none()},ph=function(n){return ih(n).orThunk((function(){return dh(n).map(ah)})).getOrThunk((function(){var t=document.createElement("canvas");t.height=1,t.width=1;var e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),e.fillStyle="#FFFFFF",e.fillStyle=n,e.fillRect(0,0,1,1);var r=e.getImageData(0,0,1,1).data,o=r[0],u=r[1],i=r[2],c=r[3];return ah(sh(o,u,i,c))}))},gh=function(n){var t=n,e=function(){return t},r=function(n){t=n};return{get:e,set:r}},hh=function(n){var t=gh(O.none()),e=function(){return t.get().each(n)},r=function(){e(),t.set(O.none())},o=function(){return t.get().isSome()},u=function(){return t.get()},i=function(n){e(),t.set(O.some(n))};return{clear:r,isSet:o,get:u,set:i}},vh=function(){return hh((function(n){return n.unbind()}))},bh=function(){var n=hh(p),t=function(t){return n.get().each(t)};return on(on({},n),{on:t})},yh=function(n,t,e,r){return function(o){var u=vh(),i=En(r),c=function(){var c=Sa(t),a=function(t){return n.formatter.match(e,{value:r},t.dom,i)};i?(o.setActive(!N(c,a)),u.set(n.formatter.formatChanged(e,(function(n){return o.setActive(!n)}),!0))):(o.setActive(G(c,a)),u.set(n.formatter.formatChanged(e,o.setActive,!1,{value:r})))};return n.initialized?c():n.on("init",c),u.clear}},wh=function(n){return zt(n,"menu")},Ch=function(n){return _(n,(function(n){var t=n.text||n.title;return wh(n)?{text:t,items:Ch(n.menu)}:{text:t,value:n.value}}))},Th=function(n,t,e,r,o){return _(e,(function(e){var u=e.text||e.title;return wh(e)?{type:"nestedmenuitem",text:u,getSubmenuItems:function(){return Th(n,t,e.menu,r,o)}}:{text:u,type:"togglemenuitem",onAction:function(){return o(e.value)},onSetup:yh(n,t,r,e.value)}}))},Sh=function(n,t){return function(e){var r;n.execCommand("mceTableApplyCellStyle",!1,(r={},r[t]=e,r))}},Dh=function(n){return X(n,(function(n){return wh(n)?[on(on({},n),{menu:Dh(n.menu)})]:Rn(n.value)?[n]:[]}))},xh=function(n,t,e,r,o){return function(u){return u(Th(n,t,e,r,o))}},Ah=function(n,t,e){var r=_(t,(function(n){return{text:n.title,value:"#"+ph(n.value).value,type:"choiceitem"}}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:r.length>0?r:void 0,allowCustomColors:!1},onAction:function(t){var r,o="remove"===t.value?"":t.value;n.execCommand("mceTableApplyCellStyle",!1,(r={},r[e]=o,r))}}]},Rh=function(n){return function(){var t=n.queryCommandValue("mceTableRowType"),e="header"===t?"body":"header";n.execCommand("mceTableRowType",!1,{type:e})}},Eh=function(n){return function(){var t=n.queryCommandValue("mceTableColType"),e="th"===t?"td":"th";n.execCommand("mceTableColType",!1,{type:e})}},Oh=function(n){var t=Ch(Os(n));return t.length>0?O.some({name:"class",type:"listbox",label:"Class",items:t}):O.none()},Fh=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:nh}],kh=function(n){return Fh.concat(Oh(n).toArray())},Bh=function(n,t){var e=[{text:"Select...",value:""}],r=[{name:"borderstyle",type:"listbox",label:"Border style",items:e.concat(Ch(bs(n)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],o={name:"borderwidth",type:"input",label:"Border width"},u="cell"===t?[o].concat(r):r;return{title:"Advanced",name:"advanced",items:u}},Mh=function(n){return function(t,e){var r=t.dom,o=function(t,o){n&&!o||r.setAttrib(e,t,o)},u=function(t,o){n&&!o||r.setStyle(e,t,o)},i=function(r,o){n&&!o||(""===o?t.formatter.remove(r,{value:null},e,!0):t.formatter.apply(r,{value:o},e))};return{setAttrib:o,setStyle:u,setFormat:i}}},Ih={normal:Mh(!1),ifTruthy:Mh(!0)},Nh=function(n){return function(t){return Sn(t,"rgb")?n.toHex(t):t}},Ph=function(n,t){var e=bt.fromDom(t);return{borderwidth:hr(e,"border-width").getOr(""),borderstyle:hr(e,"border-style").getOr(""),bordercolor:hr(e,"border-color").map(Nh(n)).getOr(""),backgroundcolor:hr(e,"background-color").map(Nh(n)).getOr("")}},_h=function(n){var t=n[0],e=n.slice(1);return j(e,(function(n){j(Et(t),(function(e){Ft(n,(function(n,r){var o=t[e];""!==o&&e===r&&o!==n&&(t[e]="")}))}))})),t},jh=function(n,t,e,r){return V(n,(function(n){return!l(e.formatter.matchNode(r,t+n))})).getOr("")},Lh=w(jh,["left","center","right"],"align"),Wh=w(jh,["top","middle","bottom"],"valign"),zh=function(n,t){var e=ws(n),r=ys(n),o=function(n){return{borderstyle:Lt(e,"border-style").getOr(""),bordercolor:Nh(n)(Lt(e,"border-color").getOr("")),backgroundcolor:Nh(n)(Lt(e,"background-color").getOr(""))}},u={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},i=function(){var t=e["border-width"];return Es(n)&&t?{border:t}:Lt(r,"border").fold((function(){return{}}),(function(n){return{border:n}}))},c=t?o(n.dom):{},a=function(){var n=Lt(e,"border-spacing").or(Lt(r,"cellspacing")).fold((function(){return{}}),(function(n){return{cellspacing:n}})),t=Lt(e,"border-padding").or(Lt(r,"cellpadding")).fold((function(){return{}}),(function(n){return{cellpadding:n}}));return on(on({},n),t)},l=on(on(on(on(on(on({},u),e),r),c),i()),a());return l},Uh=function(n){return Br(bt.fromDom(n)).map((function(t){var e={selection:Hc(n.cells)};return Cg(t,e)})).getOr("")},Hh=function(n,t,e){var r=function(t,e){var r=hr(bt.fromDom(e),"border-width");return Es(n)&&r.isSome()?r.getOr(""):t.getAttrib(e,"border")||Gg(n.dom,e,"border-width")||Gg(n.dom,e,"border")},o=n.dom,u=Es(n)?o.getStyle(t,"border-spacing")||o.getAttrib(t,"cellspacing"):o.getAttrib(t,"cellspacing")||o.getStyle(t,"border-spacing"),i=Es(n)?Gg(o,t,"padding")||o.getAttrib(t,"cellpadding"):o.getAttrib(t,"cellpadding")||Gg(o,t,"padding");return on({width:o.getStyle(t,"width")||o.getAttrib(t,"width"),height:o.getStyle(t,"height")||o.getAttrib(t,"height"),cellspacing:u,cellpadding:i,border:r(o,t),caption:!!o.select("caption",t)[0],class:o.getAttrib(t,"class",""),align:Lh(n,t)},e?Ph(o,t):{})},qh=function(n,t,e){var r=n.dom;return on({height:r.getStyle(t,"height")||r.getAttrib(t,"height"),class:r.getAttrib(t,"class",""),type:Uh(t),align:Lh(n,t)},e?Ph(r,t):{})},Vh=function(n,t,e,r){var o=n.dom,u=r.getOr(t),i=function(n,t){return o.getStyle(n,t)||o.getAttrib(n,t)};return on({width:i(u,"width"),height:i(t,"height"),scope:o.getAttrib(t,"scope"),celltype:qc(t),class:o.getAttrib(t,"class",""),halign:Lh(n,t),valign:Wh(n,t)},e?Ph(o,t):{})},Kh=function(n,t){var e=lo.fromTable(n),r=lo.justCells(e),o=z(r,(function(n){return N(t,(function(t){return St(n.element,t)}))}));return _(o,(function(n){return{element:n.element.dom,column:lo.getColumnAt(e,n.column).map((function(n){return n.element.dom}))}}))},$h=function(n,t,e){n.setAttrib("scope",e.scope),n.setAttrib("class",e.class),n.setStyle("height",Yc(e.height)),t.setStyle("width",Yc(e.width))},Xh=function(n,t){n.setFormat("tablecellbackgroundcolor",t.backgroundcolor),n.setFormat("tablecellbordercolor",t.bordercolor),n.setFormat("tablecellborderstyle",t.borderstyle),n.setFormat("tablecellborderwidth",Yc(t.borderwidth))},Gh=function(n,t,e){var r=1===t.length;j(t,(function(t){var o=t.element,u=r?Ih.normal(n,o):Ih.ifTruthy(n,o),i=t.column.map((function(t){return r?Ih.normal(n,t):Ih.ifTruthy(n,t)})).getOr(u);$h(u,i,e),Ss(n)&&Xh(u,e),r&&(Zg(n,o),Qg(n,o)),e.halign&&Yg(n,o,e.halign),e.valign&&Jg(n,o,e.valign)}))},Yh=function(n,t){n.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})},Jh=function(n,t,e,r){var o=Nt(r,(function(n,t){return e[t]!==n}));jt(o)>0&&t.length>=1&&Br(t[0]).each((function(e){var u=Kh(e,t),i=jt(Nt(o,(function(n,t){return"scope"!==t&&"celltype"!==t})))>0,c=Wt(o,"celltype");(i||Wt(o,"scope"))&&Gh(n,u,r),c&&Yh(n,r),os(n,e.dom,{structure:c,style:i})}))},Zh=function(n,t,e,r){var o=r.getData();r.close(),n.undoManager.transact((function(){Jh(n,t,e,o),n.focus()}))},Qh=function(n,t){var e=Br(t[0]).map((function(e){return _(Kh(e,t),(function(t){return Vh(n,t.element,Ss(n),t.column)}))}));return _h(e.getOrDie())},nv=function(n,t){var e=Sa(t);if(0!==e.length){var r=Qh(n,e),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:kh(n)},Bh(n,"cell")]},u={type:"panel",items:[{type:"grid",columns:2,items:kh(n)}]};n.windowManager.open({title:"Cell Properties",size:"normal",body:Ss(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:w(Zh,n,e,r)})}},tv=function(n){var t=Ch(Fs(n));return t.length>0?O.some({name:"class",type:"listbox",label:"Class",items:t}):O.none()},ev=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],rv=function(n){return ev.concat(tv(n).toArray())},ov=function(n,t){n.setAttrib("class",t.class),n.setStyle("height",Yc(t.height))},uv=function(n,t){n.setStyle("background-color",t.backgroundcolor),n.setStyle("border-color",t.bordercolor),n.setStyle("border-style",t.borderstyle)},iv=function(n,t,e,r){var o=1===t.length;j(t,(function(t){var u=o?Ih.normal(n,t):Ih.ifTruthy(n,t);ov(u,e),Ds(n)&&uv(u,e),e.align!==r.align&&(Zg(n,t),Yg(n,t,e.align))}))},cv=function(n,t){n.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})},av=function(n,t,e,r){var o=Nt(r,(function(n,t){return e[t]!==n}));if(jt(o)>0){var u=Wt(o,"type"),i=!u||jt(o)>1;i&&iv(n,t,r,e),u&&cv(n,r),Br(bt.fromDom(t[0])).each((function(t){return os(n,t.dom,{structure:u,style:i})}))}},lv=function(n,t,e,r){var o=r.getData();r.close(),n.undoManager.transact((function(){av(n,t,e,o),n.focus()}))},fv=function(n){var t=Da(ta(n),pa.selected);if(0!==t.length){var e=_(t,(function(t){return qh(n,t.dom,Ds(n))})),r=_h(e),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:rv(n)},Bh(n,"row")]},u={type:"panel",items:[{type:"grid",columns:2,items:rv(n)}]};n.windowManager.open({title:"Row Properties",size:"normal",body:Ds(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:w(lv,n,_(t,(function(n){return n.dom})),r)})}},sv=function(n,t,e){var r=e?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],u=As(n)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],c=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return r.concat(o).concat(u).concat(i).concat(c)},mv=function(n,t,e,r){if("TD"===t.tagName||"TH"===t.tagName)o(e)?n.setStyle(t,e,r):n.setStyle(t,e);else if(t.children)for(var u=0;u<t.children.length;u++)mv(n,t.children[u],e,r)},dv=function(n,t,e){var r=n.dom,o={},u={};if(o.class=e.class,u.height=Yc(e.height),r.getAttrib(t,"width")&&!Es(n)?o.width=Gc(e.width):u.width=Yc(e.width),Es(n)?(u["border-width"]=Yc(e.border),u["border-spacing"]=Yc(e.cellspacing)):(o.border=e.border,o.cellpadding=e.cellpadding,o.cellspacing=e.cellspacing),Es(n)&&t.children)for(var i=0;i<t.children.length;i++)mv(r,t.children[i],{"border-width":Yc(e.border),padding:Yc(e.cellpadding)}),xs(n)&&mv(r,t.children[i],{"border-color":e.bordercolor});xs(n)&&(u["background-color"]=e.backgroundcolor,u["border-color"]=e.bordercolor,u["border-style"]=e.borderstyle),o.style=r.serializeStyle(on(on({},ws(n)),u)),r.setAttribs(t,on(on({},ys(n)),o))},pv=function(n,t,e,r){var o=n.dom,u=r.getData(),i=Nt(u,(function(n,t){return e[t]!==n}));r.close(),""===u.class&&delete u.class,n.undoManager.transact((function(){if(!t){var e=parseInt(u.cols,10)||1,r=parseInt(u.rows,10)||1;t=_g(n,e,r,0,0)}if(jt(i)>0){dv(n,t,u);var c=o.select("caption",t)[0];(c&&!u.caption||!c&&u.caption)&&n.execCommand("mceTableToggleCaption"),""===u.align?Zg(n,t):Yg(n,t,u.align)}if(n.focus(),n.addVisual(),jt(i)>0){var a=Wt(i,"caption"),l=!a||jt(i)>1;os(n,t,{structure:a,style:l})}}))},gv=function(n,t){var e,r=n.dom,o=zh(n,xs(n));!1===t?(e=r.getParent(n.selection.getStart(),"table",n.getBody()),e?o=Hh(n,e,xs(n)):xs(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")):(o.cols="1",o.rows="1",xs(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var u=Ch(ks(n));u.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var i={type:"grid",columns:2,items:sv(n,u,t)},c=function(){return{type:"panel",items:[i]}},a=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[i]},Bh(n,"table")]}},l=xs(n)?a():c();n.windowManager.open({title:"Table Properties",size:"normal",body:l,onSubmit:w(pv,n,e,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},hv=function(n){return Ca(ta(n),Xc(n))},vv=function(n){return Ta(ta(n),Xc(n))},bv=function(n,t,e,r,i){var c=Xc(n),a=function(){return hv(n).each((function(t){Br(t,c).filter(C(c)).each((function(t){var e=bt.fromText("");if(Ao(t,e),No(t),n.dom.isEmpty(n.getBody()))n.setContent(""),n.selection.setCursorLocation();else{var r=n.dom.createRng();r.setStart(e.dom,0),r.setEnd(e.dom,0),n.selection.setRng(r),n.nodeChanged()}}))}))},l=function(t){return hv(n).each((function(e){var r=Is(n)||Ms(n)||Bs(n);r||Br(e,c).each((function(e){"relative"!==t||Cl(e)?"fixed"!==t||Tl(e)?"responsive"!==t||Sl(e)||Zs(e):Js(e):Ys(e),Jc(e),os(n,e.dom,is)}))}))},f=function(n){return Br(n,c)},s=function(t){return vv(n).bind((function(n){return f(n).map((function(e){return t(e,n)}))}))},m=function(t,e){s((function(t){n.formatter.toggle("tableclass",{value:e},t.dom),os(n,t.dom,us)}))},d=function(t,e){s((function(t){var o=Sa(r),u=G(o,(function(t){return n.formatter.match("tablecellclass",{value:e},t.dom)})),i=u?n.formatter.remove:n.formatter.apply;j(o,(function(n){return i("tablecellclass",{value:e},n.dom)})),os(n,t.dom,us)}))},g=function(){hv(n).each((function(t){Br(t,c).each((function(e){Ke(e,"caption").fold((function(){var t=bt.fromTag("caption");Eo(t,bt.fromText("Caption")),Oo(e,t,0),n.selection.setCursorLocation(t.dom,0)}),(function(r){se("caption")(t)&&Tt("td",e).each((function(t){return n.selection.setCursorLocation(t.dom,0)})),No(r)})),os(n,e.dom,is)}))}))},h=function(t){n.focus()},v=function(n,t){return void 0===t&&(t=!1),s((function(e,o){var u=ha(r,e,o);n(e,u,t).each(h)}))},b=function(){return s((function(t,e){var o=ha(r,t,e),u=Wc(p,bt.fromDom(n.getDoc()),O.none());return $g(t,o,u)}))},y=function(){return s((function(n,t){var e=ha(r,n,t);return Kg(n,e)}))},T=function(t,e){return e().each((function(e){var o=_(e,(function(n){return Cu(n)}));s((function(e,u){var i=zc(bt.fromDom(n.getDoc())),c=ba(r,u,o,i);t(e,c).each(h)}))}))},S=function(n){return function(t,e){return Lt(e,"type").each((function(t){v(n(t),e.no_events)}))}};Ft({mceTableSplitCells:function(){return v(t.unmergeCells)},mceTableMergeCells:function(){return v(t.mergeCells)},mceTableInsertRowBefore:function(){return v(t.insertRowsBefore)},mceTableInsertRowAfter:function(){return v(t.insertRowsAfter)},mceTableInsertColBefore:function(){return v(t.insertColumnsBefore)},mceTableInsertColAfter:function(){return v(t.insertColumnsAfter)},mceTableDeleteCol:function(){return v(t.deleteColumn)},mceTableDeleteRow:function(){return v(t.deleteRow)},mceTableCutCol:function(){return y().each((function(n){i.setColumns(n),v(t.deleteColumn)}))},mceTableCutRow:function(){return b().each((function(n){i.setRows(n),v(t.deleteRow)}))},mceTableCopyCol:function(){return y().each((function(n){return i.setColumns(n)}))},mceTableCopyRow:function(){return b().each((function(n){return i.setRows(n)}))},mceTablePasteColBefore:function(){return T(t.pasteColsBefore,i.getColumns)},mceTablePasteColAfter:function(){return T(t.pasteColsAfter,i.getColumns)},mceTablePasteRowBefore:function(){return T(t.pasteRowsBefore,i.getRows)},mceTablePasteRowAfter:function(){return T(t.pasteRowsAfter,i.getRows)},mceTableDelete:a,mceTableCellToggleClass:d,mceTableToggleClass:m,mceTableToggleCaption:g,mceTableSizingMode:function(n,t){return l(t)},mceTableCellType:S((function(n){return"th"===n?t.makeCellsHeader:t.unmakeCellsHeader})),mceTableColType:S((function(n){return"th"===n?t.makeColumnsHeader:t.unmakeColumnsHeader})),mceTableRowType:S((function(n){switch(n){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},(function(t,e){return n.addCommand(e,t)})),Ft({mceTableProps:w(gv,n,!1),mceTableRowProps:w(fv,n),mceTableCellProps:w(nv,n,r)},(function(t,e){return n.addCommand(e,(function(){return t()}))})),n.addCommand("mceInsertTable",(function(t,e){u(e)&&Et(e).length>0?jg(n,e.rows,e.columns,e.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):gv(n,!0)})),n.addCommand("mceTableApplyCellStyle",(function(t,e){var i=function(n){return"tablecell"+n.toLowerCase().replace("-","")};if(u(e)){var c=Sa(r);if(0!==c.length){var a=Nt(e,(function(t,e){return n.formatter.has(i(e))&&o(t)}));Ut(a)||(Ft(a,(function(t,e){j(c,(function(r){Ih.normal(n,r.dom).setFormat(i(e),t)}))})),f(c[0]).each((function(t){return os(n,t.dom,us)})))}}}))},yv=function(n,t,e){var r=Xc(n),o=function(t){return Ta(ta(n)).bind((function(n){return Br(n,r).map((function(r){var o=ha(e,r,n);return t(r,o)}))})).getOr("")};Ft({mceTableRowType:function(){return o(t.getTableRowType)},mceTableCellType:function(){return o(t.getTableCellType)},mceTableColType:function(){return o(t.getTableColType)}},(function(t,e){return n.addQueryValueHandler(e,t)}))},wv=function(){var n=bh(),t=bh();return{getRows:n.get,setRows:function(e){e.fold(n.clear,n.set),t.clear()},clearRows:n.clear,getColumns:t.get,setColumns:function(e){e.fold(t.clear,t.set),n.clear()},clearColumns:t.clear}},Cv={remove_similar:!0,inherit:!1},Tv=on({selector:"td,th"},Cv),Sv={tablecellbackgroundcolor:on({styles:{backgroundColor:"%value"}},Tv),tablecellverticalalign:on({styles:{"vertical-align":"%value"}},Tv),tablecellbordercolor:on({styles:{borderColor:"%value"}},Tv),tablecellclass:on({classes:["%value"]},Tv),tableclass:on({selector:"table",classes:["%value"]},Cv),tablecellborderstyle:on({styles:{borderStyle:"%value"}},Tv),tablecellborderwidth:on({styles:{borderWidth:"%value"}},Tv)},Dv=function(n){n.formatter.register(Sv)},xv=su.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Av=function(n){return void 0===n&&(n=void 0),xv.none(n)},Rv=on(on({},xv),{none:Av}),Ev=function(n,t,e,r,o){void 0===o&&(o=D);var u=1===r;if(!u&&e<=0)return Rv.first(n[0]);if(u&&e>=n.length-1)return Rv.last(n[n.length-1]);var i=e+r,c=n[i];return o(c)?Rv.middle(t,c):Ev(n,t,i,r,o)},Ov=function(n,t){return Br(n,t).bind((function(t){var e=Fr(t),r=K(e,(function(t){return St(n,t)}));return r.map((function(n){return{index:n,all:e}}))}))},Fv=function(n,t,e){var r=Ov(n,e);return r.fold((function(){return Rv.none(n)}),(function(e){return Ev(e.all,n,e.index,1,t)}))},kv=function(n,t,e){var r=Ov(n,e);return r.fold((function(){return Rv.none()}),(function(e){return Ev(e.all,n,e.index,-1,t)}))},Bv=function(n,t,e,r){return{start:n,soffset:t,finish:e,foffset:r}},Mv={create:Bv},Iv=su.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Nv=function(n,t,e,r){return n.fold(t,e,r)},Pv=function(n){return n.fold(b,b,b)},_v=Iv.before,jv=Iv.on,Lv=Iv.after,Wv={before:_v,on:jv,after:Lv,cata:Nv,getStart:Pv},zv=su.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Uv=function(n){return zv.exact(n.start,n.soffset,n.finish,n.foffset)},Hv=function(n){return n.match({domRange:function(n){return bt.fromDom(n.startContainer)},relative:function(n,t){return Wv.getStart(n)},exact:function(n,t,e,r){return n}})},qv=zv.domRange,Vv=zv.relative,Kv=zv.exact,$v=function(n){var t=Hv(n);return pe(t)},Xv=Mv.create,Gv={domRange:qv,relative:Vv,exact:Kv,exactFromRange:Uv,getWin:$v,range:Xv},Yv=function(n,t){var e=n.document.createRange();return e.selectNode(t.dom),e},Jv=function(n,t){var e=n.document.createRange();return Zv(e,t),e},Zv=function(n,t){return n.selectNodeContents(t.dom)},Qv=function(n,t){t.fold((function(t){n.setStartBefore(t.dom)}),(function(t,e){n.setStart(t.dom,e)}),(function(t){n.setStartAfter(t.dom)}))},nb=function(n,t){t.fold((function(t){n.setEndBefore(t.dom)}),(function(t,e){n.setEnd(t.dom,e)}),(function(t){n.setEndAfter(t.dom)}))},tb=function(n,t,e){var r=n.document.createRange();return Qv(r,t),nb(r,e),r},eb=function(n,t,e,r,o){var u=n.document.createRange();return u.setStart(t.dom,e),u.setEnd(r.dom,o),u},rb=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},ob=function(n){var t=n.getClientRects(),e=t.length>0?t[0]:n.getBoundingClientRect();return e.width>0||e.height>0?O.some(e).map(rb):O.none()},ub=su.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ib=function(n,t,e){return t(bt.fromDom(e.startContainer),e.startOffset,bt.fromDom(e.endContainer),e.endOffset)},cb=function(n,t){return t.match({domRange:function(n){return{ltr:v(n),rtl:O.none}},relative:function(t,e){return{ltr:cn((function(){return tb(n,t,e)})),rtl:cn((function(){return O.some(tb(n,e,t))}))}},exact:function(t,e,r,o){return{ltr:cn((function(){return eb(n,t,e,r,o)})),rtl:cn((function(){return O.some(eb(n,r,o,t,e))}))}}})},ab=function(n,t){var e=t.ltr();if(e.collapsed){var r=t.rtl().filter((function(n){return!1===n.collapsed}));return r.map((function(n){return ub.rtl(bt.fromDom(n.endContainer),n.endOffset,bt.fromDom(n.startContainer),n.startOffset)})).getOrThunk((function(){return ib(n,ub.ltr,e)}))}return ib(n,ub.ltr,e)},lb=function(n,t){var e=cb(n,t);return ab(n,e)},fb=function(n,t){var e=lb(n,t);return e.match({ltr:function(t,e,r,o){var u=n.document.createRange();return u.setStart(t.dom,e),u.setEnd(r.dom,o),u},rtl:function(t,e,r,o){var u=n.document.createRange();return u.setStart(r.dom,o),u.setEnd(t.dom,e),u}})};ub.ltr,ub.rtl;var sb=function(n,t,e,r,o){if(0===o)return 0;if(t===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),a=Math.abs(t-c.left);if(e<=c.bottom){if(e<c.top||a>u)return i-1;u=a}}return 0},mb=function(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom},db=function(n,t,e,r,o){var u=function(e){var r=n.dom.createRange();return r.setStart(t.dom,e),r.collapse(!0),r},i=function(n){var t=u(n);return t.getBoundingClientRect()},c=Lo(t).length,a=sb(i,e,r,o.right,c);return u(a)},pb=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getClientRects(),i=rn(u,(function(n){return mb(n,e,r)?O.some(n):O.none()}));return i.map((function(o){return db(n,t,e,r,o)}))},gb=function(n,t,e,r){var o=n.dom.createRange(),u=we(t);return rn(u,(function(t){return o.selectNode(t.dom),mb(o.getBoundingClientRect(),e,r)?hb(n,t,e,r):O.none()}))},hb=function(n,t,e,r){return ae(t)?pb(n,t,e,r):gb(n,t,e,r)},vb=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,e)),c=Math.max(u.top,Math.min(u.bottom,r));return hb(n,t,i,c)},bb=!0,yb=!1,wb=function(n,t){return t-n.left<n.right-t?bb:yb},Cb=function(n,t,e){var r=n.dom.createRange();return r.selectNode(t.dom),r.collapse(e),r},Tb=function(n,t,e){var r=n.dom.createRange();r.selectNode(t.dom);var o=r.getBoundingClientRect(),u=wb(o,e),i=u===bb?Ec:Oc;return i(t).map((function(t){return Cb(n,t,u)}))},Sb=function(n,t,e){var r=t.dom.getBoundingClientRect(),o=wb(r,e);return O.some(Cb(n,t,o))},Db=function(n,t,e){var r=0===we(t).length?Sb:Tb;return r(n,t,e)},xb=function(n,t,e){var r,o;return O.from(null===(o=(r=n.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,t,e)).bind((function(t){if(null===t.offsetNode)return O.none();var e=n.dom.createRange();return e.setStart(t.offsetNode,t.offset),e.collapse(),O.some(e)}))},Ab=function(n,t,e){var r,o;return O.from(null===(o=(r=n.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,t,e))},Rb=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,e)),c=Math.max(u.top,Math.min(u.bottom,r));return vb(n,t,i,c)},Eb=function(n,t,e){return bt.fromPoint(n,t,e).bind((function(r){var o=function(){return Db(n,r,t)};return 0===we(r).length?o():Rb(n,r,t,e).orThunk(o)}))},Ob=function(){return document.caretPositionFromPoint?xb:document.caretRangeFromPoint?Ab:Eb}(),Fb=function(n,t,e){var r=bt.fromDom(n.document);return Ob(r,t,e).map((function(n){return Mv.create(bt.fromDom(n.startContainer),n.startOffset,bt.fromDom(n.endContainer),n.endOffset)}))},kb=function(n,t){var e=re(n);return"input"===e?Wv.after(n):I(["br","img"],e)?0===t?Wv.before(n):Wv.after(n):Wv.on(n,t)},Bb=function(n,t){var e=n.fold(Wv.before,kb,Wv.after),r=t.fold(Wv.before,kb,Wv.after);return Gv.relative(e,r)},Mb=function(n,t,e,r){var o=kb(n,t),u=kb(e,r);return Gv.relative(o,u)},Ib=function(n){return n.match({domRange:function(n){var t=bt.fromDom(n.startContainer),e=bt.fromDom(n.endContainer);return Mb(t,n.startOffset,e,n.endOffset)},relative:Bb,exact:Mb})},Nb=function(n,t,e,r){var o=me(n),u=o.dom.createRange();return u.setStart(n.dom,t),u.setEnd(e.dom,r),u},Pb=function(n,t,e,r){var o=Nb(n,t,e,r),u=St(n,e)&&t===r;return o.collapsed&&!u},_b=function(n){return O.from(n.getSelection())},jb=function(n,t){_b(n).each((function(n){n.removeAllRanges(),n.addRange(t)}))},Lb=function(n,t,e,r,o){var u=eb(n,t,e,r,o);jb(n,u)},Wb=function(n,t,e,r,o,u){t.collapse(e.dom,r),t.extend(o.dom,u)},zb=function(n,t){return lb(n,t).match({ltr:function(t,e,r,o){Lb(n,t,e,r,o)},rtl:function(t,e,r,o){_b(n).each((function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(t.dom,e,r.dom,o);else if(u.extend)try{Wb(n,u,t,e,r,o)}catch(i){Lb(n,r,o,t,e)}else Lb(n,r,o,t,e)}))}})},Ub=function(n,t,e,r,o){var u=Mb(t,e,r,o);zb(n,u)},Hb=function(n,t,e){var r=Bb(t,e);zb(n,r)},qb=function(n){var t=Gv.getWin(n).dom,e=function(n,e,r,o){return eb(t,n,e,r,o)},r=Ib(n);return lb(t,r).match({ltr:e,rtl:e})},Vb=function(n){if(n.rangeCount>0){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1);return O.some(Mv.create(bt.fromDom(t.startContainer),t.startOffset,bt.fromDom(e.endContainer),e.endOffset))}return O.none()},Kb=function(n){if(null===n.anchorNode||null===n.focusNode)return Vb(n);var t=bt.fromDom(n.anchorNode),e=bt.fromDom(n.focusNode);return Pb(t,n.anchorOffset,e,n.focusOffset)?O.some(Mv.create(t,n.anchorOffset,e,n.focusOffset)):Vb(n)},$b=function(n,t,e){void 0===e&&(e=!0);var r=e?Jv:Yv,o=r(n,t);jb(n,o)},Xb=function(n){return _b(n).filter((function(n){return n.rangeCount>0})).bind(Kb)},Gb=function(n){return Xb(n).map((function(n){return Gv.exact(n.start,n.soffset,n.finish,n.foffset)}))},Yb=function(n,t){var e=fb(n,t);return ob(e)},Jb=function(n,t,e){return Fb(n,t,e)},Zb=function(n){_b(n).each((function(n){return n.removeAllRanges()}))},Qb=tinymce.util.Tools.resolve("tinymce.util.VK"),ny=function(n,t,e){return ry(n,t,Fv(e,Sf))},ty=function(n,t,e){return ry(n,t,kv(e,Sf))},ey=function(n,t){var e=Gv.exact(t,0,t,0);return qb(e)},ry=function(n,t,e){return e.fold(O.none,O.none,(function(t,e){return Ec(e).map((function(t){return ey(n,t)}))}),(function(e){return n.execCommand("mceTableInsertRowAfter"),ny(n,t,e)}))},oy=["table","li","dl"],uy=function(n,t,e){if(n.keyCode===Qb.TAB){var r=Vc(t),o=function(n){var t=re(n);return St(n,r)||I(oy,t)},u=t.selection.getRng(),i=bt.fromDom(n.shiftKey?u.startContainer:u.endContainer);Or(i,o).each((function(r){n.preventDefault(),Br(r,o).each(e.clear),t.selection.collapse(n.shiftKey);var u=n.shiftKey?ty:ny,i=u(t,o,r);i.each((function(n){t.selection.setRng(n)}))}))}},iy=function(n,t){return{selection:n,kill:t}},cy={create:iy},ay=function(n,t,e,r){return{start:Wv.on(n,t),finish:Wv.on(e,r)}},ly={create:ay},fy=function(n,t){var e=fb(n,t);return Mv.create(bt.fromDom(e.startContainer),e.startOffset,bt.fromDom(e.endContainer),e.endOffset)},sy=ly.create,my=function(n,t,e,r,o,u,i){return St(e,o)&&r===u?O.none():Xe(e,"td,th",t).bind((function(e){return Xe(o,"td,th",t).bind((function(r){return dy(n,t,e,r,i)}))}))},dy=function(n,t,e,r,o){return St(e,r)?O.none():eu(e,r,t).bind((function(t){var r=t.boxes.getOr([]);return r.length>1?(o(n,r,t.start,t.finish),O.some(cy.create(O.some(sy(e,0,e,Dc(e))),!0))):O.none()}))},py=function(n,t,e,r,o){var u=function(n){return o.clearBeforeUpdate(e),o.selectRange(e,n.boxes,n.start,n.finish),n.boxes};return cu(r,n,t,o.firstSelectedSelector,o.lastSelectedSelector).map(u)},gy=function(n,t){return{item:n,mode:t}},hy=function(n,t,e,r){return void 0===r&&(r=vy),n.property().parent(t).map((function(n){return gy(n,r)}))},vy=function(n,t,e,r){return void 0===r&&(r=by),e.sibling(n,t).map((function(n){return gy(n,r)}))},by=function(n,t,e,r){void 0===r&&(r=by);var o=n.property().children(t),u=e.first(o);return u.map((function(n){return gy(n,r)}))},yy=[{current:hy,next:vy,fallback:O.none()},{current:vy,next:by,fallback:O.some(hy)},{current:by,next:by,fallback:O.some(vy)}],wy=function(n,t,e,r,o){void 0===o&&(o=yy);var u=V(o,(function(n){return n.current===e}));return u.bind((function(e){return e.current(n,t,r,e.next).orThunk((function(){return e.fallback.bind((function(e){return wy(n,t,e,r)}))}))}))},Cy=function(){var n=function(n,t){return n.query().prevSibling(t)},t=function(n){return n.length>0?O.some(n[n.length-1]):O.none()};return{sibling:n,first:t}},Ty=function(){var n=function(n,t){return n.query().nextSibling(t)},t=function(n){return n.length>0?O.some(n[0]):O.none()};return{sibling:n,first:t}},Sy={left:Cy,right:Ty},Dy=function(n,t,e,r,o,u){var i=wy(n,t,r,o);return i.bind((function(t){return u(t.item)?O.none():e(t.item)?O.some(t.item):Dy(n,t.item,e,t.mode,o,u)}))},xy=function(n,t,e,r){return Dy(n,t,e,vy,Sy.left(),r)},Ay=function(n,t,e,r){return Dy(n,t,e,vy,Sy.right(),r)},Ry=function(n){return function(t){return 0===n.property().children(t).length}},Ey=function(n,t,e){return Fy(n,t,Ry(n),e)},Oy=function(n,t,e){return ky(n,t,Ry(n),e)},Fy=xy,ky=Ay,By=Ho(),My=function(n,t){return Ey(By,n,t)},Iy=function(n,t){return Oy(By,n,t)},Ny=function(n,t,e){return Fy(By,n,t,e)},Py=function(n,t,e){return ky(By,n,t,e)},_y=function(n,t,e){return ze(n,t,e).isSome()},jy=su.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ly=function(n,t,e){var r=n.getRect(t),o=n.getRect(e);return o.right>r.left&&o.left<r.right},Wy=function(n){return Xe(n,"tr")},zy=function(n,t,e,r,o,u,i){return Xe(r,"td,th",i).bind((function(e){return Xe(t,"td,th",i).map((function(t){return St(e,t)?St(r,e)&&Dc(e)===o?u(t):jy.none("in same cell"):Qo(Wy,[e,t]).fold((function(){return Ly(n,t,e)?jy.success():u(t)}),(function(n){return u(t)}))}))})).getOr(jy.none("default"))},Uy=function(n,t,e,r,o){return n.fold(t,e,r,o)},Hy=on(on({},jy),{verify:zy,cata:Uy}),qy=function(n,t,e,r){return{parent:n,children:t,element:e,index:r}},Vy=function(n){return ge(n).bind((function(t){var e=we(t);return Ky(e,n).map((function(r){return qy(t,e,n,r)}))}))},Ky=function(n,t){return K(n,w(St,t))},$y=function(n){return"br"===re(n)},Xy=function(n,t,e){return t(n,e).bind((function(n){return ae(n)&&0===Lo(n).trim().length?Xy(n,t,e):O.some(n)}))},Gy=function(n,t,e){return e.traverse(t).orThunk((function(){return Xy(t,e.gather,n)})).map(e.relative)},Yy=function(n,t){return Ce(n,t).filter($y).orThunk((function(){return Ce(n,t-1).filter($y)}))},Jy=function(n,t,e,r){return Yy(t,e).bind((function(t){return r.traverse(t).fold((function(){return Xy(t,r.gather,n).map(r.relative)}),(function(n){return Vy(n).map((function(n){return Wv.on(n.parent,n.index)}))}))}))},Zy=function(n,t,e,r){var o=$y(t)?Gy(n,t,r):Jy(n,t,e,r);return o.map((function(n){return{start:n,finish:n}}))},Qy=function(n){return Hy.cata(n,(function(n){return O.none()}),(function(){return O.none()}),(function(n){return O.some(im(n,0))}),(function(n){return O.some(im(n,Dc(n)))}))},nw=function(n,t){return{left:n.left,top:n.top+t,right:n.right,bottom:n.bottom+t}},tw=function(n,t){return{left:n.left,top:n.top-t,right:n.right,bottom:n.bottom-t}},ew=function(n,t,e){return{left:n.left+t,top:n.top+e,right:n.right+t,bottom:n.bottom+e}},rw=function(n){return n.top},ow=function(n){return n.bottom},uw=function(n,t,e){return e>=0&&e<Dc(t)?n.getRangedRect(t,e,t,e+1):e>0?n.getRangedRect(t,e-1,t,e):O.none()},iw=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},cw=function(n,t){return O.some(n.getRect(t))},aw=function(n,t,e){return ce(t)?cw(n,t).map(iw):ae(t)?uw(n,t,e).map(iw):O.none()},lw=function(n,t){return ce(t)?cw(n,t).map(iw):ae(t)?n.getRangedRect(t,0,t,Dc(t)).map(iw):O.none()},fw=5,sw=100,mw=su.generate([{none:[]},{retry:["caret"]}]),dw=function(n,t){return n.left<t.left||Math.abs(t.right-n.left)<1||n.left>t.right},pw=function(n,t,e){return Ue(t,cp).fold(S,(function(t){return lw(n,t).exists((function(n){return dw(e,n)}))}))},gw=function(n,t,e,r,o){var u=nw(o,fw);return Math.abs(e.bottom-r.bottom)<1||e.top>o.bottom?mw.retry(u):e.top===o.bottom?mw.retry(nw(o,1)):pw(n,t,o)?mw.retry(ew(u,fw,0)):mw.none()},hw=function(n,t,e,r,o){var u=tw(o,fw);return Math.abs(e.top-r.top)<1||e.bottom<o.top?mw.retry(u):e.bottom===o.top?mw.retry(tw(o,1)):pw(n,t,o)?mw.retry(ew(u,fw,0)):mw.none()},vw={point:rw,adjuster:hw,move:tw,gather:My},bw={point:ow,adjuster:gw,move:nw,gather:Iy},yw=function(n,t,e){return n.elementFromPoint(t,e).filter((function(n){return"table"===re(n)})).isSome()},ww=function(n,t,e,r,o){return Cw(n,t,e,t.move(r,fw),o)},Cw=function(n,t,e,r,o){return 0===o?O.some(r):yw(n,r.left,t.point(r))?ww(n,t,e,r,o-1):n.situsFromPoint(r.left,t.point(r)).bind((function(u){return u.start.fold(O.none,(function(u){return lw(n,u).bind((function(i){return t.adjuster(n,u,i,e,r).fold(O.none,(function(r){return Cw(n,t,e,r,o-1)}))})).orThunk((function(){return O.some(r)}))}),O.none)}))},Tw=function(n,t){return n.situsFromPoint(t.left,t.bottom+fw)},Sw=function(n,t){return n.situsFromPoint(t.left,t.top-fw)},Dw=function(n,t,e){return n.point(t)>e.getInnerHeight()?O.some(n.point(t)-e.getInnerHeight()):n.point(t)<0?O.some(-n.point(t)):O.none()},xw=function(n,t,e){var r=n.move(e,fw),o=Cw(t,n,e,r,sw).getOr(r);return Dw(n,o,t).fold((function(){return t.situsFromPoint(o.left,n.point(o))}),(function(e){return t.scrollBy(0,e),t.situsFromPoint(o.left,n.point(o)-e)}))},Aw={tryUp:w(xw,vw),tryDown:w(xw,bw),ieTryUp:Sw,ieTryDown:Tw,getJumpSize:v(fw)},Rw=20,Ew=function(n,t,e){return n.getSelection().bind((function(r){return Zy(t,r.finish,r.foffset,e).fold((function(){return O.some(im(r.finish,r.foffset))}),(function(o){var u=n.fromSitus(o),i=Hy.verify(n,r.finish,r.foffset,u.finish,u.foffset,e.failure,t);return Qy(i)}))}))},Ow=function(n,t,e,r,o,u){return 0===u?O.none():Bw(n,t,e,r,o).bind((function(i){var c=n.fromSitus(i),a=Hy.verify(n,e,r,c.finish,c.foffset,o.failure,t);return Hy.cata(a,(function(){return O.none()}),(function(){return O.some(i)}),(function(i){return St(e,i)&&0===r?Fw(n,e,r,tw,o):Ow(n,t,i,0,o,u-1)}),(function(i){return St(e,i)&&r===Dc(i)?Fw(n,e,r,nw,o):Ow(n,t,i,Dc(i),o,u-1)}))}))},Fw=function(n,t,e,r,o){return aw(n,t,e).bind((function(t){return kw(n,o,r(t,Aw.getJumpSize()))}))},kw=function(n,t,e){var r=ut().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?t.otherRetry(n,e):r.isIE()?t.ieRetry(n,e):O.none()},Bw=function(n,t,e,r,o){return aw(n,e,r).bind((function(t){return kw(n,o,t)}))},Mw=function(n,t,e){return Ew(n,t,e).bind((function(r){return Ow(n,t,r.element,r.offset,e,Rw).map(n.fromSitus)}))},Iw=function(n,t){return _y(n,(function(n){return ge(n).exists((function(n){return St(n,t)}))}))},Nw=function(n,t,e,r,o){return Xe(r,"td,th",t).bind((function(r){return Xe(r,"table",t).bind((function(u){return Iw(o,u)?Mw(n,t,e).bind((function(n){return Xe(n.finish,"td,th",t).map((function(t){return{start:r,finish:t,range:n}}))})):O.none()}))}))},Pw=function(n,t,e,r,o,u){return ut().browser.isIE()?O.none():u(r,t).orThunk((function(){return Nw(n,t,e,r,o).map((function(n){var t=n.range;return cy.create(O.some(sy(t.start,t.soffset,t.finish,t.foffset)),!0)}))}))},_w=function(n,t){return Xe(n,"tr",t).bind((function(n){return Xe(n,"table",t).bind((function(e){var r=Le(e,"tr");return St(n,r[0])?Ny(e,(function(n){return Oc(n).isSome()}),t).map((function(n){var t=Dc(n);return cy.create(O.some(sy(n,t,n,t)),!0)})):O.none()}))}))},jw=function(n,t){return Xe(n,"tr",t).bind((function(n){return Xe(n,"table",t).bind((function(e){var r=Le(e,"tr");return St(n,r[r.length-1])?Py(e,(function(n){return Ec(n).isSome()}),t).map((function(n){return cy.create(O.some(sy(n,0,n,0)),!0)})):O.none()}))}))},Lw=function(n,t,e,r,o,u,i){return Nw(n,e,r,o,u).bind((function(n){return dy(t,e,n.start,n.finish,i)}))},Ww=function(n,t){return Xe(n,"td,th",t)},zw=function(n,t,e,r){var o=bh(),u=o.clear,i=function(u){o.on((function(o){r.clearBeforeUpdate(t),Ww(u.target,e).each((function(i){eu(o,i,e).each((function(e){var o=e.boxes.getOr([]);if(1===o.length){var c=o[0],a="false"===Df(c),l=rr(Tf(u.target),c,St);a&&l&&(r.selectRange(t,o,c,c),n.selectContents(c))}else o.length>1&&(r.selectRange(t,o,e.start,e.finish),n.selectContents(i))}))}))}))},c=function(n){r.clear(t),Ww(n.target,e).each(o.set)},a=function(n){i(n)},l=function(n){i(n),u()};return{clearstate:u,mousedown:c,mouseover:a,mouseup:l}},Uw={traverse:ye,gather:Iy,relative:Wv.before,otherRetry:Aw.tryDown,ieRetry:Aw.ieTryDown,failure:Hy.failedDown},Hw={traverse:be,gather:My,relative:Wv.before,otherRetry:Aw.tryUp,ieRetry:Aw.ieTryUp,failure:Hy.failedUp},qw=function(n){return function(t){return t===n}},Vw=qw(38),Kw=qw(40),$w=function(n){return n>=37&&n<=40},Xw={isBackward:qw(37),isForward:qw(39)},Gw={isBackward:qw(39),isForward:qw(37)},Yw=function(n){var t=void 0!==n?n.dom:document,e=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Zu(e,r)},Jw=function(n,t,e){var r=void 0!==e?e.dom:document,o=r.defaultView;o&&o.scrollBy(n,t)},Zw=function(n){var t=function(t,e){return bt.fromPoint(bt.fromDom(n.document),t,e)},e=function(n){return n.dom.getBoundingClientRect()},r=function(t,e,r,o){var u=Gv.exact(t,e,r,o);return Yb(n,u)},o=function(){return Gb(n).map((function(t){return fy(n,t)}))},u=function(t){var e=Gv.relative(t.start,t.finish);return fy(n,e)},i=function(t,e){return Jb(n,t,e).map((function(n){return ly.create(n.start,n.soffset,n.finish,n.foffset)}))},c=function(){Zb(n)},a=function(t){void 0===t&&(t=!1),Gb(n).each((function(e){return e.fold((function(n){return n.collapse(t)}),(function(e,r){var o=t?e:r;Hb(n,o,o)}),(function(e,r,o,u){var i=t?e:o,c=t?r:u;Ub(n,i,c,i,c)}))}))},l=function(t){$b(n,t,!1)},f=function(t){$b(n,t)},s=function(t){Ub(n,t.start,t.soffset,t.finish,t.foffset)},m=function(t,e){Hb(n,t,e)},d=function(){return n.innerHeight},p=function(){var t=Yw(bt.fromDom(n.document));return t.top},g=function(t,e){Jw(t,e,bt.fromDom(n.document))};return{elementFromPoint:t,getRect:e,getRangedRect:r,getSelection:o,fromSitus:u,situsFromPoint:i,clearSelection:c,collapseSelection:a,setSelection:s,setRelativeSelection:m,selectNode:l,selectContents:f,getInnerHeight:d,getScrollY:p,scrollBy:g}},Qw=function(n,t){return{rows:n,cols:t}},nC=function(n,t,e,r){var o=Zw(n),u=zw(o,t,e,r);return{clearstate:u.clearstate,mousedown:u.mousedown,mouseover:u.mouseover,mouseup:u.mouseup}},tC=function(n,t,e,r){var o=Zw(n),u=function(){return r.clear(t),O.none()},i=function(n,i,c,a,l,f){var s=n.raw,m=s.which,d=!0===s.shiftKey,p=ru(t,r.selectedSelector).fold((function(){return $w(m)&&!d&&r.clearBeforeUpdate(t),Kw(m)&&d?w(Lw,o,t,e,Uw,a,i,r.selectRange):Vw(m)&&d?w(Lw,o,t,e,Hw,a,i,r.selectRange):Kw(m)?w(Pw,o,e,Uw,a,i,jw):Vw(m)?w(Pw,o,e,Hw,a,i,_w):O.none}),(function(n){var e=function(e){return function(){var u=rn(e,(function(e){return py(e.rows,e.cols,t,n,r)}));return u.fold((function(){return uu(t,r.firstSelectedSelector,r.lastSelectedSelector).map((function(n){var e=Kw(m)||f.isForward(m)?Wv.after:Wv.before;return o.setRelativeSelection(Wv.on(n.first,0),e(n.table)),r.clear(t),cy.create(O.none(),!0)}))}),(function(n){return O.some(cy.create(O.none(),!0))}))}};return Kw(m)&&d?e([Qw(1,0)]):Vw(m)&&d?e([Qw(-1,0)]):f.isBackward(m)&&d?e([Qw(0,-1),Qw(-1,0)]):f.isForward(m)&&d?e([Qw(0,1),Qw(1,0)]):$w(m)&&!d?u:O.none}));return p()},c=function(n,o,u,i,c){return ru(t,r.selectedSelector).fold((function(){var a=n.raw,l=a.which,f=!0===a.shiftKey;return f&&$w(l)?my(t,e,o,u,i,c,r.selectRange):O.none()}),O.none)};return{keydown:i,keyup:c}},eC=function(n,t,e,r){var o=Zw(n);return function(n,u){r.clearBeforeUpdate(t),eu(n,u,e).each((function(n){var e=n.boxes.getOr([]);r.selectRange(t,e,n.start,n.finish),o.selectContents(u),o.collapseSelection()}))}},rC=function(n,t){j(t,(function(t){ff(n,t)}))},oC=function(n){return function(t){af(t,n)}},uC=function(n){return function(t){rC(t,n)}},iC=function(n){var t=oC(n.selected),e=uC([n.selected,n.lastSelected,n.firstSelected]),r=function(t){var r=Le(t,n.selectedSelector);j(r,e)},o=function(e,o,u,i){r(e),j(o,t),af(u,n.firstSelected),af(i,n.lastSelected)};return{clearBeforeUpdate:r,clear:r,selectRange:o,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},cC=function(n,t,e){var r=function(t){tr(t,n.selected),tr(t,n.firstSelected),tr(t,n.lastSelected)},o=function(t){Ye(t,n.selected,"1")},u=function(n){i(n),e()},i=function(t){var e=Le(t,n.selectedSelector+","+n.firstSelectedSelector+","+n.lastSelectedSelector);j(e,r)},c=function(e,r,i,c){u(e),j(r,o),Ye(i,n.firstSelected,"1"),Ye(c,n.lastSelected,"1"),t(r,i,c)};return{clearBeforeUpdate:i,clear:u,selectRange:c,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},aC={byClass:iC,byAttr:cC},lC=function(n,t){var e=n.slice(0,t[t.length-1].row+1),r=zm(e);return X(r,(function(n){var e=n.cells.slice(0,t[t.length-1].column+1);return _(e,(function(n){return n.element}))}))},fC=function(n,t){var e=n.slice(t[0].row+t[0].rowspan-1,n.length),r=zm(e);return X(r,(function(n){var e=n.cells.slice(t[0].column+t[0].colspan-1,n.cells.length);return _(e,(function(n){return n.element}))}))},sC=function(n,t,e){var r=lo.fromTable(n),o=Gm(r,t);return o.map((function(n){var t=Lm(r,e,!1),o=lC(t,n),u=fC(t,n);return{upOrLeftCells:o,downOrRightCells:u}}))},mC=tinymce.util.Tools.resolve("tinymce.Env"),dC=function(n){return!1===sf(bt.fromDom(n.target),"ephox-snooker-resizer-bar")};function pC(n,t,e){var r=function(t,r,o){e.targets().each((function(e){var u=Br(r);u.each((function(u){var i=zs(n),c=Wc(p,bt.fromDom(n.getDoc()),i),a=sC(u,e,c);es(n,t,r,o,a)}))}))},o=function(){return rs(n)},u=aC.byAttr(pa,r,o);return n.on("init",(function(e){var r=n.getWin(),o=Vc(n),i=Xc(n),c=function(){var t=n.selection,e=bt.fromDom(t.getStart()),r=bt.fromDom(t.getEnd()),i=Qo(Br,[e,r]);i.fold((function(){return u.clear(o)}),p)},a=nC(r,o,i,u),l=tC(r,o,i,u),f=eC(r,o,i,u),s=function(n){return!0===n.raw.shiftKey};n.on("TableSelectorChange",(function(n){return f(n.start,n.finish)}));var m=function(t,e){s(t)&&(e.kill&&t.kill(),e.selection.each((function(t){var e=Gv.relative(t.start,t.finish),o=fb(r,e);n.selection.setRng(o)})))},d=function(t){var e=Ql(t);if(e.raw.shiftKey&&$w(e.raw.which)){var r=n.selection.getRng(),o=bt.fromDom(r.startContainer),u=bt.fromDom(r.endContainer);l.keyup(e,o,r.startOffset,u,r.endOffset).each((function(n){m(e,n)}))}},g=function(e){var r=Ql(e);t().each((function(n){return n.hideBars()}));var o=n.selection.getRng(),u=bt.fromDom(o.startContainer),i=bt.fromDom(o.endContainer),c=Vu(Xw,Gw)(bt.fromDom(n.selection.getStart()));l.keydown(r,u,o.startOffset,i,o.endOffset,c).each((function(n){m(r,n)})),t().each((function(n){return n.showBars()}))},h=function(n){return 0===n.button},v=function(n){return void 0===n.buttons||(!(!mC.browser.isEdge()||0!==n.buttons)||0!==(1&n.buttons))},b=function(n){a.clearstate()},y=function(n){h(n)&&dC(n)&&a.mousedown(Ql(n))},w=function(n){v(n)&&dC(n)&&a.mouseover(Ql(n))},C=function(n){h(n)&&dC(n)&&a.mouseup(Ql(n))},T=function(){var n=gh(bt.fromDom(o)),t=gh(0),e=function(e){var r=bt.fromDom(e.target);if("td"===re(r)||"th"===re(r)){var o=n.get(),u=t.get();St(o,r)&&e.timeStamp-u<300&&(e.preventDefault(),f(r,r))}n.set(r),t.set(e.timeStamp)};return{touchEnd:e}},S=T();n.on("dragstart",b),n.on("mousedown",y),n.on("mouseover",w),n.on("mouseup",C),n.on("touchend",S.touchEnd),n.on("keyup",d),n.on("keydown",g),n.on("NodeChange",c)})),{clear:u.clear}}var gC=function(n,t){return Ke(n,t).isSome()},hC=function(n,t){var e=gh(O.none()),r=gh([]),o=O.none(),u=se("caption"),i=function(n){return o.forall((function(t){return!t[n]}))},c=function(){return Ca(ta(n),Xc(n))},a=function(){return Ca(ea(n),Xc(n))},l=function(){return c().bind((function(n){return cr(ur(Br(n),a().bind(Br),(function(e,r){return St(e,r)?u(n)?O.some(ga(n)):O.some(ha(t,e,n)):O.none()})))}))},f=function(n){var t=Br(n.element);return t.map((function(t){var e=lo.fromTable(t),r=Gm(e,n).getOr([]),o=H(r,(function(n,t){return t.isLocked&&(n.onAny=!0,0===t.column?n.onFirst=!0:t.column+t.colspan>=e.grid.columns&&(n.onLast=!0)),n}),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Qm(e,n).isSome(),unmergeable:nd(e,n).isSome(),locked:o}}))},s=function(){e.set(cn(l)()),o=e.get().bind(f),j(r.get(),(function(n){return n()}))},m=function(n){return n(),r.set(r.get().concat([n])),function(){r.set(z(r.get(),(function(t){return t!==n})))}},d=function(n,t){return m((function(){return e.get().fold((function(){n.setDisabled(!0)}),(function(e){n.setDisabled(t(e))}))}))},p=function(n,t,r){return m((function(){return e.get().fold((function(){n.setDisabled(!0),n.setActive(!1)}),(function(e){n.setDisabled(t(e)),n.setActive(r(e))}))}))},g=function(n){return o.exists((function(t){return t.locked[n]}))},h=function(n){return d(n,(function(n){return!1}))},v=function(n){return d(n,(function(n){return u(n.element)}))},b=function(n){return function(t){return d(t,(function(t){return u(t.element)||g(n)}))}},y=function(n){return function(t){return d(t,(function(t){return u(t.element)||n().isNone()}))}},w=function(n,t){return function(e){return d(e,(function(e){return u(e.element)||n().isNone()||g(t)}))}},C=function(n){return d(n,(function(n){return i("mergeable")}))},T=function(n){return d(n,(function(n){return i("unmergeable")}))},D=function(t){return p(t,S,(function(t){var e=Br(t.element,Xc(n));return e.exists((function(n){return gC(n,"caption")}))}))},x=function(t,e){return function(r){return p(r,(function(n){return u(n.element)}),(function(){return n.queryCommandValue(t)===e}))}},A=x("mceTableRowType","header"),R=x("mceTableColType","th");return n.on("NodeChange ExecCommand TableSelectorChange",s),{onSetupTable:h,onSetupCellOrRow:v,onSetupColumn:b,onSetupPasteable:y,onSetupPasteableColumn:w,onSetupMergeable:C,onSetupUnmergeable:T,resetTargets:s,onSetupTableWithCaption:D,onSetupTableRowHeaders:A,onSetupTableColumnHeaders:R,targets:e.get}},vC=function(n,t,e,r){n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});var o=function(t){return function(){return n.execCommand(t)}};n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:e.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:e.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:e.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:e.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:e.onSetupColumn("onFirst")}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:e.onSetupColumn("onLast")}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onLast")}),n.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var u=Dh(ks(n));0!==u.length&&n.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:xh(n,t,u,"tableclass",(function(t){return n.execCommand("mceTableToggleClass",!1,t)})),onSetup:e.onSetupTable});var i=Dh(Os(n));0!==i.length&&n.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:xh(n,t,i,"tablecellclass",(function(t){return n.execCommand("mceTableCellToggleClass",!1,t)})),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:xh(n,t,nh,"tablecellverticalalign",Sh(n,"vertical-align")),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:xh(n,t,vs(n),"tablecellborderwidth",Sh(n,"border-width")),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:xh(n,t,bs(n),"tablecellborderstyle",Sh(n,"border-style")),onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:e.onSetupTableWithCaption}),n.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(t){return t(Ah(n,Hs(n),"background-color"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(t){return t(Ah(n,qs(n),"border-color"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Rh(n),onSetup:e.onSetupTableRowHeaders}),n.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:Eh(n),onSetup:e.onSetupTableColumnHeaders})},bC=function(n){var t=function(t){return n.dom.is(t,"table")&&n.getBody().contains(t)},e=Ns(n);e.length>0&&n.ui.registry.addContextToolbar("table",{predicate:t,items:e,scope:"node",position:"node"})},yC=function(n,t,e,r){var o=function(t){return function(){return n.execCommand(t)}},u=function(t){n.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},i={text:"Table properties",onSetup:e.onSetupTable,onAction:o("mceTableProps")},c={text:"Delete table",icon:"table-delete-table",onSetup:e.onSetupTable,onAction:o("mceTableDelete")};n.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(r.getRows)}),n.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(r.getRows)});var a={type:"nestedmenuitem",text:"Row",getSubmenuItems:v("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};n.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:e.onSetupColumn("onFirst")}),n.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:e.onSetupColumn("onLast")}),n.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onLast")});var l={type:"nestedmenuitem",text:"Column",getSubmenuItems:v("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};n.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:e.onSetupMergeable}),n.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:e.onSetupUnmergeable});var f={type:"nestedmenuitem",text:"Cell",getSubmenuItems:v("tablecellprops tablemergecells tablesplitcells")};!1===Rs(n)?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:u}]}}),n.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),n.ui.registry.addMenuItem("tableprops",i),n.ui.registry.addMenuItem("deletetable",c),n.ui.registry.addNestedMenuItem("row",a),n.ui.registry.addNestedMenuItem("column",l),n.ui.registry.addNestedMenuItem("cell",f),n.ui.registry.addContextMenu("table",{update:function(){return e.resetTargets(),e.targets().fold(v(""),(function(n){return"caption"===re(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}});var s=Dh(ks(n));0!==s.length&&n.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Th(n,t,s,"tableclass",(function(t){return n.execCommand("mceTableToggleClass",!1,t)}))},onSetup:e.onSetupTable});var m=Dh(Os(n));0!==m.length&&n.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Th(n,t,m,"tablecellclass",(function(t){return n.execCommand("mceTableCellToggleClass",!1,t)}))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Th(n,t,nh,"tablecellverticalalign",Sh(n,"vertical-align"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Th(n,t,vs(n),"tablecellborderwidth",Sh(n,"border-width"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Th(n,t,bs(n),"tablecellborderstyle",Sh(n,"border-style"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:e.onSetupTableWithCaption}),n.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Ah(n,Hs(n),"background-color")},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Ah(n,qs(n),"border-color")},onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Rh(n),onSetup:e.onSetupTableRowHeaders}),n.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:Eh(n),onSetup:e.onSetupTableColumnHeaders})},wC=function(n){var t=vu((function(){return Vc(n)}),(function(){return Ta(ta(n),Xc(n))}),pa.selectedSelector),e=hC(n,t),r=um(n),o=pC(n,r.lazyResize,e),u=Tg(n,o,r.lazyWire),i=wv();return bv(n,u,o,t,i),yv(n,u,t),Ea(n,t,u),yC(n,t,e,i),vC(n,t,e,i),bC(n),n.on("PreInit",(function(){n.serializer.addTempAttr(pa.firstSelected),n.serializer.addTempAttr(pa.lastSelected),Dv(n)})),Ts(n)&&n.on("keydown",(function(t){uy(t,n,o)})),n.on("remove",(function(){r.destroy()})),Ug(n,i,r,e)};function CC(){bu.add("table",wC)}CC()})()},d7b4:function(n,t){n.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},d91d:function(n,t){n.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},e53f:function(n,t,e){"use strict";t.Any=e("d7b4"),t.Cc=e("5b35"),t.Cf=e("ff6b"),t.P=e("c592"),t.Z=e("d91d")},eef15:function(n,t,e){"use strict";e.r(t),e.d(t,"useUncontrolled",(function(){return v})),e.d(t,"useUncontrolledProp",(function(){return h})),e.d(t,"uncontrollable",(function(){return C}));var r=e("5f34"),o=e("4676"),u=e("9cd5"),i=e.n(u),c=e("22d9"),a=e.n(c),l=function(){};function f(n,t){var e={};return Object.keys(n).forEach((function(n){e[m(n)]=l})),e}function s(n,t){return void 0!==n[t]}function m(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function d(n){return!!n&&("function"!==typeof n||n.prototype&&n.prototype.isReactComponent)}function p(n){var t=g(n,"string");return"symbol"===typeof t?t:String(t)}function g(n,t){if("object"!==typeof n||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var r=e.call(n,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}function h(n,t,e){var r=Object(u["useRef"])(void 0!==n),o=Object(u["useState"])(t),i=o[0],c=o[1],a=void 0!==n,l=r.current;return r.current=a,!a&&l&&i!==t&&c(t),[a?n:i,Object(u["useCallback"])((function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];e&&e.apply(void 0,[n].concat(r)),c(n)}),[e])]}function v(n,t){return Object.keys(t).reduce((function(e,u){var i,c=e,a=c[m(u)],l=c[u],f=Object(o["a"])(c,[m(u),u].map(p)),s=t[u],d=h(l,a,n[s]),g=d[0],v=d[1];return Object(r["a"])({},f,(i={},i[u]=g,i[s]=v,i))}),n)}var b=e("478d"),y=e("d849"),w="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function C(n,t,e){void 0===e&&(e=[]);var u=n.displayName||n.name||"Component",c=d(n),l=Object.keys(t),p=l.map(m);!c&&e.length&&a()(!1);var g=function(u){function c(){for(var n,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];n=u.call.apply(u,[this].concat(i))||this,n.handlers=Object.create(null),l.forEach((function(e){var o=t[e],u=function(t){if(n.props[o]){var u;n._notifying=!0;for(var i=arguments.length,c=new Array(i>1?i-1:0),a=1;a<i;a++)c[a-1]=arguments[a];(u=n.props)[o].apply(u,[t].concat(c)),n._notifying=!1}n.unmounted||n.setState((function(n){var o,u=n.values;return{values:Object(r["a"])(Object.create(null),u,(o={},o[e]=t,o))}}))};n.handlers[o]=u})),e.length&&(n.attachRef=function(t){n.inner=t});var a=Object.create(null);return l.forEach((function(t){a[t]=n.props[m(t)]})),n.state={values:a,prevProps:{}},n}Object(b["a"])(c,u);var a=c.prototype;return a.shouldComponentUpdate=function(){return!this._notifying},c.getDerivedStateFromProps=function(n,t){var e=t.values,o=t.prevProps,u={values:Object(r["a"])(Object.create(null),e),prevProps:{}};return l.forEach((function(t){u.prevProps[t]=n[t],!s(n,t)&&s(o,t)&&(u.values[t]=n[m(t)])})),u},a.componentWillUnmount=function(){this.unmounted=!0},a.render=function(){var t=this,e=this.props,u=e.innerRef,c=Object(o["a"])(e,["innerRef"]);p.forEach((function(n){delete c[n]}));var a={};return l.forEach((function(n){var e=t.props[n];a[n]=void 0!==e?e:t.state.values[n]})),i.a.createElement(n,Object(r["a"])({},c,a,this.handlers,{ref:u||this.attachRef}))},c}(i.a.Component);Object(y["a"])(g),g.displayName="Uncontrolled("+u+")",g.propTypes=Object(r["a"])({innerRef:function(){}},f(t,u)),e.forEach((function(n){g.prototype[n]=function(){var t;return(t=this.inner)[n].apply(t,arguments)}}));var h=g;return i.a.forwardRef&&(h=i.a.forwardRef((function(n,t){return i.a.createElement(g,Object(r["a"])({},n,{innerRef:t,__source:{fileName:w,lineNumber:128},__self:this}))})),h.propTypes=g.propTypes),h.ControlledComponent=n,h.deferControlTo=function(n,e,o){return void 0===e&&(e={}),C(n,Object(r["a"])({},t,e),o)},h}},f2a5:function(n,t){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},e=function(n){return function(e){return t(e)===n}},r=function(n){return function(t){return typeof t===n}},o=e("string"),u=r("function"),i=function(){},c=function(n){return function(){return n}},a=function(n){return n};function l(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.concat(e);return n.apply(null,o)}}var f=c(!1),s=c(!0),m=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=tinymce.util.Tools.resolve("tinymce.util.XHR"),p=function(n){return n.getParam("template_cdate_classes","cdate")},g=function(n){return n.getParam("template_mdate_classes","mdate")},h=function(n){return n.getParam("template_selected_content_classes","selcontent")},v=function(n){return n.getParam("template_preview_replace_values")},b=function(n){return n.getParam("content_style","","string")},y=function(n){return n.getParam("content_css_cors",!1,"boolean")},w=function(n){return n.getParam("template_replace_values")},C=function(n){return n.getParam("templates")},T=function(n){return n.getParam("template_cdate_format",n.translate("%Y-%m-%d"))},S=function(n){return n.getParam("template_mdate_format",n.translate("%Y-%m-%d"))},D=function(n){var t=n.getParam("body_class","","hash");return t[n.id]||""},x=function(n){var t=n.getParam("body_class","","string");return-1===t.indexOf("=")?t:D(n)},A=function(n,t){if(n=""+n,n.length<t)for(var e=0;e<t-n.length;e++)n="0"+n;return n},R=function(n,t,e){void 0===e&&(e=new Date);var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),i="January February March April May June July August September October November December".split(" ");return t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+e.getFullYear()),t=t.replace("%y",""+e.getYear()),t=t.replace("%m",A(e.getMonth()+1,2)),t=t.replace("%d",A(e.getDate(),2)),t=t.replace("%H",""+A(e.getHours(),2)),t=t.replace("%M",""+A(e.getMinutes(),2)),t=t.replace("%S",""+A(e.getSeconds(),2)),t=t.replace("%I",""+((e.getHours()+11)%12+1)),t=t.replace("%p",e.getHours()<12?"AM":"PM"),t=t.replace("%B",""+n.translate(i[e.getMonth()])),t=t.replace("%b",""+n.translate(u[e.getMonth()])),t=t.replace("%A",""+n.translate(o[e.getDay()])),t=t.replace("%a",""+n.translate(r[e.getDay()])),t=t.replace("%%","%"),t},E=function(n,t){return function(){var e=C(n);u(e)?e(t):o(e)?d.send({url:e,success:function(n){t(JSON.parse(n))}}):t(e)}},O=function(n,t){return m.each(t,(function(t,e){u(t)&&(t=t(e)),n=n.replace(new RegExp("\\{\\$"+e+"\\}","g"),t)})),n},F=function(n,t){var e=n.dom,r=w(n);m.each(e.select("*",t),(function(n){m.each(r,(function(t,r){e.hasClass(n,r)&&u(t)&&t(n)}))}))},k=function(n,t){return new RegExp("\\b"+t+"\\b","g").test(n.className)},B=function(n,t,e){var r=n.dom,o=n.selection.getContent();e=O(e,w(n));var u=r.create("div",null,e),i=r.select(".mceTmpl",u);i&&i.length>0&&(u=r.create("div",null),u.appendChild(i[0].cloneNode(!0))),m.each(r.select("*",u),(function(t){k(t,p(n).replace(/\s+/g,"|"))&&(t.innerHTML=R(n,T(n))),k(t,g(n).replace(/\s+/g,"|"))&&(t.innerHTML=R(n,S(n))),k(t,h(n).replace(/\s+/g,"|"))&&(t.innerHTML=o)})),F(n,u),n.execCommand("mceInsertContent",!1,u.innerHTML),n.addVisual()},M=function(){return I},I=function(){var n=function(n){return n()},t=a,e={fold:function(n,t){return n()},isSome:f,isNone:s,getOr:t,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:t,orThunk:n,map:M,each:i,bind:M,exists:f,forall:s,filter:function(){return M()},toArray:function(){return[]},toString:c("none()")};return e}(),N=function(n){var t=c(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},isSome:s,isNone:f,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return N(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:I},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},P=function(n){return null===n||void 0===n?I:N(n)},_={some:N,none:M,from:P},j=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r},L=function(n,t,e){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(t(u,r))return _.some(u);if(e(u,r))break}return _.none()},W=function(n,t){return L(n,t,f)},z=tinymce.util.Tools.resolve("tinymce.Env"),U=tinymce.util.Tools.resolve("tinymce.util.Promise"),H=Object.hasOwnProperty,q=function(n,t){return V(n,t)?_.from(n[t]):_.none()},V=function(n,t){return H.call(n,t)},K={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},$=function(n){return n.replace(/["'<>&]/g,(function(n){return q(K,n).getOr(n)}))},X=function(n,t){if(-1===t.indexOf("<html>")){var e="",r=b(n),o=y(n)?' crossorigin="anonymous"':"";m.each(n.contentCSS,(function(t){e+='<link type="text/css" rel="stylesheet" href="'+n.documentBaseURI.toAbsolute(t)+'"'+o+">"})),r&&(e+='<style type="text/css">'+r+"</style>");var u=x(n),i=n.dom.encode,c=z.mac?"e.metaKey":"e.ctrlKey && !e.altKey",a='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+c+")) {e.preventDefault();}}}, false);<\/script> ",l=n.getBody().dir,f=l?' dir="'+i(l)+'"':"";t='<!DOCTYPE html><html><head><base href="'+i(n.documentBaseURI.getURI())+'">'+e+a+'</head><body class="'+i(u)+'"'+f+">"+t+"</body></html>"}return O(t,v(n))},G=function(n,t){var e=function(){if(!t||0===t.length){var e=n.translate("No templates defined.");return n.notificationManager.open({text:e,type:"info"}),_.none()}return _.from(m.map(t,(function(n,t){var e=function(n){return void 0!==n.url};return{selected:0===t,text:n.title,value:{url:e(n)?_.from(n.url):_.none(),content:e(n)?_.none():_.from(n.content),description:n.description}}})))},r=function(n){return j(n,(function(n){return{text:n.text,value:n.text}}))},o=function(n,t){return W(n,(function(n){return n.text===t}))},u=function(t){n.windowManager.alert("Could not load the specified template.",(function(){return t.focus("template")}))},i=function(n){return new U((function(t,e){n.value.url.fold((function(){return t(n.value.content.getOr(""))}),(function(n){return d.send({url:n,success:function(n){t(n)},error:function(n){e(n)}})}))}))},c=function(n,t){return function(e,r){if("template"===r.name){var c=e.getData().template;o(n,c).each((function(n){e.block("Loading..."),i(n).then((function(r){t(e,n,r)})).catch((function(){t(e,n,""),e.disable("save"),u(e)}))}))}}},a=function(t){return function(e){var r=e.getData();o(t,r.template).each((function(t){i(t).then((function(t){n.execCommand("mceInsertTemplate",!1,t),e.close()})).catch((function(){e.disable("save"),u(e)}))}))}},l=function(t){var e=r(t),o=function(n,e){return{title:"Insert Template",size:"large",body:{type:"panel",items:n},initialData:e,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:a(t),onChange:c(t,l)}},l=function(t,r,u){var i=X(n,u),c=[{type:"selectbox",name:"template",label:"Templates",items:e},{type:"htmlpanel",html:'<p aria-live="polite">'+$(r.value.description)+"</p>"},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1}],a={template:r.text,preview:i};t.unblock(),t.redial(o(c,a)),t.focus("template")},f=n.windowManager.open(o([],{template:"",preview:""}));f.block("Loading..."),i(t[0]).then((function(n){l(f,t[0],n)})).catch((function(){l(f,t[0],""),f.disable("save"),u(f)}))},f=e();f.each(l)},Y=function(n){return function(t){G(n,t)}},J=function(n){n.addCommand("mceInsertTemplate",l(B,n)),n.addCommand("mceTemplate",E(n,Y(n)))},Z=function(n){n.on("PreProcess",(function(t){var e=n.dom,r=S(n);m.each(e.select("div",t.node),(function(t){e.hasClass(t,"mceTmpl")&&(m.each(e.select("*",t),(function(t){e.hasClass(t,g(n).replace(/\s+/g,"|"))&&(t.innerHTML=R(n,r))})),F(n,t))}))}))},Q=function(n){var t=function(){return n.execCommand("mceTemplate")};n.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:t}),n.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:t})};function nn(){n.add("template",(function(n){Q(n),J(n),Z(n)}))}nn()})()},ff6b:function(n,t){n.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/}}]);