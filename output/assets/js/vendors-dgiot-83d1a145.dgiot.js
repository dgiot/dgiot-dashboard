/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2022-01-14 02:40:10
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors-dgiot-83d1a145"],{"05af":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaticFieldRenderer=t.StaticControlRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("4275"),i=a("1837"),l=(0,n.__importDefault)(a("6f5f")),s=(0,n.__importDefault)(a("dd31")),d=(0,n.__importDefault)(a("062e")),u=a("a853"),p=a("f5c1"),c=function(e){function t(t){var a=e.call(this,t)||this;return a.handleQuickChange=a.handleQuickChange.bind(a),a}return(0,n.__extends)(t,e),t.prototype.handleQuickChange=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,o,i;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return a=this.props,r=a.onBulkChange,o=a.onAction,i=a.data,t&&t.api?[4,o(null,{actionType:"ajax",api:t.api},(0,u.extendObject)(i,e),!0)]:[3,2];case 1:n.sent(),n.label=2;case 2:return r&&r(e,!0===t),[2]}}))}))},t.prototype.render=function(){var e,t=this.props,a=t.className,o=t.value,i=t.label,l=t.type,s=t.render,d=(t.children,t.data),p=t.classnames,c=t.name,m=t.disabled,f=t.$schema,v=t.defaultValue,g=t.borderMode,y=(0,n.__rest)(t,["className","value","label","type","render","children","data","classnames","name","disabled","$schema","defaultValue","borderMode"]),_=/^static/.test(l)?l.substring(7)||(y.tpl?"tpl":"plain"):l,b=(0,n.__assign)((0,n.__assign)({label:i,name:c},f),{type:_});return r.default.createElement("div",{className:p("Form-static",(e={},e["Form-static--border"+(0,u.ucFirst)(g)]=g,e))},r.default.createElement(h,(0,n.__assign)({},(0,n.__assign)((0,n.__assign)({},y),{name:c,render:s,field:b,value:o===v?void 0:o,className:a,onQuickChange:this.handleQuickChange,data:d,disabled:m,classnames:p}))))},t.defaultProps={placeholder:"-"},t}(r.default.Component);t.default=c;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.FormItem)({test:/(^|\/)static(\-[^\/]+)?$/,weight:-90,strictMode:!1,sizeMutable:!1,name:"static"})],t),t}(c);t.StaticControlRenderer=m;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=(e.type,e.className),a=e.render,o=e.style,i=e.wrapperComponent,l=(e.labelClassName,e.value),s=e.data,d=e.children,u=e.width,c=e.inputClassName,m=(e.label,e.tabIndex),h=e.onKeyUp,f=e.field,v=(0,n.__rest)(e,["type","className","render","style","wrapperComponent","labelClassName","value","data","children","width","inputClassName","label","tabIndex","onKeyUp","field"]),g=(0,n.__assign)((0,n.__assign)({},f),{className:c,type:f&&f.type||"plain"}),y=d||a("field",g,(0,n.__assign)((0,n.__assign)({},p(v,Object.keys(g))),{value:l,data:s}));return u&&(o=o||{},o.width=o.width||u),i?r.default.createElement(i,{style:o,className:t,tabIndex:m,onKeyUp:h},y):y},t.defaultProps=(0,n.__assign)((0,n.__assign)({},i.TableCell.defaultProps),{wrapperComponent:"div"}),t=(0,n.__decorate)([(0,s.default)(),(0,l.default)({position:"right"}),(0,d.default)()],t),t}(i.TableCell);t.StaticFieldRenderer=h},"0611":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlight=t.OptionsControl=t.registerOptionsControl=t.detectProps=t.Option=void 0;var n=a("6b14"),r=a("d0ac"),o=a("9394"),i=a("a853"),l=a("14c8"),s=a("4275"),d=(0,n.__importDefault)(a("9cd5")),u=a("79fb"),p=a("c14c");Object.defineProperty(t,"Option",{enumerable:!0,get:function(){return p.Option}});var c=a("55c0"),m=(0,n.__importDefault)(a("aa3c")),h=(0,n.__importDefault)(a("a4d4")),f=(0,n.__importDefault)(a("e58a"));function v(e){var a=e.component,v=function(s){function v(t){var a,n=s.call(this,t)||this;n.toDispose=[],n.mounted=!1;var r=t.initFetch,o=t.formItem,i=t.source,d=t.data,u=t.setPrinstineValue,c=t.defaultValue,m=t.multiple,h=t.joinValues,f=t.extractValue,v=t.addHook,g=t.formInited,y=t.valueField,_=t.options,b=t.value,C=t.defaultCheckAll;o&&(o.setOptions((0,p.normalizeOptions)(_),n.changeOptionValue,d),n.toDispose.push((0,l.reaction)((function(){return JSON.stringify([o.loading,o.filteredOptions])}),(function(){return n.mounted&&n.forceUpdate()}))),n.toDispose.push((0,l.reaction)((function(){return JSON.stringify(o.options)}),(function(){return n.mounted&&n.syncAutoFill(o.tmpValue)}))),m&&C&&(null===(a=o.filteredOptions)||void 0===a?void 0:a.length)&&!i&&n.defaultCheckAll());var O=!1!==r;if(o&&!1===h&&c){var F=f?o.getSelectedOptions(b).map((function(e){return e[y||"value"]})):o.getSelectedOptions(b);u(m?F.concat():F[0])}return O&&!1!==e.autoLoadOptionsFromSource&&(g||!v?n.reload():v&&v(n.initOptions,"init")),n}var g,y,_;return(0,n.__extends)(v,s),v.prototype.componentDidMount=function(){this.mounted=!0,this.normalizeValue(),this.props.value&&this.syncAutoFill(this.props.value)},v.prototype.shouldComponentUpdate=function(a){var n;return!1===e.strictMode||!1===a.strictMode||(!(!a.source&&!a.autoComplete)||(!!(null===(n=a.formItem)||void 0===n?void 0:n.expressionsInOptions)||!!(0,i.anyChanged)(t.detectProps,this.props,a)))},v.prototype.componentDidUpdate=function(t){var a=this,n=this.props,o=n.formItem;if(t.options!==n.options&&o)o.setOptions((0,p.normalizeOptions)(n.options||[]),this.changeOptionValue,n.data),this.normalizeValue();else if(!1!==e.autoLoadOptionsFromSource&&n.formInited&&n.source&&o&&(t.source!==n.source||t.data!==n.data))if((0,u.isPureVariable)(n.source)){var i=(0,u.resolveVariableAndFilter)(t.source,t.data,"| raw"),l=(0,u.resolveVariableAndFilter)(n.source,n.data,"| raw");i!==l&&(o.setOptions((0,p.normalizeOptions)(l||[]),this.changeOptionValue,n.data),this.normalizeValue())}else(0,r.isEffectiveApi)(n.source,n.data)&&(0,r.isApiOutdated)(t.source,n.source,t.data,n.data)&&o.loadOptions(n.source,n.data,void 0,!0,this.changeOptionValue).then((function(){return a.normalizeValue()}));(t.value!==n.value||(null===o||void 0===o?void 0:o.expressionsInOptions))&&(o.syncOptions(void 0,n.data),this.syncAutoFill(n.value))},v.prototype.componentWillUnmount=function(){var e,t;null===(t=(e=this.props).removeHook)||void 0===t||t.call(e,this.reload,"init"),this.toDispose.forEach((function(e){return e()})),this.toDispose=[]},v.prototype.syncAutoFill=function(e){var t=this.props,a=t.autoFill,r=t.multiple,o=t.onBulkChange,l=t.data,s=this.props.formItem;if(o&&a&&!(0,i.isEmpty)(a)&&s.filteredOptions.length){var d=s.getSelectedOptions(e),p=(0,u.dataMapping)(a,r?{items:d.map((function(e){return(0,i.createObject)((0,n.__assign)((0,n.__assign)({},l),{ancestors:(0,i.getTreeAncestors)(s.filteredOptions,e,!0)}),e)}))}:(0,i.createObject)((0,n.__assign)((0,n.__assign)({},l),{ancestors:(0,i.getTreeAncestors)(s.filteredOptions,d[0],!0)}),d[0]));Object.keys(p).forEach((function(e){(0,h.default)(p[e])&&(0,h.default)(l[e])&&(p[e]=(0,f.default)({},l[e],p[e]))})),o(p)}},v.prototype.normalizeValue=function(){var e=this.props,t=e.joinValues,a=e.extractValue,n=e.value,r=e.multiple,o=e.formItem,i=e.valueField,l=(e.enableNodePath,e.pathSeparator,e.onChange);if(o&&!1===t&&o.options.length)if(!1!==a||"string"!==typeof n&&"number"!==typeof n){if(!0===a&&n&&!(Array.isArray(n)&&n.every((function(e){return"string"===typeof e||"number"===typeof e}))||"string"===typeof n||"number"===typeof n)){s=o.getSelectedOptions(n).map((function(e){return e[i||"value"]}));null===l||void 0===l||l(r?s.concat():s[0])}}else{var s=o.getSelectedOptions(n);null===l||void 0===l||l(r?s.concat():s[0])}},v.prototype.getWrappedInstance=function(){return this.input},v.prototype.inputRef=function(e){this.input=e},v.prototype.handleToggle=function(e,t,a){var n=this.props,r=n.onChange,o=n.formItem,i=n.value;if(o){var l=this.toggleValue(e,i);r&&r(l,t,a)}},v.prototype.defaultCheckAll=function(){var e=this.props,t=e.value,a=e.formItem,n=e.setPrinstineValue;if(a&&!a.getSelectedOptions(t).length){var r=a.filteredOptions.concat(),o=this.formatValueArray(r);null===n||void 0===n||n(o)}},v.prototype.formatValueArray=function(e){var t=this.props,a=t.joinValues,n=t.extractValue,r=t.valueField,o=t.delimiter,i=t.resetValue,l=t.multiple,s="";return l?(s=e,a?s=s.map((function(e){return e[r||"value"]})).join(o):n&&(s=s.map((function(e){return e[r||"value"]})))):(s=e[0]||i,a&&s&&(s=s[r||"value"])),s},v.prototype.handleToggleAll=function(){var e=this.props,t=e.value,a=e.onChange,n=e.formItem;if(n){var r=n.getSelectedOptions(t),o=r.length===n.filteredOptions.length?[]:n.filteredOptions.concat(),i=this.formatValueArray(o);a&&a(i)}},v.prototype.toggleValue=function(e,t){var a=this.props,n=a.joinValues,r=a.extractValue,o=a.valueField,i=a.delimiter,l=a.clearable,s=a.resetValue,d=a.multiple,u=a.formItem,c=void 0!==t?u.getSelectedOptions(t).concat():[],h=(0,m.default)(c,(0,p.optionValueCompare)(e[o||"value"],o||"value")),f="";return d?(~h?c.splice(h,1):c.push(e),f=c,n?f=f.map((function(e){return e[o||"value"]})).join(i):r&&(f=f.map((function(e){return e[o||"value"]})))):(~h&&l?c.splice(h,1):c=[e],f=c[0]||s,(n||r)&&f&&(f=f[o||"value"])),f},v.prototype.reload=function(){return this.reloadOptions()},v.prototype.reloadOptions=function(e,t){void 0===t&&(t=!1);var a=this.props,n=a.source,i=a.formItem,l=a.data,s=a.onChange,d=a.setPrinstineValue;a.selectFirst;if(i&&(0,u.isPureVariable)(n))(0,o.isAlive)(i)&&i.setOptions((0,p.normalizeOptions)((0,u.resolveVariableAndFilter)(n,l,"| raw")||[]),this.changeOptionValue,l);else if(i&&(0,r.isEffectiveApi)(n,l))return i.loadOptions(n,l,void 0,!1,t?d:s,e)},v.prototype.deferLoad=function(e){var t=this.props,a=t.deferApi,n=t.source,r=t.env,o=t.formItem,l=t.data,s=e.deferApi||a||n;s?null===o||void 0===o||o.deferLoadOptions(e,s,(0,i.createObject)(l,e)):r.notify("error","请在选项中设置 `deferApi` 或者表单项中设置 `deferApi`，用来加载子选项。")},v.prototype.expandTreeOptions=function(e){var t=this.props,a=t.deferApi,n=t.source,r=t.env,o=t.formItem,l=t.data,s=a||n;s?null===o||void 0===o||o.expandTreeOptions(e,s,(0,i.createObject)(l)):r.notify("error","请在选项中设置 `deferApi` 或者表单项中设置 `deferApi`，用来加载子选项。")},v.prototype.initOptions=function(e){var t;return(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,l,s,d;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.reloadOptions(!1,!0)];case 1:return n.sent(),a=this.props,r=a.formItem,l=a.name,s=a.multiple,d=a.defaultCheckAll,r?((0,o.isAlive)(r)&&r.value&&(0,i.setVariable)(e,l,r.value),s&&d&&(null===(t=r.filteredOptions)||void 0===t?void 0:t.length)&&this.defaultCheckAll(),[2]):[2]}}))}))},v.prototype.focus=function(){this.input&&this.input.focus&&this.input.focus()},v.prototype.changeOptionValue=function(e){var t=this.props,a=t.onChange,n=t.formInited,r=t.setPrinstineValue,o=t.value;!1===n?void 0===o&&(null===r||void 0===r||r(e)):null===a||void 0===a||a(e)},v.prototype.setOptions=function(e,t){void 0===t&&(t=!1);var a=this.props.formItem;a&&a.setOptions(t?e:(0,p.normalizeOptions)(e||[]),this.changeOptionValue,this.props.data)},v.prototype.syncOptions=function(){var e=this.props.formItem;e&&e.syncOptions(void 0,this.props.data)},v.prototype.setLoading=function(e){var t=this.props.formItem;t&&t.setLoading(e)},v.prototype.handleOptionAdd=function(e,t,a){return void 0===e&&(e=-1),void 0===a&&(a=!1),(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o,l,s,d,u,p,c,m,h,f,v,g,y,_,b,C,O,F,k,E,w;return(0,n.__generator)(this,(function(A){switch(A.label){case 0:return r=this.props,o=r.addControls,l=r.disabled,s=r.labelField,d=r.onOpenDialog,u=r.optionLabel,p=r.addApi,c=r.source,m=r.data,h=r.valueField,f=r.formItem,v=r.createBtnLabel,g=r.env,y=r.translate,l||!f?[2]:(a||Array.isArray(o)&&o.length||(o=[{type:"text",name:s||"label",label:!1,placeholder:y("Options.addPlaceholder")}]),_=Array.isArray(e)?(0,i.getTree)(f.options,e.slice(0,-1)):void 0,b=(0,i.createObject)(m,Array.isArray(e)?(0,n.__assign)({parent:_},t):t),a?(O=b,[3,3]):[3,1]);case 1:return[4,d({type:"dialog",title:v||"新增"+(u||"选项"),body:{type:"form",api:p,controls:(0,n.__spreadArray)([{type:"hidden",name:"idx",value:e},{type:"hidden",name:"parent",value:_}],o||[],!0)}},b)];case 2:O=A.sent(),A.label=3;case 3:if(C=O,!a||!p)return[3,7];A.label=4;case 4:return A.trys.push([4,6,,7]),[4,g.fetcher(p,C,{method:"post"})];case 5:return F=A.sent(),F.ok?C=F.data||C:(g.notify("error",F.msg||y("Options.createFailed")),C=null),[3,7];case 6:return k=A.sent(),C=null,console.error(k),g.notify("error",k.message),[3,7];case 7:return C?(C.hasOwnProperty(h||"value")||(C=(0,n.__assign)((0,n.__assign)({},C),(w={},w[h||"value"]=C[s||"label"],w))),(null===_||void 0===_?void 0:_.defer)?this.deferLoad(_):c&&p?this.reload():(E=f.options.concat(),Array.isArray(e)?E=(0,i.spliceTree)(E,e,0,(0,n.__assign)({},C)):~e?E.splice(e,0,(0,n.__assign)({},C)):E.push((0,n.__assign)({},C)),f.setOptions(E,this.changeOptionValue,m)),[2]):[2]}}))}))},v.prototype.handleOptionEdit=function(e,t,a){return void 0===t&&(t=e),void 0===a&&(a=!1),(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o,l,s,d,u,p,c,m,h,f,v,g,y,_,b,C;return(0,n.__generator)(this,(function(O){switch(O.label){case 0:return r=this.props,o=r.editControls,l=r.disabled,s=r.labelField,d=r.onOpenDialog,u=r.editApi,p=r.env,c=r.source,m=r.data,h=r.formItem,f=r.optionLabel,v=r.translate,l||!h?[2]:(a||Array.isArray(o)&&o.length||(o=[{type:"text",name:s||"label",label:!1,placeholder:v("Options.addPlaceholder")}]),a?(y=e,[3,3]):[3,1]);case 1:return[4,d({type:"dialog",title:v("Options.editLabel",{label:f||v("Options.label")}),body:{type:"form",api:u,controls:o}},(0,i.createObject)(m,e))];case 2:y=O.sent(),O.label=3;case 3:if(g=y,!a||!u)return[3,7];O.label=4;case 4:return O.trys.push([4,6,,7]),[4,p.fetcher(u,(0,i.createObject)(m,g),{method:"post"})];case 5:return _=O.sent(),_.ok?g=_.data||g:(p.notify("error",_.msg||v("saveFailed")),g=null),[3,7];case 6:return b=O.sent(),g=null,console.error(b),p.notify("error",b.message),[3,7];case 7:return g?(c&&u?this.reload():(C=(0,i.findTreeIndex)(h.options,(function(e){return e===t})),C&&h.setOptions((0,i.spliceTree)(h.options,C,1,(0,n.__assign)((0,n.__assign)({},t),g)),this.changeOptionValue,m)),[2]):[2]}}))}))},v.prototype.handleOptionDelete=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,l,s,d,u,p,m,h,f,v,g,y,_,b;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props,a=t.deleteConfirmText,r=t.disabled,o=t.data,l=t.deleteApi,s=t.env,d=t.formItem,u=t.source,p=t.valueField,m=t.translate,r||!d?[2]:(h=(0,i.createObject)(o,e),a?[4,s.confirm((0,c.filter)(a,h))]:[3,2]);case 1:return v=n.sent(),[3,3];case 2:v=!0,n.label=3;case 3:if(f=v,!f)return[2];n.label=4;case 4:if(n.trys.push([4,6,,7]),!l)throw new Error(m("Options.deleteAPI"));return[4,s.fetcher(l,h,{method:"delete"})];case 5:return g=n.sent(),g.ok?u?this.reload():(y=d.options.concat(),_=(0,i.findTreeIndex)(y,(function(t){return t[p||"value"]==e[p||"value"]})),_&&d.setOptions((0,i.spliceTree)(y,_,1),this.changeOptionValue,o)):s.notify("error",g.msg||m("deleteFailed")),[3,7];case 6:return b=n.sent(),console.error(b),s.notify("error",b.message),[3,7];case 7:return[2]}}))}))},v.prototype.render=function(){var e=this.props,t=e.value,o=e.formItem,l=e.addApi,s=e.editApi,u=e.deleteApi,p=e.creatable,c=e.editable,m=e.removable,h=e.enableNodePath,f=e.pathSeparator,v=e.delimiter,g=void 0===v?",":v,y=e.labelField,_=void 0===y?"label":y,b=e.valueField,C=void 0===b?"value":b,O=(0,i.normalizeNodePath)(t,h,_,C,f,g),F=O.nodePathArray,k=O.nodeValueArray;return d.default.createElement(a,(0,n.__assign)({},this.props,{ref:this.inputRef,options:o?o.filteredOptions:[],onToggle:this.handleToggle,onToggleAll:this.handleToggleAll,selectedOptions:o?o.getSelectedOptions(t,h?k:void 0):[],nodePath:F,loading:!!o&&o.loading,setLoading:this.setLoading,setOptions:this.setOptions,syncOptions:this.syncOptions,reloadOptions:this.reload,deferLoad:this.deferLoad,expandTreeOptions:this.expandTreeOptions,creatable:!(!1===p||!(0,r.isEffectiveApi)(l))||p,editable:c||!1!==c&&(0,r.isEffectiveApi)(s),removable:m||!1!==m&&(0,r.isEffectiveApi)(u),onAdd:this.handleOptionAdd,onEdit:this.handleOptionEdit,onDelete:this.handleOptionDelete}))},v.displayName="OptionsControl("+e.type+")",v.defaultProps=(0,n.__assign)({delimiter:",",labelField:"label",valueField:"value",joinValues:!0,extractValue:!1,multiple:!1,placeholder:"Select.placeholder",resetValue:"",deleteConfirmText:"确定要删除？"},a.defaultProps),v.propsList=a.propsList?(0,n.__spreadArray)([],a.propsList,!0):[],v.ComposedComponent=a,(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"inputRef",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(g="undefined"!==typeof p.Option&&p.Option)?g:Object,Boolean,Boolean]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"handleToggle",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"handleToggleAll",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"reload",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Boolean,Object]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"reloadOptions",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(y="undefined"!==typeof p.Option&&p.Option)?y:Object]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"deferLoad",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Array]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"expandTreeOptions",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"initOptions",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"changeOptionValue",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(_="undefined"!==typeof Array&&Array)?_:Object,Object]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"setOptions",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"syncOptions",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Boolean]),(0,n.__metadata)("design:returntype",void 0)],v.prototype,"setLoading",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object,Boolean]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"handleOptionAdd",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object,Boolean]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"handleOptionEdit",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],v.prototype,"handleOptionDelete",null),v}(d.default.Component);return(0,s.registerFormItem)((0,n.__assign)((0,n.__assign)({},e),{strictMode:!1,component:v}))}function g(e){return function(t){var a=v((0,n.__assign)((0,n.__assign)({},e),{component:t}));return a.component}}function y(e,t,a){if(void 0===a&&(a="is-matched"),!t)return e;e=String(e);var n=new RegExp(t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),"ig");if(!n.test(e))return e;var r=[],o=0,i=null;n.lastIndex=0;while(i=n.exec(e)){var l=e.substring(o,i.index);l&&r.push(d.default.createElement("span",{key:r.length},l)),i[0]&&r.push(d.default.createElement("span",{className:a,key:r.length},i[0])),o=i.index+i[0].length}var s=e.substring(o);return s&&r.push(d.default.createElement("span",{key:r.length},s)),r}t.detectProps=s.detectProps.concat(["value","options","size","buttons","columnsCount","multiple","hideRoot","checkAll","showIcon","showRadio","btnDisabled","joinValues","extractValue","borderMode","hideSelected"]),t.registerOptionsControl=v,t.OptionsControl=g,t.highlight=y},1152:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchControlRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("4275"),i=(0,n.__importDefault)(a("f3e2")),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,a=e.classPrefix,n=e.classnames,o=e.value,l=e.trueValue,s=e.falseValue,d=e.onText,u=e.offText,p=e.option,c=e.onChange,m=e.disabled,h=e.optionAtLeft;return r.default.createElement("div",{className:n("SwitchControl",t)},h?r.default.createElement("span",{className:n("Switch-option")},p):null,r.default.createElement(i.default,{classPrefix:a,value:o,trueValue:l,falseValue:s,onText:d,offText:u,disabled:m,onChange:c}),h?null:r.default.createElement("span",{className:n("Switch-option")},p))},t.defaultProps={trueValue:!0,falseValue:!1,optionAtLeft:!1},t}(r.default.Component);t.default=l;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.FormItem)({type:"switch",sizeMutable:!1})],t),t}(l);t.SwitchControlRenderer=s},"1bdd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationRenderer=t.LocationControl=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=(0,n.__importDefault)(a("4275")),i=(0,n.__importDefault)(a("5427")),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){return r.default.createElement("div",{className:this.props.classnames("LocationControl")},r.default.createElement(i.default,(0,n.__assign)({},this.props)))},t.defaultProps={vendor:"baidu",coordinatesType:"bd09"},t}(r.default.Component);t.LocationControl=l;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.default)({type:"location-picker"})],t),t}(l);t.LocationRenderer=s},2279:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeSelectControlRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=(0,n.__importDefault)(a("d055")),i=(0,n.__importDefault)(a("fbd6")),l=a("0611"),s=(0,n.__importDefault)(a("b9e4")),d=a("cb58"),u=(0,n.__importDefault)(a("8ccc")),p=(0,n.__importDefault)(a("93e3")),c=a("d0ac"),m=(0,n.__importDefault)(a("9f35")),h=(0,n.__importDefault)(a("d358")),f=a("a853"),v=a("ca1e"),g=a("c14c"),y=function(e){function t(t){var a=e.call(this,t)||this;return a.container=r.default.createRef(),a.input=r.default.createRef(),a.cache={},a.targetRef=function(e){return a.target=e?(0,v.findDOMNode)(e):null},a.state={inputValue:"",isOpened:!1,isFocused:!1},a.open=a.open.bind(a),a.close=a.close.bind(a),a.handleChange=a.handleChange.bind(a),a.clearValue=a.clearValue.bind(a),a.handleFocus=a.handleFocus.bind(a),a.handleBlur=a.handleBlur.bind(a),a.handleKeyPress=a.handleKeyPress.bind(a),a.handleInputChange=a.handleInputChange.bind(a),a.handleInputKeyDown=a.handleInputKeyDown.bind(a),a.loadRemote=(0,u.default)(a.loadRemote.bind(a),250,{trailing:!0,leading:!1}),a}var a,y,_;return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){this.loadRemote("")},t.prototype.open=function(e){this.props.disabled||this.setState({isOpened:!0},e)},t.prototype.close=function(){var e=this;this.setState({isOpened:!1,inputValue:this.props.multiple?this.state.inputValue:""},(function(){return e.loadRemote(e.state.inputValue)}))},t.prototype.handleFocus=function(){this.setState({isFocused:!0})},t.prototype.handleBlur=function(){this.setState({isFocused:!1})},t.prototype.handleKeyPress=function(e){" "===e.key&&(this.handleOutClick(e),e.preventDefault())},t.prototype.validate=function(){var e=this.props,t=e.value,a=e.minLength,n=e.maxLength,r=e.delimiter,o=e.translate,i=Array.isArray(t)?t:(t?String(t):"").split(r||",");return a&&i.length<a?o("已选择数量低于设定的最小个数${minLength}，请选择更多的选项。",{minLength:a}):n&&i.length>n?o("已选择数量超出设定的最大个数{{maxLength}}，请取消选择超出的选项。",{maxLength:n}):void 0},t.prototype.removeItem=function(e,t){var a=this.props,n=a.selectedOptions,r=a.joinValues,o=a.extractValue,i=a.delimiter,l=a.valueField,s=a.onChange,d=a.disabled;if(t&&t.stopPropagation(),!d){var u=n.concat();u.splice(e,1);var p=u;r?p=u.map((function(e){return e[l||"value"]})).join(i||","):o&&(p=u.map((function(e){return e[l||"value"]}))),s(p)}},t.prototype.handleChange=function(e){var t=this.props,a=t.onChange,n=t.multiple;n||this.close(),n||!this.state.inputValue?a(e):this.setState({inputValue:""},(function(){return a(e)}))},t.prototype.handleInputChange=function(e){var t=this,a=this.props,n=a.autoComplete,r=a.data;this.setState({inputValue:e},(0,c.isEffectiveApi)(n,r)?function(){return t.loadRemote(t.state.inputValue)}:void 0)},t.prototype.handleInputKeyDown=function(e){var t=this.state.inputValue,a=this.props,n=a.multiple,r=a.selectedOptions;"Backspace"===e.key&&!t&&r.length&&n&&this.removeItem(r.length-1)},t.prototype.clearValue=function(){var e=this.props,t=e.onChange,a=e.resetValue;t("undefined"===typeof a?"":a)},t.prototype.filterOptions=function(e,t){var a=this,r=this.props,o=r.labelField,i=r.valueField;return e.map((function(e){if(e=(0,n.__assign)({},e),e.visible=!!(0,d.matchSorter)([e],t,{keys:[o||"label",i||"value"]}).length,!e.visible&&e.children){e.children=a.filterOptions(e.children,t);var r=e.children.filter((function(e){return e.visible})).length;e.visible=!!r}return e.visible&&(e.collapsed=!1),e}))},t.prototype.loadRemote=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i,l,s,d,u;return(0,n.__generator)(this,(function(p){switch(p.label){case 0:if(t=this.props,a=t.autoComplete,r=t.env,o=t.data,i=t.setOptions,l=t.setLoading,!(0,c.isEffectiveApi)(a,o))return[2];if(!r||!r.fetcher)throw new Error("fetcher is required");if(this.cache[e]||~e.indexOf("'"))return d=this.cache[e]||[],u=this.mergeOptions(d),i(u),[2,Promise.resolve({options:u})];l(!0),p.label=1;case 1:return p.trys.push([1,,3,4]),[4,r.fetcher(a,(0,n.__assign)((0,n.__assign)({},o),{term:e,value:e}))];case 2:return s=p.sent(),d=s.data&&s.data.options||s.data||[],this.cache[e]=d,u=this.mergeOptions(d),i(u),[2,{options:u}];case 3:return l(!1),[7];case 4:return[2]}}))}))},t.prototype.mergeOptions=function(e){var t=this.props.selectedOptions,a=(0,g.normalizeOptions)(e).concat();return Array.isArray(t)&&t.length&&t.forEach((function(e){(0,p.default)(a,(function(t){return t.value==e.value}))||a.push((0,n.__assign)((0,n.__assign)({},e),{visible:!1}))})),a},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.handleOutClick=function(e){e.defaultPrevented||this.setState({isOpened:!0})},t.prototype.handleResultChange=function(e){var t=this.props,a=t.joinValues,n=t.extractValue,r=t.delimiter,o=t.valueField,i=t.onChange,l=t.multiple,s=Array.isArray(e)?e.concat():[];l||s.length?((a||n)&&(s=e.map((function(e){return e[o||"value"]}))),a&&(s=s.join(r||",")),i(s)):i("")},t.prototype.renderItem=function(e){var t=this.props,a=t.labelField,n=t.options,r=t.hideNodePathLabel;if(r)return e[a||"label"];var o=(0,f.getTreeAncestors)(n,e,!0);return""+(o?o.map((function(e){return""+e[a||"label"]})).join(" / "):e[a||"label"])},t.prototype.renderOuter=function(){var e=this,t=this.props,a=t.value,n=t.enableNodePath,l=t.pathSeparator,d=void 0===l?"/":l,u=t.disabled,p=t.joinValues,m=t.extractValue,h=t.delimiter,f=(t.placeholder,t.options),v=t.multiple,g=t.valueField,y=t.initiallyOpen,_=t.unfoldedLevel,b=t.withChildren,C=t.rootLabel,O=t.cascade,F=t.rootValue,k=t.showIcon,E=t.showRadio,w=t.popOverContainer,A=t.onlyChildren,N=t.classPrefix,x=t.optionsPlaceholder,S=t.searchable,D=t.autoComplete,I=t.maxLength,V=t.minLength,R=t.labelField,M=t.nodePath,T=t.onAdd,P=t.creatable,j=t.createTip,L=t.addControls,z=t.onEdit,B=t.editable,H=t.editTip,$=t.editControls,U=t.removable,W=t.removeTip,q=t.onDelete,K=t.rootCreatable,G=t.rootCreateTip,Q=t.translate,J=t.deferLoad,Y=t.expandTreeOptions,X=!(0,c.isEffectiveApi)(D)&&S&&this.state.inputValue?this.filterOptions(f,this.state.inputValue):f;return r.default.createElement(o.default,{container:w||function(){return e.container.current},target:function(){return e.target},show:!0},r.default.createElement(i.default,{classPrefix:N,className:N+"TreeSelect-popover",style:{minWidth:this.target?this.target.offsetWidth:void 0},onHide:this.close,overlay:!0},r.default.createElement(s.default,{classPrefix:N,onlyChildren:A,labelField:R,valueField:g,disabled:u,onChange:this.handleChange,joinValues:p,extractValue:m,delimiter:h,placeholder:Q(x),options:X,highlightTxt:this.state.inputValue,multiple:v,initiallyOpen:y,unfoldedLevel:_,withChildren:b,rootLabel:Q(C),rootValue:F,showIcon:k,showRadio:E,cascade:O,foldedField:"collapsed",hideRoot:!0,value:a||"",nodePath:M,enableNodePath:n,pathSeparator:d,maxLength:I,minLength:V,onAdd:T,creatable:P,createTip:j,rootCreatable:K,rootCreateTip:G,onEdit:z,editable:B,editTip:H,removable:U,removeTip:W,onDelete:q,bultinCUD:!L&&!$,onDeferLoad:J,onExpandTree:Y})))},t.prototype.render=function(){var e=this.props,t=e.className,a=e.disabled,n=e.inline,o=e.loading,i=e.multiple,l=(e.value,e.clearable),s=(e.classPrefix,e.classnames),d=e.searchable,u=e.autoComplete,p=e.selectedOptions,f=e.placeholder,v=e.translate;return r.default.createElement("div",{ref:this.container,className:s("TreeSelectControl",t)},r.default.createElement(h.default,{disabled:a,ref:this.targetRef,placeholder:v(f||"空"),className:s("TreeSelect",{"TreeSelect--inline":n,"TreeSelect--single":!i,"TreeSelect--multi":i,"TreeSelect--searchable":d||(0,c.isEffectiveApi)(u),"is-opened":this.state.isOpened,"is-focused":this.state.isFocused,"is-disabled":a}),result:i?p:p.length?this.renderItem(p[0]):"",onResultClick:this.handleOutClick,value:this.state.inputValue,onChange:this.handleInputChange,onResultChange:this.handleResultChange,itemRender:this.renderItem,onKeyPress:this.handleKeyPress,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleInputKeyDown,clearable:l,allowInput:d||(0,c.isEffectiveApi)(u),inputPlaceholder:""},o?r.default.createElement(m.default,{size:"sm"}):void 0),this.state.isOpened?this.renderOuter():null)},t.defaultProps={placeholder:"Select.placeholder",optionsPlaceholder:"placeholder.noData",multiple:!1,clearable:!0,rootLabel:"顶级",rootValue:"",showIcon:!0,joinValues:!0,extractValue:!1,delimiter:",",resetValue:"",hideNodePathLabel:!1,enableNodePath:!1,pathSeparator:"/"},(0,n.__decorate)([f.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof r.default&&r.default.MouseEvent)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleOutClick",null),(0,n.__decorate)([f.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(y="undefined"!==typeof Array&&Array)?y:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleResultChange",null),(0,n.__decorate)([f.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(_="undefined"!==typeof l.Option&&l.Option)?_:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderItem",null),t}(r.default.Component);t.default=y;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,l.OptionsControl)({type:"tree-select"})],t),t}(y);t.TreeSelectControlRenderer=_},2441:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("4275"),i=a("d0ac"),l=a("e06b"),s=a("a853"),d=function(e){function t(t){var a=e.call(this,t)||this;return a.mounted=!1,a.state={columns:t.columns||[],rows:t.rows||[],loading:!1},a.toggleItem=a.toggleItem.bind(a),a.reload=a.reload.bind(a),a.initOptions=a.initOptions.bind(a),a.mounted=!0,a}return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.formInited,a=e.addHook;t||!a?this.reload():a(this.initOptions,"init")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(e.columns!==t.columns||e.rows!==t.rows)this.setState({columns:t.columns||[],rows:t.rows||[]});else if(t.formInited&&(t.source!==e.source||e.data!==t.data)){var a=(0,i.buildApi)(e.source,e.data,{ignoreData:!0}),n=(0,i.buildApi)(t.source,t.data,{ignoreData:!0});a.url!==n.url&&(0,i.isValidApi)(n.url)&&this.reload()}},t.prototype.componentWillUnmount=function(){this.mounted=!1;var e=this.props.removeHook;null===e||void 0===e||e(this.initOptions,"init")},t.prototype.initOptions=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.reload()];case 1:return n.sent(),t=this.props,a=t.formItem,r=t.name,a?(a.value&&(0,s.setVariable)(e,r,a.value),[2]):[2]}}))}))},t.prototype.reload=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e,t,a,r,o,l,s=this;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:if(e=this.props,t=e.source,a=e.data,r=e.env,o=e.onChange,l=e.translate,!(0,i.isEffectiveApi)(t,a)||this.state.loading)return[2];if(!r||!r.fetcher)throw new Error("fetcher is required");return[4,new Promise((function(e,n){if(!s.mounted)return e();s.setState({loading:!0},(function(){if(!s.mounted)return e();r.fetcher(t,a).then((function(a){if(!a.ok)throw new Error(a.msg||l("fetchFailed"));if(!s.mounted)return e();s.setState({loading:!1,rows:a.data.rows||[],columns:a.data.columns||[]},(function(){t&&t.replaceData;var n=a.data.value;n&&(n=t.replaceData?n:p(n,s.state.columns,s.state.rows),o(n)),e()}))})).catch((function(t){return s.setState({error:t,loading:!1},(function(){return e()}))}))}))}))];case 1:return[2,n.sent()]}}))}))},t.prototype.toggleItem=function(e,t,a){var r=this.state,o=r.columns,i=r.rows,l=this.props,s=l.multiple,d=l.singleSelectMode,p=this.props.value||u(o,i);if(s)p[t][a]=(0,n.__assign)((0,n.__assign)({},p[t][a]),{checked:e});else if("row"===d)for(var c=0,m=o.length;c<m;c++)p[c][a]=(0,n.__assign)((0,n.__assign)({},p[c][a]),{checked:t===c?e:!e});else if("column"===d){var h=0;for(m=i.length;h<m;h++)p[t][h]=(0,n.__assign)((0,n.__assign)({},p[t][h]),{checked:a===h?e:!e})}else for(h=0,m=i.length;h<m;h++){c=0;for(var f=o.length;c<f;c++)p[c][h]=(0,n.__assign)((0,n.__assign)({},p[c][h]),{checked:t===c&&a===h?e:!e})}this.props.onChange(p.concat())},t.prototype.renderInput=function(){var e=this,t=this.state,a=t.columns,n=t.rows,o=this.props,i=o.rowLabel,s=o.disabled,d=o.classnames,p=o.multiple,c=this.props.value||u(a,n);return r.default.createElement("div",{className:d("Table m-b-none")},r.default.createElement("div",{className:d("Table-content")},r.default.createElement("table",{className:d("Table-table")},r.default.createElement("thead",null,r.default.createElement("tr",null,r.default.createElement("th",null,i),a.map((function(e,t){return r.default.createElement("th",{key:t,className:"text-center"},e.label)})))),r.default.createElement("tbody",null,n.map((function(t,n){return r.default.createElement("tr",{key:n},r.default.createElement("td",null,t.label,t.description||t.desc?r.default.createElement("span",{className:"m-l-xs text-muted text-xs"},t.description||t.desc):null),a.map((function(t,a){return r.default.createElement("td",{key:a,className:"text-center"},r.default.createElement(l.Checkbox,{type:p?"checkbox":"radio",disabled:s,checked:!!(c[a]&&c[a][n]&&c[a][n].checked),onChange:function(t){return e.toggleItem(t,a,n)}}))})))}))))))},t.prototype.render=function(){var e=this.props,t=e.className,a=(e.render,e.classnames),n=this.state,o=n.error,i=n.loading;return r.default.createElement("div",{key:"input",className:a("MatrixControl",t||"")},o?r.default.createElement("div",{className:a("MatrixControl-error Alert Alert--danger")},String(o)):this.renderInput(),r.default.createElement(l.Spinner,{size:"lg",overlay:!0,key:"info",show:i}))},t.defaultProps={columns:[],rows:[],multiple:!0,singleSelectMode:"column"},t}(r.default.Component);function u(e,t){return Array.isArray(e)||(e=[]),Array.isArray(t)||(t=[]),e.map((function(e){return t.map((function(t){return(0,n.__assign)((0,n.__assign)((0,n.__assign)({},t),e),{checked:!1})}))}))}function p(e,t,a){return e.map((function(e,r){return e.map((function(e,o){return(0,n.__assign)((0,n.__assign)((0,n.__assign)({},t[r]),a[o]),e)}))}))}t.default=d;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.FormItem)({type:"matrix-checkboxes",strictMode:!1,sizeMutable:!1})],t),t}(d);t.MatrixRenderer=c},"25d3":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSelectControlRenderer=t.SelectControlRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=(0,n.__importDefault)(a("11bc")),i=a("0611"),l=n.__importStar(a("c14c")),s=(0,n.__importDefault)(a("93e3")),d=(0,n.__importDefault)(a("8ccc")),u=a("d0ac"),p=a("a853"),c=(0,n.__importDefault)(a("9f35")),m=a("de0f"),h=(0,n.__importDefault)(a("a3a1")),f=function(e){function t(t){var a=e.call(this,t)||this;return a.changeValue=a.changeValue.bind(a),a.lazyloadRemote=(0,d.default)(a.loadRemote.bind(a),250,{trailing:!0,leading:!1}),a.inputRef=a.inputRef.bind(a),a}var a;return(0,n.__extends)(t,e),t.prototype.componentWillUnmount=function(){this.unHook&&this.unHook()},t.prototype.inputRef=function(e){this.input=e},t.prototype.foucs=function(){this.input&&this.input.focus()},t.prototype.changeValue=function(e){var t=this.props,a=t.joinValues,n=t.extractValue,r=t.delimiter,o=t.multiple,i=(t.type,t.valueField),l=t.onChange,d=t.setOptions,u=t.options,p=e,c=[];(Array.isArray(e)?e:e?[e]:[]).forEach((function(e){var t=(0,s.default)(u,(function(t){return t[i||"value"]==e[i||"value"]}));t||c.push(e)})),a?p=o?Array.isArray(e)?e.map((function(e){return e[i||"value"]})).join(r):e?e[i||"value"]:"":p?p[i||"value"]:"":n&&(p=o?Array.isArray(e)?e.map((function(e){return e[i||"value"]})):e?[e[i||"value"]]:[""]:p?p[i||"value"]:""),c.length&&d(u.concat(c)),l(p)},t.prototype.loadRemote=function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,a,r,o,i,l,s,d,c,m,h,f;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:if(t=this.props,a=t.autoComplete,r=t.env,o=t.data,i=t.setOptions,l=t.setLoading,s=t.formInited,d=t.addHook,!r||!r.fetcher)throw new Error("fetcher is required");if(!s)return this.unHook&&this.unHook(),[2,this.unHook=d(this.loadRemote.bind(this,e),"init")];if(c=(0,p.createObject)(o,{term:e,value:e}),!(0,u.isEffectiveApi)(a,c))return[2,Promise.resolve({options:[]})];l(!0),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,r.fetcher(a,c)];case 2:return m=n.sent(),h=m.data&&m.data.options||m.data||[],f=this.mergeOptions(h),i(f),[2,{options:f}];case 3:return l(!1),[7];case 4:return[2]}}))}))},t.prototype.mergeOptions=function(e){var t=this.props.selectedOptions,a=(0,l.normalizeOptions)(e).concat();return Array.isArray(t)&&t.length&&t.forEach((function(e){(0,s.default)(a,(function(t){return t.value==e.value}))||a.push((0,n.__assign)((0,n.__assign)({},e),{hidden:!0}))})),a},t.prototype.renderMenu=function(e,t){var a=this.props,n=a.menuTpl,r=a.render,o=a.data;return r("menu/"+t.index,n,{data:(0,p.createObject)((0,p.createObject)(o,t),e)})},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.option2value=function(){},t.prototype.renderOtherMode=function(){var e=this.props,t=e.selectMode,a=(0,n.__rest)(e,["selectMode"]);return r.default.createElement(v,(0,n.__assign)({},a,{selectMode:"group"===t?"list":t}))},t.prototype.render=function(){var e=this.props,t=e.autoComplete,a=e.searchable,i=e.options,s=e.className,d=e.loading,p=(e.value,e.selectedOptions),c=e.multi,m=e.multiple,h=e.placeholder,f=(e.id,e.classPrefix),v=(e.classnames,e.creatable),g=(e.inline,e.noResultsText),y=e.render,_=e.menuTpl,b=e.borderMode,C=e.selectMode,O=e.env,F=(0,n.__rest)(e,["autoComplete","searchable","options","className","loading","value","selectedOptions","multi","multiple","placeholder","id","classPrefix","classnames","creatable","inline","noResultsText","render","menuTpl","borderMode","selectMode","env"]);return g&&(g=y("noResultText",g)),r.default.createElement("div",{className:(0,o.default)(f+"SelectControl",s)},["table","list","group","tree","chained","associated"].includes(C)?this.renderOtherMode():r.default.createElement(l.default,(0,n.__assign)({},F,{useMobileUI:O.useMobileUI,borderMode:b,placeholder:h,multiple:m||c,ref:this.inputRef,value:p,options:i,loadOptions:(0,u.isEffectiveApi)(t)?this.lazyloadRemote:void 0,creatable:v,searchable:a||!!t,onChange:this.changeValue,loading:d,noResultsText:g,renderMenu:_?this.renderMenu:void 0})))},t.defaultProps={clearable:!1,searchable:!1,multiple:!1},(0,n.__decorate)([p.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof i.Option&&i.Option)?a:Object,Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderMenu",null),t}(r.default.Component);t.default=f;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e,t=this.props,a=t.className,n=(t.classnames,t.selectedOptions),o=t.sortable,i=t.loading,l=t.searchable,s=t.searchResultMode,d=t.showArrow,u=t.deferLoad,p=t.disabled,m=t.selectTitle,f=t.selectMode,v=t.multiple,g=t.columns,y=t.leftMode,_=t.borderMode,b=this.props,C=b.options,O=b.leftOptions,F=b.leftDefaultValue;return"associated"===f&&C&&1===C.length&&C[0].leftOptions&&Array.isArray(C[0].children)&&(O=C[0].leftOptions,F=null!==(e=C[0].leftDefaultValue)&&void 0!==e?e:F,C=C[0].children),r.default.createElement(r.default.Fragment,null,r.default.createElement(h.default,{selectMode:f,className:a,value:n,disabled:p,options:C,onChange:this.handleChange,option2value:this.option2value,sortable:o,searchResultMode:s,onSearch:l?this.handleSearch:void 0,showArrow:d,onDeferLoad:u,selectTitle:m,multiple:v,columns:g,leftMode:y,leftOptions:O,borderMode:_}),r.default.createElement(c.default,{overlay:!0,key:"info",show:i}))},t}(m.BaseTransferRenderer),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,i.OptionsControl)({type:"select"})],t),t}(f);t.SelectControlRenderer=g;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.defaultProps={multiple:!0},t=(0,n.__decorate)([(0,i.OptionsControl)({type:"multi-select"})],t),t}(f);t.MultiSelectControlRenderer=y},"263b":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabsTransferPickerRenderer=void 0;var n=a("6b14"),r=a("0611"),o=(0,n.__importDefault)(a("9cd5")),i=(0,n.__importDefault)(a("9f35")),l=a("de0f"),s=(0,n.__importDefault)(a("4ec7")),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,a=e.classnames,n=e.options,r=e.selectedOptions,l=e.sortable,d=e.loading,u=e.searchable,p=e.searchResultMode,c=e.showArrow,m=e.deferLoad,h=e.disabled,f=e.selectTitle,v=e.resultTitle,g=e.pickerSize,y=(e.columns,e.leftMode),_=e.leftOptions;return o.default.createElement("div",{className:a("TabsTransferControl",t)},o.default.createElement(s.default,{value:r,disabled:h,options:n,onChange:this.handleChange,option2value:this.option2value,sortable:l,searchResultMode:p,onSearch:u?this.handleSearch:void 0,showArrow:c,onDeferLoad:m,selectTitle:f,resultTitle:v,size:g,leftMode:y,leftOptions:_}),o.default.createElement(i.default,{overlay:!0,key:"info",show:d}))},t=(0,n.__decorate)([(0,r.OptionsControl)({type:"tabs-transfer-picker"})],t),t}(l.BaseTransferRenderer);t.TabsTransferPickerRenderer=d},"37e2":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GridRenderer=t.ColProps=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("daa2"),i=(0,n.__importDefault)(a("870b")),l=a("a853");function s(e){return"string"===typeof e&&e?e.replace(/\bcol-(xs|sm|md|lg)-(\d+)\b/g,(function(e,t,a){return"Grid-col--"+t+a})):e}function d(e){var a=[],n=t.ColProps;return n.forEach((function(t){return e&&e[t]&&a.push("Grid-col--"+t+(0,l.ucFirst)(e[t]))})),a.length||a.push("Grid-col--md"),a.join(" ")}t.ColProps=["lg","md","sm","xs"];var u=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(a,e),a.prototype.renderChild=function(e,t,a,n){void 0===n&&(n={});var r=this.props,o=r.render,i=r.itemRender;return i?i(t,a,this.props):o(e,t,n)},a.prototype.renderColumn=function(e,a,o){var u,p=(0,i.default)(e,t.ColProps);p=(0,n.__assign)({},p);var c=this.props,m=c.classnames,h=c.formMode,f=c.subFormMode,v=c.subFormHorizontal,g=c.formHorizontal;c.translate;return r.default.createElement("div",{key:a,className:m(d(p),s(e.columnClassName),(u={},u["Grid-col--v"+(0,l.ucFirst)(e.valign)]=e.valign,u))},this.renderChild("column/"+a,e.body||"",o,{formMode:e.mode||f||h,formHorizontal:e.horizontal||v||g}))},a.prototype.renderColumns=function(e){var t=this;return Array.isArray(e)?e.map((function(a,n){return t.renderColumn(a,n,e.length)})):null},a.prototype.render=function(){var e,t=this.props,a=t.className,n=t.classnames,o=t.gap,i=t.valign,s=t.align;return r.default.createElement("div",{className:n("Grid",(e={},e["Grid--"+o]=o,e["Grid--v"+(0,l.ucFirst)(i)]=i,e["Grid--h"+(0,l.ucFirst)(s)]=s,e),a)},this.renderColumns(this.props.columns))},a.propsList=["columns"],a.defaultProps={},a}(r.default.Component);t.default=u;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"grid"})],t),t}(u);t.GridRenderer=p},"3e62":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NestedSelectControlRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=(0,n.__importDefault)(a("d055")),i=(0,n.__importDefault)(a("0025")),l=(0,n.__importDefault)(a("fbd6")),s=a("4f3d"),d=a("a853"),u=a("0611"),p=a("c14c"),c=a("ca1e"),m=a("e06b"),h=(0,n.__importDefault)(a("546d")),f=(0,n.__importDefault)(a("1b64")),v=(0,n.__importDefault)(a("945e")),g=a("250bf"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isOpened:!1,isFocused:!1,inputValue:"",stack:[t.props.options]},t}var a,u,y,_,b,C;return(0,n.__extends)(t,e),t.prototype.domRef=function(e){this.target=e},t.prototype.componentDidUpdate=function(e){e.options!==this.props.options&&this.setState({stack:[this.props.options]})},t.prototype.handleOutClick=function(e){this.props.options;e.defaultPrevented||this.setState({isOpened:!0})},t.prototype.close=function(){this.setState({isOpened:!1})},t.prototype.removeItem=function(e,t){var a=this.props,n=a.onChange,r=a.selectedOptions,o=a.joinValues,i=a.valueField,l=a.extractValue,s=a.delimiter,d=a.value;t&&t.stopPropagation(),r.splice(e,1),o?d=r.map((function(e){return e[i||"value"]})).join(s||","):l&&(d=r.map((function(e){return e[i||"value"]}))),n(d)},t.prototype.renderValue=function(e,t){var a=this.props,n=a.classnames,o=a.labelField,i=a.options,l=a.hideNodePathLabel;if(l)return e[o||"label"];var s=(0,d.getTreeAncestors)(i,e,!0);return r.default.createElement("span",{className:n("Select-valueLabel"),key:t},""+(s?s.map((function(e){return""+e[o||"label"]})).join(" / "):e[o||"label"]))},t.prototype.handleOptionClick=function(e){var t=this.props,a=t.multiple,n=t.onChange,r=t.joinValues,o=t.extractValue,i=t.valueField;a||(n(r||o?e[i||"value"]:e),!a&&this.close())},t.prototype.handleCheck=function(e,t){var a=this.props,n=a.onChange,r=a.selectedOptions,o=a.joinValues,i=a.delimiter,l=a.extractValue,s=a.withChildren,u=a.onlyChildren,p=a.cascade,c=a.options,m=this.state.stack,g=this.props.valueField||"value";!Array.isArray(e)&&e.children&&e.children.length&&"number"===typeof t&&(m[t]?m.splice(t+1,1,e.children):m.push(e.children));var y,_=r,b=function(e){return(0,v.default)((0,d.flattenTree)(Array.isArray(e)?e:[e],(function(e){return e.children&&e.children.length?null:e})))};if(Array.isArray(e))s?e=(0,d.flattenTree)(e):u&&(e=b(e)),y=_.length===e.length?[]:e;else if(Array.isArray(e.children))if(p)y=(0,h.default)(_,[e]);else if(s){e=(0,d.flattenTree)([e]);var C=e.every((function(e){return!!~_.indexOf(e)}));y=(C?h.default:f.default)(_,e)}else if(u){e=b(e);C=e.every((function(e){return!!~_.indexOf(e)}));y=(C?h.default:f.default)(_,e)}else y=_.filter((function(t){return!~(0,d.flattenTree)([e]).indexOf(t)})),!~_.indexOf(e)&&y.push(e);else y=(0,h.default)(_,[e]);if(!p){var O=e;while(1){var F=(0,d.getTreeParent)(c,O);if(!(null===F||void 0===F?void 0:F.value)||!F.children.every((function(e){return~y.indexOf(e)})))break;F.children.forEach((function(e){var t=y.indexOf(e);!~t||s||u||y.splice(t,1)})),u||y.push(F),O=F}}n(o?y.map((function(e){return e[g]})).join(i):l?y.map((function(e){return e[g]})):y)},t.prototype.allChecked=function(e){var t=this,a=this.props,n=a.selectedOptions,r=a.withChildren,o=a.onlyChildren;return e.every((function(e){return(r||o)&&e.children?t.allChecked(e.children):n.some((function(t){return t===e}))}))},t.prototype.partialChecked=function(e){var t=this;return e.some((function(e){var a=e.children&&t.partialChecked(e.children);return a||t.props.selectedOptions.some((function(t){return t===e}))}))},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.onFocus=function(e){this.props.disabled||this.state.isOpened||this.setState({isFocused:!0})},t.prototype.onBlur=function(e){this.setState({isFocused:!1})},t.prototype.getTarget=function(){return this.target||(this.target=(0,c.findDOMNode)(this)),this.target},t.prototype.handleKeyPress=function(e){" "===e.key&&(this.handleOutClick(e),e.preventDefault())},t.prototype.handleInputKeyDown=function(e){var t=this.state.inputValue,a=this.props,n=a.multiple,r=a.selectedOptions;"Backspace"===e.key&&!t&&r.length&&n&&this.removeItem(r.length-1)},t.prototype.handleInputChange=function(e){var t=this.props,a=t.options,n=t.labelField,r=t.valueField,o=(0,d.string2regExp)(e),i=e&&this.state.isOpened?(0,d.filterTree)(a,(function(e){return o.test(e[n||"label"])||o.test(e[r||"value"])||!(!e.children||!e.children.length)}),1,!0):a.concat();this.setState({inputValue:e,stack:[i]})},t.prototype.handleResultChange=function(e){var t=this.props,a=t.joinValues,n=t.extractValue,r=t.delimiter,o=t.valueField,i=t.onChange,l=t.multiple,s=Array.isArray(e)?e.concat():[];l||s.length?((a||n)&&(s=e.map((function(e){return e[o||"value"]}))),a&&(s=s.join(r||",")),i(s)):i("")},t.prototype.renderOptions=function(){var e=this,t=this.props,a=t.multiple,n=t.selectedOptions,o=t.classnames,l=t.options,u=t.disabled,p=t.checkAll,c=t.checkAllLabel,m=t.translate,h=t.labelField,f=t.menuClassName,v=t.cascade,g=t.onlyChildren,y=this.props.valueField||"value",_=this.state.stack,b=this.partialChecked(l),C=this.allChecked(l);return r.default.createElement(r.default.Fragment,null,_.map((function(t,_){return r.default.createElement("div",{key:_,className:o("NestedSelect-menu",f)},a&&p&&0===_?r.default.createElement("div",{className:o("NestedSelect-option","checkall")},r.default.createElement(i.default,{size:"sm",onChange:e.handleCheck.bind(e,t),checked:b,partial:b&&!C}),r.default.createElement("span",{onClick:e.handleCheck.bind(e,t)},m(c))):null,t.map((function(t,p){var c=(0,d.getTreeAncestors)(l,t),m=null===c||void 0===c?void 0:c.some((function(e){return!!~n.indexOf(e)})),f=!v&&(a&&m),b=null===c||void 0===c?void 0:c.some((function(e){return!!e.disabled})),C=f||t.disabled||b||!!u,O=!(!t.children||!e.partialChecked(t.children)),F=f||!!~n.indexOf(t);return!F&&g&&t.children&&e.allChecked(t.children)&&(F=!0),r.default.createElement("div",{key:p,className:o("NestedSelect-option",{"is-active":!C&&(F||!v&&O)}),onMouseEnter:e.onMouseEnter.bind(e,t,_)},a?r.default.createElement(i.default,{size:"sm",onChange:e.handleCheck.bind(e,t,_),trueValue:t[y],checked:F||!v&&O,partial:!F,disabled:C}):null,r.default.createElement("div",{className:o("NestedSelect-optionLabel",{"is-disabled":C}),onClick:function(){return!C&&(a?e.handleCheck(t,_):e.handleOptionClick(t))}},t[h||"label"]),t.children&&t.children.length?r.default.createElement("div",{className:o("NestedSelect-optionArrowRight")},r.default.createElement(s.Icon,{icon:"right-arrow",className:"icon"})):null)})))})))},t.prototype.onMouseEnter=function(e,t,a){var n=this.state.stack;t+=1;var r=e.children;r&&r.length?n[t]?n.splice(t,1,r):n.push(r):n[t]&&n.splice(t,1),this.setState({stack:n.slice(0,t+1)})},t.prototype.renderOuter=function(){var e=this,t=this.props,a=t.popOverContainer,n=t.translate,i=t.classnames,s=t.options,d=t.render,u=this.props.noResultsText;u&&(u=d("noResultText",n(u)));var p=r.default.createElement(g.RootClose,{disabled:!this.state.isOpened,onRootClose:this.close},(function(t){return r.default.createElement("div",{className:i("NestedSelect-menuOuter"),ref:t},s.length?e.renderOptions():r.default.createElement("div",{className:i("NestedSelect-noResult")},u))}));return r.default.createElement(o.default,{target:this.getTarget,container:a||function(){return(0,c.findDOMNode)(e)},placement:"auto",show:!0},r.default.createElement(l.default,{className:i("NestedSelect-popover")},p))},t.prototype.render=function(){var e,t=this.props,a=t.className,n=t.disabled,o=t.classnames,i=t.multiple,l=t.placeholder,s=t.translate,u=t.inline,p=t.searchable,c=(t.autoComplete,t.selectedOptions),h=t.clearable,f=t.loading,v=t.borderMode;return r.default.createElement("div",{className:o("NestedSelectControl",a)},r.default.createElement(m.ResultBox,{disabled:n,ref:this.domRef,placeholder:s(l||"空"),className:o("NestedSelect",(e={"NestedSelect--inline":u,"NestedSelect--single":!i,"NestedSelect--multi":i,"NestedSelect--searchable":p,"is-opened":this.state.isOpened,"is-focused":this.state.isFocused},e["NestedSelect--border"+(0,d.ucFirst)(v)]=v,e)),result:i?c:c.length?this.renderValue(c[0]):"",onResultClick:this.handleOutClick,value:this.state.inputValue,onChange:this.handleInputChange,onResultChange:this.handleResultChange,itemRender:this.renderValue,onKeyPress:this.handleKeyPress,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.handleInputKeyDown,clearable:h,allowInput:p,inputPlaceholder:""},f?r.default.createElement(m.Spinner,{size:"sm"}):void 0),this.state.isOpened?this.renderOuter():null)},t.defaultProps={cascade:!1,withChildren:!1,onlyChildren:!1,searchPromptText:"Select.searchPromptText",noResultsText:"noResult",checkAll:!0,checkAllLabel:"全选",hideNodePathLabel:!1},(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"domRef",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof r.default&&r.default.MouseEvent)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleOutClick",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"close",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(u="undefined"!==typeof p.Option&&p.Option)?u:Object,Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderValue",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(y="undefined"!==typeof p.Option&&p.Option)?y:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleOptionClick",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Number]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleCheck",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"onFocus",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"onBlur",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"getTarget",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(_="undefined"!==typeof r.default&&r.default.KeyboardEvent)?_:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleKeyPress",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof r.default&&r.default.KeyboardEvent)?b:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleInputKeyDown",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleInputChange",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(C="undefined"!==typeof Array&&Array)?C:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleResultChange",null),t}(r.default.Component);t.default=y;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,u.OptionsControl)({type:"nested-select"})],t),t}(y);t.NestedSelectControlRenderer=_},4275:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormItem=t.registerFormItem=t.asFormItem=t.detectProps=t.FormItemWrap=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=(0,n.__importDefault)(a("cf26")),i=a("14c8"),l=a("daa2"),s=a("a853"),d=a("b323"),u=a("c54a"),p=a("55c0"),c=a("2a95"),m=a("68ee"),h=function(e){function t(t){var a=e.call(this,t)||this,n=t.formItem;return n&&(a.reaction=(0,i.reaction)((function(){return""+n.errors.join("")+n.isFocused+n.dialogOpen}),(function(){return a.forceUpdate()}))),a}var a,o;return(0,n.__extends)(t,e),t.prototype.componentWillUnmount=function(){this.reaction&&this.reaction()},t.prototype.handleFocus=function(e){var t=this.props.formItem;t&&t.focus(),this.props.onFocus&&this.props.onFocus(e)},t.prototype.handleBlur=function(e){var t=this.props.formItem;t&&t.blur(),this.props.onBlur&&this.props.onBlur(e)},t.prototype.handleOpenDialog=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var a;return(0,n.__generator)(this,(function(n){return a=this.props.formItem,a?[2,new Promise((function(n){return a.openDialog(e,t,(function(e){return n(e)}))}))]:[2]}))}))},t.prototype.handleDialogConfirm=function(e){var t=e[0],a=this.props.formItem;a&&a.closeDialog(t)},t.prototype.handleDialogClose=function(){var e=this.props.formItem;e&&e.closeDialog()},t.prototype.renderControl=function(){var e,t=this.props,a=t.inputClassName,r=t.formItem,o=t.classnames,i=(t.children,t.type),l=t.renderControl,d=(t.formItemConfig,t.sizeMutable),u=t.size,p=t.defaultSize,c=(0,n.__rest)(t,["inputClassName","formItem","classnames","children","type","renderControl","formItemConfig","sizeMutable","size","defaultSize"]);if(l){var m=u||p;return l((0,n.__assign)((0,n.__assign)({},c),{onOpenDialog:this.handleOpenDialog,type:i,classnames:o,formItem:r,className:o("Form-control",(e={"is-inline":!!c.inline,"is-error":r&&!r.valid},e["Form-control--withSize Form-control--size"+(0,s.ucFirst)(m)]=!1!==d&&"string"===typeof m&&!!m&&"full"!==m,e),null===r||void 0===r?void 0:r.errClassNames,a)}))}return null},t.prototype.render=function(){var e=this.props,a=e.formMode,o=e.inputOnly,i=e.wrap,l=e.render,s=e.formItem,d=this.props.mode||a;if(!1===i||o)return this.renderControl();var u=t.layoutRenderers[d]||t.layoutRenderers["normal"];return r.default.createElement(r.default.Fragment,null,u(this.props,this.renderControl.bind(this)),s?l("modal",(0,n.__assign)({type:"dialog"},s.dialogSchema),{show:s.dialogOpen,onClose:this.handleDialogClose,onConfirm:this.handleDialogConfirm,data:s.dialogData,formStore:void 0}):null)},t.layoutRenderers={horizontal:function(e,t){var a,n,o,i=e.className,l=e.classnames,d=e.description,u=e.descriptionClassName,c=e.captionClassName,m=e.desc,h=e.label,f=e.labelClassName,v=e.render,g=e.required,y=e.caption,_=e.remark,b=e.labelRemark,C=e.env,O=e.formItem,F=e.renderLabel,k=e.renderDescription,E=e.hint,w=e.data,A=e.showErrorMsg;!1===F&&(h=!1!==h&&""),d=d||m;var N=e.horizontal||e.formHorizontal||{},x=(0,s.getWidthRate)(N.left),S=(0,s.getWidthRate)(N.right);return r.default.createElement("div",{"data-role":"form-item",className:l("Form-item Form-item--horizontal",i,(a={},a["is-error"]=O&&!O.valid,a["is-required"]=g,a),null===O||void 0===O?void 0:O.errClassNames)},!1!==h?r.default.createElement("label",{className:l("Form-label",(n={},n["Form-itemColumn--"+("string"===typeof N.leftFixed?N.leftFixed:"normal")]=N.leftFixed,n["Form-itemColumn--"+x]=!N.leftFixed,n),f)},r.default.createElement("span",null,h?v("label","string"===typeof h?(0,p.filter)(h,w):h):null,g&&(h||b)?r.default.createElement("span",{className:l("Form-star")},"*"):null,b?v("label-remark",{type:"remark",icon:b.icon||"warning-mark",tooltip:b,className:l("Form-labelRemark"),container:e.popOverContainer?e.popOverContainer:C&&C.getModalContainer?C.getModalContainer:void 0}):null)):null,r.default.createElement("div",{className:l("Form-value",(o={},o["Form-itemColumn--"+S]=!N.leftFixed&&!!S&&S!==12-x,o))},t(),y?v("caption",y,{className:l("Form-caption",c)}):null,_?v("remark",{type:"remark",icon:_.icon||"warning-mark",tooltip:_,className:l("Form-remark"),container:e.popOverContainer?e.popOverContainer:C&&C.getModalContainer?C.getModalContainer:void 0}):null,E&&O&&O.isFocused?v("hint",E,{className:l("Form-hint")}):null,O&&!O.valid&&!1!==A&&Array.isArray(O.errors)?r.default.createElement("ul",{className:l("Form-feedback")},O.errors.map((function(e,t){return r.default.createElement("li",{key:t},e)}))):null,!1!==k&&d?v("description",d,{className:l("Form-description",u)}):null))},normal:function(e,t){var a,n=e.className,o=e.classnames,i=e.desc,l=e.description,s=e.label,d=e.labelClassName,u=e.render,c=e.required,m=e.caption,h=e.remark,f=e.labelRemark,v=e.env,g=e.descriptionClassName,y=e.captionClassName,_=e.formItem,b=e.renderLabel,C=e.renderDescription,O=e.hint,F=e.data,k=e.showErrorMsg;return l=l||i,r.default.createElement("div",{"data-role":"form-item",className:o("Form-item Form-item--normal",n,(a={"is-error":_&&!_.valid},a["is-required"]=c,a),null===_||void 0===_?void 0:_.errClassNames)},s&&!1!==b?r.default.createElement("label",{className:o("Form-label",d)},r.default.createElement("span",null,s?u("label","string"===typeof s?(0,p.filter)(s,F):s):null,c&&(s||f)?r.default.createElement("span",{className:o("Form-star")},"*"):null,f?u("label-remark",{type:"remark",icon:f.icon||"warning-mark",tooltip:f,className:o("Form-lableRemark"),container:e.popOverContainer?e.popOverContainer:v&&v.getModalContainer?v.getModalContainer:void 0}):null)):null,t(),m?u("caption",m,{className:o("Form-caption",y)}):null,h?u("remark",{type:"remark",icon:h.icon||"warning-mark",className:o("Form-remark"),tooltip:h,container:v&&v.getModalContainer?v.getModalContainer:void 0}):null,O&&_&&_.isFocused?u("hint",O,{className:o("Form-hint")}):null,_&&!_.valid&&!1!==k&&Array.isArray(_.errors)?r.default.createElement("ul",{className:o("Form-feedback")},_.errors.map((function(e,t){return r.default.createElement("li",{key:t},e)}))):null,!1!==C&&l?u("description",l,{className:o("Form-description",g)}):null)},inline:function(e,t){var a,n=e.className,o=e.classnames,i=e.desc,l=e.description,s=e.label,d=e.labelClassName,u=e.render,c=e.required,m=e.caption,h=e.descriptionClassName,f=e.captionClassName,v=e.formItem,g=e.remark,y=e.labelRemark,_=e.env,b=e.hint,C=e.renderLabel,O=e.renderDescription,F=e.data,k=e.showErrorMsg;return l=l||i,r.default.createElement("div",{"data-role":"form-item",className:o("Form-item Form-item--inline",n,(a={"is-error":v&&!v.valid},a["is-required"]=c,a),null===v||void 0===v?void 0:v.errClassNames)},s&&!1!==C?r.default.createElement("label",{className:o("Form-label",d)},r.default.createElement("span",null,s?u("label","string"===typeof s?(0,p.filter)(s,F):s):s,c&&(s||y)?r.default.createElement("span",{className:o("Form-star")},"*"):null,y?u("label-remark",{type:"remark",icon:y.icon||"warning-mark",tooltip:y,className:o("Form-lableRemark"),container:e.popOverContainer?e.popOverContainer:_&&_.getModalContainer?_.getModalContainer:void 0}):null)):null,r.default.createElement("div",{className:o("Form-value")},t(),m?u("caption",m,{className:o("Form-caption",f)}):null,g?u("remark",{type:"remark",icon:g.icon||"warning-mark",className:o("Form-remark"),tooltip:g,container:e.popOverContainer?e.popOverContainer:_&&_.getModalContainer?_.getModalContainer:void 0}):null,b&&v&&v.isFocused?u("hint",b,{className:o("Form-hint")}):null,v&&!v.valid&&!1!==k&&Array.isArray(v.errors)?r.default.createElement("ul",{className:o("Form-feedback")},v.errors.map((function(e,t){return r.default.createElement("li",{key:t},e)}))):null,!1!==O&&l?u("description",l,{className:o("Form-description",h)}):null))},row:function(e,t){var a,n=e.className,o=e.classnames,i=e.desc,l=e.description,s=e.label,d=e.labelClassName,u=e.render,c=e.required,m=e.caption,h=e.remark,f=e.labelRemark,v=e.env,g=e.descriptionClassName,y=e.captionClassName,_=e.formItem,b=e.renderLabel,C=e.renderDescription,O=e.hint,F=e.data,k=e.showErrorMsg;return l=l||i,r.default.createElement("div",{"data-role":"form-item",className:o("Form-item Form-item--row",n,(a={"is-error":_&&!_.valid},a["is-required"]=c,a),null===_||void 0===_?void 0:_.errClassNames)},r.default.createElement("div",{className:o("Form-rowInner")},s&&!1!==b?r.default.createElement("label",{className:o("Form-label",d)},r.default.createElement("span",null,u("label","string"===typeof s?(0,p.filter)(s,F):s),c&&(s||f)?r.default.createElement("span",{className:o("Form-star")},"*"):null,f?u("label-remark",{type:"remark",icon:f.icon||"warning-mark",tooltip:f,className:o("Form-lableRemark"),container:e.popOverContainer?e.popOverContainer:v&&v.getModalContainer?v.getModalContainer:void 0}):null)):null,t(),m?u("caption",m,{className:o("Form-caption",y)}):null,h?u("remark",{type:"remark",icon:h.icon||"warning-mark",className:o("Form-remark"),tooltip:h,container:v&&v.getModalContainer?v.getModalContainer:void 0}):null),O&&_&&_.isFocused?u("hint",O,{className:o("Form-hint")}):null,_&&!_.valid&&!1!==k&&Array.isArray(_.errors)?r.default.createElement("ul",{className:o("Form-feedback")},_.errors.map((function(e,t){return r.default.createElement("li",{key:t},e)}))):null,l&&!1!==C?u("description",l,{className:o("Form-description",g)}):null)}},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleFocus",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleBlur",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof u.Schema&&u.Schema)?a:Object,Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleOpenDialog",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(o="undefined"!==typeof Array&&Array)?o:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleDialogConfirm",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleDialogClose",null),t}(r.default.Component);function f(e){return function(a){var i,l=!(a.prototype instanceof r.default.Component);if(e.validate&&!a.prototype.validate){var u=e.validate;a.prototype.validate=function(){var e={input:this};return u.apply(e,arguments)}}else e.validate&&console.error("FormItem配置中的 validate 将不起作用，因为类的成员函数中已经定义了 validate 方法，将优先使用类里面的实现。");return e.storeType&&(a=(0,c.HocStoreFactory)({storeType:e.storeType,extendsData:e.extendsData})((0,d.observer)(a)),delete e.storeType),(0,m.wrapControl)((0,o.default)((i=function(o){function i(t){var a=o.call(this,t)||this;a.refFn=a.refFn.bind(a);var n=t.validations,r=t.formItem;return r&&!n&&e.validations&&r.config({rules:e.validations}),a}return(0,n.__extends)(i,o),i.prototype.shouldComponentUpdate=function(a){return!1===a.strictMode||!1===e.strictMode||!!(0,s.anyChanged)(t.detectProps,this.props,a)},i.prototype.getWrappedInstance=function(){return this.ref},i.prototype.refFn=function(e){this.ref=e},i.prototype.renderControl=function(){var t,o=this.props,i=o.inputClassName,d=o.formItem,u=o.classnames,p=(o.children,o.type),c=o.size,m=o.defaultSize,h=(0,n.__rest)(o,["inputClassName","formItem","classnames","children","type","size","defaultSize"]),f=c||m;return r.default.createElement(a,(0,n.__assign)({},h,{onOpenDialog:this.handleOpenDialog,size:!1!==e.sizeMutable?void 0:c,onFocus:this.handleFocus,onBlur:this.handleBlur,type:p,classnames:u,ref:l?void 0:this.refFn,forwardedRef:l?this.refFn:void 0,formItem:d,className:u("Form-control",(t={"is-inline":!!h.inline,"is-error":d&&!d.valid},t["Form-control--withSize Form-control--size"+(0,s.ucFirst)(f)]=!1!==e.sizeMutable&&"string"===typeof f&&!!f&&"full"!==f,t),null===d||void 0===d?void 0:d.errClassNames,i)}))},i}(h),i.defaultProps=(0,n.__assign)({className:"",renderLabel:e.renderLabel,renderDescription:e.renderDescription,sizeMutable:e.sizeMutable,wrap:e.wrap,showErrorMsg:e.showErrorMsg},a.defaultProps),i.propsList=(0,n.__spreadArray)(["value","defaultValue","onChange","setPrinstineValue","readOnly","strictMode"],a.propsList||[],!0),i.displayName="FormItem"+(e.type?"("+e.type+")":""),i.ComposedComponent=a,i),a))}}function v(e){var t=f(e)(e.component);return(0,l.registerRenderer)((0,n.__assign)((0,n.__assign)({},e),{weight:"undefined"!==typeof e.weight?e.weight:-100,component:t,isFormItem:!0}))}function g(e){return function(t){var a=v((0,n.__assign)((0,n.__assign)({},e),{component:t}));return a.component}}t.FormItemWrap=h,t.detectProps=["formPristine","formInited","addable","addButtonClassName","addButtonText","addOn","btnClassName","btnLabel","btnDisabled","className","clearable","columns","columnsCount","controls","desc","description","disabled","draggable","editable","editButtonClassName","formHorizontal","formMode","hideRoot","horizontal","icon","inline","inputClassName","label","labelClassName","labelField","language","level","max","maxRows","min","minRows","multiLine","multiple","option","placeholder","removable","required","remark","hint","rows","searchable","showCompressOptions","size","step","showInput","unit","value","diffValue","borderMode","items","showCounter","minLength","maxLength","embed"],t.asFormItem=f,t.registerFormItem=v,t.FormItem=g,t.default=g},"47b3":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HBoxRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("daa2"),i=a("a853"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.renderChild=function(e,t,a){void 0===a&&(a={});var n=this.props.render;return n(e,t,a)},t.prototype.renderColumn=function(e,t,a){var o,l=this.props,s=l.itemRender,d=l.data,u=l.classnames,p=l.subFormMode,c=l.subFormHorizontal,m=l.formMode,h=l.formHorizontal;if(!(0,i.isVisible)(e,d)||!e)return null;var f=(0,n.__assign)({width:e.width,height:e.height},e.style);return r.default.createElement("div",{key:t,className:u("Hbox-col","auto"===f.width?"Hbox-col--auto":f.width?"Hbox-col--customWidth":"",(o={},o["Hbox-col--v"+(0,i.ucFirst)(e.valign)]=e.valign,o),e.columnClassName),style:f},s?s(e,t,a,this.props):this.renderChild("column/"+t,e.body,{formMode:e.mode||p||m,formHorizontal:e.horizontal||c||h}))},t.prototype.renderColumns=function(){var e=this,t=this.props.columns;return t.map((function(a,n){return e.renderColumn(a,n,t.length)}))},t.prototype.render=function(){var e,t=this.props,a=t.className,n=t.classnames,o=t.gap,l=t.valign,s=t.align;return r.default.createElement("div",{className:n("Hbox",a,(e={},e["Hbox--"+o]=o,e["Hbox--v"+(0,i.ucFirst)(l)]=l,e["Hbox--h"+(0,i.ucFirst)(s)]=s,e))},this.renderColumns())},t.propsList=["columns"],t.defaultProps={gap:"xs"},t}(r.default.Component);t.default=l;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"hbox"})],t),t}(l);t.HBoxRenderer=s},"48b2":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("daa2"),i=a("3a45b"),l=a("55c0"),s=(0,n.__importDefault)(a("11bc")),d=(0,n.__importDefault)(a("8e01")),u=a("a853"),p=(0,n.__importDefault)(a("8ccc")),c=(0,n.__importDefault)(a("b09c")),m=(0,n.__importDefault)(a("93e3")),h=a("2a8c"),f=a("79fb"),v=a("d0ac"),g=(0,n.__importDefault)(a("9f35")),y=a("e06b"),_=a("9394"),b=function(e){function t(t){var a=e.call(this,t)||this;a.hooks={},a.shouldLoadInitApi=!1,a.lazyEmitChange=(0,p.default)(a.emitChange.bind(a),250,{trailing:!0,leading:!1}),a.onInit=a.onInit.bind(a),a.handleAction=a.handleAction.bind(a),a.handleQuery=a.handleQuery.bind(a),a.handleChange=a.handleChange.bind(a),a.handleDialogConfirm=a.handleDialogConfirm.bind(a),a.handleDialogClose=a.handleDialogClose.bind(a),a.handleDrawerConfirm=a.handleDrawerConfirm.bind(a),a.handleDrawerClose=a.handleDrawerClose.bind(a),a.handleFormSubmit=a.handleFormSubmit.bind(a),a.validate=a.validate.bind(a),a.submit=a.submit.bind(a),a.addHook=a.addHook.bind(a),a.removeHook=a.removeHook.bind(a),a.emitChange=a.emitChange.bind(a),a.handleBulkChange=a.handleBulkChange.bind(a),a.renderFormItems=a.renderFormItems.bind(a),a.reload=a.reload.bind(a),a.silentReload=a.silentReload.bind(a),a.initInterval=a.initInterval.bind(a),a.blockRouting=a.blockRouting.bind(a),a.beforePageUnload=a.beforePageUnload.bind(a);var n=t.store,r=t.canAccessSuperData,o=t.persistData,i=t.simpleMode;if(n.setCanAccessSuperData(!1!==r),n.setPersistData(o),i&&n.setInited(!0),n&&n.parentStore&&"ComboStore"===n.parentStore.storeType){var l=n.parentStore;l.addForm(n),l.forms.forEach((function(e){return e.items.forEach((function(t){return t.unique&&t.syncOptions(void 0,e.data)}))}))}return a}return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){var e,t,a=this,r=this.props,o=r.initApi,i=r.initFetch,s=r.initFetchOn,d=r.initAsyncApi,p=r.initFinishedField,c=r.initCheckInterval,m=r.store,h=r.messages,f=h.fetchSuccess,g=h.fetchFailed,y=r.onValidate,_=r.promptPageLeave,b=r.env,C=r.rules;if(this.mounted=!0,y){var O=(0,u.promisify)(y);this.disposeOnValidate=this.addHook((function(){return(0,n.__awaiter)(a,void 0,void 0,(function(){var e;return(0,n.__generator)(this,(function(t){switch(t.label){case 0:return[4,O(m.data,m)];case 1:return e=t.sent(),e&&(0,u.isObject)(e)&&(Object.keys(e).forEach((function(t){var a=e[t],n=m.getItemsByPath(t);Array.isArray(n)&&n.length&&(n.forEach((function(e){return e.clearError()})),a&&(a=Array.isArray(a)?a:[a],n.forEach((function(e){return e.addError(a)}))),delete e[t])})),(0,u.isEmpty)(e)?m.clearRestError():m.setRestError(Object.keys(e).map((function(t){return e[t]})))),[2]}}))}))}))}Array.isArray(C)&&C.length&&(this.disposeRulesValidate=this.addHook((function(){m.valid&&C.forEach((function(e){return!(0,l.evalExpression)(e.rule,m.data)&&m.addRestError(e.message)}))}))),(0,v.isEffectiveApi)(o,m.data,i,s)?m.fetchInitData(o,m.data,{successMessage:f,errorMessage:g,onSuccess:function(){if((0,v.isEffectiveApi)(d,m.data)&&!m.data[p||"finished"])return(0,u.until)((function(){return m.checkRemote(d,m.data)}),(function(e){return e&&e[p||"finished"]}),(function(e){return a.asyncCancel=e}),c)}}).then(this.initInterval).then(this.onInit):setTimeout(this.onInit.bind(this),4),_&&(window.addEventListener("beforeunload",this.beforePageUnload),this.unBlockRouting=null!==(t=null===(e=b.blockRouting)||void 0===e?void 0:e.call(b,this.blockRouting))&&void 0!==t?t:void 0)},t.prototype.componentDidUpdate=function(e){var t=this.props,a=t.store;if((0,v.isApiOutdated)(e.initApi,t.initApi,e.data,t.data)){var n=t.fetchSuccess,r=t.fetchFailed;a[a.hasRemoteData?"fetchData":"fetchInitData"](t.initApi,a.data,{successMessage:n,errorMessage:r}).then(this.initInterval)}},t.prototype.componentWillUnmount=function(){var e;this.mounted=!1,clearTimeout(this.timer),this.lazyEmitChange.cancel(),this.asyncCancel&&this.asyncCancel(),this.disposeOnValidate&&this.disposeOnValidate(),this.disposeRulesValidate&&this.disposeRulesValidate(),window.removeEventListener("beforeunload",this.beforePageUnload),null===(e=this.unBlockRouting)||void 0===e||e.call(this)},t.prototype.blockRouting=function(){var e=this.props.store,t=this.props,a=t.promptPageLeaveMessage,n=t.promptPageLeave;if(n&&e.modified)return a||"新的修改没有保存，确认要离开？"},t.prototype.beforePageUnload=function(e){var t=this.blockRouting();t&&(e.preventDefault(),e.returnValue="")},t.prototype.onInit=function(){return(0,n.__awaiter)(this,void 0,void 0,(function(){var e,t,a,r,o,i,l,s;return(0,n.__generator)(this,(function(d){switch(d.label){case 0:return e=this.props,t=e.onInit,a=e.store,r=e.persistData,o=e.submitOnInit,(0,_.isAlive)(a)?(i=(0,u.cloneObject)(a.data),l=a.initedAt,a.setInited(!0),s=this.hooks["init"]||[],[4,Promise.all(s.map((function(e){return e(i)})))]):[2];case 1:return d.sent(),(0,_.isAlive)(a)?(a.initedAt!==l&&(i=(0,n.__assign)((0,n.__assign)({},i),a.data)),r&&a.getLocalPersistData(),t&&t(i,this.props),o&&this.handleAction(void 0,{type:"submit"},a.data),[2]):[2]}}))}))},t.prototype.reload=function(e,t,a,n){var r,o=this;if(t)return this.receive(t);var i=this.props,l=i.store,s=i.initApi,d=i.initAsyncApi,p=i.initFinishedField,c=i.messages,m=c.fetchSuccess,h=c.fetchFailed;(0,v.isEffectiveApi)(d,l.data)&&l.updateData((r={},r[p||"finished"]=!1,r)),(0,v.isEffectiveApi)(s,l.data)?l.fetchInitData(s,l.data,{successMessage:m,errorMessage:h,silent:n,onSuccess:function(){if((0,v.isEffectiveApi)(d,l.data)&&!l.data[p||"finished"])return(0,u.until)((function(){return l.checkRemote(d,l.data)}),(function(e){return e&&e[p||"finished"]}),(function(e){return o.asyncCancel=e}))}}).then((function(e){(null===e||void 0===e?void 0:e.ok)&&(o.initInterval(e),l.reset(void 0,!1))})):l.reset(void 0,!1)},t.prototype.receive=function(e){var t=this.props.store;t.updateData(e),this.reload()},t.prototype.silentReload=function(e,t){this.reload(e,t,void 0,!0)},t.prototype.initInterval=function(e){var t=this.props,a=t.interval,n=t.silentPolling,r=t.stopAutoRefreshWhen,o=t.data;return clearTimeout(this.timer),a&&this.mounted&&(!r||!(0,l.evalExpression)(r,o))&&(this.timer=setTimeout(n?this.silentReload:this.reload,Math.max(a,1e3))),e},t.prototype.isValidated=function(){return this.props.store.validated},t.prototype.validate=function(e){var t=this.props.store;return this.flush(),t.validate(this.hooks["validate"]||[],e)},t.prototype.clearErrors=function(){var e=this.props.store;return e.clearErrors()},t.prototype.getValues=function(){var e=this.props.store;return this.flush(),e.data},t.prototype.setValues=function(e){var t=this.props.store;this.flush(),t.setValues(e)},t.prototype.submit=function(e){var t=this.props,a=t.store,n=t.messages,r=t.translate;return this.flush(),a.submit(e,this.hooks["validate"]||[],r(n&&n.validateFailed))},t.prototype.flush=function(){var e=this.hooks["flush"]||[];e.forEach((function(e){return e()})),this.lazyEmitChange.flush()},t.prototype.reset=function(){var e=this.props,t=e.store,a=e.onReset;t.reset(a)},t.prototype.addHook=function(e,t){var a=this;return void 0===t&&(t="validate"),this.hooks[t]=this.hooks[t]||[],this.hooks[t].push("flush"===t?e:(0,u.promisify)(e)),function(){a.removeHook(e,t),e=u.noop}},t.prototype.removeHook=function(e,t){void 0===t&&(t="validate");var a=this.hooks[t];if(a)for(var n=0,r=a.length;n<r;n++){var o=a[n];o!==e&&o.raw!==e||(a.splice(n,1),r--,n--)}},t.prototype.handleChange=function(e,t,a,n){void 0===n&&(n=!1);var r=this.props,o=r.store,i=r.formLazyChange;"string"===typeof t&&(o.changeValue(t,e,n),n||(!1===i?this.emitChange:this.lazyEmitChange)(a),o.persistData&&o.inited&&o.setLocalPersistData())},t.prototype.emitChange=function(e){var t=this.props,a=t.onChange,n=t.store,r=t.submitOnChange;(0,_.isAlive)(n)&&(a&&a(n.data,(0,u.difference)(n.data,n.pristine),this.props),n.clearRestError(),(e||r&&n.inited)&&this.handleAction(void 0,{type:"submit"},n.data))},t.prototype.handleBulkChange=function(e,t){var a=this.props,n=(a.onChange,a.store),r=a.formLazyChange;n.updateData(e),(!1===r?this.emitChange:this.lazyEmitChange)(t)},t.prototype.handleFormSubmit=function(e){var t=this.props.preventEnterSubmit;return e.preventDefault(),!t&&this.handleAction(e,{type:"submit"},this.props.store.data)},t.prototype.handleAction=function(e,t,a,r,o){var i=this;void 0===r&&(r=!1);var s=this.props,d=s.store,p=s.onSubmit,c=s.api,m=s.asyncApi,h=s.finishedField,f=s.checkInterval,g=s.messages,y=g.saveSuccess,_=g.saveFailed,b=s.resetAfterSubmit,C=s.clearAfterSubmit,O=s.onAction,F=s.onSaved,k=s.onReset,E=s.onFinished,w=s.onFailed,A=s.redirect,N=s.reload,x=s.target,S=s.env,D=s.onChange,I=s.clearPersistDataAfterSubmit,V=s.trimValues,R=s.translate;if(this.flush(),V&&d.trimValues(),a===this.props.data&&(a=d.data),Array.isArray(t.required)&&t.required.length)return d.validateFields(t.required).then((function(l){l?i.handleAction(e,(0,n.__assign)((0,n.__assign)({},t),{required:void 0}),a,r,o):S.notify("error",R("Form.validateFailed"))}));if("submit"===t.type||"submit"===t.actionType||"confirm"===t.actionType||"reset-and-submit"===t.actionType||"clear-and-submit"===t.actionType)return d.setCurrentAction(t),"reset-and-submit"===t.actionType?d.reset(k):"clear-and-submit"===t.actionType&&d.clear(k),this.submit((function(e){var r;if(p&&!1===p(e,t))return Promise.resolve(!1);if(x)i.submitToTarget(x,e);else if("reload"===t.actionType)t.target&&i.reloadTarget(t.target,e);else if("dialog"===t.actionType)d.openDialog(a);else if("drawer"===t.actionType)d.openDrawer(a);else if((0,v.isEffectiveApi)(t.api||c,e)){var o=t.asyncApi||m;return(0,v.isEffectiveApi)(o,d.data)&&d.updateData((r={},r[h||"finished"]=!1,r)),d.saveRemote(t.api||c,e,{successMessage:y,errorMessage:_,onSuccess:function(){if((0,v.isEffectiveApi)(o,d.data)&&!d.data[h||"finished"])return(0,u.until)((function(){return d.checkRemote(o,d.data)}),(function(e){return e&&e[h||"finished"]}),(function(e){return i.asyncCancel=e}),f)}}).then((function(a){return(0,n.__awaiter)(i,void 0,void 0,(function(){var r,o;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return F&&F(e,a),r=t.feedback||this.props.feedback,r&&(0,u.isVisible)(r,d.data)?[4,this.openFeedback(r,d.data)]:[3,2];case 1:if(o=n.sent(),r.skipRestOnCancel&&!o)throw new u.SkipOperation;if(r.skipRestOnConfirm&&o)throw new u.SkipOperation;n.label=2;case 2:return[2]}}))}))}))}return Promise.resolve(null)})).then((function(e){if(!1===e)return d.data;if(E&&!1===E(e,t))return e;if(b&&d.reset(k),C&&d.clear(k),I&&d.clearLocalPersistData(),t.redirect||A){var a=(0,l.filter)(t.redirect||A,d.data);a&&S.jumpTo(a,t)}else(t.reload||N)&&i.reloadTarget(t.reload||N,d.data);return t.close&&i.closeTarget(t.close),e})).catch((function(e){if(!(e instanceof u.SkipOperation)&&(w&&w(e,d.errors),r))throw e}));if("reset"===t.type||"reset"===t.actionType)d.setCurrentAction(t),d.reset(k);else if("clear"===t.actionType)d.setCurrentAction(t),d.clear(k);else if("dialog"===t.actionType)d.setCurrentAction(t),d.openDialog(a);else if("drawer"===t.actionType)d.setCurrentAction(t),d.openDrawer(a);else{if("ajax"===t.actionType)return d.setCurrentAction(t),(0,v.isEffectiveApi)(t.api)?d.saveRemote(t.api,a,{successMessage:R(t.messages&&t.messages.success||y),errorMessage:R(t.messages&&t.messages.failed||_)}).then((function(e){return(0,n.__awaiter)(i,void 0,void 0,(function(){var a;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return e&&D&&D(d.data,(0,u.difference)(d.data,d.pristine),this.props),d.validated?[4,this.validate(!0)]:[3,2];case 1:n.sent(),n.label=2;case 2:return t.feedback&&(0,u.isVisible)(t.feedback,d.data)?[4,this.openFeedback(t.feedback,d.data)]:[3,4];case 3:n.sent(),n.label=4;case 4:return a=t.redirect&&(0,l.filter)(t.redirect,d.data),a&&S.jumpTo(a,t),t.reload&&this.reloadTarget(t.reload,d.data),t.close&&this.closeTarget(t.close),[2]}}))}))})).catch((function(e){if(w&&w(e,d.errors),r)throw e})):S.alert(R("当 actionType 为 ajax 时，请设置 api 属性"));if("reload"===t.actionType)d.setCurrentAction(t),t.target&&this.reloadTarget(t.target,a);else if(O)return O(e,t,a,r,o||this.context)}},t.prototype.handleQuery=function(e){var t,a;this.props.initApi?this.receive(e):null===(a=(t=this.props).onQuery)||void 0===a||a.call(t,e)},t.prototype.handleDialogConfirm=function(e,t,a,n){var r=this.props,o=r.store;r.onChange;(t.mergeData||o.action.mergeData)&&1===e.length&&e[0]&&"form"===n[0].props.type&&this.handleBulkChange(e[0],!1),o.closeDialog(!0)},t.prototype.handleDialogClose=function(){var e=this.props.store;e.closeDialog(!1)},t.prototype.handleDrawerConfirm=function(e,t,a,n){var r=this.props,o=r.store,i=r.onChange;(t.mergeData||o.action.mergeData)&&1===e.length&&e[0]&&"form"===n[0].props.type&&(o.updateData(e[0]),i&&i(o.data,(0,u.difference)(o.data,o.pristine),this.props)),o.closeDrawer(!0)},t.prototype.handleDrawerClose=function(){var e=this.props.store;e.closeDrawer(!1)},t.prototype.submitToTarget=function(e,t){},t.prototype.reloadTarget=function(e,t){},t.prototype.closeTarget=function(e){},t.prototype.openFeedback=function(e,t){var a=this;return new Promise((function(n){var r=a.props.store;r.setCurrentAction({type:"button",actionType:"dialog",dialog:e}),r.openDialog(t,void 0,(function(e){n(e)}))}))},t.prototype.buildActions=function(){var e=this.props,t=e.actions,a=e.submitText,n=e.body,r=e.translate;return"undefined"!==typeof t||!a||Array.isArray(n)&&n.some((function(e){var t,a,n,r,o;return e&&!!~["submit","button","button-group","reset"].indexOf((null===(n=null===(a=null===(t=e)||void 0===t?void 0:t.body)||void 0===a?void 0:a[0])||void 0===n?void 0:n.type)||(null===(o=null===(r=e)||void 0===r?void 0:r.body)||void 0===o?void 0:o.type)||e.type)}))?t:[{type:"submit",label:r(a),primary:!0}]},t.prototype.renderFormItems=function(e,t,a){void 0===t&&(t=""),void 0===a&&(a={});var n=Array.isArray(e.body)?e.body:e.body?[e.body]:[];return!n.length&&e.controls&&(console.warn("请用 body 代替 controls"),n=[{size:"none",type:"wrapper",wrap:!1,controls:e.controls}]),this.renderChildren(n,t,a)},t.prototype.renderChildren=function(e,t,a){var o=this;if(void 0===a&&(a={}),e=e||[],Array.isArray(e)||(e=[e]),"row"===this.props.mode){var i=this.props.classPrefix;return e=(0,c.default)(e).filter((function(e){if(e.hidden||!1===e.visible)return!1;var t=(0,d.default)(e,o.props.store.data,void 0,o.props);return!t.hidden&&!1!==t.visible})),e.length?r.default.createElement("div",{className:i+"Form-row"},e.map((function(e,t){return~["hidden","formula"].indexOf(e.type)||"inline"===e.mode?o.renderChild(e,t,a):r.default.createElement("div",{key:t,className:(0,s.default)(i+"Form-col",e.columnClassName)},o.renderChild(e,"",(0,n.__assign)((0,n.__assign)({},a),{mode:"row"})))}))):null}return e.map((function(e,n){return o.renderChild(e,n,a,t)}))},t.prototype.renderChild=function(e,t,a,r){if(void 0===t&&(t=""),void 0===a&&(a={}),void 0===r&&(r=""),!e)return null;"string"===typeof e&&(e={type:"tpl",tpl:e});var o=(0,n.__assign)((0,n.__assign)({},this.props),a),i=this.props.store,l=o.render,s=o.mode,d=o.horizontal,u=o.store,p=o.disabled,c=o.controlWidth,m=o.resolveDefinitions,h=o.lazyChange,f=(o.formLazyChange,{formStore:i,data:u.data,key:(e.name||"")+"-"+e.type+"-"+t,formInited:i.inited,formSubmited:i.submited,formMode:s,formHorizontal:d,controlWidth:c,disabled:p||e.disabled||i.loading,btnDisabled:i.loading||i.validating,onAction:this.handleAction,onQuery:this.handleQuery,onChange:this.handleChange,onBulkChange:this.handleBulkChange,addHook:this.addHook,removeHook:this.removeHook,renderFormItems:this.renderFormItems,formPristine:i.pristine}),v=(0,n.__assign)({},e);return v.$ref&&(v=(0,n.__assign)((0,n.__assign)({},m(v.$ref)),v)),!1===h&&(v.changeImmediately=!0),l((r?r+"/":"")+t,v,f)},t.prototype.renderBody=function(){var e=this.props,t=e.body,a=e.mode,o=e.className,i=e.classnames,l=e.debug,s=e.$path,d=e.store,u=e.columnCount,p=e.render,c=d.restError,m=this.props.wrapperComponent||(/(?:\/|^)form\//.test(s)?"div":"form");return r.default.createElement(m,{className:i("Form","Form--"+(a||"normal"),u?"Form--column Form--column-"+u:null,o),onSubmit:this.handleFormSubmit,noValidate:!0},r.default.createElement("input",{type:"submit",style:{display:"none"}}),l?r.default.createElement("pre",null,r.default.createElement("code",null,JSON.stringify(d.data,null,2))):null,r.default.createElement(g.default,{show:d.loading,overlay:!0}),this.renderFormItems({body:t}),c&&c.length?r.default.createElement("ul",{className:i("Form-restError","Form-feedback")},c.map((function(e,t){return r.default.createElement("li",{key:t},e)}))):null,p("modal",(0,n.__assign)((0,n.__assign)({},d.action&&d.action.dialog),{type:"dialog"}),{key:"dialog",data:d.dialogData,onConfirm:this.handleDialogConfirm,onClose:this.handleDialogClose,show:d.dialogOpen}),p("modal",(0,n.__assign)((0,n.__assign)({},d.action&&d.action.drawer),{type:"drawer"}),{key:"drawer",data:d.drawerData,onConfirm:this.handleDrawerConfirm,onClose:this.handleDrawerClose,show:d.drawerOpen}))},t.prototype.render=function(){var e=this.props,t=(e.$path,e.$schema,e.wrapWithPanel),a=e.render,n=e.title,o=e.store,i=e.panelClassName,l=e.headerClassName,s=e.footerClassName,d=e.footerWrapClassName,u=e.actionsClassName,p=e.bodyClassName,c=e.classnames,m=e.affixFooter,h=e.lazyLoad,f=e.translate,v=e.footer,g=(e.formStore,this.renderBody());return t&&(g=a("body",{type:"panel",title:f(n)},{className:c(i,"Panel--form"),formStore:this.props.store,children:g,actions:this.buildActions(),onAction:this.handleAction,onQuery:this.handleQuery,disabled:o.loading,btnDisabled:o.loading||o.validating,headerClassName:l,footer:v,footerClassName:s,footerWrapClassName:d,actionsClassName:u,bodyClassName:p,affixFooter:m})),h&&(g=r.default.createElement(y.LazyComponent,null,g)),g},t.defaultProps={title:"Form.title",submitText:"Form.submit",initFetch:!0,wrapWithPanel:!0,mode:"normal",collapsable:!1,controlWidth:"full",horizontal:{left:2,right:10,offset:2},columnCount:0,panelClassName:"Panel--default",messages:{fetchFailed:"fetchFailed",saveSuccess:"saveSuccess",saveFailed:"saveFailed"},wrapperComponent:"",finishedField:"finished",initFinishedField:"finished"},t.propsList=["title","header","controls","tabs","fieldSet","submitText","initFetch","wrapWithPanel","mode","columnCount","collapsable","horizontal","panelClassName","messages","wrapperComponent","resetAfterSubmit","clearAfterSubmit","submitOnInit","submitOnChange","onInit","onReset","onSubmit","onChange","onFailed","onFinished","onSaved","canAccessSuperData","lazyChange","formLazyChange","lazyLoad","formInited","simpleMode","inputOnly","value","actions"],t}(r.default.Component);t.default=b;var C=function(e){function t(t,a){var n=e.call(this,t)||this,r=a;return r.registerComponent(n),n}var a;return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){if(e.prototype.componentDidMount.call(this),this.props.autoFocus){var t=this.context,a=t.getComponents(),n=(0,m.default)(a,(function(e){return e.focus}));n&&setTimeout((function(){return n.focus()}),200)}},t.prototype.componentWillUnmount=function(){var t=this.context;t.unRegisterComponent(this),e.prototype.componentWillUnmount.call(this)},t.prototype.doAction=function(e,t,a){return void 0===t&&(t=this.props.store.data),void 0===a&&(a=!1),this.handleAction(void 0,e,t,a)},t.prototype.handleAction=function(t,a,r,o,i){if(void 0===o&&(o=!1),a.target&&"reload"!==a.actionType){var l=this.context;return Promise.all(a.target.split(",").map((function(e){var t=l.getComponentByName(e);return t&&t.doAction&&t.doAction((0,n.__assign)((0,n.__assign)({},a),{target:void 0}),r,o)})))}return e.prototype.handleAction.call(this,t,a,r,o,i)},t.prototype.handleDialogConfirm=function(t,a,n,r){e.prototype.handleDialogConfirm.call(this,t,a,n,r);var o=this.props.store,i=this.context;a.reload?i.reload(a.reload,n):o.action&&o.action.reload&&i.reload(o.action.reload,n)},t.prototype.submitToTarget=function(e,t){var a=this.context;a.send(e,t)},t.prototype.reloadTarget=function(e,t){var a=this.context;a.reload(e,t)},t.prototype.closeTarget=function(e){var t=this.context;t.close(e)},t.prototype.reload=function(t,a,n,r){if(a)return this.receive(a);var o,i=this.context,l="",s=null;t&&~(o=t.indexOf("."))&&(l=t.substring(o+1),t=t.substring(0,o));var d,p=t?t.indexOf("?"):-1;if(~p&&(s=(0,f.dataMapping)((0,u.qsparse)(t.substring(p+1)),n),t=t.substring(0,p)),t&&(d=i.getComponentByName(t))&&d.reload)d.reload(l,s,n);else if("*"===t){e.prototype.reload.call(this,t,a,n,r);var c=i.getComponents();c.forEach((function(e){return e.reload&&e.reload("",s,n)}))}else e.prototype.reload.call(this,t,a,n,r)},t.prototype.receive=function(t,a){if(!a)return e.prototype.receive.call(this,t);var n=this.context,r=a.indexOf("."),o="";~r&&(o=a.substring(1+r),a=a.substring(0,r));var i=n.getComponentByName(a);i&&i.receive&&i.receive(t,o)},t.contextType=h.ScopedContext,t=(0,n.__decorate)([(0,o.Renderer)({type:"form",storeType:i.FormStore.name,isolateScope:!0,shouldSyncSuperStore:function(e,t,a){var n,r;if(t.quickEditFormRef&&t.onQuickChange&&((0,u.isObjectShallowModified)(a.data,t.data)||(0,u.isObjectShallowModified)(a.data.__super,t.data.__super)||(0,u.isObjectShallowModified)(null===(n=a.data.__super)||void 0===n?void 0:n.__super,null===(r=t.data.__super)||void 0===r?void 0:r.__super)))return!0}}),(0,n.__metadata)("design:paramtypes",[Object,"function"===typeof(a="undefined"!==typeof h.IScopedContext&&h.IScopedContext)?a:Object])],t),t}(b);t.FormRenderer=C},6197:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabsTransferRenderer=void 0;var n=a("6b14"),r=a("0611"),o=(0,n.__importDefault)(a("9cd5")),i=(0,n.__importDefault)(a("9f35")),l=a("de0f"),s=(0,n.__importDefault)(a("1ed9")),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,a=e.classnames,n=e.options,r=e.selectedOptions,l=e.sortable,d=e.loading,u=e.searchable,p=e.searchResultMode,c=e.showArrow,m=e.deferLoad,h=e.disabled,f=e.selectTitle,v=e.resultTitle;return o.default.createElement("div",{className:a("TabsTransferControl",t)},o.default.createElement(s.default,{value:r,disabled:h,options:n,onChange:this.handleChange,option2value:this.option2value,sortable:l,searchResultMode:p,onSearch:u?this.handleSearch:void 0,showArrow:c,onDeferLoad:m,selectTitle:f,resultTitle:v}),o.default.createElement(i.default,{overlay:!0,key:"info",show:d}))},t=(0,n.__decorate)([(0,r.OptionsControl)({type:"tabs-transfer"})],t),t}(l.BaseTransferRenderer);t.TabsTransferRenderer=d},"647c":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadiosControlRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=(0,n.__importDefault)(a("11bc")),i=(0,n.__importDefault)(a("f957")),l=a("0611"),s=a("a853"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var a;return(0,n.__extends)(t,e),t.prototype.handleChange=function(e){var t=this.props,a=t.joinValues,n=t.extractValue,r=t.valueField,o=t.onChange;e&&(a||n)&&(e=e[r||"value"]),o&&o(e)},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.render=function(){var e=this.props,t=e.className,a=e.classPrefix,n=e.value,l=(e.onChange,e.disabled),s=e.joinValues,d=e.extractValue,u=e.delimiter,p=e.placeholder,c=e.options,m=e.inline,h=void 0===m||m,f=e.formMode,v=e.columnsCount,g=e.classPrefix,y=e.itemClassName,_=e.labelClassName,b=e.labelField,C=e.valueField,O=e.translate;return r.default.createElement(i.default,{inline:h||"inline"===f,className:(0,o.default)(a+"RadiosControl",t),value:"undefined"===typeof n||null===n?"":n,disabled:l,onChange:this.handleChange,joinValues:s,extractValue:d,delimiter:u,labelClassName:_,labelField:b,valueField:C,placeholder:O(p),options:c,columnsCount:v,classPrefix:g,itemClassName:y})},t.defaultProps={columnsCount:1},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof l.Option&&l.Option)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleChange",null),t}(r.default.Component);t.default=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.defaultProps={multiple:!1,inline:!0},t=(0,n.__decorate)([(0,l.OptionsControl)({type:"radios",sizeMutable:!1})],t),t}(d);t.RadiosControlRenderer=u},"68ee":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapControl=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=(0,n.__importDefault)(a("8ccc")),i=a("3a96"),l=a("a853"),s=a("2a8c"),d=a("8566"),u=a("9394"),p=a("b323"),c=(0,n.__importDefault)(a("cf26")),m=a("9ff7");function h(e){var t,a=(0,c.default)((0,m.withRootStore)((0,p.observer)((t=function(t){function a(e){var a,n,r=t.call(this,e)||this;r.value=void 0,r.lazyEmitChange=(0,o.default)(r.emitChange.bind(r),250,{trailing:!0,leading:!1});var s=r.props,u=s.formStore,p=s.formItem,c=s.rootStore,m=s.store,h=s.onChange,f=(s.data,s.$schema),v=f.name,g=f.id,y=f.type,_=f.required,b=f.validations,C=f.validationErrors,O=f.unique,F=f.value,k=f.multiple,E=f.delimiter,w=f.valueField,A=f.labelField,N=f.joinValues,x=f.extractValue,S=f.selectFirst,D=f.autoFill,I=f.clearValueOnHidden,V=f.validateApi,R=f.minLength,M=f.maxLength;if(r.getValue=r.getValue.bind(r),r.setValue=r.setValue.bind(r),r.handleChange=r.handleChange.bind(r),r.setPrinstineValue=r.setPrinstineValue.bind(r),r.controlRef=r.controlRef.bind(r),r.handleBlur=r.handleBlur.bind(r),!v)return r;var T=r.props.value,P=c.addStore({id:(0,l.guid)(),path:r.props.$path,storeType:d.FormItemStore.name,parentId:null===m||void 0===m?void 0:m.id,name:v});if(r.model=P,null===p||void 0===p||p.addSubFormItem(P),P.config({id:g,type:y,required:_,unique:O,value:F,rules:b,messages:C,multiple:k,delimiter:E,valueField:w,labelField:A,joinValues:N,extractValue:x,selectFirst:S,autoFill:D,clearValueOnHidden:I,validateApi:V,minLength:R,maxLength:M}),r.model.unique&&(null===(a=null===u||void 0===u?void 0:u.parentStore)||void 0===a?void 0:a.storeType)===i.ComboStore.name){var j=u.parentStore;j.bindUniuqueItem(P)}return P.changeTmpValue(null!==(n=null!==T&&void 0!==T?T:null===m||void 0===m?void 0:m.getValueByName(P.name))&&void 0!==n?n:F),h&&"undefined"===typeof T&&"undefined"===typeof(null===m||void 0===m?void 0:m.getValueByName(P.name,!1))&&h(P.tmpValue,P.name,!1,!0),r}return(0,n.__extends)(a,t),a.prototype.componentDidMount=function(){var e=this,t=this.props,a=(t.store,t.formStore,t.$schema),n=a.name,r=a.validate,o=t.addHook;this.hook3=function(){e.lazyEmitChange.flush()},null===o||void 0===o||o(this.hook3,"flush");var i=this.model;if(i&&r){var s=(0,l.promisify)(r.bind(i));this.hook2=function(){return i.clearError("control:valdiate"),s(e.props.data,e.getValue(),n).then((function(e){("string"===typeof e||Array.isArray(e))&&e&&i.addError(e,"control:valdiate")}))},null===o||void 0===o||o(this.hook2)}},a.prototype.componentDidUpdate=function(e){var t=this.props,a=(t.formStore,this.model);if(a&&(0,l.anyChanged)(["id","validations","validationErrors","value","required","unique","multiple","delimiter","valueField","labelField","joinValues","extractValue","selectFirst","autoFill","clearValueOnHidden","validateApi"],e.$schema,t.$schema)&&a.config({required:t.$schema.required,id:t.$schema.id,unique:t.$schema.unique,value:t.$schema.value,rules:t.$schema.validations,multiple:t.$schema.multiple,delimiter:t.$schema.delimiter,valueField:t.$schema.valueField,labelField:t.$schema.labelField,joinValues:t.$schema.joinValues,extractValue:t.$schema.extractValue,messages:t.$schema.validationErrors,selectFirst:t.$schema.selectFirst,autoFill:t.$schema.autoFill,clearValueOnHidden:t.$schema.clearValueOnHidden,validateApi:t.$schema.validateApi,minLength:t.minLength,maxLength:t.maxLength}),a&&"undefined"!==typeof t.value)t.value!==e.value&&t.value!==a.tmpValue&&a.changeTmpValue(t.value);else if(a&&t.data!==e.data&&(!a.emitedValue||a.emitedValue===a.tmpValue)){a.changeEmitedValue(void 0);var n=(0,l.getVariable)(t.data,a.name),r=(0,l.getVariable)(e.data,a.name);n===r&&(0,l.getVariable)(t.data,a.name,!1)===(0,l.getVariable)(e.data,a.name,!1)||n===a.tmpValue||a.changeTmpValue(n)}},a.prototype.componentWillUnmount=function(){var e,t,a,n,r,o,i;this.hook&&(null===(t=(e=this.props).removeHook)||void 0===t||t.call(e,this.hook)),this.hook2&&(null===(n=(a=this.props).removeHook)||void 0===n||n.call(a,this.hook2)),this.hook3&&(null===(o=(r=this.props).removeHook)||void 0===o||o.call(r,this.hook3,"flush")),this.lazyEmitChange.cancel(),null===(i=this.reaction)||void 0===i||i.call(this),this.disposeModel()},a.prototype.disposeModel=function(){var e,t=this.props,a=t.formStore,n=t.formItem,r=t.rootStore;if(this.model&&this.model.unique&&(null===a||void 0===a?void 0:a.parentStore)&&(null===a||void 0===a?void 0:a.parentStore.storeType)===i.ComboStore.name){var o=a.parentStore;o.unBindUniuqueItem(this.model)}this.model&&(n&&(0,u.isAlive)(n)&&n.removeSubFormItem(this.model),this.model.clearValueOnHidden&&(null===(e=this.model.form)||void 0===e||e.deleteValueByName(this.model.name)),r.removeStore(this.model)),delete this.model},a.prototype.controlRef=function(e){var t=this,a=this.props,n=a.addHook,r=a.removeHook,o=(a.formStore,a.$schema.name);while(e&&e.getWrappedInstance)e=e.getWrappedInstance();if(e&&e.validate&&this.model){var i=this.model,s=(0,l.promisify)(e.validate.bind(e));this.hook=function(){return i.clearError("component:valdiate"),s(t.props.data,t.getValue(),o).then((function(e){("string"===typeof e||Array.isArray(e))&&e&&i.setError(e,"component:valdiate")}))},null===n||void 0===n||n(this.hook)}else!e&&this.hook&&(null===r||void 0===r||r(this.hook),this.hook=void 0);var d=this.control;this.control=e;var u=this.context;this.control&&(e?u.registerComponent(this.control):u.unRegisterComponent(d))},a.prototype.validate=function(){var e=this,t=this.props,a=t.formStore,n=t.data;if(this.model)if(this.model.unique&&(null===a||void 0===a?void 0:a.parentStore)&&a.parentStore.storeType===i.ComboStore.name){var r=a.parentStore,o=r.uniques.get(this.model.name);o.items.forEach((function(e){return e.validate(n)}))}else this.model.validate(n,this.hook),null===a||void 0===a||a.getItemsByName(this.model.name).forEach((function(t){return t!==e.model&&t.validate(n)}))},a.prototype.handleChange=function(e,t,a){void 0===t&&(t=this.props.$schema.submitOnChange),void 0===a&&(a=!1);var n=this.props,r=(n.formStore,n.onChange),o=n.$schema,i=o.type,l=o.pipeOut,s=o.changeImmediately,d=n.formInited,u=n.data;if(this.model&&!~["service","group","hbox","panel","grid","input-group"].indexOf(i)){if(l){var p=this.model.value;e=l(e,p,u)}this.model.changeTmpValue(e),a||s||!d?this.emitChange(t):this.lazyEmitChange(t)}else r&&r.apply(null,arguments)},a.prototype.emitChange=function(e){var t;void 0===e&&(e=this.props.$schema.submitOnChange);var a=this.props,n=a.formStore,r=a.onChange,o=a.$schema,i=o.name,s=o.id,d=o.label,u=o.type,p=o.onChange,c=(o.maxLength,o.minLength,a.data),m=a.env,h=a.validateOnChange,f=a.formSubmited;if(this.model){var v=this.model.tmpValue,g=(0,l.getVariable)(c,this.model.name,!1);if(g!==v&&("input-password"!==u&&(null===m||void 0===m||m.tracker({eventType:"formItemChange",eventData:{id:s,name:i,label:d,type:u,value:v}},this.props)),this.model.changeEmitedValue(v),!1!==(null===p||void 0===p?void 0:p(v,g,this.model,n)))){var y=this.model.validated;null===r||void 0===r||r(v,i,!0===e),this.model.rules.minLength||this.model.rules.maxLength||!0===h||!1!==h&&(f||y)?this.validate():!1===h&&(null===(t=this.model)||void 0===t||t.reset())}}},a.prototype.handleBlur=function(e){var t=this.props,a=t.onBlur,n=t.$schema.validateOnBlur;n&&this.model&&this.validate(),a&&a(e)},a.prototype.setPrinstineValue=function(e){if(this.model){var t=this.props,a=(t.formStore,t.name),n=t.$schema.pipeOut,r=t.onChange,o=t.value,i=t.data;n&&(e=n(e,o,i)),null===r||void 0===r||r(e,a,!1,!0)}},a.prototype.getValue=function(){var e=this.props,t=e.formStore,a=e.$schema,n=this.model?this.model.tmpValue:a.value;return a.pipeIn&&(n=a.pipeIn(n,t)),n},a.prototype.setValue=function(e,t){var a,n=this.props,r=n.$schema.name,o=n.onBulkChange;t&&t!==r?o&&o((a={},a[t]=e,a)):this.handleChange(e)},a.prototype.render=function(){var t=this.props,a=t.controlWidth,o=t.disabled,i=t.formMode,l=t.$schema,s=t.store,d=t.data,u=t.invisible;if(u)return null;var p=this.getValue(),c=this.model,m={defaultSize:a,disabled:o||l.disabled,formItem:this.model,formMode:l.mode||i,ref:this.controlRef,data:d||(null===s||void 0===s?void 0:s.data),value:p,defaultValue:l.value,formItemValue:p,onChange:this.handleChange,onBlur:this.handleBlur,setValue:this.setValue,getValue:this.getValue,prinstine:c?c.prinstine:void 0,setPrinstineValue:this.setPrinstineValue};return r.default.createElement(e,(0,n.__assign)({},this.props,m))},a}(r.default.Component),t.contextType=s.ScopedContext,t.defaultProps={},t))),e);return a}t.wrapControl=h},"9f14":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("daa2"),i=a("a853"),l=a("2a8c"),s=a("d0ac"),d=a("79fb"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.IFrameRef=r.default.createRef(),t.state={width:t.props.width||"100%",height:t.props.height||"100%"},t}var a;return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){window.addEventListener("message",this.onMessage)},t.prototype.componentDidUpdate=function(e){var t=this.props.data;t!==e.data?this.postMessage("update",t):this.props.width===e.width&&this.props.height===e.height||this.setState({width:this.props.width||"100%",height:this.props.height||"100%"})},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.onMessage)},t.prototype.onMessage=function(e){var t,a=this.props,n=a.events,r=a.onAction,o=a.data;if("string"===typeof(null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.type)&&n){var l=e.data.type.split(":"),s=l[0],d=l[1];if("amis"===s&&d)if("resize"===d&&e.data.data)this.setState({width:e.data.data.width||"100%",height:e.data.data.height||"100%"});else{var u=n[d];u&&r(e,u,(0,i.createObject)(o,e.data.data))}}},t.prototype.onLoad=function(){var e=this.props,t=e.src,a=e.data;t&&this.postMessage("init",a)},t.prototype.reload=function(e,t){if(t)return this.receive(t);var a=this.props,n=a.src,r=a.data;n&&(this.IFrameRef.current.src=(0,s.buildApi)(n,r).url)},t.prototype.receive=function(e){var t=this.props,a=t.src,n=t.data,r=(0,i.createObject)(n,e);this.postMessage("receive",r),(0,s.isApiOutdated)(a,a,n,r)&&(this.IFrameRef.current.src=(0,s.buildApi)(a,r).url)},t.prototype.postMessage=function(e,t){var a,n;null===(n=null===(a=this.IFrameRef.current)||void 0===a?void 0:a.contentWindow)||void 0===n||n.postMessage({type:"amis:"+e,data:t},"*")},t.prototype.render=function(){var e=this.state,t=e.width,a=e.height,o=this.props,i=o.className,l=o.src,u=o.name,p=o.frameBorder,c=o.data,m=o.style,h={};void 0!==t&&(h.width=t),void 0!==a&&(h.height=a),m=(0,n.__assign)((0,n.__assign)({},h),m),l=(0,d.dataMapping)(l,c);var f=l?(0,s.buildApi)(l,c).url:void 0;return"string"===typeof f&&f&&!/^(\.\/|\.\.\/|\/|https?\:\/\/|\/\/)/.test(f)?r.default.createElement("p",null,"请填写合法的 iframe 地址"):r.default.createElement("iframe",{name:u,className:i,frameBorder:p,style:m,ref:this.IFrameRef,onLoad:this.onLoad,src:f})},t.propsList=["src","className"],t.defaultProps={className:"",frameBorder:0},(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof MessageEvent&&MessageEvent)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"onMessage",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"onLoad",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"reload",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"receive",null),(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String,Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"postMessage",null),t}(r.default.Component);t.default=u;var p=function(e){function t(t,a){var n=e.call(this,t)||this,r=a;return r.registerComponent(n),n}var a;return(0,n.__extends)(t,e),t.prototype.componentWillUnmount=function(){var e=this.context;e.unRegisterComponent(this)},t.contextType=l.ScopedContext,t=(0,n.__decorate)([(0,o.Renderer)({type:"iframe"}),(0,n.__metadata)("design:paramtypes",[Object,"function"===typeof(a="undefined"!==typeof l.IScopedContext&&l.IScopedContext)?a:Object])],t),t}(u);t.IFrameRenderer=p},be5e:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Grid2DRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("daa2"),i=a("a853"),l={left:"start",right:"end",center:"center",auto:"stretch"},s={top:"start",bottom:"end",middle:"center",auto:"stretch"},d=function(e){function t(t){return e.call(this,t)||this}return(0,n.__extends)(t,e),t.prototype.renderChild=function(e,t){var a=this.props.render;return a(e,t)},t.prototype.renderGrid=function(e,t,a){var n=this.props,o=n.itemRender,d=n.data;if(!(0,i.isVisible)(e,d))return null;var u={gridColumnStart:e.x,gridColumnEnd:e.x+e.w,gridRowStart:e.y,gridRowEnd:e.y+e.h,justifySelf:e.align?l[e.align]:"stretch",alignSelf:e.valign?s[e.valign]:"stretch"};return r.default.createElement("div",{key:t,style:u,className:e.gridClassName},o?o(e,t,a,this.props):this.renderChild("grid2d/"+t,e))},t.prototype.renderGrids=function(){var e=this,t=this.props.grids;return t.map((function(a,n){return e.renderGrid(a,n,t.length)}))},t.prototype.render=function(){var e=this.props,t=e.grids,a=e.cols,n=e.gap,o=e.gapRow,i=e.width,l=e.rowHeight,s=new Array(a);s.fill("1fr");var d=0;t.forEach((function(e,t){var a=e.y+e.h-1;a>d&&(d=a)}));var u=new Array(d);u.fill(l),t.forEach((function(e){e.width&&(s[e.x-1]=Number.isInteger(e.width)?e.width+"px":e.width),e.height&&(u[e.y-1]=Number.isInteger(e.height)?e.height+"px":e.height)}));var p={display:"grid",columnGap:n,rowGap:"undefined"===typeof o?n:o,width:i,gridTemplateColumns:s.join(" "),gridTemplateRows:u.join(" ")};return r.default.createElement("div",{style:p},this.renderGrids())},t.propsList=["grids"],t.defaultProps={cols:12,width:"auto",gap:0,rowHeight:"3.125rem"},t}(r.default.Component);t.default=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"grid-2d"})],t),t}(d);t.Grid2DRenderer=u},c327:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListControlRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("0611"),i=a("a853"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.handleDBClick=function(e,t){this.props.onToggle(e,!1,!0),this.props.onAction(null,{type:"submit"})},t.prototype.handleClick=function(e,t){if(!t.target||!t.target.closest("a,button")){var a=this.props.onToggle;a(e)}},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.render=function(){var e=this,t=this.props,a=t.render,n=t.itemClassName,o=t.classnames,l=t.className,s=t.disabled,d=t.options,u=t.placeholder,p=t.selectedOptions,c=t.imageClassName,m=t.submitOnDBClick,h=t.itemSchema,f=t.data,v=t.labelField,g=t.listClassName,y=t.translate,_=null;return d&&d.length&&(_=r.default.createElement("div",{className:o("ListControl-items",g)},d.map((function(t,l){return r.default.createElement("div",{key:l,className:o("ListControl-item",n,{"is-active":~p.indexOf(t),"is-disabled":t.disabled||s}),onClick:e.handleClick.bind(e,t),onDoubleClick:m?e.handleDBClick.bind(e,t):void 0},h?a(l+"/body",h,{data:(0,i.createObject)(f,t)}):t.body?a(l+"/body",t.body):[t.image?r.default.createElement("div",{key:"image",className:o("ListControl-itemImage",c)},r.default.createElement("img",{src:t.image,alt:t[v||"label"]})):null,t[v||"label"]?r.default.createElement("div",{key:"label",className:o("ListControl-itemLabel")},String(t[v||"label"])):null])})))),r.default.createElement("div",{className:o("ListControl",l)},_||r.default.createElement("span",{className:o("ListControl-placeholder")},y(u)))},t.propsList=["itemSchema","value","renderFormItems"],t.defaultProps={clearable:!1,imageClassName:"",submitOnDBClick:!1},t}(r.default.Component);t.default=l;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.OptionsControl)({type:"list-select",sizeMutable:!1})],t),t}(l);t.ListControlRenderer=s},c665:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PickerControlRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("0611"),i=(0,n.__importDefault)(a("11bc")),l=a("c54a"),s=(0,n.__importDefault)(a("93e3")),d=a("a853"),u=(0,n.__importDefault)(a("aa3c")),p=(0,n.__importDefault)(a("fef0")),c=a("55c0"),m=a("4f3d"),h=a("d0ac"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isOpened:!1,schema:t.buildSchema(t.props),isFocused:!1},t.input=r.default.createRef(),t}var a,o,f,v,g;return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){this.fetchOptions()},t.prototype.componentDidUpdate=function(e){var t=this.props;(0,d.anyChanged)(["pickerSchema","multiple","source"],e,t)?this.setState({schema:this.buildSchema(t)}):(JSON.stringify(t.value)!==JSON.stringify(e.value)||(0,h.isApiOutdated)(e.source,t.source,e.data,t.data))&&this.fetchOptions()},t.prototype.fetchOptions=function(){var e,t=this.props,a=t.value,n=t.formItem,r=t.valueField,o=t.labelField,i=t.source,l=t.data;if(i&&n&&(r||"value")!==(o||"label")&&(!(e=n.getSelectedOptions(a))||e.length&&e[0][r||"value"]===e[0][o||"label"])){var s=(0,d.createObject)(l,{value:a,op:"loadOptions"});(0,h.isEffectiveApi)(i,s)&&n.loadOptions(i,s,{autoAppend:!0})}},t.prototype.buildSchema=function(e){var t,a;return(0,n.__assign)((0,n.__assign)({checkOnItemClick:!0},e.pickerSchema),{labelTpl:null!==(a=null===(t=e.pickerSchema)||void 0===t?void 0:t.labelTpl)&&void 0!==a?a:e.labelTpl,type:"crud",pickerMode:!0,syncLocation:!1,api:e.source,keepItemSelectionOnPageChange:!0,valueField:e.valueField,labelField:e.labelField,bulkActions:e.multiple?e.pickerSchema.bulkActions:[]})},t.prototype.crudRef=function(e){while(e&&e.getWrappedInstance)e=e.getWrappedInstance();this.crud=e},t.prototype.reload=function(){if(this.crud)this.crud.search();else{var e=this.props.reloadOptions;e&&e()}},t.prototype.open=function(){this.setState({isOpened:!0})},t.prototype.close=function(){this.setState({isOpened:!1})},t.prototype.handleModalConfirm=function(e,t,a,n){var r=(0,u.default)(n,(function(e){return"crud"===e.props.type}));this.handleChange(e[r].items),this.close()},t.prototype.handleChange=function(e){var t=this.props,a=t.joinValues,n=t.valueField,r=t.delimiter,o=t.extractValue,i=t.multiple,l=t.options,d=t.setOptions,u=t.onChange,p=e;p=a?e.map((function(e){return e[n||"value"]})).join(r||","):o?i?e.map((function(e){return e[n||"value"]})):e[0]&&e[0][n||"value"]||"":i?e:e[0];var c=[];e.forEach((function(e){(0,s.default)(l,(function(t){return e[n||"value"]==t[n||"value"]}))||c.push(e)})),c.length&&d(l.concat(c)),u(p)},t.prototype.removeItem=function(e){var t=this.props,a=t.selectedOptions,n=t.joinValues,r=t.extractValue,o=t.delimiter,i=t.valueField,l=t.onChange,s=t.multiple,d=a.concat();d.splice(e,1);var u=d;u=n?d.map((function(e){return e[i||"value"]})).join(o||","):r?s?d.map((function(e){return e[i||"value"]})):d[0]&&d[0][i||"value"]||"":s?d:d[0],l(u)},t.prototype.handleKeyDown=function(e){var t=this.props.selectedOptions;" "===e.key?(this.open(),e.preventDefault()):t.length&&"Backspace"==e.key&&this.removeItem(t.length-1)},t.prototype.handleFocus=function(){this.setState({isFocused:!0})},t.prototype.handleBlur=function(){this.setState({isFocused:!1})},t.prototype.handleClick=function(){this.input.current&&this.input.current.focus()},t.prototype.clearValue=function(){var e=this.props,t=e.onChange,a=e.resetValue;t(void 0!==a?a:"")},t.prototype.renderValues=function(){var e=this,t=this.props,a=t.classPrefix,n=t.selectedOptions,o=t.labelField,l=t.labelTpl,s=t.disabled;return r.default.createElement("div",{className:a+"Picker-values"},n.map((function(t,n){return r.default.createElement("div",{key:n,className:(0,i.default)(a+"Picker-value",{"is-disabled":s})},r.default.createElement("span",{"data-tooltip":"删除","data-position":"bottom",className:a+"Picker-valueIcon",onClick:e.removeItem.bind(e,n)},"×"),r.default.createElement("span",{className:a+"Picker-valueLabel"},l?r.default.createElement(p.default,{html:(0,c.filter)(l,t)}):""+((0,d.getVariable)(t,o||"label")||(0,d.getVariable)(t,"id"))))})))},t.prototype.renderBody=function(e){var t=void 0===e?{}:e,a=t.popOverContainer,n=this.props,r=n.render,o=n.selectedOptions,i=n.options,l=n.multiple,s=n.valueField,d=n.embed,u=n.source;return r("modal-body",this.state.schema,{value:o,valueField:s,primaryField:s,options:u?[]:i,multiple:l,onSelect:d?this.handleChange:void 0,ref:this.crudRef,popOverContainer:a})},t.prototype.render=function(){var e=this.props,t=e.className,a=e.classnames,n=e.disabled,o=e.render,i=e.modalMode,l=e.source,s=e.size,u=(e.env,e.clearable),p=e.multiple,c=e.placeholder,h=e.embed,f=(e.value,e.selectedOptions),v=e.translate,g=e.popOverContainer;return r.default.createElement("div",{className:a("PickerControl",t)},h?r.default.createElement("div",{className:a("Picker")},this.renderBody({popOverContainer:g})):r.default.createElement("div",{className:a("Picker",{"Picker--single":!p,"Picker--multi":p,"is-focused":this.state.isFocused,"is-disabled":n})},r.default.createElement("div",{onClick:this.handleClick,className:a("Picker-input")},!f.length&&c?r.default.createElement("div",{className:a("Picker-placeholder")},v(c)):null,r.default.createElement("div",{className:a("Picker-valueWrap")},this.renderValues(),r.default.createElement("input",{onChange:d.noop,value:"",ref:this.input,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur})),u&&!n&&f.length?r.default.createElement("a",{onClick:this.clearValue,className:a("Picker-clear")},r.default.createElement(m.Icon,{icon:"close",className:"icon"})):null,r.default.createElement("span",{onClick:this.open,className:a("Picker-btn")},r.default.createElement(m.Icon,{icon:"window-restore",className:"icon"}))),o("modal",{title:v("Select.placeholder"),size:s,type:i,body:{children:this.renderBody}},{key:"modal",lazyRender:!!l,onConfirm:this.handleModalConfirm,onClose:this.close,show:this.state.isOpened})))},t.propsList=["modalMode","pickerSchema","labelField","onChange","options","value","inline","multiple","embed","resetValue","placeholder","onQuery"],t.defaultProps={modalMode:"dialog",multiple:!1,placeholder:"请点击右侧的图标",labelField:"label",valueField:"value",pickerSchema:{mode:"list",listItem:{title:"${label|raw}"}},embed:!1},(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"crudRef",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"open",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"close",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof Array&&Array)?a:Object,"function"===typeof(o="undefined"!==typeof l.Action&&l.Action)?o:Object,Object,"function"===typeof(f="undefined"!==typeof Array&&Array)?f:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleModalConfirm",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(v="undefined"!==typeof Array&&Array)?v:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleChange",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(g="undefined"!==typeof r.default&&r.default.KeyboardEvent)?g:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleKeyDown",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleFocus",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleBlur",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleClick",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"clearValue",null),(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderBody",null),t}(r.default.PureComponent);t.default=f;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.OptionsControl)({type:"picker",autoLoadOptionsFromSource:!1,sizeMutable:!1})],t),t}(f);t.PickerControlRenderer=v},ca97:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferPickerRenderer=void 0;var n=a("6b14"),r=a("0611"),o=(0,n.__importDefault)(a("9cd5")),i=(0,n.__importDefault)(a("9f35")),l=a("de0f"),s=(0,n.__importDefault)(a("91a0")),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e,t=this.props,a=t.className,n=t.classnames,r=t.selectedOptions,l=t.sortable,d=t.loading,u=t.searchable,p=t.searchResultMode,c=t.showArrow,m=t.deferLoad,h=t.disabled,f=t.selectTitle,v=t.resultTitle,g=t.pickerSize,y=t.columns,_=t.leftMode,b=t.selectMode,C=t.borderMode,O=this.props,F=O.options,k=O.leftOptions,E=O.leftDefaultValue;return"associated"===b&&F&&1===F.length&&F[0].leftOptions&&Array.isArray(F[0].children)&&(k=F[0].leftOptions,E=null!==(e=F[0].leftDefaultValue)&&void 0!==e?e:E,F=F[0].children),o.default.createElement("div",{className:n("TransferControl",a)},o.default.createElement(s.default,{borderMode:C,selectMode:b,value:r,disabled:h,options:F,onChange:this.handleChange,option2value:this.option2value,sortable:l,searchResultMode:p,onSearch:u?this.handleSearch:void 0,showArrow:c,onDeferLoad:m,selectTitle:f,resultTitle:v,size:g,columns:y,leftMode:_,leftOptions:k}),o.default.createElement(i.default,{overlay:!0,key:"info",show:d}))},t=(0,n.__decorate)([(0,r.OptionsControl)({type:"transfer-picker"})],t),t}(l.BaseTransferRenderer);t.TransferPickerRenderer=d},d60b:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextAreaControlRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("4275"),i=(0,n.__importDefault)(a("3aea")),l=a("ca1e"),s=a("a853"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={focused:!1},t.inputRef=function(e){return t.input=(0,l.findDOMNode)(e)},t}var a,o,d;return(0,n.__extends)(t,e),t.prototype.focus=function(){var e=this;this.input&&this.setState({focused:!0},(function(){if(e.input){e.input.focus();var t=e.input.value.length;t&&e.input.setSelectionRange(t,t)}}))},t.prototype.handleChange=function(e){var t=this.props.onChange,a=e.currentTarget.value;t(a)},t.prototype.handleFocus=function(e){var t=this.props.onFocus;this.setState({focused:!0},(function(){t&&t(e)}))},t.prototype.handleBlur=function(e){var t=this.props,a=t.onBlur,n=t.trimContents,r=t.value,o=t.onChange;this.setState({focused:!1},(function(){n&&r&&"string"===typeof r&&o(r.trim()),a&&a(e)}))},t.prototype.render=function(){var e,t=this.props,a=t.className,n=(t.classPrefix,t.value),o=(t.type,t.placeholder),l=t.disabled,d=t.minRows,u=t.maxRows,p=t.readOnly,c=t.name,m=t.borderMode,h=t.classnames,f=t.maxLength,v=t.showCounter,g=v?("undefined"===typeof n||null===n?"":"string"===typeof n?n:JSON.stringify(n)).length:0;return r.default.createElement("div",{className:h("TextareaControl",(e={},e["TextareaControl--border"+(0,s.ucFirst)(m)]=m,e["is-focused"]=this.state.focused,e),a)},r.default.createElement(i.default,{autoComplete:"off",ref:this.inputRef,name:c,disabled:l,value:"undefined"===typeof n||null===n?"":"string"===typeof n?n:JSON.stringify(n),placeholder:o,autoCorrect:"off",spellCheck:"false",readOnly:p,minRows:d||void 0,maxRows:u||void 0,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur}),v?r.default.createElement("span",{className:h("TextareaControl-counter",0===g?"is-empty":"")},g+("number"===typeof f&&f?"/"+f:"")):null)},t.defaultProps={minRows:3,maxRows:20,trimContents:!0},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof r.default&&r.default.ChangeEvent)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleChange",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(o="undefined"!==typeof r.default&&r.default.FocusEvent)?o:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleFocus",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(d="undefined"!==typeof r.default&&r.default.FocusEvent)?d:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleBlur",null),t}(r.default.Component);t.default=d;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.FormItem)({type:"textarea"})],t),t}(d);t.TextAreaControlRenderer=u},dd52:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageFieldRenderer=t.ImageField=t.imagePlaceholder=t.ImageThumb=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("daa2"),i=a("55c0"),l=a("ddf6"),s=a("a853"),d=a("4f3d"),u=a("a040"),p=(0,n.__importDefault)(a("3c93")),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.handleEnlarge=function(){var e=this.props,t=e.onEnlarge,a=(0,n.__rest)(e,["onEnlarge"]);t&&t(a)},t.prototype.render=function(){var e=this.props,t=e.classnames,a=e.className,n=e.imageClassName,o=e.thumbClassName,i=e.thumbMode,l=e.thumbRatio,s=e.height,u=e.width,p=e.src,c=e.alt,m=e.title,h=e.caption,f=e.href,v=e.blank,g=void 0===v||v,y=e.htmlTarget,_=e.onLoad,b=e.enlargeAble,C=e.translate,O=e.overlays,F=e.imageMode,k=b||O?r.default.createElement("div",{key:"overlay",className:t("Image-overlay")},b?r.default.createElement("a",{"data-tooltip":C("Image.zoomIn"),"data-position":"bottom",target:"_blank",onClick:this.handleEnlarge},r.default.createElement(d.Icon,{icon:"view",className:"icon"})):null,O):null,E=r.default.createElement("div",{className:t("Image","original"===F?"Image--original":"Image--thumb",a)},"original"===F?r.default.createElement("div",{className:t("Image-origin",i?"Image-origin--"+i:""),style:{height:s,width:u}},r.default.createElement("img",{onLoad:_,className:t("Image-image",n),src:p,alt:c}),k):r.default.createElement("div",{className:t("Image-thumbWrap")},r.default.createElement("div",{className:t("Image-thumb",o,i?"Image-thumb--"+i:"",l?"Image-thumb--"+l.replace(/:/g,"-"):""),style:{height:s,width:u}},r.default.createElement("img",{onLoad:_,className:t("Image-image",n),src:p,alt:c})),k),m||h?r.default.createElement("div",{key:"caption",className:t("Image-info")},m?r.default.createElement("div",{className:t("Image-title"),title:m},m):null,h?r.default.createElement("div",{className:t("Image-caption"),title:h},h):null):null);return f&&(E=r.default.createElement("a",{href:f,target:y||(g?"_blank":"_self"),className:t("Link",a),title:m},E)),E},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleEnlarge",null),t}(r.default.Component);t.ImageThumb=c;var m=(0,l.themeable)((0,u.localeable)(c));t.default=m,t.imagePlaceholder="data:image/svg+xml,%3C%3Fxml version='1.0' standalone='no'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg t='1631083237695' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='2420' xmlns:xlink='http://www.w3.org/1999/xlink' width='1024' height='1024'%3E%3Cdefs%3E%3Cstyle type='text/css'%3E%3C/style%3E%3C/defs%3E%3Cpath d='M959.872 128c0.032 0.032 0.096 0.064 0.128 0.128v767.776c-0.032 0.032-0.064 0.096-0.128 0.128H64.096c-0.032-0.032-0.096-0.064-0.128-0.128V128.128c0.032-0.032 0.064-0.096 0.128-0.128h895.776zM960 64H64C28.8 64 0 92.8 0 128v768c0 35.2 28.8 64 64 64h896c35.2 0 64-28.8 64-64V128c0-35.2-28.8-64-64-64z' p-id='2421' fill='%23bfbfbf'%3E%3C/path%3E%3Cpath d='M832 288c0 53.024-42.976 96-96 96s-96-42.976-96-96 42.976-96 96-96 96 42.976 96 96zM896 832H128V704l224-384 256 320h64l224-192z' p-id='2422' fill='%23bfbfbf'%3E%3C/path%3E%3C/svg%3E";var h=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}var o;return(0,n.__extends)(a,e),a.prototype.handleEnlarge=function(e){var t=e.src,a=e.originalSrc,n=e.title,r=e.caption,o=e.thumbMode,i=e.thumbRatio,l=this.props,s=l.onImageEnlarge,d=l.enlargeTitle,u=l.enlargeCaption;s&&s({src:t,originalSrc:a||t,title:d||n,caption:u||r,thumbMode:o,thumbRatio:i},this.props)},a.prototype.handleClick=function(e){var t=this.props.clickAction;t&&(0,p.default)(e,t,this.props)},a.prototype.render=function(){var e,a=this.props,n=a.className,o=a.defaultImage,l=a.imageCaption,d=a.title,u=a.data,p=a.imageClassName,c=a.thumbClassName,h=a.height,f=a.width,v=a.classnames,g=a.src,y=a.href,_=a.thumbMode,b=a.thumbRatio,C=a.placeholder,O=a.originalSrc,F=a.enlargeAble,k=a.imageMode,E=g?(0,i.filter)(g,u,"| raw"):"",w=E||(0,s.getPropValue)(this.props)||o||t.imagePlaceholder,A=y?(0,i.filter)(y,u,"| raw"):"";return r.default.createElement("div",{className:v("ImageField","original"===k?"ImageField--original":"ImageField--thumb",n),onClick:this.handleClick},w?r.default.createElement(m,{imageClassName:p,thumbClassName:c,height:h,width:f,src:w,href:A,title:(0,i.filter)(d,u),caption:(0,i.filter)(l,u),thumbMode:_,thumbRatio:b,originalSrc:null!==(e=(0,i.filter)(O,u,"| raw"))&&void 0!==e?e:w,enlargeAble:F&&w!==o,onEnlarge:this.handleEnlarge,imageMode:k}):r.default.createElement("span",{className:"text-muted"},C))},a.defaultProps={defaultImage:t.imagePlaceholder,thumbMode:"contain",thumbRatio:"1:1",placeholder:"-"},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],a.prototype,"handleEnlarge",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(o="undefined"!==typeof r.default&&r.default.MouseEvent)?o:Object]),(0,n.__metadata)("design:returntype",void 0)],a.prototype,"handleClick",null),a}(r.default.Component);t.ImageField=h;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"image"})],t),t}(h);t.ImageFieldRenderer=f},de0f:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferRender=t.BaseTransferRenderer=void 0;var n=a("6b14"),r=a("0611"),o=(0,n.__importDefault)(a("9cd5")),i=(0,n.__importDefault)(a("b626")),l=a("0611"),s=a("a853"),d=(0,n.__importDefault)(a("9f35")),u=(0,n.__importDefault)(a("93e3")),p=a("c14c"),c=a("79fb"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var a,r,m,h;return(0,n.__extends)(t,e),t.prototype.handleChange=function(e){var t=this.props,a=t.onChange,n=t.joinValues,r=t.delimiter,o=t.valueField,i=t.extractValue,l=t.options,d=t.setOptions,u=e,c=l.concat();Array.isArray(e)&&((n||i)&&(u=e.map((function(e){var t=(0,s.findTree)(l,(0,p.optionValueCompare)(e[o||"value"],o||"value"));return t||c.push(e),e[o||"value"]}))),n&&(u=u.join(r||","))),c.length>l.length&&d(c,!0),a(u)},t.prototype.option2value=function(e){return e},t.prototype.handleSearch=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var a,r,o,i,l,d,c,m,h,f,v;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:if(a=this.props,r=a.searchApi,o=a.options,i=a.labelField,l=a.valueField,d=a.env,c=a.data,!r)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,d.fetcher(r,(0,s.createObject)(c,{term:e}),{cancelExecutor:t})];case 2:if(m=n.sent(),!m.ok)throw new Error(m.msg||"搜索请求异常");if(h=m.data.options||m.data.items||m.data,!Array.isArray(h))throw new Error("CRUD.invalidArray");return[2,h.map((function(e){var t=null,a=e[l||"value"];return Array.isArray(o)&&null!==a&&void 0!==a&&(t=(0,u.default)(o,(0,p.optionValueCompare)(a,l))),t||e}))];case 3:return f=n.sent(),d.isCancel(f)||d.notify("error",f.message),[2,[]];case 4:return[3,6];case 5:return e?(v=(0,s.string2regExp)(e),[2,(0,s.filterTree)(o,(function(e){return!!(Array.isArray(e.children)&&e.children.length||e[l||"value"]&&(v.test(e[i||"label"])||v.test(e[l||"value"])))}),0,!0)]):[2,o];case 6:return[2]}}))}))},t.prototype.renderCell=function(e,t,a,r){var o=this.props,i=o.render,l=o.data;return i("cell/"+a+"/"+r,(0,n.__assign)({type:"text"},e),{value:(0,c.resolveVariable)(e.name,t),data:(0,s.createObject)(l,t)})},t.prototype.render=function(){var e,t=this.props,a=t.className,n=t.classnames,r=t.selectedOptions,l=t.showArrow,s=t.sortable,u=t.selectMode,p=t.columns,c=t.loading,m=t.searchable,h=t.searchResultMode,f=t.searchResultColumns,v=t.deferLoad,g=t.leftMode,y=t.rightMode,_=t.disabled,b=t.selectTitle,C=t.resultTitle,O=t.optionItemRender,F=t.resultItemRender,k=this.props,E=k.options,w=k.leftOptions,A=k.leftDefaultValue;return"associated"===u&&E&&1===E.length&&E[0].leftOptions&&Array.isArray(E[0].children)&&(w=E[0].leftOptions,A=null!==(e=E[0].leftDefaultValue)&&void 0!==e?e:A,E=E[0].children),o.default.createElement("div",{className:n("TransferControl",a)},o.default.createElement(i.default,{value:r,options:E,disabled:_,onChange:this.handleChange,option2value:this.option2value,sortable:s,showArrow:l,selectMode:u,searchResultMode:h,searchResultColumns:f,columns:p,onSearch:m?this.handleSearch:void 0,onDeferLoad:v,leftOptions:w,leftMode:g,rightMode:y,cellRender:this.renderCell,selectTitle:b,resultTitle:C,optionItemRender:O,resultItemRender:F}),o.default.createElement(d.default,{overlay:!0,key:"info",show:c}))},(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof Array&&Array)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleChange",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(r="undefined"!==typeof l.Option&&l.Option)?r:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"option2value",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String,"function"===typeof(m="undefined"!==typeof Function&&Function)?m:Object]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleSearch",null),(0,n.__decorate)([s.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,"function"===typeof(h="undefined"!==typeof l.Option&&l.Option)?h:Object,Number,Number]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"renderCell",null),t}(o.default.Component);t.BaseTransferRenderer=m;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t}(m);t.TransferRender=h,t.default=(0,r.OptionsControl)({type:"transfer"})(h)},eec3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("daa2"),i=a("a853"),l=a("79fb"),s=n.__importStar(a("8ca1")),d=(0,n.__importDefault)(a("3c93")),u=a("0b33"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.handleClick=function(e){var t=this;return function(a){var n;n=e.link?u.validations.isUrl({},e.link)?{type:"button",actionType:"url",url:e.link,blank:e.blank}:{type:"button",actionType:"link",link:e.link}:e.clickAction,(0,d.default)(a,n,t.props)}},t.prototype.render=function(){var e=this,t=this.props,a=t.itemClassName,o=t.source,d=t.data,u=t.options,p=t.classnames,c=(0,i.getPropValue)(this.props),m=[];return"string"===typeof o&&(0,l.isPureVariable)(o)?m=(0,l.resolveVariableAndFilter)(o,d,"| raw")||void 0:Array.isArray(c)?m=c:Array.isArray(u)&&(m=u),m&&!Array.isArray(m)&&(m=[m]),(null===m||void 0===m?void 0:m.length)?r.default.createElement(s.default,(0,n.__assign)({},this.props),m.map((function(t,n){return r.default.createElement(s.GridNavItem,{key:n,onClick:t.clickAction||t.link?e.handleClick(t):void 0,className:a,text:t.text,icon:t.icon,classnames:p,badge:t.badge?{badge:t.badge,data:d,classnames:p}:void 0})}))):null},(0,n.__decorate)([i.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleClick",null),t=(0,n.__decorate)([(0,o.Renderer)({type:"grid-nav"})],t),t}(r.default.Component);t.default=p},f0be9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TplRenderer=t.Icon=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("daa2"),i=a("9f4d"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,a=e.vendor,n=e.classnames,o=e.className,i=-1!==(null===t||void 0===t?void 0:t.indexOf("."));return i?r.default.createElement("img",{className:n("Icon"),src:t}):r.default.createElement("i",{className:n("iconfont"===a?"iconfont icon-"+t:a+" "+a+"-"+t,o)})},t.defaultProps={icon:"",vendor:"fa"},t}(r.default.Component);t.Icon=l;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"icon"}),i.withBadge],t),t}(l);t.TplRenderer=s},f482:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UUIDControlRenderer=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("a853"),i=a("4275"),l=function(e){function t(t){var a=e.call(this,t)||this;return t.value||a.setValue(),a}return(0,n.__extends)(t,e),t.prototype.componentDidUpdate=function(e){e.value||this.setValue()},t.prototype.setValue=function(){var e=this.props,t=(0,o.uuidv4)();e.length&&(t=t.substring(0,e.length)),e.onChange(t)},t.prototype.render=function(){return null},t}(r.default.Component);t.default=l;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,i.FormItem)({type:"uuid",wrap:!1,sizeMutable:!1})],t),t}(l);t.UUIDControlRenderer=s},f6df:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImagesFieldRenderer=t.ImagesField=void 0;var n=a("6b14"),r=(0,n.__importDefault)(a("9cd5")),o=a("daa2"),i=a("55c0"),l=a("79fb"),s=n.__importStar(a("dd52")),d=a("a853"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=[],t}var a;return(0,n.__extends)(t,e),t.prototype.handleEnlarge=function(e){var t=this.props,a=t.onImageEnlarge,r=t.src,o=t.originalSrc;a&&a((0,n.__assign)((0,n.__assign)({},e),{originalSrc:e.originalSrc||e.src,list:this.list.map((function(e){return{src:r?(0,i.filter)(r,e,"| raw"):e&&e.image||e,originalSrc:o?(0,i.filter)(o,e,"| raw"):(null===e||void 0===e?void 0:e.src)||(0,i.filter)(r,e,"| raw")||(null===e||void 0===e?void 0:e.image)||e,title:e&&(e.enlargeTitle||e.title),caption:e&&(e.enlargeCaption||e.description||e.caption)}}))}),this.props)},t.prototype.render=function(){var e,t,a=this,n=this.props,o=n.className,u=n.defaultImage,p=n.thumbMode,c=n.thumbRatio,m=n.data,h=(n.name,n.placeholder),f=n.classnames,v=n.source,g=n.delimiter,y=n.enlargeAble,_=n.src,b=n.originalSrc,C=n.listClassName,O=n.options;return"string"===typeof v&&(0,l.isPureVariable)(v)?t=(0,l.resolveVariableAndFilter)(v,m,"| raw")||void 0:Array.isArray(e=(0,d.getPropValue)(this.props))||"string"===typeof e?t=e:Array.isArray(O)&&(t=O),"string"===typeof t?t=t.split(g):t&&!Array.isArray(t)&&(t=[t]),this.list=t,r.default.createElement("div",{className:f("ImagesField",o)},Array.isArray(t)?r.default.createElement("div",{className:f("Images",C)},t.map((function(e,t){return r.default.createElement(s.default,{index:t,className:f("Images-item"),key:t,src:(_?(0,i.filter)(_,e,"| raw"):e&&e.image)||e,originalSrc:(b?(0,i.filter)(b,e,"| raw"):e&&e.src)||e,title:e&&e.title,caption:e&&(e.description||e.caption),thumbMode:p,thumbRatio:c,enlargeAble:y,onEnlarge:a.handleEnlarge})}))):u?r.default.createElement("div",{className:f("Images",C)},r.default.createElement(s.default,{className:f("Images-item"),src:u,thumbMode:p,thumbRatio:c})):h)},t.defaultProps={className:"",delimiter:",",defaultImage:s.imagePlaceholder,placehoder:"-",thumbMode:"contain",thumbRatio:"1:1"},(0,n.__decorate)([d.autobind,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["function"===typeof(a="undefined"!==typeof s.ImageThumbProps&&s.ImageThumbProps)?a:Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"handleEnlarge",null),t}(r.default.Component);t.ImagesField=u;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t=(0,n.__decorate)([(0,o.Renderer)({type:"images"})],t),t}(u);t.ImagesFieldRenderer=p}}]);