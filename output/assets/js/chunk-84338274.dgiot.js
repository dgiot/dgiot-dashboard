/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2021-12-30 11:24:32
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84338274"],{"209c":function(t,e){(function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.util.VK"),n=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},r=function(t){return function(e){return n(e)===t}},o=function(t){return function(e){return typeof e===t}},i=function(t){return function(e){return t===e}},u=r("string"),a=r("array"),c=i(null),s=o("boolean"),l=o("function"),f=function(){},d=function(t){return function(){return t}},m=function(t){return t},p=function(t,e){return t===e},h=d(!1),g=d(!0),v=function(){return y},y=function(){var t=function(t){return t()},e=m,n={fold:function(t,e){return t()},isSome:h,isNone:g,getOr:e,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:d(null),getOrUndefined:d(void 0),or:e,orThunk:t,map:v,each:f,bind:v,exists:h,forall:g,filter:function(){return v()},toArray:function(){return[]},toString:d("none()")};return n}(),b=function(t){var e=d(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},isSome:g,isNone:h,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return b(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:y},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},w=function(t){return null===t||void 0===t?y:b(t)},x={some:b,none:v,from:w},k=Array.prototype.indexOf,S=Array.prototype.push,C=function(t,e){return k.call(t,e)},O=function(t,e){return C(t,e)>-1},N=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r},T=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];e(o,n)}},A=function(t,e,n){return T(t,(function(t,r){n=e(n,t,r)})),n},L=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!a(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);S.apply(e,t[n])}return e},D=function(t,e){return L(N(t,e))},P=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return x.none()},_=function(t,e,n){return void 0===n&&(n=p),t.exists((function(t){return n(t,e)}))},R=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},E=function(t,e){return t?x.some(e):x.none()},M=function(t){var e=t.getParam("link_assume_external_targets",!1);return s(e)&&e?1:!u(e)||"http"!==e&&"https"!==e?0:e},j=function(t){return t.getParam("link_context_toolbar",!1,"boolean")},I=function(t){return t.getParam("link_list")},B=function(t){return t.getParam("default_link_target")},U=function(t){return t.getParam("target_list",!0)},$=function(t){return t.getParam("rel_list",[],"array")},F=function(t){return t.getParam("link_class_list",[],"array")},z=function(t){return t.getParam("link_title",!0,"boolean")},K=function(t){return t.getParam("allow_unsafe_link_target",!1,"boolean")},H=function(t){return t.getParam("link_quicklink",!1,"boolean")},V=function(t){return t.getParam("link_default_protocol","http","string")},W=tinymce.util.Tools.resolve("tinymce.util.Tools"),q=function(t){return u(t.value)?t.value:""},Q=function(t){return u(t.text)?t.text:u(t.title)?t.title:""},X=function(t,e){var n=[];return W.each(t,(function(t){var r=Q(t);if(void 0!==t.menu){var o=X(t.menu,e);n.push({text:r,items:o})}else{var i=e(t);n.push({text:r,value:i})}})),n},J=function(t){return void 0===t&&(t=q),function(e){return x.from(e).map((function(e){return X(e,t)}))}},G=function(t){return J(q)(t)},Y=function(t,e){return function(n){return{name:t,type:"listbox",label:e,items:n}}},Z={sanitize:G,sanitizeWith:J,createUi:Y,getValue:q},tt=function(){return tt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},tt.apply(this,arguments)},et=Object.keys,nt=Object.hasOwnProperty,rt=function(t,e){for(var n=et(t),r=0,o=n.length;r<o;r++){var i=n[r],u=t[i];e(u,i)}},ot=function(t){return function(e,n){t[n]=e}},it=function(t,e,n,r){var o={};return rt(t,(function(t,o){(e(t,o)?n:r)(t,o)})),o},ut=function(t,e){var n={};return it(t,e,ot(n),f),n},at=function(t,e){return nt.call(t,e)},ct=function(t,e){return at(t,e)&&void 0!==t[e]&&null!==t[e]},st=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),lt=tinymce.util.Tools.resolve("tinymce.util.URI"),ft=function(t){return t&&"a"===t.nodeName.toLowerCase()},dt=function(t){return ft(t)&&!!ht(t)},mt=function(t,e){if(t.collapsed)return[];var n=t.cloneContents(),r=new st(n.firstChild,n),o=[],i=n.firstChild;do{e(i)&&o.push(i)}while(i=r.next());return o},pt=function(t){return/^\w+:/i.test(t)},ht=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")},gt=function(t,e){var n=["noopener"],r=t?t.split(/\s+/):[],o=function(t){return W.trim(t.sort().join(" "))},i=function(t){return t=u(t),t.length>0?t.concat(n):n},u=function(t){return t.filter((function(t){return-1===W.inArray(n,t)}))},a=e?i(r):u(r);return a.length>0?o(a):""},vt=function(t){return t.replace(/\uFEFF/g,"")},yt=function(t,e){return e=e||t.selection.getNode(),St(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},bt=function(t,e){var n=e?e.innerText||e.textContent:t.getContent({format:"text"});return vt(n)},wt=function(t){return W.grep(t,dt).length>0},xt=function(t){return mt(t,dt).length>0},kt=function(t){var e=t.schema.getTextInlineElements(),n=function(t){return 1===t.nodeType&&!ft(t)&&!at(e,t.nodeName.toLowerCase())},r=mt(t.selection.getRng(),n);return 0===r.length},St=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},Ct=function(t){var e=["title","rel","class","target"];return A(e,(function(e,n){return t[n].each((function(t){e[n]=t.length>0?t:null})),e}),{href:t.href})},Ot=function(t,e){return"http"!==e&&"https"!==e||pt(t)?t:e+"://"+t},Nt=function(t,e){var n=tt({},e);if(!($(t).length>0)&&!1===K(t)){var r=gt(n.rel,"_blank"===n.target);n.rel=r||null}return x.from(n.target).isNone()&&!1===U(t)&&(n.target=B(t)),n.href=Ot(n.href,M(t)),n},Tt=function(t,e,n,r){n.each((function(t){at(e,"innerText")?e.innerText=t:e.textContent=t})),t.dom.setAttribs(e,r),t.selection.select(e)},At=function(t,e,n,r){St(e)?It(t,e,r):n.fold((function(){t.execCommand("mceInsertLink",!1,r)}),(function(e){t.insertContent(t.dom.createHTML("a",r,t.dom.encode(e)))}))},Lt=function(t,e,n){var r=t.selection.getNode(),o=yt(t,r),i=Nt(t,Ct(n));t.undoManager.transact((function(){n.href===e.href&&e.attach(),o?(t.focus(),Tt(t,o,n.text,i)):At(t,r,n.text,i)}))},Dt=function(t){var e=t.dom,n=t.selection,r=n.getBookmark(),o=n.getRng().cloneRange(),i=e.getParent(o.startContainer,"a[href]",t.getBody()),u=e.getParent(o.endContainer,"a[href]",t.getBody());i&&o.setStartBefore(i),u&&o.setEndAfter(u),n.setRng(o),t.execCommand("unlink"),n.moveToBookmark(r)},Pt=function(t){t.undoManager.transact((function(){var e=t.selection.getNode();St(e)?jt(t,e):Dt(t),t.focus()}))},_t=function(t){var e=t.class,n=t.href,r=t.rel,o=t.target,i=t.text,u=t.title;return ut({class:e.getOrNull(),href:n,rel:r.getOrNull(),target:o.getOrNull(),text:i.getOrNull(),title:u.getOrNull()},(function(t,e){return!1===c(t)}))},Rt=function(t,e){var n=e.href;return tt(tt({},e),{href:lt.isDomSafe(n,"a",t.settings)?n:""})},Et=function(t,e,n){var r=Rt(t,n);t.hasPlugin("rtc",!0)?t.execCommand("createlink",!1,_t(r)):Lt(t,e,r)},Mt=function(t){t.hasPlugin("rtc",!0)?t.execCommand("unlink"):Pt(t)},jt=function(t,e){var n=t.dom.select("img",e)[0];if(n){var r=t.dom.getParents(n,"a[href]",e)[0];r&&(r.parentNode.insertBefore(n,r),t.dom.remove(r))}},It=function(t,e,n){var r=t.dom.select("img",e)[0];if(r){var o=t.dom.create("a",n);r.parentNode.insertBefore(o,r),o.appendChild(r)}},Bt=function(t){return ct(t,"items")},Ut=function(t,e){return P(e,(function(e){return Bt(e)?Ut(t,e.items):E(e.value===t,e)}))},$t=function(t,e,n,r){var o=r[e],i=t.length>0;return void 0!==o?Ut(o,n).map((function(e){return{url:{value:e.value,meta:{text:i?t:e.text,attach:f}},text:i?t:e.text}})):x.none()},Ft=function(t,e){return"link"===e?t.link:"anchor"===e?t.anchor:x.none()},zt=function(t,e){var n={text:t.text,title:t.title},r=function(t){return E(n.title.length<=0,x.from(t.meta.title).getOr(""))},o=function(t){return E(n.text.length<=0,x.from(t.meta.text).getOr(t.value))},i=function(t){var e=o(t.url),n=r(t.url);return e.isSome()||n.isSome()?x.some(tt(tt({},e.map((function(t){return{text:t}})).getOr({})),n.map((function(t){return{title:t}})).getOr({}))):x.none()},u=function(t,r){var o=Ft(e,r.name).getOr([]);return $t(n.text,r.name,o,t)},a=function(t,e){var r=e.name;return"url"===r?i(t()):O(["anchor","link"],r)?u(t(),e):"text"===r||"title"===r?(n[r]=t()[r],x.none()):x.none()};return{onChange:a}},Kt={init:zt,getDelta:$t},Ht=tinymce.util.Tools.resolve("tinymce.util.Delay"),Vt=tinymce.util.Tools.resolve("tinymce.util.Promise"),Wt=function(t,e,n){var r=t.selection.getRng();Ht.setEditorTimeout(t,(function(){t.windowManager.confirm(e,(function(e){t.selection.setRng(r),n(e)}))}))},qt=function(t){var e=t.href,n=e.indexOf("@")>0&&-1===e.indexOf("/")&&-1===e.indexOf("mailto:");return n?x.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(t){return tt(tt({},t),{href:"mailto:"+e})}}):x.none()},Qt=function(t,e){return function(n){var r=n.href,o=1===t&&!pt(r)||0===t&&/^\s*www(\.|\d\.)/i.test(r);return o?x.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+e+":// prefix?",preprocess:function(t){return tt(tt({},t),{href:e+"://"+r})}}):x.none()}},Xt=function(t,e){return P([qt,Qt(M(t),V(t))],(function(t){return t(e)})).fold((function(){return Vt.resolve(e)}),(function(n){return new Vt((function(r){Wt(t,n.message,(function(t){r(t?n.preprocess(e):e)}))}))}))},Jt={preprocess:Xt},Gt=function(t){var e=t.dom.select("a:not([href])"),n=D(e,(function(t){var e=t.name||t.id;return e?[{text:e,value:"#"+e}]:[]}));return n.length>0?x.some([{text:"None",value:""}].concat(n)):x.none()},Yt={getAnchors:Gt},Zt=function(t){var e=F(t);return e.length>0?Z.sanitize(e):x.none()},te={getClasses:Zt},ee=tinymce.util.Tools.resolve("tinymce.util.XHR"),ne=function(t){try{return x.some(JSON.parse(t))}catch(e){return x.none()}},re=function(t){var e=function(e){return t.convertURL(e.value||e.url,"href")},n=I(t);return new Vt((function(t){u(n)?ee.send({url:n,success:function(e){return t(ne(e))},error:function(e){return t(x.none())}}):l(n)?n((function(e){return t(x.some(e))})):t(x.from(n))})).then((function(t){return t.bind(Z.sanitizeWith(e)).map((function(t){if(t.length>0){var e=[{text:"None",value:""}];return e.concat(t)}return t}))}))},oe={getLinks:re},ie=function(t,e){var n=$(t);if(n.length>0){var r=_(e,"_blank"),o=!1===K(t),i=function(t){return gt(Z.getValue(t),r)},u=o?Z.sanitizeWith(i):Z.sanitize;return u(n)}return x.none()},ue={getRels:ie},ae=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],ce=function(t){var e=U(t);return a(e)?Z.sanitize(e).orThunk((function(){return x.some(ae)})):!1===e?x.none():x.some(ae)},se={getTargets:ce},le=function(t,e,n){var r=t.getAttrib(e,n);return null!==r&&r.length>0?x.some(r):x.none()},fe=function(t,e){var n=t.dom,r=kt(t),o=r?x.some(bt(t.selection,e)):x.none(),i=e?x.some(n.getAttrib(e,"href")):x.none(),u=e?x.from(n.getAttrib(e,"target")):x.none(),a=le(n,e,"rel"),c=le(n,e,"class"),s=le(n,e,"title");return{url:i,text:o,title:s,target:u,rel:a,linkClass:c}},de=function(t,e){return oe.getLinks(t).then((function(n){var r=fe(t,e);return{anchor:r,catalogs:{targets:se.getTargets(t),rels:ue.getRels(t,r.target),classes:te.getClasses(t),anchor:Yt.getAnchors(t),link:n},optNode:x.from(e),flags:{titleEnabled:z(t)}}}))},me={collect:de},pe=function(t,e){return function(n){var r=n.getData();if(!r.url.value)return Mt(t),void n.close();var o=function(t){return x.from(r[t]).filter((function(n){return!_(e.anchor[t],n)}))},i={href:r.url.value,text:o("text"),target:o("target"),rel:o("rel"),class:o("linkClass"),title:o("title")},u={href:r.url.value,attach:void 0!==r.url.meta&&r.url.meta.attach?r.url.meta.attach:f};Jt.preprocess(t,i).then((function(e){Et(t,u,e)})),n.close()}},he=function(t){var e=yt(t);return me.collect(t,e)},ge=function(t,e){var n=t.anchor,r=n.url.getOr("");return{url:{value:r,meta:{original:{value:r}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:r,link:r,rel:n.rel.getOr(""),target:n.target.or(e).getOr(""),linkClass:n.linkClass.getOr("")}},ve=function(t,e,n){var r=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],o=t.anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),i=t.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],u=x.from(B(n)),a=ge(t,u),c=t.catalogs,s=Kt.init(a,c),l={type:"panel",items:L([r,o,i,R([c.anchor.map(Z.createUi("anchor","Anchors")),c.rels.map(Z.createUi("rel","Rel")),c.targets.map(Z.createUi("target","Open link in...")),c.link.map(Z.createUi("link","Link list")),c.classes.map(Z.createUi("linkClass","Class"))])])};return{title:"Insert/Edit Link",size:"normal",body:l,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onChange:function(t,e){var n=e.name;s.onChange(t.getData,{name:n}).each((function(e){t.setData(e)}))},onSubmit:e}},ye=function(t){var e=he(t);e.then((function(e){var n=pe(t,e);return ve(e,n,t)})).then((function(e){t.windowManager.open(e)}))},be=function(t,e){document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)},we=function(t){var e=document.createElement("a");e.target="_blank",e.href=t,e.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),be(e,n)},xe=function(t,e){return t.dom.getParent(e,"a[href]")},ke=function(t){return xe(t,t.selection.getStart())},Se=function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey},Ce=function(t,e){if(e){var n=ht(e);if(/^#/.test(n)){var r=t.$(n);r.length&&t.selection.scrollIntoView(r[0],!0)}else we(e.href)}},Oe=function(t){return function(){ye(t)}},Ne=function(t){return function(){Ce(t,ke(t))}},Te=function(t){t.on("click",(function(n){var r=xe(t,n.target);r&&e.metaKeyPressed(n)&&(n.preventDefault(),Ce(t,r))})),t.on("keydown",(function(e){var n=ke(t);n&&13===e.keyCode&&Se(e)&&(e.preventDefault(),Ce(t,n))}))},Ae=function(t,e){return t.on("NodeChange",e),function(){return t.off("NodeChange",e)}},Le=function(t){return function(e){var n=function(){return e.setActive(!t.mode.isReadOnly()&&null!==yt(t,t.selection.getNode()))};return n(),Ae(t,n)}},De=function(t){return function(e){var n=function(){return e.setDisabled(null===yt(t,t.selection.getNode()))};return n(),Ae(t,n)}},Pe=function(t){return function(e){var n=function(e){return wt(e)||xt(t.selection.getRng())},r=t.dom.getParents(t.selection.getStart());return e.setDisabled(!n(r)),Ae(t,(function(t){return e.setDisabled(!n(t.parents))}))}},_e=function(t){t.addCommand("mceLink",(function(){H(t)?t.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Oe(t)()}))},Re=function(t){t.addShortcut("Meta+K","",(function(){t.execCommand("mceLink")}))},Ee=function(t){t.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Oe(t),onSetup:Le(t)}),t.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ne(t),onSetup:De(t)}),t.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return Mt(t)},onSetup:Pe(t)})},Me=function(t){t.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ne(t),onSetup:De(t)}),t.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Oe(t)}),t.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return Mt(t)},onSetup:Pe(t)})},je=function(t){var e="link unlink openlink",n="link";t.ui.registry.addContextMenu("link",{update:function(r){return wt(t.dom.getParents(r,"a"))?e:n}})},Ie=function(t){var e=function(t){t.selection.collapse(!1)},n=function(e){var n=t.selection.getNode();return e.setDisabled(!yt(t,n)),f},r=function(e){var n=yt(t),r=kt(t);if(!n&&r){var o=bt(t.selection,n);return x.some(o.length>0?o:e)}return x.none()};t.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Le(t)},label:"Link",predicate:function(e){return!!yt(t,e)&&j(t)},initValue:function(){var e=yt(t);return e?ht(e):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(e){var n=t.selection.getNode();return e.setActive(!!yt(t,n)),Le(t)(e)},onAction:function(n){var o=n.getValue(),i=r(o),u={href:o,attach:f};Et(t,u,{href:o,text:i,title:x.none(),rel:x.none(),target:x.none(),class:x.none()}),e(t),n.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:n,onAction:function(e){Mt(t),e.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:n,onAction:function(e){Ne(t)(),e.hide()}}]})};function Be(){t.add("link",(function(t){Ee(t),Me(t),je(t),Ie(t),Te(t),_e(t),Re(t)}))}Be()})()},"2c24":function(t,e){(function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(){return e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},e.apply(this,arguments)},n=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},r=function(t){return function(e){return n(e)===t}},o=r("string"),i=r("object"),u=r("array"),a=function(t){return null===t||void 0===t},c=function(t){return!a(t)},s=function(){},l=function(t){return function(){return t}},f=function(t){return t},d=l(!1),m=l(!0),p=function(){return h},h=function(){var t=function(t){return t()},e=f,n={fold:function(t,e){return t()},isSome:d,isNone:m,getOr:e,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:e,orThunk:t,map:p,each:s,bind:p,exists:d,forall:m,filter:function(){return p()},toArray:function(){return[]},toString:l("none()")};return n}(),g=function(t){var e=l(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},isSome:m,isNone:d,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return g(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:h},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},v=function(t){return null===t||void 0===t?h:g(t)},y={some:g,none:p,from:v},b=Array.prototype.push,w=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];e(o,n)}},x=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!u(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);b.apply(e,t[n])}return e},k=function(t){var e=t,n=function(){return e},r=function(t){e=t};return{get:n,set:r}},S=Object.keys,C=Object.hasOwnProperty,O=function(t,e){for(var n=S(t),r=0,o=n.length;r<o;r++){var i=n[r],u=t[i];e(u,i)}},N=function(t,e){return T(t,e)?y.from(t[e]):y.none()},T=function(t,e){return C.call(t,e)},A=function(t){return t.getParam("media_scripts")},L=function(t){return t.getParam("audio_template_callback")},D=function(t){return t.getParam("video_template_callback")},P=function(t){return t.getParam("media_live_embeds",!0)},_=function(t){return t.getParam("media_filter_html",!0)},R=function(t){return t.getParam("media_url_resolver")},E=function(t){return t.getParam("media_alt_source",!0)},M=function(t){return t.getParam("media_poster",!0)},j=function(t){return t.getParam("media_dimensions",!0)},I=tinymce.util.Tools.resolve("tinymce.util.Tools"),B=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),U=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),$=function(t,e){if(t)for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n].filter))return t[n]},F=B.DOM,z=function(t){return t.replace(/px$/,"")},K=function(t){var e=t.map.style,n=e?F.parseStyle(e):{};return{type:"ephox-embed-iri",source:t.map["data-ephox-embed-iri"],altsource:"",poster:"",width:N(n,"max-width").map(z).getOr(""),height:N(n,"max-height").map(z).getOr("")}},H=function(t,e){var n=k(!1),r={};return U({validate:!1,allow_conditional_comments:!0,start:function(e,o){if(n.get());else if(T(o.map,"data-ephox-embed-iri"))n.set(!0),r=K(o);else{if(r.source||"param"!==e||(r.source=o.map.movie),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(r.type||(r.type=e),r=I.extend(o.map,r)),"script"===e){var i=$(t,o.map.src);if(!i)return;r={type:"script",source:o.map.src,width:String(i.width),height:String(i.height)}}"source"===e&&(r.source?r.altsource||(r.altsource=o.map.src):r.source=o.map.src),"img"!==e||r.poster||(r.poster=o.map.src)}}}).parse(e),r.source=r.source||r.src||r.data,r.altsource=r.altsource||"",r.poster=r.poster||"",r},V=function(t){var e={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n=t.toLowerCase().split(".").pop(),r=e[n];return r||""},W=tinymce.util.Tools.resolve("tinymce.html.Schema"),q=tinymce.util.Tools.resolve("tinymce.html.Writer"),Q=B.DOM,X=function(t){return/^[0-9.]+$/.test(t)?t+"px":t},J=function(t,e){O(e,(function(e,n){var r=""+e;if(t.map[n]){var o=t.length;while(o--){var i=t[o];i.name===n&&(r?(t.map[n]=r,i.value=r):(delete t.map[n],t.splice(o,1)))}}else r&&(t.push({name:n,value:r}),t.map[n]=r)}))},G=function(t,e){var n=e.map.style,r=n?Q.parseStyle(n):{};r["max-width"]=X(t.width),r["max-height"]=X(t.height),J(e,{style:Q.serializeStyle(r)})},Y=["source","altsource"],Z=function(t,e,n){var r,o=q(),i=k(!1),u=0;return U({validate:!1,allow_conditional_comments:!0,comment:function(t){o.comment(t)},cdata:function(t){o.cdata(t)},text:function(t,e){o.text(t,e)},start:function(t,a,c){if(i.get());else if(T(a.map,"data-ephox-embed-iri"))i.set(!0),G(e,a);else{switch(t){case"video":case"object":case"embed":case"img":case"iframe":void 0!==e.height&&void 0!==e.width&&J(a,{width:e.width,height:e.height});break}if(n)switch(t){case"video":J(a,{poster:e.poster,src:""}),e.altsource&&J(a,{src:""});break;case"iframe":J(a,{src:e.source});break;case"source":if(u<2&&(J(a,{src:e[Y[u]],type:e[Y[u]+"mime"]}),!e[Y[u]]))return;u++;break;case"img":if(!e.poster)return;r=!0;break}}o.start(t,a,c)},end:function(t){if(!i.get()){if("video"===t&&n)for(var a=0;a<2;a++)if(e[Y[a]]){var c=[];c.map={},u<=a&&(J(c,{src:e[Y[a]],type:e[Y[a]+"mime"]}),o.start("source",c,!0))}if(e.poster&&"object"===t&&n&&!r){var s=[];s.map={},J(s,{src:e.poster,width:e.width,height:e.height}),o.start("img",s,!0)}}o.end(t)}},W({})).parse(t),o.getContent()},tt=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],et=function(t){var e=t.match(/^(https?:\/\/|www\.)(.+)$/i);return e&&e.length>1?"www."===e[1]?"https://":e[1]:"https://"},nt=function(t,e){for(var n=et(e),r=t.regex.exec(e),o=n+t.url,i=function(t){o=o.replace("$"+t,(function(){return r[t]?r[t]:""}))},u=0;u<r.length;u++)i(u);return o.replace(/\?$/,"")},rt=function(t){var e=tt.filter((function(e){return e.regex.test(t)}));return e.length>0?I.extend({},e[0],{url:nt(e[0],t)}):null},ot=function(t){var e=t.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+t.source+'" width="'+t.width+'" height="'+t.height+'"'+e+"></iframe>"},it=function(t){var e='<object data="'+t.source+'" width="'+t.width+'" height="'+t.height+'" type="application/x-shockwave-flash">';return t.poster&&(e+='<img src="'+t.poster+'" width="'+t.width+'" height="'+t.height+'" />'),e+="</object>",e},ut=function(t,e){return e?e(t):'<audio controls="controls" src="'+t.source+'">'+(t.altsource?'\n<source src="'+t.altsource+'"'+(t.altsourcemime?' type="'+t.altsourcemime+'"':"")+" />\n":"")+"</audio>"},at=function(t,e){return e?e(t):'<video width="'+t.width+'" height="'+t.height+'"'+(t.poster?' poster="'+t.poster+'"':"")+' controls="controls">\n<source src="'+t.source+'"'+(t.sourcemime?' type="'+t.sourcemime+'"':"")+" />\n"+(t.altsource?'<source src="'+t.altsource+'"'+(t.altsourcemime?' type="'+t.altsourcemime+'"':"")+" />\n":"")+"</video>"},ct=function(t){return'<script src="'+t.source+'"><\/script>'},st=function(t,e){var n=I.extend({},e);if(!n.source&&(I.extend(n,H(A(t),n.embed)),!n.source))return"";n.altsource||(n.altsource=""),n.poster||(n.poster=""),n.source=t.convertURL(n.source,"source"),n.altsource=t.convertURL(n.altsource,"source"),n.sourcemime=V(n.source),n.altsourcemime=V(n.altsource),n.poster=t.convertURL(n.poster,"poster");var r=rt(n.source);if(r&&(n.source=r.url,n.type=r.type,n.allowfullscreen=r.allowFullscreen,n.width=n.width||String(r.w),n.height=n.height||String(r.h)),n.embed)return Z(n.embed,n,!0);var o=$(A(t),n.source);o&&(n.type="script",n.width=String(o.width),n.height=String(o.height));var i=L(t),u=D(t);return n.width=n.width||"300",n.height=n.height||"150",I.each(n,(function(e,r){n[r]=t.dom.encode(""+e)})),"iframe"===n.type?ot(n):"application/x-shockwave-flash"===n.sourcemime?it(n):-1!==n.sourcemime.indexOf("audio")?ut(n,i):"script"===n.type?ct(n):at(n,u)},lt=function(t){return t.hasAttribute("data-mce-object")||t.hasAttribute("data-ephox-embed-iri")},ft=function(t){t.on("click keyup touchend",(function(){var e=t.selection.getNode();e&&t.dom.hasClass(e,"mce-preview-object")&&t.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")})),t.on("ObjectSelected",(function(t){var e=t.target.getAttribute("data-mce-object");"script"===e&&t.preventDefault()})),t.on("ObjectResized",(function(t){var e=t.target;if(e.getAttribute("data-mce-object")){var n=e.getAttribute("data-mce-html");n&&(n=unescape(n),e.setAttribute("data-mce-html",escape(Z(n,{width:String(t.width),height:String(t.height)}))))}}))},dt=tinymce.util.Tools.resolve("tinymce.util.Promise"),mt={},pt=function(t,e,n){return new dt((function(r,o){var i=function(n){return n.html&&(mt[t.source]=n),r({url:t.source,html:n.html?n.html:e(t)})};mt[t.source]?i(mt[t.source]):n({url:t.source},i,o)}))},ht=function(t,e){return dt.resolve({html:e(t),url:t.source})},gt=function(t){return function(e){return st(t,e)}},vt=function(t,e){var n=R(t);return n?pt(e,gt(t),n):ht(e,gt(t))},yt=function(t){return T(mt,t)},bt=function(t,e){return N(e,t).bind((function(t){return N(t,"meta")}))},wt=function(t,e,n){return function(r){var o,u=function(){return N(t,r)},a=function(){return N(e,r)},c=function(t){return N(t,"value").bind((function(t){return t.length>0?y.some(t):y.none()}))},s=function(){return u().bind((function(t){return i(t)?c(t).orThunk(a):a().orThunk((function(){return y.from(t)}))}))},l=function(){return a().orThunk((function(){return u().bind((function(t){return i(t)?c(t):y.from(t)}))}))};return o={},o[r]=(r===n?s():l()).getOr(""),o}},xt=function(t,e){var n={};return N(t,"dimensions").each((function(t){w(["width","height"],(function(r){N(e,r).orThunk((function(){return N(t,r)})).each((function(t){return n[r]=t}))}))})),n},kt=function(t,n){var r=n?bt(n,t).getOr({}):{},o=wt(t,r,n);return e(e(e(e(e({},o("source")),o("altsource")),o("poster")),o("embed")),xt(t,r))},St=function(t){var n=e(e({},t),{source:{value:N(t,"source").getOr("")},altsource:{value:N(t,"altsource").getOr("")},poster:{value:N(t,"poster").getOr("")}});return w(["width","height"],(function(e){N(t,e).each((function(t){var r=n.dimensions||{};r[e]=t,n.dimensions=r}))})),n},Ct=function(t){return function(e){var n=e&&e.msg?"Media embed handler error: "+e.msg:"Media embed handler threw unknown error.";t.notificationManager.open({type:"error",text:n})}},Ot=function(t,e){return H(A(t),e)},Nt=function(t){var n=t.selection.getNode(),r=lt(n)?t.serializer.serialize(n,{selection:!0}):"";return e({embed:r},H(A(t),r))},Tt=function(t,n){return function(r){if(o(r.url)&&r.url.trim().length>0){var i=r.html,u=Ot(n,i),a=e(e({},u),{source:r.url,embed:i});t.setData(St(a))}}},At=function(t,e){for(var n=t.dom.select("*[data-mce-object]"),r=0;r<e.length;r++)for(var o=n.length-1;o>=0;o--)e[r]===n[o]&&n.splice(o,1);t.selection.select(n[0])},Lt=function(t,e){var n=t.dom.select("*[data-mce-object]");t.insertContent(e),At(t,n),t.nodeChanged()},Dt=function(t,e,n){e.embed=Z(e.embed,e),e.embed&&(t.source===e.source||yt(e.source))?Lt(n,e.embed):vt(n,e).then((function(t){Lt(n,t.html)})).catch(Ct(n))},Pt=function(t){var n=Nt(t),r=k(n),o=St(n),i=function(e,n){var r=kt(n.getData(),"source");e.source!==r.source&&(Tt(v,t)({url:r.source,html:""}),vt(t,r).then(Tt(v,t)).catch(Ct(t)))},u=function(e){var n=kt(e.getData()),r=Ot(t,n.embed);e.setData(St(r))},a=function(n,r){var o=kt(n.getData(),r),i=st(t,o);n.setData(St(e(e({},o),{embed:i})))},c=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],s=j(t)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],l={title:"General",name:"general",items:x([c,s])},f={type:"textarea",name:"embed",label:"Paste your embed code below:"},d={title:"Embed",items:[f]},m=[];E(t)&&m.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),M(t)&&m.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var p={title:"Advanced",name:"advanced",items:m},h=[l,d];m.length>0&&h.push(p);var g={type:"tabpanel",tabs:h},v=t.windowManager.open({title:"Insert/Edit Media",size:"normal",body:g,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var n=kt(e.getData());Dt(r.get(),n,t),e.close()},onChange:function(t,e){switch(e.name){case"source":i(r.get(),t);break;case"embed":u(t);break;case"dimensions":case"altsource":case"poster":a(t,e.name);break}r.set(kt(t.getData()))},initialData:o})},_t=function(t){var e=function(){Pt(t)};return{showDialog:e}},Rt=function(t){var e=function(){Pt(t)};t.addCommand("mceMedia",e)},Et=tinymce.util.Tools.resolve("tinymce.html.Node"),Mt=tinymce.util.Tools.resolve("tinymce.Env"),jt=tinymce.util.Tools.resolve("tinymce.html.DomParser"),It=function(t,e){if(!1===_(t))return e;var n,r=q();return U({validate:!1,allow_conditional_comments:!1,comment:function(t){n||r.comment(t)},cdata:function(t){n||r.cdata(t)},text:function(t,e){n||r.text(t,e)},start:function(e,o,i){if(n=!0,"script"!==e&&"noscript"!==e&&"svg"!==e){for(var u=o.length-1;u>=0;u--){var a=o[u].name;0===a.indexOf("on")&&(delete o.map[a],o.splice(u,1)),"style"===a&&(o[u].value=t.dom.serializeStyle(t.dom.parseStyle(o[u].value),e))}r.start(e,o,i),n=!1}},end:function(t){n||r.end(t)}},W({})).parse(e),r.getContent()},Bt=function(t){var e=t.name;return"iframe"===e||"video"===e||"audio"===e},Ut=function(t,e,n,r){void 0===r&&(r=null);var o=t.attr(n);return c(o)?o:T(e,n)?null:r},$t=function(t,e,n){var r="img"===e.name||"video"===t.name,o=r?"300":null,i="audio"===t.name?"30":"150",u=r?i:null;e.attr({width:Ut(t,n,"width",o),height:Ut(t,n,"height",u)})},Ft=function(t,e,n,r){var o=jt({forced_root_block:!1,validate:!1},t.schema).parse(r,{context:e});while(o.firstChild)n.append(o.firstChild)},zt=function(t,e){var n=e.name,r=new Et("img",1);return r.shortEnded=!0,Ht(t,e,r),$t(e,r,{}),r.attr({style:e.attr("style"),src:Mt.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),r},Kt=function(t,e){var n=e.name,r=new Et("span",1);r.attr({contentEditable:"false",style:e.attr("style"),"data-mce-object":n,class:"mce-preview-object mce-object-"+n}),Ht(t,e,r);var o=t.dom.parseStyle(e.attr("style")),i=new Et(n,1);if($t(e,i,o),i.attr({src:e.attr("src"),style:e.attr("style"),class:e.attr("class")}),"iframe"===n)i.attr({allowfullscreen:e.attr("allowfullscreen"),frameborder:"0"});else{var u=["controls","crossorigin","currentTime","loop","muted","poster","preload"];w(u,(function(t){i.attr(t,e.attr(t))}));var a=r.attr("data-mce-html");c(a)&&Ft(t,n,i,unescape(a))}var s=new Et("span",1);return s.attr("class","mce-shim"),r.append(i),r.append(s),r},Ht=function(t,e,n){var r=e.attributes,o=r.length;while(o--){var i=r[o].name,u=r[o].value;"width"!==i&&"height"!==i&&"style"!==i&&("data"!==i&&"src"!==i||(u=t.convertURL(u,i)),n.attr("data-mce-p-"+i,u))}var a=e.firstChild&&e.firstChild.value;a&&(n.attr("data-mce-html",escape(It(t,a))),n.firstChild=null)},Vt=function(t){var e=t.attr("class");return e&&/\btiny-pageembed\b/.test(e)},Wt=function(t){while(t=t.parent)if(t.attr("data-ephox-embed-iri")||Vt(t))return!0;return!1},qt=function(t){return function(e){var n,r,o=e.length;while(o--)n=e[o],n.parent&&(n.parent.attr("data-mce-object")||("script"!==n.name||(r=$(A(t),n.attr("src")),r))&&(r&&(r.width&&n.attr("width",r.width.toString()),r.height&&n.attr("height",r.height.toString())),Bt(n)&&P(t)&&Mt.ceFalse?Wt(n)||n.replace(Kt(t,n)):Wt(n)||n.replace(zt(t,n))))}},Qt=function(t){t.on("preInit",(function(){var e=t.schema.getSpecialElements();I.each("video audio iframe object".split(" "),(function(t){e[t]=new RegExp("</"+t+"[^>]*>","gi")}));var n=t.schema.getBoolAttrs();I.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),(function(t){n[t]={}})),t.parser.addNodeFilter("iframe,video,audio,object,embed,script",qt(t)),t.serializer.addAttributeFilter("data-mce-object",(function(e,n){var r,o,i,u,a,c,s,l,f=e.length;while(f--)if(r=e[f],r.parent){s=r.attr(n),o=new Et(s,1),"audio"!==s&&"script"!==s&&(l=r.attr("class"),l&&-1!==l.indexOf("mce-preview-object")?o.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):o.attr({width:r.attr("width"),height:r.attr("height")})),o.attr({style:r.attr("style")}),u=r.attributes,i=u.length;while(i--){var d=u[i].name;0===d.indexOf("data-mce-p-")&&o.attr(d.substr(11),u[i].value)}"script"===s&&o.attr("type","text/javascript"),a=r.attr("data-mce-html"),a&&(c=new Et("#text",3),c.raw=!0,c.value=It(t,unescape(a)),o.append(c)),r.replace(o)}}))})),t.on("SetContent",(function(){t.$("span.mce-preview-object").each((function(e,n){var r=t.$(n);0===r.find("span.mce-shim").length&&r.append('<span class="mce-shim"></span>')}))}))},Xt=function(t){t.on("ResolveName",(function(t){var e;1===t.target.nodeType&&(e=t.target.getAttribute("data-mce-object"))&&(t.name=e)}))},Jt=function(t){var e=function(){return t.execCommand("mceMedia")};t.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:e,onSetup:function(e){var n=t.selection;return e.setActive(lt(n.getNode())),n.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",e.setActive).unbind}}),t.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:e})};function Gt(){t.add("media",(function(t){return Rt(t),Jt(t),Xt(t),Qt(t),ft(t),_t(t)}))}Gt()})()},"2cf9":function(t,e,n){n("209c")},"75b5":function(t,e,n){n("9623")},9156:function(t,e,n){n("2c24")},9623:function(t,e){(function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},n=function(t){return function(n){return e(n)===t}},r=function(t){return function(e){return typeof e===t}},o=n("string"),i=n("object"),u=n("array"),a=r("boolean"),c=r("function"),s=r("number"),l=function(){},f=function(t){return function(){return t}},d=function(t){return t},m=function(t,e){return t===e},p=function(t){return function(e){return!t(e)}},h=f(!1),g=f(!0),v=function(){return y},y=function(){var t=function(t){return t()},e=d,n={fold:function(t,e){return t()},isSome:h,isNone:g,getOr:e,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(void 0),or:e,orThunk:t,map:v,each:l,bind:v,exists:h,forall:g,filter:function(){return v()},toArray:function(){return[]},toString:f("none()")};return n}(),b=function(t){var e=f(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},isSome:g,isNone:h,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return b(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:y},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},w=function(t){return null===t||void 0===t?y:b(t)},x={some:b,none:v,from:w},k=Array.prototype.slice,S=Array.prototype.push,C=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r},O=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];e(o,n)}},N=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r)&&n.push(i)}return n},T=function(t,e){if(0===t.length)return[];for(var n=e(t[0]),r=[],o=[],i=0,u=t.length;i<u;i++){var a=t[i],c=e(a);c!==n&&(r.push(o),o=[]),n=c,o.push(a)}return 0!==o.length&&r.push(o),r},A=function(t,e,n){return O(t,(function(t,r){n=e(n,t,r)})),n},L=function(t,e,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(e(i,r))return x.some(i);if(n(i,r))break}return x.none()},D=function(t,e){return L(t,e,h)},P=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!u(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);S.apply(e,t[n])}return e},_=function(t,e){return P(C(t,e))},R=function(t){var e=k.call(t,0);return e.reverse(),e},E=function(t,e){return e>=0&&e<t.length?x.some(t[e]):x.none()},M=function(t){return E(t,0)},j=function(t){return E(t,t.length-1)},I=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return x.none()},B=function(){return B=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},B.apply(this,arguments)};function U(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}var $=function(t){var e,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,e=t.apply(null,r)),e}},F=function(t,e,n,r){var o=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!o,u=t.isiOS()||t.isAndroid(),a=u||r("(pointer:coarse)"),c=o||!i&&u&&r("(min-device-width:768px)"),s=i||u&&!c,l=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),d=!s&&!c&&!l;return{isiPad:f(o),isiPhone:f(i),isTablet:f(c),isPhone:f(s),isTouch:f(a),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:f(l),isDesktop:f(d)}},z=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}},K=function(t,e){var n=z(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return W(r(1),r(2))},H=function(t,e){var n=String(e).toLowerCase();return 0===t.length?V():K(t,n)},V=function(){return W(0,0)},W=function(t,e){return{major:t,minor:e}},q={nu:W,detect:H,unknown:V},Q=function(t,e){return I(e.brands,(function(e){var n=e.brand.toLowerCase();return D(t,(function(t){var e;return n===(null===(e=t.brand)||void 0===e?void 0:e.toLowerCase())})).map((function(t){return{current:t.name,version:q.nu(parseInt(e.version,10),0)}}))}))},X=function(t,e){var n=String(e).toLowerCase();return D(t,(function(t){return t.search(n)}))},J=function(t,e){return X(t,e).map((function(t){var n=q.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},G=function(t,e){return X(t,e).map((function(t){var n=q.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Y=function(t,e){return-1!==t.indexOf(e)},Z=function(t){return function(e){return e.replace(t,"")}},tt=Z(/^\s+|\s+$/g),et=function(t){return t.length>0},nt=function(t){return!et(t)},rt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ot=function(t){return function(e){return Y(e,t)}},it=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Y(t,"edge/")&&Y(t,"chrome")&&Y(t,"safari")&&Y(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rt],search:function(t){return Y(t,"chrome")&&!Y(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Y(t,"msie")||Y(t,"trident")}},{name:"Opera",versionRegexes:[rt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ot("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ot("firefox")},{name:"Safari",versionRegexes:[rt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Y(t,"safari")||Y(t,"mobile/"))&&Y(t,"applewebkit")}}],ut=[{name:"Windows",search:ot("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Y(t,"iphone")||Y(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ot("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ot("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ot("linux"),versionRegexes:[]},{name:"Solaris",search:ot("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ot("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ot("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],at={browsers:f(it),oses:f(ut)},ct="Edge",st="Chrome",lt="IE",ft="Opera",dt="Firefox",mt="Safari",pt=function(){return ht({current:void 0,version:q.unknown()})},ht=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:r(ct),isChrome:r(st),isIE:r(lt),isOpera:r(ft),isFirefox:r(dt),isSafari:r(mt)}},gt={unknown:pt,nu:ht,edge:f(ct),chrome:f(st),ie:f(lt),opera:f(ft),firefox:f(dt),safari:f(mt)},vt="Windows",yt="iOS",bt="Android",wt="Linux",xt="OSX",kt="Solaris",St="FreeBSD",Ct="ChromeOS",Ot=function(){return Nt({current:void 0,version:q.unknown()})},Nt=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:r(vt),isiOS:r(yt),isAndroid:r(bt),isOSX:r(xt),isLinux:r(wt),isSolaris:r(kt),isFreeBSD:r(St),isChromeOS:r(Ct)}},Tt={unknown:Ot,nu:Nt,windows:f(vt),ios:f(yt),android:f(bt),linux:f(wt),osx:f(xt),solaris:f(kt),freebsd:f(St),chromeos:f(Ct)},At=function(t,e,n){var r=at.browsers(),o=at.oses(),i=e.bind((function(t){return Q(r,t)})).orThunk((function(){return J(r,t)})).fold(gt.unknown,gt.nu),u=G(o,t).fold(Tt.unknown,Tt.nu),a=F(u,i,t,n);return{browser:i,os:u,deviceType:a}},Lt={detect:At},Dt=function(t){return window.matchMedia(t).matches},Pt=$((function(){return Lt.detect(navigator.userAgent,x.from(navigator.userAgentData),Dt)})),_t=function(){return Pt()},Rt=function(t,e,n){return 0!==(t.compareDocumentPosition(e)&n)},Et=function(t,e){return Rt(t,e,Node.DOCUMENT_POSITION_CONTAINED_BY)},Mt=1,jt=function(t,e){var n=e||document,r=n.createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Ut(r.childNodes[0])},It=function(t,e){var n=e||document,r=n.createElement(t);return Ut(r)},Bt=function(t,e){var n=e||document,r=n.createTextNode(t);return Ut(r)},Ut=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},$t=function(t,e,n){return x.from(t.dom.elementFromPoint(e,n)).map(Ut)},Ft={fromHtml:jt,fromTag:It,fromText:Bt,fromDom:Ut,fromPoint:$t},zt=function(t,e){var n=t.dom;if(n.nodeType!==Mt)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Kt=function(t,e){return t.dom===e.dom},Ht=function(t,e){var n=t.dom,r=e.dom;return n!==r&&n.contains(r)},Vt=function(t,e){return Et(t.dom,e.dom)},Wt=function(t,e){return _t().browser.isIE()?Vt(t,e):Ht(t,e)},qt=zt,Qt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Xt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Jt=tinymce.util.Tools.resolve("tinymce.util.VK"),Gt=Object.keys,Yt=function(t,e){for(var n=Gt(t),r=0,o=n.length;r<o;r++){var i=n[r],u=t[i];e(u,i)}},Zt=function(t){return function(e,n){t[n]=e}},te=function(t,e,n,r){var o={};return Yt(t,(function(t,o){(e(t,o)?n:r)(t,o)})),o},ee=function(t,e){var n={};return te(t,e,Zt(n),l),n};"undefined"!==typeof window?window:Function("return this;")();var ne=function(t){var e=t.dom.nodeName;return e.toLowerCase()},re=function(t){return t.dom.nodeType},oe=function(t){return function(e){return re(e)===t}},ie=oe(Mt),ue=function(t){return function(e){return ie(e)&&ne(e)===t}},ae=function(t,e,n){if(!(o(n)||a(n)||s(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},ce=function(t,e){var n=t.dom;Yt(e,(function(t,e){ae(n,e,t)}))},se=function(t){return A(t.dom.attributes,(function(t,e){return t[e.name]=e.value,t}),{})},le=function(t){return x.from(t.dom.parentNode).map(Ft.fromDom)},fe=function(t){return C(t.dom.childNodes,Ft.fromDom)},de=function(t,e){var n=t.dom.childNodes;return x.from(n[e]).map(Ft.fromDom)},me=function(t){return de(t,0)},pe=function(t){return de(t,t.dom.childNodes.length-1)},he=function(t,e){var n=le(t);n.each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},ge=function(t,e){t.dom.appendChild(e.dom)},ve=function(t,e){O(e,(function(e){he(t,e)}))},ye=function(t,e){O(e,(function(e){ge(t,e)}))},be=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},we=function(t,e){return Ft.fromDom(t.dom.cloneNode(e))},xe=function(t){return we(t,!0)},ke=function(t,e){var n=Ft.fromTag(e),r=se(t);return ce(n,r),n},Se=function(t,e){var n=ke(t,e);he(t,n);var r=fe(t);return ye(n,r),be(t),n},Ce=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Oe=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ne=function(t){return function(e){return e&&e.nodeName.toLowerCase()===t}},Te=function(t){return function(e){return e&&t.test(e.nodeName)}},Ae=function(t){return t&&3===t.nodeType},Le=Te(/^(OL|UL|DL)$/),De=Te(/^(OL|UL)$/),Pe=Ne("ol"),_e=Te(/^(LI|DT|DD)$/),Re=Te(/^(DT|DD)$/),Ee=Te(/^(TH|TD)$/),Me=Ne("br"),je=function(t){return t.parentNode.firstChild===t},Ie=function(t,e){return e&&!!t.schema.getTextBlockElements()[e.nodeName]},Be=function(t,e){return t&&t.nodeName in e},Ue=function(t,e){return!!Me(e)&&(t.isBlock(e.nextSibling)&&!Me(e.previousSibling))},$e=function(t,e,n){var r=t.isEmpty(e);return!(n&&t.select("span[data-mce-type=bookmark]",e).length>0)&&r},Fe=function(t,e){return t.isChildOf(e,t.getRoot())},ze=function(t){return t.getParam("lists_indent_on_tab",!0)},Ke=function(t){var e=t.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},He=function(t){return t.getParam("forced_root_block_attrs",{})},Ve=function(t,e){var n,r,o,i=t.dom,u=t.schema.getBlockElements(),a=i.createFragment(),c=Ke(t);if(c&&(r=i.create(c),r.tagName===c.toUpperCase()&&i.setAttribs(r,He(t)),Be(e.firstChild,u)||a.appendChild(r)),e)while(n=e.firstChild){var s=n.nodeName;o||"SPAN"===s&&"bookmark"===n.getAttribute("data-mce-type")||(o=!0),Be(n,u)?(a.appendChild(n),r=null):c?(r||(r=i.create(c),a.appendChild(r)),r.appendChild(n)):a.appendChild(n)}return c?o||r.appendChild(i.create("br",{"data-mce-bogus":"1"})):a.appendChild(i.create("br")),a},We=Ce.DOM,qe=function(t,e,n){var r=function(t){Oe.each(o,(function(e){t.parentNode.insertBefore(e,n.parentNode)})),We.remove(t)},o=We.select('span[data-mce-type="bookmark"]',e),i=Ve(t,n),u=We.createRng();u.setStartAfter(n),u.setEndAfter(e);for(var a=u.extractContents(),c=a.firstChild;c;c=c.firstChild)if("LI"===c.nodeName&&t.dom.isEmpty(c)){We.remove(c);break}t.dom.isEmpty(a)||We.insertAfter(a,e),We.insertAfter(i,e),$e(t.dom,n.parentNode)&&r(n.parentNode),We.remove(n),$e(t.dom,e)&&We.remove(e)},Qe=ue("dd"),Xe=ue("dt"),Je=function(t,e){Qe(e)?Se(e,"dt"):Xe(e)&&le(e).each((function(n){return qe(t,n.dom,e.dom)}))},Ge=function(t){Xe(t)&&Se(t,"dd")},Ye=function(t,e,n){O(n,"Indent"===e?Ge:function(e){return Je(t,e)})},Ze=function(t,e){if(Ae(t))return{container:t,offset:e};var n=Qt.getNode(t,e);return Ae(n)?{container:n,offset:e>=t.childNodes.length?n.data.length:0}:n.previousSibling&&Ae(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&Ae(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:t,offset:e}},tn=function(t){var e=t.cloneRange(),n=Ze(t.startContainer,t.startOffset);e.setStart(n.container,n.offset);var r=Ze(t.endContainer,t.endOffset);return e.setEnd(r.container,r.offset),e},en=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),nn=function(t,e){var n=e||t.selection.getStart(!0);return t.dom.getParent(n,"OL,UL,DL",ln(t,n))},rn=function(t,e){return t&&1===e.length&&e[0]===t},on=function(t){return N(t.querySelectorAll("ol,ul,dl"),Le)},un=function(t){var e=nn(t),n=t.selection.getSelectedBlocks();return rn(e,n)?on(e):N(n,(function(t){return Le(t)&&e!==t}))},an=function(t,e){var n=Oe.map(e,(function(e){var n=t.dom.getParent(e,"li,dd,dt",ln(t,e));return n||e}));return en.unique(n)},cn=function(t){var e=t.selection.getSelectedBlocks();return N(an(t,e),_e)},sn=function(t){return N(cn(t),Re)},ln=function(t,e){var n=t.dom.getParents(e,"TD,TH");return n.length>0?n[0]:t.getBody()},fn=function(t,e){var n=t.dom.getParents(e,"ol,ul",ln(t,e));return j(n)},dn=function(t){var e=fn(t,t.selection.getStart()),n=N(t.selection.getSelectedBlocks(),De);return e.toArray().concat(n)},mn=function(t){var e=dn(t);return pn(t,e)},pn=function(t,e){var n=C(e,(function(e){return fn(t,e).getOr(e)}));return en.unique(n)},hn=function(t,e,n){return void 0===n&&(n=m),t.exists((function(t){return n(t,e)}))},gn=function(t,e,n){return t.isSome()&&e.isSome()?x.some(n(t.getOrDie(),e.getOrDie())):x.none()},vn=function(t,e){var n=e||document,r=n.createDocumentFragment();return O(t,(function(t){r.appendChild(t.dom)})),Ft.fromDom(r)},yn=function(t,e,n){return t.fire("ListMutation",{action:e,element:n})},bn=function(t){return void 0!==t.style&&c(t.style.getPropertyValue)},wn=function(t,e,n){if(!o(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);bn(t)&&t.style.setProperty(e,n)},xn=function(t,e,n){var r=t.dom;wn(r,e,n)},kn=function(t,e){ge(t.item,e.list)},Sn=function(t){for(var e=1;e<t.length;e++)kn(t[e-1],t[e])},Cn=function(t,e){gn(j(t),M(e),kn)},On=function(t,e){var n={list:Ft.fromTag(e,t),item:Ft.fromTag("li",t)};return ge(n.list,n.item),n},Nn=function(t,e,n){for(var r=[],o=0;o<n;o++)r.push(On(t,e.listType));return r},Tn=function(t,e){for(var n=0;n<t.length-1;n++)xn(t[n].item,"list-style-type","none");j(t).each((function(t){ce(t.list,e.listAttributes),ce(t.item,e.itemAttributes),ye(t.item,e.content)}))},An=function(t,e){ne(t.list)!==e.listType&&(t.list=Se(t.list,e.listType)),ce(t.list,e.listAttributes)},Ln=function(t,e,n){var r=Ft.fromTag("li",t);return ce(r,e),ye(r,n),r},Dn=function(t,e){ge(t.list,e),t.item=e},Pn=function(t,e,n){var r=e.slice(0,n.depth);return j(r).each((function(e){var r=Ln(t,n.itemAttributes,n.content);Dn(e,r),An(e,n)})),r},_n=function(t,e,n){var r=Nn(t,n,n.depth-e.length);return Sn(r),Tn(r,n),Cn(e,r),e.concat(r)},Rn=function(t,e){var n=A(e,(function(e,n){return n.depth>e.length?_n(t,e,n):Pn(t,e,n)}),[]);return M(n).map((function(t){return t.list}))},En=function(t){return qt(t,"OL,UL")},Mn=function(t){return me(t).exists(En)},jn=function(t){return pe(t).exists(En)},In=function(t){return t.depth>0},Bn=function(t){return t.isSelected},Un=function(t){var e=fe(t),n=jn(t)?e.slice(0,-1):e;return C(n,xe)},$n=function(t,e,n){return le(t).filter(ie).map((function(r){return{depth:e,dirty:!1,isSelected:n,content:Un(t),itemAttributes:se(t),listAttributes:se(r),listType:ne(r)}}))},Fn=function(t,e){switch(t){case"Indent":e.depth++;break;case"Outdent":e.depth--;break;case"Flatten":e.depth=0}e.dirty=!0},zn=function(t,e){t.listType=e.listType,t.listAttributes=B({},e.listAttributes)},Kn=function(t){t.listAttributes=ee(t.listAttributes,(function(t,e){return"start"!==e}))},Hn=function(t,e){var n=t[e].depth,r=function(t){return t.depth===n&&!t.dirty},o=function(t){return t.depth<n};return L(R(t.slice(0,e)),r,o).orThunk((function(){return L(t.slice(e+1),r,o)}))},Vn=function(t){return O(t,(function(e,n){Hn(t,n).fold((function(){e.dirty&&Kn(e)}),(function(t){return zn(e,t)}))})),t},Wn=function(t){var e=t,n=function(){return e},r=function(t){e=t};return{get:n,set:r}},qn=function(t,e,n,r){return me(r).filter(En).fold((function(){e.each((function(t){Kt(t.start,r)&&n.set(!0)}));var o=$n(r,t,n.get());e.each((function(t){Kt(t.end,r)&&n.set(!1)}));var i=pe(r).filter(En).map((function(r){return Qn(t,e,n,r)})).getOr([]);return o.toArray().concat(i)}),(function(r){return Qn(t,e,n,r)}))},Qn=function(t,e,n,r){return _(fe(r),(function(r){var o=En(r)?Qn:qn,i=t+1;return o(i,e,n,r)}))},Xn=function(t,e){var n=Wn(!1),r=0;return C(t,(function(t){return{sourceList:t,entries:Qn(r,e,n,t)}}))},Jn=function(t,e){var n=Vn(e);return C(n,(function(e){var n=vn(e.content);return Ft.fromDom(Ve(t,n.dom))}))},Gn=function(t,e){var n=Vn(e);return Rn(t.contentDocument,n).toArray()},Yn=function(t,e){return _(T(e,In),(function(e){var n=M(e).exists(In);return n?Gn(t,e):Jn(t,e)}))},Zn=function(t,e){O(N(t,Bn),(function(t){return Fn(e,t)}))},tr=function(t){var e=C(cn(t),Ft.fromDom);return gn(D(e,p(Mn)),D(R(e),p(Mn)),(function(t,e){return{start:t,end:e}}))},er=function(t,e,n){var r=Xn(e,tr(t));O(r,(function(e){Zn(e.entries,n);var r=Yn(t,e.entries);O(r,(function(e){yn(t,"Indent"===n?"IndentList":"OutdentList",e.dom)})),ve(e.sourceList,r),be(e.sourceList)}))},nr=function(t,e){var n=C(mn(t),Ft.fromDom),r=C(sn(t),Ft.fromDom),o=!1;if(n.length||r.length){var i=t.selection.getBookmark();er(t,n,e),Ye(t,e,r),t.selection.moveToBookmark(i),t.selection.setRng(tn(t.selection.getRng())),t.nodeChanged(),o=!0}return o},rr=function(t){return nr(t,"Indent")},or=function(t){return nr(t,"Outdent")},ir=function(t){return nr(t,"Flatten")},ur=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),ar=Ce.DOM,cr=function(t){var e={},n=function(n){var r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(1===r.nodeType){var i=ar.create("span",{"data-mce-type":"bookmark"});r.hasChildNodes()?(o=Math.min(o,r.childNodes.length-1),n?r.insertBefore(i,r.childNodes[o]):ar.insertAfter(i,r.childNodes[o])):r.appendChild(i),r=i,o=0}e[n?"startContainer":"endContainer"]=r,e[n?"startOffset":"endOffset"]=o};return n(!0),t.collapsed||n(),e},sr=function(t){var e=function(e){var n,r=function(t){var e=t.parentNode.firstChild,n=0;while(e){if(e===t)return n;1===e.nodeType&&"bookmark"===e.getAttribute("data-mce-type")||n++,e=e.nextSibling}return-1},o=n=t[e?"startContainer":"endContainer"],i=t[e?"startOffset":"endOffset"];o&&(1===o.nodeType&&(i=r(o),o=o.parentNode,ar.remove(n),!o.hasChildNodes()&&ar.isBlock(o)&&o.appendChild(ar.create("br"))),t[e?"startContainer":"endContainer"]=o,t[e?"startOffset":"endOffset"]=i)};e(!0),e();var n=ar.createRng();return n.setStart(t.startContainer,t.startOffset),t.endContainer&&n.setEnd(t.endContainer,t.endOffset),tn(n)},lr=function(t){switch(t){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},fr=function(t){return/\btox\-/.test(t.className)},dr=function(t,e,n){var r=function(t){var r=L(t.parents,Le,Ee).filter((function(t){return t.nodeName===e&&!fr(t)})).isSome();n(r)},o=t.dom.getParents(t.selection.getNode());return r({parents:o}),t.on("NodeChange",r),function(){return t.off("NodeChange",r)}},mr=function(t,e,n){var r=n["list-style-type"]?n["list-style-type"]:null;t.setStyle(e,"list-style-type",r)},pr=function(t,e){Oe.each(e,(function(e,n){t.setAttribute(n,e)}))},hr=function(t,e,n){pr(e,n["list-attributes"]),Oe.each(t.select("li",e),(function(t){pr(t,n["list-item-attributes"])}))},gr=function(t,e,n){mr(t,e,n),hr(t,e,n)},vr=function(t,e,n){Oe.each(n,(function(n){var r;return t.setStyle(e,(r={},r[n]="",r))}))},yr=function(t,e,n,r){var o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"];1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&Me(o.nextSibling)&&(o=o.nextSibling);while(o.parentNode!==r){if(Ie(t,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},br=function(t,e,n){for(var r,o=[],i=t.dom,u=yr(t,e,!0,n),a=yr(t,e,!1,n),c=[],s=u;s;s=s.nextSibling)if(c.push(s),s===a)break;return Oe.each(c,(function(e){if(Ie(t,e))return o.push(e),void(r=null);if(i.isBlock(e)||Me(e))return Me(e)&&i.remove(e),void(r=null);var u=e.nextSibling;ur.isBookmarkNode(e)&&(Le(u)||Ie(t,u)||!u&&e.parentNode===n)?r=null:(r||(r=i.create("p"),e.parentNode.insertBefore(r,e),o.push(r)),r.appendChild(e))})),o},wr=function(t,e,n){var r=t.getStyle(e,"list-style-type"),o=n?n["list-style-type"]:"";return o=null===o?"":o,r===o},xr=function(t,e,n){var r=t.selection.getRng(),o="LI",i=ln(t,t.selection.getStart(!0)),u=t.dom;if("false"!==u.getContentEditable(t.selection.getNode())){e=e.toUpperCase(),"DL"===e&&(o="DT");var a=cr(r),c=br(t,r,i);Oe.each(c,(function(r){var i,a=r.previousSibling,c=r.parentNode;_e(c)||(a&&Le(a)&&a.nodeName===e&&wr(u,a,n)?(i=a,r=u.rename(r,o),a.appendChild(r)):(i=u.create(e),r.parentNode.insertBefore(i,r),i.appendChild(r),r=u.rename(r,o)),vr(u,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),gr(u,i,n),Nr(t.dom,i))})),t.selection.setRng(sr(a))}},kr=function(t,e){return t&&e&&Le(t)&&t.nodeName===e.nodeName},Sr=function(t,e,n){var r=t.getStyle(e,"list-style-type",!0),o=t.getStyle(n,"list-style-type",!0);return r===o},Cr=function(t,e){return t.className===e.className},Or=function(t,e,n){return kr(e,n)&&Sr(t,e,n)&&Cr(e,n)},Nr=function(t,e){var n,r;if(n=e.nextSibling,Or(t,e,n)){while(r=n.firstChild)e.appendChild(r);t.remove(n)}if(n=e.previousSibling,Or(t,e,n)){while(r=n.lastChild)e.insertBefore(r,e.firstChild);t.remove(n)}},Tr=function(t,e,n,r){if(e.nodeName!==n){var o=t.dom.rename(e,n);gr(t.dom,o,r),yn(t,lr(n),o)}else gr(t.dom,e,r),yn(t,lr(n),e)},Ar=function(t,e,n,r,o){var i=Le(e);if(i&&e.nodeName===r&&!Lr(o))ir(t);else{xr(t,r,o);var u=cr(t.selection.getRng()),a=i?U([e],n,!0):n;Oe.each(a,(function(e){Tr(t,e,r,o)})),t.selection.setRng(sr(u))}},Lr=function(t){return"list-style-type"in t},Dr=function(t,e,n,r){if(e!==t.getBody())if(e)if(e.nodeName!==n||Lr(r)||fr(e)){var o=cr(t.selection.getRng());gr(t.dom,e,r);var i=t.dom.rename(e,n);Nr(t.dom,i),t.selection.setRng(sr(o)),xr(t,n,r),yn(t,lr(n),i)}else ir(t);else xr(t,n,r),yn(t,lr(n),e)},Pr=function(t,e,n){var r=nn(t),o=un(t),u=i(n)?n:{};o.length>0?Ar(t,r,o,e,u):Dr(t,r,e,u)},_r=Ce.DOM,Rr=function(t,e){var n=e.parentNode;if("LI"===n.nodeName&&n.firstChild===e){var r=n.previousSibling;r&&"LI"===r.nodeName?(r.appendChild(e),$e(t,n)&&_r.remove(n)):_r.setStyle(n,"listStyleType","none")}if(Le(n)){r=n.previousSibling;r&&"LI"===r.nodeName&&r.appendChild(e)}},Er=function(t,e){var n=Oe.grep(t.select("ol,ul",e));Oe.each(n,(function(e){Rr(t,e)}))},Mr=function(t,e,n,r){var o=e.startContainer,i=e.startOffset;if(Ae(o)&&(n?i<o.data.length:i>0))return o;var u=t.schema.getNonEmptyElements();1===o.nodeType&&(o=Qt.getNode(o,i));var a=new Xt(o,r);n&&Ue(t.dom,o)&&a.next();while(o=a[n?"next":"prev2"]()){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(u[o.nodeName])return o;if(Ae(o)&&o.data.length>0)return o}},jr=function(t,e){var n=e.childNodes;return 1===n.length&&!Le(n[0])&&t.isBlock(n[0])},Ir=function(t,e){jr(t,e)&&t.remove(e.firstChild,!0)},Br=function(t,e,n){var r,o=jr(t,n)?n.firstChild:n;if(Ir(t,e),!$e(t,e,!0))while(r=e.firstChild)o.appendChild(r)},Ur=function(t,e,n){var r,o=e.parentNode;if(Fe(t,e)&&Fe(t,n)){Le(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&Me(o.previousSibling)&&t.remove(o.previousSibling);var i=n.lastChild;i&&Me(i)&&e.hasChildNodes()&&t.remove(i),$e(t,n,!0)&&t.$(n).empty(),Br(t,e,n),r&&n.appendChild(r);var u=Wt(Ft.fromDom(n),Ft.fromDom(e)),a=u?t.getParents(e,Le,n):[];t.remove(e),O(a,(function(e){$e(t,e)&&e!==t.getRoot()&&t.remove(e)}))}},$r=function(t,e,n){t.dom.$(n).empty(),Ur(t.dom,e,n),t.selection.setCursorLocation(n,0)},Fr=function(t,e,n,r){var o=t.dom;if(o.isEmpty(r))$r(t,n,r);else{var i=cr(e);Ur(o,n,r),t.selection.setRng(sr(i))}},zr=function(t,e,n,r){var o=cr(e);Ur(t.dom,n,r);var i=sr(o);t.selection.setRng(i)},Kr=function(t,e){var n=t.dom,r=t.selection,o=r.getStart(),i=ln(t,o),u=n.getParent(r.getStart(),"LI",i);if(u){var a=u.parentNode;if(a===t.getBody()&&$e(n,a))return!0;var c=tn(r.getRng()),s=n.getParent(Mr(t,c,e,i),"LI",i);if(s&&s!==u)return t.undoManager.transact((function(){e?Fr(t,c,s,u):je(u)?or(t):zr(t,c,u,s)})),!0;if(!s&&!e&&0===c.startOffset&&0===c.endOffset)return t.undoManager.transact((function(){ir(t)})),!0}return!1},Hr=function(t,e,n){var r=t.getParent(e.parentNode,t.isBlock,n);t.remove(e),r&&t.isEmpty(r)&&t.remove(r)},Vr=function(t,e){var n=t.dom,r=t.selection.getStart(),o=ln(t,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var u=tn(t.selection.getRng()),a=n.getParent(Mr(t,u,e,o),"LI",o);if(a)return t.undoManager.transact((function(){Hr(n,i,o),Nr(n,a.parentNode),t.selection.select(a,!0),t.selection.collapse(e)})),!0}return!1},Wr=function(t,e){return Kr(t,e)||Vr(t,e)},qr=function(t){var e=t.selection.getStart(),n=ln(t,e),r=t.dom.getParent(e,"LI,DT,DD",n);return!!(r||cn(t).length>0)&&(t.undoManager.transact((function(){t.execCommand("Delete"),Er(t.dom,t.getBody())})),!0)},Qr=function(t,e){return t.selection.isCollapsed()?Wr(t,e):qr(t)},Xr=function(t){t.on("keydown",(function(e){e.keyCode===Jt.BACKSPACE?Qr(t,!1)&&e.preventDefault():e.keyCode===Jt.DELETE&&Qr(t,!0)&&e.preventDefault()}))},Jr=function(t){return{backspaceDelete:function(e){Qr(t,e)}}},Gr=function(t,e){var n=nn(t);t.undoManager.transact((function(){i(e.styles)&&t.dom.setStyles(n,e.styles),i(e.attrs)&&Yt(e.attrs,(function(e,r){return t.dom.setAttrib(n,r,e)}))}))},Yr=function(t){var e=R(tt(t).split("")),n=C(e,(function(t,e){var n=t.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,e)*n}));return A(n,(function(t,e){return t+e}),0)},Zr=function(t){if(t--,t<0)return"";var e=t%26,n=Math.floor(t/26),r=Zr(n),o=String.fromCharCode("A".charCodeAt(0)+e);return r+o},to=function(t){return/^[A-Z]+$/.test(t)},eo=function(t){return/^[a-z]+$/.test(t)},no=function(t){return/^[0-9]+$/.test(t)},ro=function(t){return no(t)?2:to(t)?0:eo(t)?1:nt(t)?3:4},oo=function(t){switch(ro(t)){case 2:return x.some({listStyleType:x.none(),start:t});case 0:return x.some({listStyleType:x.some("upper-alpha"),start:Yr(t).toString()});case 1:return x.some({listStyleType:x.some("lower-alpha"),start:Yr(t).toString()});case 3:return x.some({listStyleType:x.none(),start:""});case 4:return x.none()}},io=function(t){var e=parseInt(t.start,10);return hn(t.listStyleType,"upper-alpha")?Zr(e):hn(t.listStyleType,"lower-alpha")?Zr(e).toLowerCase():t.start},uo=function(t){var e=nn(t);Pe(e)&&t.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:io({start:t.dom.getAttrib(e,"start","1"),listStyleType:x.some(t.dom.getStyle(e,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var n=e.getData();oo(n.start).each((function(e){t.execCommand("mceListUpdate",!1,{attrs:{start:"1"===e.start?"":e.start},styles:{"list-style-type":e.listStyleType.getOr("")}})})),e.close()}})},ao=function(t,e){return function(){var n=nn(t);return n&&n.nodeName===e}},co=function(t){t.addCommand("mceListProps",(function(){uo(t)}))},so=function(t){t.on("BeforeExecCommand",(function(e){var n=e.command.toLowerCase();"indent"===n?rr(t):"outdent"===n&&or(t)})),t.addCommand("InsertUnorderedList",(function(e,n){Pr(t,"UL",n)})),t.addCommand("InsertOrderedList",(function(e,n){Pr(t,"OL",n)})),t.addCommand("InsertDefinitionList",(function(e,n){Pr(t,"DL",n)})),t.addCommand("RemoveList",(function(){ir(t)})),co(t),t.addCommand("mceListUpdate",(function(e,n){i(n)&&Gr(t,n)})),t.addQueryStateHandler("InsertUnorderedList",ao(t,"UL")),t.addQueryStateHandler("InsertOrderedList",ao(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",ao(t,"DL"))},lo=function(t){t.on("keydown",(function(e){e.keyCode!==Jt.TAB||Jt.metaKeyPressed(e)||t.undoManager.transact((function(){(e.shiftKey?or(t):rr(t))&&e.preventDefault()}))}))},fo=function(t){ze(t)&&lo(t),Xr(t)},mo=function(t){var e=function(e){return function(){return t.execCommand(e)}};t.hasPlugin("advlist")||(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:e("InsertOrderedList"),onSetup:function(e){return dr(t,"OL",e.setActive)}}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:e("InsertUnorderedList"),onSetup:function(e){return dr(t,"UL",e.setActive)}}))},po=function(t){var e={text:"List properties...",icon:"ordered-list",onAction:function(){return t.execCommand("mceListProps")},onSetup:function(e){return dr(t,"OL",(function(t){return e.setDisabled(!t)}))}};t.ui.registry.addMenuItem("listprops",e),t.ui.registry.addContextMenu("lists",{update:function(e){var n=nn(t,e);return Pe(n)?["listprops"]:[]}})};function ho(){t.add("lists",(function(t){return!1===t.hasPlugin("rtc",!0)?(fo(t),so(t)):co(t),mo(t),po(t),Jr(t)}))}ho()})()}}]);