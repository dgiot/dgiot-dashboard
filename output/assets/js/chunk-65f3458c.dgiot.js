/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2021-12-30 02:01:00
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65f3458c"],{"18f5":function(n,e){(function(){"use strict";var n=function(n){var e=n,t=function(){return e},r=function(n){e=n};return{get:t,set:r}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n){return!!n.hasPlugin("powerpaste",!0)&&("undefined"!==typeof window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0)},r=function(n){return{clipboard:n}},o=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},u=function(n){return function(e){return o(e)===n}},i=function(n){return function(e){return typeof e===n}},c=u("array"),a=function(n){return null===n||void 0===n},l=function(n){return!a(n)},f=i("function"),s=function(){},d=function(n){return function(){return n}},m=function(n){return n},g=d(!1),p=d(!0),v=function(){return h},h=function(){var n=function(n){return n()},e=m,t={fold:function(n,e){return n()},isSome:g,isNone:p,getOr:e,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:d(null),getOrUndefined:d(void 0),or:e,orThunk:n,map:v,each:s,bind:v,exists:g,forall:p,filter:function(){return v()},toArray:function(){return[]},toString:d("none()")};return t}(),b=function(n){var e=d(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:p,isNone:g,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return b(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:h},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},y=function(n){return null===n||void 0===n?h:b(n)},w={some:b,none:v,from:y},C=Array.prototype.slice,x=Array.prototype.push,T=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];if(e(o,t))return!0}return!1},S=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},R=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];e(o,t)}},D=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},A=function(n,e,t){return R(n,(function(n,r){t=e(t,n,r)})),t},k=function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!c(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);x.apply(e,n[t])}return e},O=function(n,e){return k(S(n,e))},P=f(Array.from)?Array.from:function(n){return C.call(n)},E=function(){return E=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t],e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},E.apply(this,arguments)},M=function(e){var t=n(w.none()),r=function(){return t.get().each(e)},o=function(){r(),t.set(w.none())},u=function(){return t.get().isSome()},i=function(){return t.get()},c=function(n){r(),t.set(w.some(n))};return{clear:o,isSet:u,get:i,set:c}},N=function(){var n=M(s),e=function(e){return n.get().each(e)};return E(E({},n),{on:e})},I=function(n,e,t){return""===e||n.length>=e.length&&n.substr(t,t+e.length)===e},B=function(n,e){return I(n,e,0)},_=function(n,e){return I(n,e,n.length-e.length)},L=function(n,e){return e<=0?"":new Array(e+1).join(n)},F=tinymce.util.Tools.resolve("tinymce.Env"),j=tinymce.util.Tools.resolve("tinymce.util.Delay"),W=tinymce.util.Tools.resolve("tinymce.util.Promise"),z=tinymce.util.Tools.resolve("tinymce.util.VK"),H=function(n,e,t,r){return n.fire("PastePreProcess",{content:e,internal:t,wordContent:r})},U=function(n,e,t,r){return n.fire("PastePostProcess",{node:e,internal:t,wordContent:r})},V=function(n,e){return n.fire("PastePlainTextToggle",{state:e})},K=function(n,e){return n.fire("paste",{ieFake:e})},$=tinymce.util.Tools.resolve("tinymce.util.Tools"),q=function(n){return n.getParam("paste_block_drop",!1)},X=function(n){return n.getParam("paste_data_images",!1)},Y=function(n){return n.getParam("paste_filter_drop",!0)},G=function(n){return n.getParam("paste_preprocess")},J=function(n){return n.getParam("paste_postprocess")},Q=function(n){return n.getParam("paste_webkit_styles")},Z=function(n){return n.getParam("paste_remove_styles_if_webkit",!0)},nn=function(n){return n.getParam("paste_merge_formats",!0)},en=function(n){return n.getParam("smart_paste",!0)},tn=function(n){return n.getParam("paste_as_text",!1)},rn=function(n){return n.getParam("paste_retain_style_properties")},on=function(n){var e="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return n.getParam("paste_word_valid_elements",e)},un=function(n){return n.getParam("paste_convert_word_fake_lists",!0)},cn=function(n){return n.getParam("paste_enable_default_filters",!0)},an=function(n){return n.getParam("validate")},ln=function(n){return n.getParam("allow_html_data_urls",!1,"boolean")},fn=function(n){return n.getParam("paste_data_images",!1,"boolean")},sn=function(n){return n.getParam("images_dataimg_filter")},dn=function(n){return n.getParam("images_reuse_filename")},mn=function(n){return n.getParam("forced_root_block")},gn=function(n){return n.getParam("forced_root_block_attrs")},pn=function(n){return n.getParam("paste_tab_spaces",4,"number")},vn=function(n){var e="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp";return $.explode(n.getParam("images_file_types",e,"string"))},hn="x-tinymce/html",bn="\x3c!-- "+hn+" --\x3e",yn=function(n){return bn+n},wn=function(n){return n.replace(bn,"")},Cn=function(n){return-1!==n.indexOf(bn)},xn=d(hn),Tn=Object.hasOwnProperty,Sn=function(n,e){return Tn.call(n,e)},Rn=tinymce.util.Tools.resolve("tinymce.html.Entities"),Dn=function(n){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(n)},An=function(n){return n.replace(/\r?\n/g,"<br>")},kn=function(n,e){var t=[],r="<"+n;if("object"===typeof e){for(var o in e)Sn(e,o)&&t.push(o+'="'+Rn.encodeAllRaw(e[o])+'"');t.length&&(r+=" "+t.join(" "))}return r+">"},On=function(n,e,t){var r=n.split(/\n\n/),o=kn(e,t),u="</"+e+">",i=$.map(r,(function(n){return n.split(/\n/).join("<br />")})),c=function(n){return o+n+u};return 1===i.length?i[0]:$.map(i,c).join("")},Pn=function(n,e,t){return e?On(n,!0===e?"p":e,t):An(n)},En=tinymce.util.Tools.resolve("tinymce.html.DomParser"),Mn=tinymce.util.Tools.resolve("tinymce.html.Serializer"),Nn=" ",In=tinymce.util.Tools.resolve("tinymce.html.Node"),Bn=tinymce.util.Tools.resolve("tinymce.html.Schema"),_n=function(n){return n.constructor===RegExp},Ln=function(n,e){return $.each(e,(function(e){n=_n(e)?n.replace(e,""):n.replace(e[0],e[1])})),n},Fn=function(n){var e=Bn(),t=En({},e),r="",o=e.getShortEndedElements(),u=$.makeMap("script noscript style textarea video audio iframe object"," "),i=e.getBlockElements(),c=function(n){var e=n.name,t=n;if("br"!==e){if("wbr"!==e)if(o[e]&&(r+=" "),u[e])r+=" ";else{if(3===n.type&&(r+=n.value),!n.shortEnded&&(n=n.firstChild))do{c(n)}while(n=n.next);i[e]&&t.next&&(r+="\n","p"===e&&(r+="\n"))}}else r+="\n"};return n=Ln(n,[/<!\[[^\]]+\]>/g]),c(t.parse(n)),r},jn=function(n){var e=function(n,e,t){return e||t?Nn:" "};return n=Ln(n,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,e],/<br class="Apple-interchange-newline">/g,/<br>$/i]),n},Wn=function(n){var e=0;return function(){return n+e++}},zn=function(n){var e=n.toLowerCase(),t={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return $.hasOwn(t,e)?"image/"+t[e]:"image/"+e},Hn=function(n){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(n)||/class="OutlineElement/.test(n)||/id="?docs\-internal\-guid\-/.test(n)},Un=function(n){var e=!1,t=[/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];return n=n.replace(/^[\u00a0 ]+/,""),$.each(t,(function(t){if(t.test(n))return e=!0,!1})),e},Vn=function(n){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(n)},Kn=function(n){var e,t,r=1,o=function(n){var e="";if(3===n.type)return n.value;if(n=n.firstChild)do{e+=o(n)}while(n=n.next);return e},u=function(n,e){if(3===n.type&&e.test(n.value))return n.value=n.value.replace(e,""),!1;if(n=n.firstChild)do{if(!u(n,e))return!1}while(n=n.next);return!0},i=function(n){if(n._listIgnore)n.remove();else if(n=n.firstChild)do{i(n)}while(n=n.next)},c=function(n,o,c){var a=n._listLevel||r;a!==r&&(a<r?e&&(e=e.parent.parent):(t=e,e=null)),e&&e.name===o?e.append(n):(t=t||e,e=new In(o,1),c>1&&e.attr("start",""+c),n.wrap(e)),n.name="li",a>r&&t&&t.lastChild.append(e),r=a,i(n),u(n,/^\u00a0+/),u(n,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),u(n,/^\u00a0+/)},a=[],l=n.firstChild;while("undefined"!==typeof l&&null!==l)if(a.push(l),l=l.walk(),null!==l)while("undefined"!==typeof l&&l.parent!==n)l=l.walk();for(var f=0;f<a.length;f++)if(n=a[f],"p"===n.name&&n.firstChild){var s=o(n);if(Vn(s)){c(n,"ul");continue}if(Un(s)){var d=/([0-9]+)\./.exec(s),m=1;d&&(m=parseInt(d[1],10)),c(n,"ol",m);continue}if(n._listLevel){c(n,"ul",1);continue}e=null}else t=e,e=null},$n=function(n,e,t,r){var o={},u=n.dom.parseStyle(r);$.each(u,(function(u,i){switch(i){case"mso-list":var c=/\w+ \w+([0-9]+)/i.exec(r);c&&(t._listLevel=parseInt(c[1],10)),/Ignore/i.test(u)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":i="text-align";break;case"vert-align":i="vertical-align";break;case"font-color":case"mso-foreground":i="color";break;case"mso-background":case"mso-highlight":i="background";break;case"font-weight":case"font-style":return void("normal"!==u&&(o[i]=u));case"mso-element":if(/^(comment|comment-list)$/i.test(u))return void t.remove();break}0!==i.indexOf("mso-comment")?0!==i.indexOf("mso-")&&("all"===rn(n)||e&&e[i])&&(o[i]=u):t.remove()})),/(bold)/i.test(o["font-weight"])&&(delete o["font-weight"],t.wrap(new In("b",1))),/(italic)/i.test(o["font-style"])&&(delete o["font-style"],t.wrap(new In("i",1)));var i=n.dom.serializeStyle(o,t.name);return i||null},qn=function(n,e){var t,r=rn(n);r&&(t=$.makeMap(r.split(/[, ]/))),e=Ln(e,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,Nn],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(n,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join(Nn):""}]]);var o=on(n),u=Bn({valid_elements:o,valid_children:"-li[p]"});$.each(u.elements,(function(n){n.attributes.class||(n.attributes.class={},n.attributesOrder.push("class")),n.attributes.style||(n.attributes.style={},n.attributesOrder.push("style"))}));var i=En({},u);i.addAttributeFilter("style",(function(e){var r,o=e.length;while(o--)r=e[o],r.attr("style",$n(n,t,r,r.attr("style"))),"span"===r.name&&r.parent&&!r.attributes.length&&r.unwrap()})),i.addAttributeFilter("class",(function(n){var e,t,r=n.length;while(r--)e=n[r],t=e.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(t)&&e.remove(),e.attr("class",null)})),i.addNodeFilter("del",(function(n){var e=n.length;while(e--)n[e].remove()})),i.addNodeFilter("a",(function(n){var e,t,r,o=n.length;while(o--)if(e=n[o],t=e.attr("href"),r=e.attr("name"),t&&-1!==t.indexOf("#_msocom_"))e.remove();else if(t&&0===t.indexOf("file://")&&(t=t.split("#")[1],t&&(t="#"+t)),t||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){e.unwrap();continue}e.attr({href:t,name:r})}else e.unwrap()}));var c=i.parse(e);return un(n)&&Kn(c),e=Mn({validate:an(n)},u).serialize(c),e},Xn=function(n,e){return cn(n)?qn(n,e):e},Yn=function(n,e){var t=En({},n.schema);t.addNodeFilter("meta",(function(n){$.each(n,(function(n){n.remove()}))}));var r=t.parse(e,{forced_root_block:!1,isRootContent:!0});return Mn({validate:an(n)},n.schema).serialize(r)},Gn=function(n,e){return{content:n,cancelled:e}},Jn=function(n,e,t,r){var o=n.dom.create("div",{style:"display:none"},e),u=U(n,o,t,r);return Gn(u.node.innerHTML,u.isDefaultPrevented())},Qn=function(n,e,t,r){var o=H(n,e,t,r),u=Yn(n,o.content);return n.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?Jn(n,u,t,r):Gn(u,o.isDefaultPrevented())},Zn=function(n,e,t){var r=Hn(e),o=r?Xn(n,e):e;return Qn(n,o,t,r)},ne=function(n,e){return n.insertContent(e,{merge:nn(n),paste:!0}),!0},ee=function(n){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(n)},te=function(n,e){return ee(e)&&T(vn(n),(function(n){return _(e.toLowerCase(),"."+n.toLowerCase())}))},re=function(n,e,t){return n.undoManager.extra((function(){t(n,e)}),(function(){n.insertContent('<img src="'+e+'">')})),!0},oe=function(n,e,t){return n.undoManager.extra((function(){t(n,e)}),(function(){n.execCommand("mceInsertLink",!1,e)})),!0},ue=function(n,e,t){return!(!1!==n.selection.isCollapsed()||!ee(e))&&oe(n,e,t)},ie=function(n,e,t){return!!te(n,e)&&re(n,e,t)},ce=function(n,e){$.each([ue,ie,ne],(function(t){return!0!==t(n,e,ne)}))},ae=function(n,e,t){t||!1===en(n)?ne(n,e):ce(n,e)},le=function(n){return-1!==" \f\t\v".indexOf(n)},fe=function(n){return"\n"===n||"\r"===n},se=function(n,e){return e<n.length&&e>=0&&fe(n[e])},de=function(n,e){var t=L(" ",pn(n)),r=e.replace(/\t/g,t),o=A(r,(function(n,e){return le(e)||e===Nn?n.pcIsSpace||""===n.str||n.str.length===r.length-1||se(r,n.str.length+1)?{pcIsSpace:!1,str:n.str+Nn}:{pcIsSpace:!0,str:n.str+" "}:{pcIsSpace:fe(e),str:n.str+e}}),{pcIsSpace:!1,str:""});return o.str},me=function(n,e,t,r){var o=Zn(n,e,t);!1===o.cancelled&&ae(n,o.content,r)},ge=function(n,e,t){var r=t||Cn(e);me(n,wn(e),r,!1)},pe=function(n,e){var t=n.dom.encode(e).replace(/\r\n/g,"\n"),r=de(n,t),o=Pn(r,mn(n),gn(n));me(n,o,!1,!0)},ve=function(n){var e={},t="data:text/mce-internal,";if(n){if(n.getData){var r=n.getData("Text");r&&r.length>0&&-1===r.indexOf(t)&&(e["text/plain"]=r)}if(n.types)for(var o=0;o<n.types.length;o++){var u=n.types[o];try{e[u]=n.getData(u)}catch(i){e[u]=""}}}return e},he=function(n,e){return ve(e.clipboardData||n.getDoc().dataTransfer)},be=function(n,e){return e in n&&n[e].length>0},ye=function(n){return be(n,"text/html")||be(n,"text/plain")},we=function(n){var e=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(n);return e?{type:e[1],data:decodeURIComponent(e[2])}:{type:null,data:null}},Ce=function(n,e){var t=sn(n);return!t||t(e)},xe=function(n,e){var t=e.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return l(t)?n.dom.encode(t[1]):null},Te=Wn("mceclip"),Se=function(n,e){var t=we(e.uri),r=t.data,o=t.type,u=Te(),i=e.blob,c=new Image;if(c.src=e.uri,Ce(n,c)){var a=n.editorUpload.blobCache,f=void 0,s=a.getByData(r,o);if(s)f=s;else{var d=dn(n)&&l(i.name),m=d?xe(n,i.name):u,g=d?i.name:void 0;f=a.create(u,i,r,m,g),a.add(f)}ge(n,'<img src="'+f.blobUri()+'">',!1)}else ge(n,'<img src="'+e.uri+'">',!1)},Re=function(n){return"paste"===n.type},De=function(n){return l(n.getAsFile)},Ae=function(n){return W.all(S(n,(function(n){return new W((function(e){var t=De(n)?n.getAsFile():n,r=new window.FileReader;r.onload=function(){e({blob:t,uri:r.result})},r.readAsDataURL(t)}))})))},ke=function(n){var e=vn(n);return function(n){return B(n.type,"image/")&&T(e,(function(e){return zn(e)===n.type}))}},Oe=function(n,e){var t=e.items?O(P(e.items),(function(n){return"file"===n.kind?[n.getAsFile()]:[]})):[],r=e.files?P(e.files):[];return D(t.length>0?t:r,ke(n))},Pe=function(n,e,t){var r=Re(e)?e.clipboardData:e.dataTransfer;if(fn(n)&&r){var o=Oe(n,r);if(o.length>0)return e.preventDefault(),Ae(o).then((function(e){t&&n.selection.setRng(t),R(e,(function(e){Se(n,e)}))})),!0}return!1},Ee=function(n){var e=n.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&e&&e.items&&0===e.items.length},Me=function(n){return z.metaKeyPressed(n)&&86===n.keyCode||n.shiftKey&&45===n.keyCode},Ne=function(n,e,t){var r,o=N(),u=N();n.on("keyup",u.clear),n.on("keydown",(function(t){var i=function(n){Me(n)&&!n.isDefaultPrevented()&&e.remove()};if(Me(t)&&!t.isDefaultPrevented()){if(r=t.shiftKey&&86===t.keyCode,r&&F.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),o.set(t),u.set(!0),F.ie&&r)return t.preventDefault(),void K(n,!0);e.remove(),e.create(),n.once("keyup",i),n.once("paste",(function(){n.off("keyup",i)}))}}));var i=function(n,t,r,o,u){var i;be(t,"text/html")?i=t["text/html"]:(i=e.getHtml(),u=u||Cn(i),e.isDefaultContent(i)&&(o=!0)),i=jn(i),e.remove();var c=!1===u&&Dn(i),a=ee(i);(!i.length||c&&!a)&&(o=!0),(o||a)&&(i=be(t,"text/plain")&&c?t["text/plain"]:Fn(i)),e.isDefaultContent(i)?r||n.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):o?pe(n,i):ge(n,i,u)},c=function(){return e.getLastRng()||n.selection.getRng()};n.on("paste",(function(a){var l=o.isSet()||u.isSet();l&&o.clear();var f=he(n,a),s="text"===t.get()||r,d=be(f,xn());r=!1,a.isDefaultPrevented()||Ee(a)?e.remove():ye(f)||!Pe(n,a,c())?(l||a.preventDefault(),!F.ie||l&&!a.ieFake||be(f,"text/html")||(e.create(),n.dom.bind(e.getEl(),"paste",(function(n){n.stopPropagation()})),n.getDoc().execCommand("Paste",!1,null),f["text/html"]=e.getHtml()),be(f,"text/html")?(a.preventDefault(),d||(d=Cn(f["text/html"])),i(n,f,l,s,d)):j.setEditorTimeout(n,(function(){i(n,f,l,s,d)}),0)):e.remove()}))},Ie=function(n,e,t){var r;Ne(n,e,t),n.parser.addNodeFilter("img",(function(e,t,o){var u=function(n){return n.data&&!0===n.data.paste},i=function(n){n.attr("data-mce-object")||r===F.transparentSrc||n.remove()},c=function(n){return 0===n.indexOf("webkit-fake-url")},a=function(n){return 0===n.indexOf("data:")};if(!fn(n)&&u(o)){var l=e.length;while(l--)r=e[l].attr("src"),r&&(c(r)||!ln(n)&&a(r))&&i(e[l])}}))},Be=function(n){return F.ie&&n.inline?document.body:n.getBody()},_e=function(n){return Be(n)!==n.getBody()},Le=function(n,e,t){_e(n)&&n.dom.bind(e,"paste keyup",(function(e){Ve(n,t)||n.fire("paste")}))},Fe=function(n,e,t){var r=n.dom,o=n.getBody();e.set(n.selection.getRng());var u=n.dom.add(Be(n),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},t);(F.ie||F.gecko)&&r.setStyle(u,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(u,"beforedeactivate focusin focusout",(function(n){n.stopPropagation()})),Le(n,u,t),u.focus(),n.selection.select(u,!0)},je=function(n,e){if(We(n)){var t=void 0,r=e.get();while(t=n.dom.get("mcepastebin"))n.dom.remove(t),n.dom.unbind(t);r&&n.selection.setRng(r)}e.set(null)},We=function(n){return n.dom.get("mcepastebin")},ze=function(n){var e=function(e,t){e.appendChild(t),n.dom.remove(t,!0)},t=$.grep(Be(n).childNodes,(function(n){return"mcepastebin"===n.id})),r=t.shift();$.each(t,(function(n){e(r,n)}));for(var o=n.dom.select("div[id=mcepastebin]",r),u=o.length-1;u>=0;u--){var i=n.dom.create("div");r.insertBefore(i,o[u]),e(i,o[u])}return r?r.innerHTML:""},He=function(n,e){return e===n},Ue=function(n){return n&&"mcepastebin"===n.id},Ve=function(n,e){var t=We(n);return Ue(t)&&He(e,t.innerHTML)},Ke=function(e){var t=n(null),r="%MCEPASTEBIN%";return{create:function(){return Fe(e,t,r)},remove:function(){return je(e,t)},getEl:function(){return We(e)},getHtml:function(){return ze(e)},getLastRng:t.get,isDefault:function(){return Ve(e,r)},isDefaultContent:function(n){return He(r,n)}}},$e=function(n,e){var t=Ke(n);return n.on("PreInit",(function(){return Ie(n,t,e)})),{pasteFormat:e,pasteHtml:function(e,t){return ge(n,e,t)},pasteText:function(e){return pe(n,e)},pasteImageData:function(e,t){return Pe(n,e,t)},getDataTransferItems:ve,hasHtmlOrText:ye,hasContentType:be}},qe=function(n,e){"text"===e.pasteFormat.get()?(e.pasteFormat.set("html"),V(n,!1)):(e.pasteFormat.set("text"),V(n,!0)),n.focus()},Xe=function(n,e){n.addCommand("mceTogglePlainTextPaste",(function(){qe(n,e)})),n.addCommand("mceInsertClipboardContent",(function(n,t){t.content&&e.pasteHtml(t.content,t.internal),t.text&&e.pasteText(t.text)}))},Ye=function(n){return!1===F.iOS&&"function"===typeof(null===n||void 0===n?void 0:n.setData)},Ge=function(n,e,t){if(!Ye(n))return!1;try{return n.clearData(),n.setData("text/html",e),n.setData("text/plain",t),n.setData(xn(),e),!0}catch(r){return!1}},Je=function(n,e,t,r){Ge(n.clipboardData,e.html,e.text)?(n.preventDefault(),r()):t(e.html,r)},Qe=function(n){return function(e,t){var r=yn(e),o=n.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),u=n.dom.create("div",{contenteditable:"true"},r);n.dom.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(u),n.dom.add(n.getBody(),o);var i=n.selection.getRng();u.focus();var c=n.dom.createRng();c.selectNodeContents(u),n.selection.setRng(c),j.setTimeout((function(){n.selection.setRng(i),o.parentNode.removeChild(o),t()}),0)}},Ze=function(n){return{html:n.selection.getContent({contextual:!0}),text:n.selection.getContent({format:"text"})}},nt=function(n){return!!n.dom.getParent(n.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",n.getBody())},et=function(n){return!n.selection.isCollapsed()||nt(n)},tt=function(n){return function(e){et(n)&&Je(e,Ze(n),Qe(n),(function(){if(F.browser.isChrome()||F.browser.isFirefox()){var e=n.selection.getRng();j.setEditorTimeout(n,(function(){n.selection.setRng(e),n.execCommand("Delete")}),0)}else n.execCommand("Delete")}))}},rt=function(n){return function(e){et(n)&&Je(e,Ze(n),Qe(n),s)}},ot=function(n){n.on("cut",tt(n)),n.on("copy",rt(n))},ut=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),it=function(n,e){return ut.getCaretRangeFromPoint(e.clientX,e.clientY,n.getDoc())},ct=function(n){var e=n["text/plain"];return!!e&&0===e.indexOf("file://")},at=function(n,e){n.focus(),n.selection.setRng(e)},lt=function(n,e,t){q(n)&&n.on("dragend dragover draggesture dragdrop drop drag",(function(n){n.preventDefault(),n.stopPropagation()})),X(n)||n.on("drop",(function(n){var e=n.dataTransfer;e&&e.files&&e.files.length>0&&n.preventDefault()})),n.on("drop",(function(r){var o=it(n,r);if(!r.isDefaultPrevented()&&!t.get()){var u=e.getDataTransferItems(r.dataTransfer),i=e.hasContentType(u,xn());if((e.hasHtmlOrText(u)&&!ct(u)||!e.pasteImageData(r,o))&&o&&Y(n)){var c=u["mce-internal"]||u["text/html"]||u["text/plain"];c&&(r.preventDefault(),j.setEditorTimeout(n,(function(){n.undoManager.transact((function(){u["mce-internal"]&&n.execCommand("Delete"),at(n,o),c=jn(c),u["text/html"]?e.pasteHtml(c,i):e.pasteText(c)}))})))}}})),n.on("dragstart",(function(n){t.set(!0)})),n.on("dragover dragend",(function(e){X(n)&&!1===t.get()&&(e.preventDefault(),at(n,it(n,e))),"dragend"===e.type&&t.set(!1)}))},ft=function(n){var e=n.plugins.paste,t=G(n);t&&n.on("PastePreProcess",(function(n){t.call(e,e,n)}));var r=J(n);r&&n.on("PastePostProcess",(function(n){r.call(e,e,n)}))},st=function(n,e){n.on("PastePreProcess",(function(t){t.content=e(n,t.content,t.internal,t.wordContent)}))},dt=function(n,e){n.on("PastePostProcess",(function(t){e(n,t.node)}))},mt=function(n,e){if(!Hn(e))return e;var t=[];$.each(n.schema.getBlockElements(),(function(n,e){t.push(e)}));var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+t.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=Ln(e,[[r,"$1"]]),e=Ln(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]),e},gt=function(n,e,t,r){if(r||t)return e;var o,u=Q(n);if(!1===Z(n)||"all"===u)return e;if(u&&(o=u.split(/[, ]/)),o){var i=n.dom,c=n.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(n,e,t,r){var u=i.parseStyle(i.decode(t)),a={};if("none"===o)return e+r;for(var l=0;l<o.length;l++){var f=u[o[l]],s=i.getStyle(c,o[l],!0);/color/.test(o[l])&&(f=i.toHex(f),s=i.toHex(s)),s!==f&&(a[o[l]]=f)}var d=i.serializeStyle(a,"span");return d?e+' style="'+d+'"'+r:e+r}))}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(n,e,t,r){return e+' style="'+t+'"'+r})),e},pt=function(n,e){n.$("a",e).find("font,u").each((function(e,t){n.dom.remove(t,!0)}))},vt=function(n){F.webkit&&st(n,gt),F.ie&&(st(n,mt),dt(n,pt))},ht=function(n,e){return function(t){t.setActive("text"===e.pasteFormat.get());var r=function(n){return t.setActive(n.state)};return n.on("PastePlainTextToggle",r),function(){return n.off("PastePlainTextToggle",r)}}},bt=function(n,e){var t=function(){return n.execCommand("mceTogglePlainTextPaste")};n.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:t,onSetup:ht(n,e)}),n.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:t,onSetup:ht(n,e)})};function yt(){e.add("paste",(function(e){if(!1===t(e)){var o=n(!1),u=n(tn(e)?"text":"html"),i=$e(e,u);return vt(e),bt(e,i),Xe(e,i),ft(e),ot(e),lt(e,i,o),r(i)}}))}yt()})()},2292:function(n,e,t){t("33b6")},"267b":function(n,e,t){t("cf92")},"2b99":function(n,e){(function(){"use strict";var n=function(n){var e=n,t=function(){return e},r=function(n){e=n};return{get:t,set:r}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(){return t=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t],e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},t.apply(this,arguments)},r=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},o=function(n){return function(e){return r(e)===n}},u=function(n){return function(e){return typeof e===n}},i=o("string"),c=o("array"),a=u("boolean"),l=u("number"),f=function(){},s=function(n){return function(){return n}},d=function(n){return n},m=s(!1),g=s(!0),p="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",v=s(p),h=function(){return b},b=function(){var n=function(n){return n()},e=d,t={fold:function(n,e){return n()},isSome:m,isNone:g,getOr:e,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(void 0),or:e,orThunk:n,map:h,each:f,bind:h,exists:m,forall:g,filter:function(){return h()},toArray:function(){return[]},toString:s("none()")};return t}(),y=function(n){var e=s(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:g,isNone:m,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return y(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:b},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},w=function(n){return null===n||void 0===n?b:y(n)},C={some:y,none:h,from:w},x=v,T=tinymce.util.Tools.resolve("tinymce.Env"),S=tinymce.util.Tools.resolve("tinymce.util.Tools"),R=Array.prototype.slice,D=Array.prototype.push,A=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},k=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];e(o,t)}},O=function(n,e){for(var t=n.length-1;t>=0;t--){var r=n[t];e(r,t)}},P=function(n,e){if(0===n.length)return[];for(var t=e(n[0]),r=[],o=[],u=0,i=n.length;u<i;u++){var c=n[u],a=e(c);a!==t&&(r.push(o),o=[]),t=a,o.push(c)}return 0!==o.length&&r.push(o),r},E=function(n,e,t){return k(n,(function(n,r){t=e(t,n,r)})),t},M=function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!c(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);D.apply(e,n[t])}return e},N=function(n,e){return M(A(n,e))},I=function(n,e){var t=R.call(n,0);return t.sort(e),t},B=Object.hasOwnProperty,_=function(n,e){return B.call(n,e)};"undefined"!==typeof window?window:Function("return this;")();var L=9,F=11,j=1,W=3,z=function(n){return n.dom.nodeType},H=function(n){return function(e){return z(e)===n}},U=H(W),V=function(n,e,t){if(!(i(t)||a(t)||l(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")},K=function(n,e,t){V(n.dom,e,t)},$=function(n,e,t){return 0!==(n.compareDocumentPosition(e)&t)},q=function(n,e){return $(n,e,Node.DOCUMENT_POSITION_PRECEDING)},X=function(n,e){var t=e||document,r=t.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return J(r.childNodes[0])},Y=function(n,e){var t=e||document,r=t.createElement(n);return J(r)},G=function(n,e){var t=e||document,r=t.createTextNode(n);return J(r)},J=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},Q=function(n,e,t){return C.from(n.dom.elementFromPoint(e,t)).map(J)},Z={fromHtml:X,fromTag:Y,fromText:G,fromDom:J,fromPoint:Q},nn=function(n){return n.nodeType!==j&&n.nodeType!==L&&n.nodeType!==F||0===n.childElementCount},en=function(n,e){var t=void 0===e?document:e.dom;return nn(t)?[]:A(t.querySelectorAll(n),Z.fromDom)},tn=function(n){return C.from(n.dom.parentNode).map(Z.fromDom)},rn=function(n){return A(n.dom.childNodes,Z.fromDom)},on=function(n,e){return{element:n,offset:e}},un=function(n,e){var t=rn(n);return t.length>0&&e<t.length?on(t[e],0):on(n,e)},cn=function(n,e){var t=tn(n);t.each((function(t){t.dom.insertBefore(e.dom,n.dom)}))},an=function(n,e){n.dom.appendChild(e.dom)},ln=function(n,e){cn(n,e),an(e,n)},fn=function(n,e){var t=function(t){if(!n(t))throw new Error("Can only get "+e+" value of a "+e+" node");return r(t).getOr("")},r=function(e){return n(e)?C.from(e.dom.nodeValue):C.none()},o=function(t,r){if(!n(t))throw new Error("Can only set raw "+e+" value of a "+e+" node");t.dom.nodeValue=r};return{get:t,getOption:r,set:o}},sn=fn(U,"text"),dn=function(n){return sn.get(n)},mn=function(n,e){return en(e,n)},gn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),pn=function(n,e){return n.isBlock(e)||_(n.schema.getShortEndedElements(),e.nodeName)},vn=function(n,e){return"false"===n.getContentEditable(e)},hn=function(n,e){return"true"===n.getContentEditable(e)&&"false"===n.getContentEditableParent(e.parentNode)},bn=function(n,e){return!n.isBlock(e)&&_(n.schema.getWhiteSpaceElements(),e.nodeName)},yn=function(n,e){return pn(n,e)||vn(n,e)||bn(n,e)||hn(n,e)},wn=function(n){return 3===n.nodeType},Cn=function(){return{sOffset:0,fOffset:0,elements:[]}},xn=function(n,e){return un(Z.fromDom(n),e)},Tn=function(n,e,t,r,o,u){void 0===u&&(u=!0);var i=u?e(!1):t;while(i){var c=vn(n,i);if(c||bn(n,i)){var a=c?r.cef(i):r.boundary(i);if(a)break;i=e(!0)}else{if(pn(n,i)){if(r.boundary(i))break}else wn(i)&&r.text(i);if(i===o)break;i=e(!1)}}},Sn=function(n,e,t,r,o){if(!yn(n,t)){var u=n.getParent(r,n.isBlock),i=new gn(t,u),c=o?i.next.bind(i):i.prev.bind(i);Tn(n,c,t,{boundary:g,cef:g,text:function(n){o?e.fOffset+=n.length:e.sOffset+=n.length,e.elements.push(Z.fromDom(n))}})}},Rn=function(n,e,t,r,o,u){void 0===u&&(u=!0);var i=new gn(t,e),c=[],a=Cn();Sn(n,a,t,e,!1);var l=function(){return a.elements.length>0&&(c.push(a),a=Cn()),!1};return Tn(n,i.next.bind(i),t,{boundary:l,cef:function(n){return l(),o&&c.push.apply(c,o.cef(n)),!1},text:function(n){a.elements.push(Z.fromDom(n)),o&&o.text(n,a)}},r,u),r&&Sn(n,a,r,e,!0),l(),c},Dn=function(n,e){var t=xn(e.startContainer,e.startOffset),r=t.element.dom,o=xn(e.endContainer,e.endOffset),u=o.element.dom;return Rn(n,e.commonAncestorContainer,r,u,{text:function(n,e){n===u?e.fOffset+=n.length-o.offset:n===r&&(e.sOffset+=t.offset)},cef:function(e){var t=N(mn(Z.fromDom(e),"*[contenteditable=true]"),(function(e){var t=e.dom;return Rn(n,t,t)}));return I(t,(function(n,e){return q(n.elements[0].dom,e.elements[0].dom)?1:-1}))}},!1)},An=function(n,e){return e.collapsed?[]:Dn(n,e)},kn=function(n,e){var t=n.createRng();return t.selectNode(e),An(n,t)},On=function(n,e){return N(e,(function(e){return kn(n,e)}))},Pn=function(n,e,t,r){void 0===t&&(t=0),void 0===r&&(r=n.length);var o=e.regex;o.lastIndex=t;var u,i=[];while(u=o.exec(n)){var c=u[e.matchIndex],a=u.index+u[0].indexOf(c),l=a+c.length;if(l>r)break;i.push({start:a,finish:l}),o.lastIndex=l}return i},En=function(n,e){var t=E(n,(function(n,t){var r=dn(t),o=n.last,u=o+r.length,i=N(e,(function(n,e){return n.start<u&&n.finish>o?[{element:t,start:Math.max(o,n.start)-o,finish:Math.min(u,n.finish)-o,matchId:e}]:[]}));return{results:n.results.concat(i),last:u}}),{results:[],last:0}).results;return P(t,(function(n){return n.matchId}))},Mn=function(n,e){return N(e,(function(e){var t=e.elements,r=A(t,dn).join(""),o=Pn(r,n,e.sOffset,r.length-e.fOffset);return En(t,o)}))},Nn=function(n,e){O(n,(function(n,t){O(n,(function(n){var r=Z.fromDom(e.cloneNode(!1));K(r,"data-mce-index",t);var o=n.element.dom;if(o.length===n.finish&&0===n.start)ln(n.element,r);else{o.length!==n.finish&&o.splitText(n.finish);var u=o.splitText(n.start);ln(Z.fromDom(u),r)}}))}))},In=function(n,e,t,r){var o=kn(n,t),u=Mn(e,o);return Nn(u,r),u.length},Bn=function(n,e,t,r){var o=t.getBookmark(),u=n.select("td[data-mce-selected],th[data-mce-selected]"),i=u.length>0?On(n,u):An(n,t.getRng()),c=Mn(e,i);return Nn(c,r),t.moveToBookmark(o),c.length},_n=function(n){var e=n.getAttribute("data-mce-index");return"number"===typeof e?""+e:e},Ln=function(n,e,t,r){var o=n.dom.create("span",{"data-mce-bogus":1});o.className="mce-match-marker";var u=n.getBody();return Xn(n,e,!1),r?Bn(n.dom,t,n.selection,o):In(n.dom,t,u,o)},Fn=function(n){var e=n.parentNode;n.firstChild&&e.insertBefore(n.firstChild,n),n.parentNode.removeChild(n)},jn=function(n,e){var t=[],r=S.toArray(n.getBody().getElementsByTagName("span"));if(r.length)for(var o=0;o<r.length;o++){var u=_n(r[o]);null!==u&&u.length&&(u===e.toString()&&t.push(r[o]))}return t},Wn=function(n,e,t){var r=e.get(),o=r.index,u=n.dom;t=!1!==t,t?o+1===r.count?o=0:o++:o-1===-1?o=r.count-1:o--,u.removeClass(jn(n,r.index),"mce-match-marker-selected");var i=jn(n,o);return i.length?(u.addClass(jn(n,o),"mce-match-marker-selected"),n.selection.scrollIntoView(i[0]),o):-1},zn=function(n,e){var t=e.parentNode;n.remove(e),n.isEmpty(t)&&n.remove(t)},Hn=function(n,e){var t=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]"),r="("+t+")";return e?"(?:^|\\s|"+x()+")"+r+"(?=$|\\s|"+x()+")":r},Un=function(n,e,t,r,o,u){var i=n.selection,c=Hn(t,o),a=i.isForward(),l={regex:new RegExp(c,r?"g":"gi"),matchIndex:1},f=Ln(n,e,l,u);if(T.browser.isSafari()&&i.setRng(i.getRng(),a),f){var s=Wn(n,e,!0);e.set({index:s,count:f,text:t,matchCase:r,wholeWord:o,inSelection:u})}return f},Vn=function(n,e){var r=Wn(n,e,!0);e.set(t(t({},e.get()),{index:r}))},Kn=function(n,e){var r=Wn(n,e,!1);e.set(t(t({},e.get()),{index:r}))},$n=function(n){var e=_n(n);return null!==e&&e.length>0},qn=function(n,e,r,o,u){var i,c=e.get(),a=c.index,l=a;o=!1!==o;for(var f=n.getBody(),s=S.grep(S.toArray(f.getElementsByTagName("span")),$n),d=0;d<s.length;d++){var m=_n(s[d]),g=i=parseInt(m,10);if(u||g===c.index){r.length?(s[d].firstChild.nodeValue=r,Fn(s[d])):zn(n.dom,s[d]);while(s[++d]){if(g=parseInt(_n(s[d]),10),g!==i){d--;break}zn(n.dom,s[d])}o&&l--}else i>a&&s[d].setAttribute("data-mce-index",String(i-1))}return e.set(t(t({},c),{count:u?0:c.count-1,index:l})),o?Vn(n,e):Kn(n,e),!u&&e.get().count>0},Xn=function(n,e,r){for(var o,u,i=e.get(),c=S.toArray(n.getBody().getElementsByTagName("span")),a=0;a<c.length;a++){var l=_n(c[a]);null!==l&&l.length&&(l===i.index.toString()&&(o||(o=c[a].firstChild),u=c[a].firstChild),Fn(c[a]))}if(e.set(t(t({},i),{index:-1,count:0,text:""})),o&&u){var f=n.dom.createRng();return f.setStart(o,0),f.setEnd(u,u.data.length),!1!==r&&n.selection.setRng(f),f}},Yn=function(n,e){return e.get().count>1},Gn=function(n,e){return e.get().count>1},Jn=function(n,e){var t=function(t){return Xn(n,e,t)},r=function(t,r,o,u){return void 0===u&&(u=!1),Un(n,e,t,r,o,u)},o=function(){return Vn(n,e)},u=function(){return Kn(n,e)},i=function(t,r,o){return qn(n,e,t,r,o)};return{done:t,find:r,next:o,prev:u,replace:i}},Qn=function(e){var t=n(C.none()),r=function(){return t.get().each(e)},o=function(){r(),t.set(C.none())},u=function(){return t.get().isSome()},i=function(){return t.get()},c=function(n){r(),t.set(C.some(n))};return{clear:o,isSet:u,get:i,set:c}},Zn=function(){var n=Qn(f),e=function(e){return n.get().each(e)};return t(t({},n),{on:e})},ne=function(n,e){var r=Zn();n.undoManager.add();var o=S.trim(n.selection.getContent({format:"text"})),u=function(t){var r=Yn(n,e)?t.enable:t.disable;r("next");var o=Gn(n,e)?t.enable:t.disable;o("prev")},i=function(n){var r=n.getData(),o=e.get();e.set(t(t({},o),{matchCase:r.matchcase,wholeWord:r.wholewords,inSelection:r.inselection}))},c=function(n,e){var t=["replace","replaceall","prev","next"],r=e?n.disable:n.enable;k(t,r)},a=function(e){n.windowManager.alert("Could not find the specified string.",(function(){e.focus("findtext")}))},l=function(n,e){T.browser.isSafari()&&T.deviceType.isTouch()&&("find"===e||"replace"===e||"replaceall"===e)&&n.focus(e)},f=function(t){Xn(n,e,!1),c(t,!0),u(t)},s=function(t){var r=t.getData(),o=e.get();if(r.findtext.length){if(o.text===r.findtext&&o.matchCase===r.matchcase&&o.wholeWord===r.wholewords)Vn(n,e);else{var i=Un(n,e,r.findtext,r.matchcase,r.wholewords,r.inselection);i<=0&&a(t),c(t,0===i)}u(t)}else f(t)},d=e.get(),m={findtext:o,replacetext:"",wholewords:d.wholeWord,matchcase:d.matchCase,inselection:d.inSelection},g={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:m,onChange:function(n,t){"findtext"===t.name&&e.get().count>0&&f(n)},onAction:function(t,r){var o=t.getData();switch(r.name){case"find":s(t);break;case"replace":qn(n,e,o.replacetext)?u(t):f(t);break;case"replaceall":qn(n,e,o.replacetext,!0,!0),f(t);break;case"prev":Kn(n,e),u(t);break;case"next":Vn(n,e),u(t);break;case"matchcase":case"wholewords":case"inselection":i(t),f(t);break}l(t,r.name)},onSubmit:function(n){s(n),l(n,"find")},onClose:function(){n.focus(),Xn(n,e),n.undoManager.add()}};r.set(n.windowManager.open(g,{inline:"toolbar"}))},ee=function(n,e){n.addCommand("SearchReplace",(function(){ne(n,e)}))},te=function(n,e){return function(){ne(n,e)}},re=function(n,e){n.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:te(n,e),icon:"search"}),n.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:te(n,e),icon:"search"}),n.shortcuts.add("Meta+F","",te(n,e))};function oe(){e.add("searchreplace",(function(e){var t=n({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return ee(e,t),re(e,t),Jn(e,t)}))}oe()})()},3205:function(n,e){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n){var e=n.getParam("nonbreaking_force_tab",0);return"boolean"===typeof e?!0===e?3:0:e},t=function(n){return n.getParam("nonbreaking_wrap",!0,"boolean")},r=function(n,e){for(var t="",r=0;r<e;r++)t+=n;return t},o=function(n){return!!n.plugins.visualchars&&n.plugins.visualchars.isEnabled()},u=function(n,e){var u=function(){return o(n)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"},i=function(){return'<span class="'+u()+'" contenteditable="false">'+r("&nbsp;",e)+"</span>"},c=t(n),a=c||n.plugins.visualchars?i():r("&nbsp;",e);n.undoManager.transact((function(){return n.insertContent(a)}))},i=function(n){n.addCommand("mceNonBreaking",(function(){u(n,1)}))},c=tinymce.util.Tools.resolve("tinymce.util.VK"),a=function(n){var t=e(n);t>0&&n.on("keydown",(function(e){if(e.keyCode===c.TAB&&!e.isDefaultPrevented()){if(e.shiftKey)return;e.preventDefault(),e.stopImmediatePropagation(),u(n,t)}}))},l=function(n){var e=function(){return n.execCommand("mceNonBreaking")};n.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:e}),n.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:e})};function f(){n.add("nonbreaking",(function(n){i(n),l(n),a(n)}))}f()})()},"33b6":function(n,e){(function(){"use strict";var n=function(n){var e=n,t=function(){return e},r=function(n){e=n};return{get:t,set:r}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n){var e=function(){return n.get()};return{isEnabled:e}},r=function(n,e){return n.fire("VisualChars",{state:e})},o=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},u=function(n){return function(e){return o(e)===n}},i=function(n){return function(e){return typeof e===n}},c=u("string"),a=i("boolean"),l=i("number"),f=function(){},s=function(n){return function(){return n}},d=function(n){return n},m=s(!1),g=s(!0),p=function(){return v},v=function(){var n=function(n){return n()},e=d,t={fold:function(n,e){return n()},isSome:m,isNone:g,getOr:e,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(void 0),or:e,orThunk:n,map:p,each:f,bind:p,exists:m,forall:g,filter:function(){return p()},toArray:function(){return[]},toString:s("none()")};return t}(),h=function(n){var e=s(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:g,isNone:m,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return h(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:v},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},b=function(n){return null===n||void 0===n?v:h(n)},y={some:h,none:p,from:b},w=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},C=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];e(o,t)}},x=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},T=Object.keys,S=function(n,e){for(var t=T(n),r=0,o=t.length;r<o;r++){var u=t[r],i=n[u];e(i,u)}};"undefined"!==typeof window?window:Function("return this;")();var R=3,D=function(n){return n.dom.nodeType},A=function(n){return n.dom.nodeValue},k=function(n){return function(e){return D(e)===n}},O=k(R),P=function(n,e,t){if(!(c(t)||a(t)||l(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")},E=function(n,e,t){P(n.dom,e,t)},M=function(n,e){var t=n.dom.getAttribute(e);return null===t?void 0:t},N=function(n,e){n.dom.removeAttribute(e)},I=function(n,e){var t=M(n,e);return void 0===t||""===t?[]:t.split(" ")},B=function(n,e,t){var r=I(n,e),o=r.concat([t]);return E(n,e,o.join(" ")),!0},_=function(n,e,t){var r=x(I(n,e),(function(n){return n!==t}));return r.length>0?E(n,e,r.join(" ")):N(n,e),!1},L=function(n){return void 0!==n.dom.classList},F=function(n){return I(n,"class")},j=function(n,e){return B(n,"class",e)},W=function(n,e){return _(n,"class",e)},z=function(n,e){L(n)?n.dom.classList.add(e):j(n,e)},H=function(n){var e=L(n)?n.dom.classList:F(n);0===e.length&&N(n,"class")},U=function(n,e){if(L(n)){var t=n.dom.classList;t.remove(e)}else W(n,e);H(n)},V=function(n,e){var t=e||document,r=t.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return q(r.childNodes[0])},K=function(n,e){var t=e||document,r=t.createElement(n);return q(r)},$=function(n,e){var t=e||document,r=t.createTextNode(n);return q(r)},q=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},X=function(n,e,t){return y.from(n.dom.elementFromPoint(e,t)).map(q)},Y={fromHtml:V,fromTag:K,fromText:$,fromDom:q,fromPoint:X},G={" ":"nbsp","­":"shy"},J=function(n,e){var t="";return S(n,(function(n,e){t+=e})),new RegExp("["+t+"]",e?"g":"")},Q=function(n){var e="";return S(n,(function(n){e&&(e+=","),e+="span.mce-"+n})),e},Z=J(G),nn=J(G,!0),en=Q(G),tn="mce-nbsp",rn=function(n){return'<span data-mce-bogus="1" class="mce-'+G[n]+'">'+n+"</span>"},on=function(n){var e=A(n);return O(n)&&void 0!==e&&Z.test(e)},un=function(n,e){var t=[],r=n.dom,o=w(r.childNodes,Y.fromDom);return C(o,(function(n){e(n)&&(t=t.concat([n])),t=t.concat(un(n,e))})),t},cn=function(n,e){while(n.parentNode){if(n.parentNode===e)return n;n=n.parentNode}},an=function(n){return n.replace(nn,rn)},ln=function(n){return"span"===n.nodeName.toLowerCase()&&n.classList.contains("mce-nbsp-wrap")},fn=function(n,e){var t=un(Y.fromDom(e),on);C(t,(function(e){var t=e.dom.parentNode;if(ln(t))z(Y.fromDom(t),tn);else{var r=an(n.dom.encode(A(e))),o=n.dom.create("div",null,r),u=void 0;while(u=o.lastChild)n.dom.insertAfter(u,e.dom);n.dom.remove(e.dom)}}))},sn=function(n,e){var t=n.dom.select(en,e);C(t,(function(e){ln(e)?U(Y.fromDom(e),tn):n.dom.remove(e,!0)}))},dn=function(n){var e=n.getBody(),t=n.selection.getBookmark(),r=cn(n.selection.getNode(),e);r=void 0!==r?r:e,sn(n,r),fn(n,r),n.selection.moveToBookmark(t)},mn=function(n,e){r(n,e.get());var t=n.getBody();!0===e.get()?fn(n,t):sn(n,t)},gn=function(n,e){e.set(!e.get());var t=n.selection.getBookmark();mn(n,e),n.selection.moveToBookmark(t)},pn=function(n,e){n.addCommand("mceVisualChars",(function(){gn(n,e)}))},vn=function(n){return n.getParam("visualchars_default_state",!1)},hn=function(n){return!1!==n.getParam("forced_root_block")},bn=function(n,e){n.on("init",(function(){mn(n,e)}))},yn=tinymce.util.Tools.resolve("tinymce.util.Delay"),wn=function(n,e){var t=yn.debounce((function(){dn(n)}),300);hn(n)&&n.on("keydown",(function(r){!0===e.get()&&(13===r.keyCode?dn(n):t())})),n.on("remove",t.stop)},Cn=function(n,e){return function(t){t.setActive(e.get());var r=function(n){return t.setActive(n.state)};return n.on("VisualChars",r),function(){return n.off("VisualChars",r)}}},xn=function(n,e){var t=function(){return n.execCommand("mceVisualChars")};n.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:t,onSetup:Cn(n,e)}),n.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:t,onSetup:Cn(n,e)})};function Tn(){e.add("visualchars",(function(e){var r=n(vn(e));return pn(e,r),xn(e,r),wn(e,r),bn(e,r),t(r)}))}Tn()})()},3753:function(n,e,t){t("38a4")},"38a4":function(n,e){(function(){"use strict";var n=function(n){var e=n,t=function(){return e},r=function(n){e=n};return{get:t,set:r}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n,e){n.fire("VisualBlocks",{state:e})},r=function(n,e,r){var o=n.dom;o.toggleClass(n.getBody(),"mce-visualblocks"),r.set(!r.get()),t(n,r.get())},o=function(n,e,t){n.addCommand("mceVisualBlocks",(function(){r(n,e,t)}))},u=function(n){return n.getParam("visualblocks_default_state",!1,"boolean")},i=function(n,e,t){n.on("PreviewFormats AfterPreviewFormats",(function(e){t.get()&&n.dom.toggleClass(n.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)})),n.on("init",(function(){u(n)&&r(n,e,t)}))},c=function(n,e){return function(t){t.setActive(e.get());var r=function(n){return t.setActive(n.state)};return n.on("VisualBlocks",r),function(){return n.off("VisualBlocks",r)}}},a=function(n,e){var t=function(){return n.execCommand("mceVisualBlocks")};n.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:t,onSetup:c(n,e)}),n.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:t,onSetup:c(n,e)})};function l(){e.add("visualblocks",(function(e,t){var r=n(!1);o(e,t,r),a(e,r),i(e,t,r)}))}l()})()},4948:function(n,e){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(n){return n.getParam("content_style","","string")},o=function(n){return n.getParam("content_css_cors",!1,"boolean")},u=function(n){var e=n.getParam("body_class","","hash");return e[n.id]||""},i=function(n){var e=n.getParam("body_class","","string");return-1===e.indexOf("=")?e:u(n)},c=function(n){var e=n.getParam("body_id","","hash");return e[n.id]||e},a=function(n){var e=n.getParam("body_id","tinymce","string");return-1===e.indexOf("=")?e:c(n)},l=function(n){var u="",c=n.dom.encode,l=r(n);u+='<base href="'+c(n.documentBaseURI.getURI())+'">';var f=o(n)?' crossorigin="anonymous"':"";t.each(n.contentCSS,(function(e){u+='<link type="text/css" rel="stylesheet" href="'+c(n.documentBaseURI.toAbsolute(e))+'"'+f+">"})),l&&(u+='<style type="text/css">'+l+"</style>");var s=a(n),d=i(n),m=e.mac?"e.metaKey":"e.ctrlKey && !e.altKey",g='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+m+")) {e.preventDefault();}}}, false);<\/script> ",p=n.getBody().dir,v=p?' dir="'+c(p)+'"':"",h="<!DOCTYPE html><html><head>"+u+'</head><body id="'+c(s)+'" class="mce-content-body '+c(d)+'"'+v+">"+n.getContent()+g+"</body></html>";return h},f=function(n){var e=l(n),t=n.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:e}});t.focus("close")},s=function(n){n.addCommand("mcePreview",(function(){f(n)}))},d=function(n){var e=function(){return n.execCommand("mcePreview")};n.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:e}),n.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:e})};function m(){n.add("preview",(function(n){s(n),d(n)}))}m()})()},"550c":function(n,e,t){t("fb04")},"58e6":function(n,e,t){t("9acd")},"75d5":function(n,e,t){t("f2a5")},"8e2c":function(n,e,t){t("2b99")},9153:function(n,e,t){t("3205")},"9acd":function(n,e){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n){return n},t=function(){return t=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t],e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},t.apply(this,arguments)},r="\ufeff",o=function(n){return n.replace(/\uFEFF/g,"")},u=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},i="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",c={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:i},a={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},l=[new RegExp(c.aletter),new RegExp(c.midnumlet),new RegExp(c.midletter),new RegExp(c.midnum),new RegExp(c.numeric),new RegExp(c.cr),new RegExp(c.lf),new RegExp(c.newline),new RegExp(c.extend),new RegExp(c.format),new RegExp(c.katakana),new RegExp(c.extendnumlet),new RegExp("@")],f="",s=new RegExp("^"+c.punctuation+"$"),d=/^\s+$/,m=l,g=a.OTHER,p=function(n){for(var e=g,t=m.length,r=0;r<t;++r){var o=m[r];if(o&&o.test(n)){e=r;break}}return e},v=function(n){var e={};return function(t){if(e[t])return e[t];var r=n(t);return e[t]=r,r}},h=function(n){var e=v(p);return u(n,e)},b=function(n,e){var t=n[e],r=n[e+1];if(e<0||e>n.length-1&&0!==e)return!1;if(t===a.ALETTER&&r===a.ALETTER)return!1;var o=n[e+2];if(t===a.ALETTER&&(r===a.MIDLETTER||r===a.MIDNUMLET||r===a.AT)&&o===a.ALETTER)return!1;var u=n[e-1];return(t!==a.MIDLETTER&&t!==a.MIDNUMLET&&r!==a.AT||r!==a.ALETTER||u!==a.ALETTER)&&((t!==a.NUMERIC&&t!==a.ALETTER||r!==a.NUMERIC&&r!==a.ALETTER)&&((t!==a.MIDNUM&&t!==a.MIDNUMLET||r!==a.NUMERIC||u!==a.NUMERIC)&&((t!==a.NUMERIC||r!==a.MIDNUM&&r!==a.MIDNUMLET||o!==a.NUMERIC)&&(t!==a.EXTEND&&t!==a.FORMAT&&u!==a.EXTEND&&u!==a.FORMAT&&r!==a.EXTEND&&r!==a.FORMAT&&((t!==a.CR||r!==a.LF)&&(t===a.NEWLINE||t===a.CR||t===a.LF||(r===a.NEWLINE||r===a.CR||r===a.LF||(t!==a.KATAKANA||r!==a.KATAKANA)&&((r!==a.EXTENDNUMLET||t!==a.ALETTER&&t!==a.NUMERIC&&t!==a.KATAKANA&&t!==a.EXTENDNUMLET)&&((t!==a.EXTENDNUMLET||r!==a.ALETTER&&r!==a.NUMERIC&&r!==a.KATAKANA)&&t!==a.AT)))))))))},y=f,w=d,C=s,x=function(n){return"http"===n||"https"===n},T=function(n,e){var t;for(t=e;t<n.length;t++)if(w.test(n[t]))break;return t},S=function(n,e){var t=T(n,e+1),r=n.slice(e+1,t).join(y);return"://"===r.substr(0,3)?t:e},R=function(n,e,t,r){for(var o=[],u=[],i=0;i<t.length;++i)if(u.push(n[i]),b(t,i)){var c=e[i];if((r.includeWhitespace||!w.test(c))&&(r.includePunctuation||!C.test(c))){var a=i-u.length+1,l=i+1,f=e.slice(a,l).join(y);if(x(f)){var s=S(e,i),d=n.slice(l,s);Array.prototype.push.apply(u,d),i=s}o.push(u)}u=[]}return o},D=function(){return{includeWhitespace:!1,includePunctuation:!1}},A=function(n,e,o){o=t(t({},D()),o);for(var u=[],i=[],c=0;c<n.length;c++){var a=e(n[c]);a!==r&&(u.push(n[c]),i.push(a))}var l=h(i);return R(u,i,l,o)},k=A,O=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),P=function(n,e){var t=e.getBlockElements(),r=e.getShortEndedElements(),u=function(n){return t[n.nodeName]||r[n.nodeName]},i=[],c="",a=new O(n,n);while(n=a.next())3===n.nodeType?c+=o(n.data):u(n)&&c.length&&(i.push(c),c="");return c.length&&i.push(c),i},E=function(n){return n.replace(/\u200B/g,"")},M=function(n){return n.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},N=function(n,t){var r=E(P(n,t).join("\n"));return k(r.split(""),e).length},I=function(n,e){var t=P(n,e).join("");return M(t)},B=function(n,e){var t=P(n,e).join("").replace(/\s/g,"");return M(t)},_=function(n,e){return function(){return e(n.getBody(),n.schema)}},L=function(n,e){return function(){return e(n.selection.getRng().cloneContents(),n.schema)}},F=function(n){return _(n,N)},j=function(n){return{body:{getWordCount:F(n),getCharacterCount:_(n,I),getCharacterCountWithoutSpaces:_(n,B)},selection:{getWordCount:L(n,N),getCharacterCount:L(n,I),getCharacterCountWithoutSpaces:L(n,B)},getCount:F(n)}},W=function(n,e){n.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(e.body.getWordCount()),String(e.selection.getWordCount())],["Characters (no spaces)",String(e.body.getCharacterCountWithoutSpaces()),String(e.selection.getCharacterCountWithoutSpaces())],["Characters",String(e.body.getCharacterCount()),String(e.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},z=function(n,e){n.addCommand("mceWordCount",(function(){return W(n,e)}))},H=tinymce.util.Tools.resolve("tinymce.util.Delay"),U=function(n,e){n.fire("wordCountUpdate",{wordCount:{words:e.body.getWordCount(),characters:e.body.getCharacterCount(),charactersWithoutSpaces:e.body.getCharacterCountWithoutSpaces()}})},V=function(n,e){U(n,e)},K=function(n,e,t){var r=H.debounce((function(){return V(n,e)}),t);n.on("init",(function(){V(n,e),H.setEditorTimeout(n,(function(){n.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",r)}),0)}))},$=function(n){var e=function(){return n.execCommand("mceWordCount")};n.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:e}),n.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:e})};function q(e){void 0===e&&(e=300),n.add("wordcount",(function(n){var t=j(n);return z(n,t),$(n),K(n,t,e),t}))}q()})()},"9c16":function(n,e,t){t("18f5")},cf92:function(n,e){(function(){"use strict";var n=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},e=function(e){return function(t){return n(t)===e}},t=function(n){return function(e){return typeof e===n}},r=function(n){return function(e){return n===e}},o=e("string"),u=e("object"),i=e("array"),c=r(null),a=t("boolean"),l=r(void 0),f=function(n){return null===n||void 0===n},s=function(n){return!f(n)},d=t("function"),m=t("number"),g=function(){},p=function(n,e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n(e.apply(null,t))}},v=function(n,e){return function(t){return n(e(t))}},h=function(n){return function(){return n}},b=function(n){return n},y=function(n,e){return n===e};function w(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.concat(t);return n.apply(null,o)}}var C=function(n){return function(e){return!n(e)}},x=function(n){return function(){throw new Error(n)}},T=h(!1),S=h(!0),R=function(){return D},D=function(){var n=function(n){return n()},e=b,t={fold:function(n,e){return n()},isSome:T,isNone:S,getOr:e,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:h(null),getOrUndefined:h(void 0),or:e,orThunk:n,map:R,each:g,bind:R,exists:T,forall:S,filter:function(){return R()},toArray:function(){return[]},toString:h("none()")};return t}(),A=function(n){var e=h(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:S,isNone:T,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return A(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:D},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},k=function(n){return null===n||void 0===n?D:A(n)},O={some:A,none:R,from:k},P=Array.prototype.slice,E=Array.prototype.indexOf,M=Array.prototype.push,N=function(n,e){return E.call(n,e)},I=function(n,e){return N(n,e)>-1},B=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];if(e(o,t))return!0}return!1},_=function(n,e){for(var t=[],r=0;r<n;r++)t.push(e(r));return t},L=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},F=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];e(o,t)}},j=function(n,e){for(var t=n.length-1;t>=0;t--){var r=n[t];e(r,t)}},W=function(n,e){for(var t=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o],c=e(i,o)?t:r;c.push(i)}return{pass:t,fail:r}},z=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},H=function(n,e,t){return j(n,(function(n,r){t=e(t,n,r)})),t},U=function(n,e,t){return F(n,(function(n,r){t=e(t,n,r)})),t},V=function(n,e,t){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(e(u,r))return O.some(u);if(t(u,r))break}return O.none()},K=function(n,e){return V(n,e,T)},$=function(n,e){for(var t=0,r=n.length;t<r;t++){var o=n[t];if(e(o,t))return O.some(t)}return O.none()},q=function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!i(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);M.apply(e,n[t])}return e},X=function(n,e){return q(L(n,e))},Y=function(n,e){for(var t=0,r=n.length;t<r;++t){var o=n[t];if(!0!==e(o,t))return!1}return!0},G=function(n){var e=P.call(n,0);return e.reverse(),e},J=function(n,e){for(var t={},r=0,o=n.length;r<o;r++){var u=n[r];t[String(u)]=e(u,r)}return t},Q=function(n){return[n]},Z=function(n,e){var t=P.call(n,0);return t.sort(e),t},nn=function(n,e){return e>=0&&e<n.length?O.some(n[e]):O.none()},en=function(n){return nn(n,0)},tn=function(n){return nn(n,n.length-1)},rn=function(n,e){for(var t=0;t<n.length;t++){var r=e(n[t],t);if(r.isSome())return r}return O.none()},on=function(){return on=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t],e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},on.apply(this,arguments)};function un(n,e,t){if(t||2===arguments.length)for(var r,o=0,u=e.length;o<u;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))}var cn=function(n){var e,t=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t||(t=!0,e=n.apply(null,r)),e}},an=function(n,e,t,r){var o=n.isiOS()&&!0===/ipad/i.test(t),u=n.isiOS()&&!o,i=n.isiOS()||n.isAndroid(),c=i||r("(pointer:coarse)"),a=o||!u&&i&&r("(min-device-width:768px)"),l=u||i&&!a,f=e.isSafari()&&n.isiOS()&&!1===/safari/i.test(t),s=!l&&!a&&!f;return{isiPad:h(o),isiPhone:h(u),isTablet:h(a),isPhone:h(l),isTouch:h(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:h(f),isDesktop:h(s)}},ln=function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.test(e))return r}},fn=function(n,e){var t=ln(n,e);if(!t)return{major:0,minor:0};var r=function(n){return Number(e.replace(t,"$"+n))};return mn(r(1),r(2))},sn=function(n,e){var t=String(e).toLowerCase();return 0===n.length?dn():fn(n,t)},dn=function(){return mn(0,0)},mn=function(n,e){return{major:n,minor:e}},gn={nu:mn,detect:sn,unknown:dn},pn=function(n,e){return rn(e.brands,(function(e){var t=e.brand.toLowerCase();return K(n,(function(n){var e;return t===(null===(e=n.brand)||void 0===e?void 0:e.toLowerCase())})).map((function(n){return{current:n.name,version:gn.nu(parseInt(e.version,10),0)}}))}))},vn=function(n,e){var t=String(e).toLowerCase();return K(n,(function(n){return n.search(t)}))},hn=function(n,e){return vn(n,e).map((function(n){var t=gn.detect(n.versionRegexes,e);return{current:n.name,version:t}}))},bn=function(n,e){return vn(n,e).map((function(n){var t=gn.detect(n.versionRegexes,e);return{current:n.name,version:t}}))},yn=function(n,e){return n.substring(e)},wn=function(n,e,t){return""===e||n.length>=e.length&&n.substr(t,t+e.length)===e},Cn=function(n,e){return Tn(n,e)?yn(n,e.length):n},xn=function(n,e){return-1!==n.indexOf(e)},Tn=function(n,e){return wn(n,e,0)},Sn=function(n,e){return wn(n,e,n.length-e.length)},Rn=function(n){return function(e){return e.replace(n,"")}},Dn=Rn(/^\s+|\s+$/g),An=function(n){return n.length>0},kn=function(n){return!An(n)},On=function(n){var e=parseFloat(n);return isNaN(e)?O.none():O.some(e)},Pn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,En=function(n){return function(e){return xn(e,n)}},Mn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return xn(n,"edge/")&&xn(n,"chrome")&&xn(n,"safari")&&xn(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Pn],search:function(n){return xn(n,"chrome")&&!xn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return xn(n,"msie")||xn(n,"trident")}},{name:"Opera",versionRegexes:[Pn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:En("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:En("firefox")},{name:"Safari",versionRegexes:[Pn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(xn(n,"safari")||xn(n,"mobile/"))&&xn(n,"applewebkit")}}],Nn=[{name:"Windows",search:En("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return xn(n,"iphone")||xn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:En("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:En("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:En("linux"),versionRegexes:[]},{name:"Solaris",search:En("sunos"),versionRegexes:[]},{name:"FreeBSD",search:En("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:En("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],In={browsers:h(Mn),oses:h(Nn)},Bn="Edge",_n="Chrome",Ln="IE",Fn="Opera",jn="Firefox",Wn="Safari",zn=function(){return Hn({current:void 0,version:gn.unknown()})},Hn=function(n){var e=n.current,t=n.version,r=function(n){return function(){return e===n}};return{current:e,version:t,isEdge:r(Bn),isChrome:r(_n),isIE:r(Ln),isOpera:r(Fn),isFirefox:r(jn),isSafari:r(Wn)}},Un={unknown:zn,nu:Hn,edge:h(Bn),chrome:h(_n),ie:h(Ln),opera:h(Fn),firefox:h(jn),safari:h(Wn)},Vn="Windows",Kn="iOS",$n="Android",qn="Linux",Xn="OSX",Yn="Solaris",Gn="FreeBSD",Jn="ChromeOS",Qn=function(){return Zn({current:void 0,version:gn.unknown()})},Zn=function(n){var e=n.current,t=n.version,r=function(n){return function(){return e===n}};return{current:e,version:t,isWindows:r(Vn),isiOS:r(Kn),isAndroid:r($n),isOSX:r(Xn),isLinux:r(qn),isSolaris:r(Yn),isFreeBSD:r(Gn),isChromeOS:r(Jn)}},ne={unknown:Qn,nu:Zn,windows:h(Vn),ios:h(Kn),android:h($n),linux:h(qn),osx:h(Xn),solaris:h(Yn),freebsd:h(Gn),chromeos:h(Jn)},ee=function(n,e,t){var r=In.browsers(),o=In.oses(),u=e.bind((function(n){return pn(r,n)})).orThunk((function(){return hn(r,n)})).fold(Un.unknown,Un.nu),i=bn(o,n).fold(ne.unknown,ne.nu),c=an(i,u,n,t);return{browser:u,os:i,deviceType:c}},te={detect:ee},re=function(n){return window.matchMedia(n).matches},oe=cn((function(){return te.detect(navigator.userAgent,O.from(navigator.userAgentData),re)})),ue=function(){return oe()},ie=function(n,e,t){return 0!==(n.compareDocumentPosition(e)&t)},ce=function(n,e){return ie(n,e,Node.DOCUMENT_POSITION_CONTAINED_BY)},ae=8,le=9,fe=11,se=1,de=3,me=function(n,e){var t=e||document,r=t.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return ve(r.childNodes[0])},ge=function(n,e){var t=e||document,r=t.createElement(n);return ve(r)},pe=function(n,e){var t=e||document,r=t.createTextNode(n);return ve(r)},ve=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},he=function(n,e,t){return O.from(n.dom.elementFromPoint(e,t)).map(ve)},be={fromHtml:me,fromTag:ge,fromText:pe,fromDom:ve,fromPoint:he},ye=function(n,e){var t=n.dom;if(t.nodeType!==se)return!1;var r=t;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},we=function(n){return n.nodeType!==se&&n.nodeType!==le&&n.nodeType!==fe||0===n.childElementCount},Ce=function(n,e){var t=void 0===e?document:e.dom;return we(t)?[]:L(t.querySelectorAll(n),be.fromDom)},xe=function(n,e){var t=void 0===e?document:e.dom;return we(t)?O.none():O.from(t.querySelector(n)).map(be.fromDom)},Te=function(n,e){return n.dom===e.dom},Se=function(n,e){var t=n.dom,r=e.dom;return t!==r&&t.contains(r)},Re=function(n,e){return ce(n.dom,e.dom)},De=function(n,e){return ue().browser.isIE()?Re(n,e):Se(n,e)},Ae=ye,ke=Object.keys,Oe=Object.hasOwnProperty,Pe=function(n,e){for(var t=ke(n),r=0,o=t.length;r<o;r++){var u=t[r],i=n[u];e(i,u)}},Ee=function(n,e){return Me(n,(function(n,t){return{k:t,v:e(n,t)}}))},Me=function(n,e){var t={};return Pe(n,(function(n,r){var o=e(n,r);t[o.k]=o.v})),t},Ne=function(n){return function(e,t){n[t]=e}},Ie=function(n,e,t,r){var o={};return Pe(n,(function(n,o){(e(n,o)?t:r)(n,o)})),o},Be=function(n,e){var t={};return Ie(n,e,Ne(t),g),t},_e=function(n,e){var t=[];return Pe(n,(function(n,r){t.push(e(n,r))})),t},Le=function(n){return _e(n,b)},Fe=function(n){return ke(n).length},je=function(n,e){return We(n,e)?O.from(n[e]):O.none()},We=function(n,e){return Oe.call(n,e)},ze=function(n,e){return We(n,e)&&void 0!==n[e]&&null!==n[e]},He=function(n){for(var e in n)if(Oe.call(n,e))return!1;return!0},Ue=["tfoot","thead","tbody","colgroup"],Ve=function(n){return I(Ue,n)},Ke=function(n,e){return{rows:n,columns:e}},$e=function(n,e){return{row:n,column:e}},qe=function(n,e,t){return{element:n,rowspan:e,colspan:t}},Xe=function(n,e,t,r){return{element:n,rowspan:e,colspan:t,isNew:r}},Ye=function(n,e,t,r,o,u){return{element:n,rowspan:e,colspan:t,row:r,column:o,isLocked:u}},Ge=function(n,e,t){return{element:n,cells:e,section:t}},Je=function(n,e,t,r){return{element:n,cells:e,section:t,isNew:r}},Qe=function(n,e,t){return{element:n,isNew:e,isLocked:t}},Ze=function(n,e,t,r){return{element:n,cells:e,section:t,isNew:r}},nt=function(n,e,t,r){return{startRow:n,startCol:e,finishRow:t,finishCol:r}},et=function(n,e,t){return{element:n,colspan:e,column:t}},tt=function(n,e){return{element:n,columns:e}};"undefined"!==typeof window?window:Function("return this;")();var rt=function(n){var e=n.dom.nodeName;return e.toLowerCase()},ot=function(n){return n.dom.nodeType},ut=function(n){return function(e){return ot(e)===n}},it=function(n){return ot(n)===ae||"#comment"===rt(n)},ct=ut(se),at=ut(de),lt=ut(le),ft=ut(fe),st=function(n){return function(e){return ct(e)&&rt(e)===n}},dt=function(n){return be.fromDom(n.dom.ownerDocument)},mt=function(n){return lt(n)?n:dt(n)},gt=function(n){return be.fromDom(mt(n).dom.defaultView)},pt=function(n){return O.from(n.dom.parentNode).map(be.fromDom)},vt=function(n){return O.from(n.dom.parentElement).map(be.fromDom)},ht=function(n,e){var t=d(e)?e:T,r=n.dom,o=[];while(null!==r.parentNode&&void 0!==r.parentNode){var u=r.parentNode,i=be.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o},bt=function(n){return O.from(n.dom.previousSibling).map(be.fromDom)},yt=function(n){return O.from(n.dom.nextSibling).map(be.fromDom)},wt=function(n){return L(n.dom.childNodes,be.fromDom)},Ct=function(n,e){var t=n.dom.childNodes;return O.from(t[e]).map(be.fromDom)},xt=function(n){return Ct(n,0)},Tt=function(n){return ft(n)&&s(n.dom.host)},St=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode),Rt=h(St),Dt=St?function(n){return be.fromDom(n.dom.getRootNode())}:mt,At=function(n){var e=Dt(n);return Tt(e)?O.some(e):O.none()},kt=function(n){return be.fromDom(n.dom.host)},Ot=function(n){if(Rt()&&s(n.target)){var e=be.fromDom(n.target);if(ct(e)&&Pt(e)&&n.composed&&n.composedPath){var t=n.composedPath();if(t)return en(t)}}return O.from(n.target)},Pt=function(n){return s(n.dom.shadowRoot)},Et=function(n){var e=at(n)?n.dom.parentNode:n.dom;if(void 0===e||null===e||null===e.ownerDocument)return!1;var t=e.ownerDocument;return At(be.fromDom(e)).fold((function(){return t.body.contains(e)}),v(Et,kt))},Mt=function(){return Nt(be.fromDom(document))},Nt=function(n){var e=n.dom.body;if(null===e||void 0===e)throw new Error("Body is not available yet");return be.fromDom(e)},It=function(n,e,t){return z(ht(n,t),e)},Bt=function(n,e){return z(wt(n),e)},_t=function(n,e){var t=[];return F(wt(n),(function(n){e(n)&&(t=t.concat([n])),t=t.concat(_t(n,e))})),t},Lt=function(n,e,t){return It(n,(function(n){return ye(n,e)}),t)},Ft=function(n,e){return Bt(n,(function(n){return ye(n,e)}))},jt=function(n,e){return Ce(e,n)};function Wt(n,e,t,r,o){return n(t,r)?O.some(t):d(o)&&o(t)?O.none():e(t,r,o)}var zt=function(n,e,t){var r=n.dom,o=d(t)?t:T;while(r.parentNode){r=r.parentNode;var u=be.fromDom(r);if(e(u))return O.some(u);if(o(u))break}return O.none()},Ht=function(n,e,t){var r=function(n,e){return e(n)};return Wt(r,zt,n,e,t)},Ut=function(n,e){var t=function(n){return e(be.fromDom(n))},r=K(n.dom.childNodes,t);return r.map(be.fromDom)},Vt=function(n,e){var t=function(n){for(var r=0;r<n.childNodes.length;r++){var o=be.fromDom(n.childNodes[r]);if(e(o))return O.some(o);var u=t(n.childNodes[r]);if(u.isSome())return u}return O.none()};return t(n.dom)},Kt=function(n,e,t){return zt(n,(function(n){return ye(n,e)}),t)},$t=function(n,e){return Ut(n,(function(n){return ye(n,e)}))},qt=function(n,e){return xe(e,n)},Xt=function(n,e,t){var r=function(n,e){return ye(n,e)};return Wt(r,Kt,n,e,t)},Yt=function(n,e,t){if(!(o(t)||a(t)||m(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")},Gt=function(n,e,t){Yt(n.dom,e,t)},Jt=function(n,e){var t=n.dom;Pe(e,(function(n,e){Yt(t,e,n)}))},Qt=function(n,e){Pe(e,(function(e,t){e.fold((function(){er(n,t)}),(function(e){Yt(n.dom,t,e)}))}))},Zt=function(n,e){var t=n.dom.getAttribute(e);return null===t?void 0:t},nr=function(n,e){return O.from(Zt(n,e))},er=function(n,e){n.dom.removeAttribute(e)},tr=function(n){return U(n.dom.attributes,(function(n,e){return n[e.name]=e.value,n}),{})},rr=function(n,e,t){return void 0===t&&(t=y),n.exists((function(n){return t(n,e)}))},or=function(n){for(var e=[],t=function(n){e.push(n)},r=0;r<n.length;r++)n[r].each(t);return e},ur=function(n,e,t){return n.isSome()&&e.isSome()?O.some(t(n.getOrDie(),e.getOrDie())):O.none()},ir=function(n,e){return void 0!==n&&null!==n?e(n):O.none()},cr=function(n){return n.bind(b)},ar=function(n,e){return n?O.some(e):O.none()},lr=function(n){return void 0!==n.style&&d(n.style.getPropertyValue)},fr=function(n,e,t){if(!o(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);lr(n)&&n.style.setProperty(e,t)},sr=function(n,e){lr(n)&&n.style.removeProperty(e)},dr=function(n,e,t){var r=n.dom;fr(r,e,t)},mr=function(n,e){var t=n.dom;Pe(e,(function(n,e){fr(t,e,n)}))},gr=function(n,e){var t=n.dom,r=window.getComputedStyle(t),o=r.getPropertyValue(e);return""!==o||Et(n)?o:pr(t,e)},pr=function(n,e){return lr(n)?n.style.getPropertyValue(e):""},vr=function(n,e){var t=n.dom,r=pr(t,e);return O.from(r).filter((function(n){return n.length>0}))},hr=function(n,e){var t=n.dom;sr(t,e),rr(nr(n,"style").map(Dn),"")&&er(n,"style")},br=function(n,e){var t=n.dom,r=e.dom;lr(t)&&lr(r)&&(r.style.cssText=t.style.cssText)},yr=function(n,e,t){return void 0===t&&(t=0),nr(n,e).map((function(n){return parseInt(n,10)})).getOr(t)},wr=function(n,e){return yr(n,e,1)},Cr=function(n){return st("col")(n)?yr(n,"span",1)>1:wr(n,"colspan")>1},xr=function(n){return wr(n,"rowspan")>1},Tr=function(n,e){return parseInt(gr(n,e),10)},Sr=h(10),Rr=h(10),Dr=function(n,e){return Ar(n,e,S)},Ar=function(n,e,t){return X(wt(n),(function(n){return ye(n,e)?t(n)?[n]:[]:Ar(n,e,t)}))},kr=function(n,e,t){if(void 0===t&&(t=T),t(e))return O.none();if(I(n,rt(e)))return O.some(e);var r=function(n){return ye(n,"table")||t(n)};return Kt(e,n.join(","),r)},Or=function(n,e){return kr(["td","th"],n,e)},Pr=function(n){return Dr(n,"th,td")},Er=function(n){return ye(n,"colgroup")?Ft(n,"col"):X(Ir(n),(function(n){return Ft(n,"col")}))},Mr=function(n,e){return Xt(n,"table",e)},Nr=function(n){return Dr(n,"tr")},Ir=function(n){return Mr(n).fold(h([]),(function(n){return Ft(n,"colgroup")}))},Br=function(n,e){return L(n,(function(n){if("colgroup"===rt(n)){var t=L(Er(n),(function(n){var e=yr(n,"span",1);return qe(n,1,e)}));return Ge(n,t,"colgroup")}t=L(Pr(n),(function(n){var e=yr(n,"rowspan",1),t=yr(n,"colspan",1);return qe(n,e,t)}));return Ge(n,t,e(n))}))},_r=function(n){return pt(n).map((function(n){var e=rt(n);return Ve(e)?e:"tbody"})).getOr("tbody")},Lr=function(n){var e=Nr(n),t=Ir(n),r=un(un([],t,!0),e,!0);return Br(r,_r)},Fr=function(n,e){return Br(n,(function(){return e}))},jr=function(n,e,t){var r=n.cells,o=r.slice(0,e),u=r.slice(e),i=o.concat(t).concat(u);return Hr(n,i)},Wr=function(n,e,t){return jr(n,e,[t])},zr=function(n,e,t){var r=n.cells;r[e]=t},Hr=function(n,e){return Ze(n.element,e,n.section,n.isNew)},Ur=function(n,e){var t=n.cells,r=L(t,e);return Ze(n.element,r,n.section,n.isNew)},Vr=function(n,e){return n.cells[e]},Kr=function(n,e){return Vr(n,e).element},$r=function(n){return n.cells.length},qr=function(n){var e=W(n,(function(n){return"colgroup"===n.section}));return{rows:e.fail,cols:e.pass}},Xr=function(n,e,t){var r=L(n.cells,t);return Ze(e(n.element),r,n.section,!0)},Yr="data-snooker-locked-cols",Gr=function(n){return nr(n,Yr).bind((function(n){return O.from(n.match(/\d+/g))})).map((function(n){return J(n,S)}))},Jr=function(n){var e=U(qr(n).rows,(function(n,e){return F(e.cells,(function(e,t){e.isLocked&&(n[t]=!0)})),n}),{}),t=_e(e,(function(n,e){return parseInt(e,10)}));return Z(t)},Qr=function(n,e){return n+","+e},Zr=function(n,e,t){return O.from(n.access[Qr(e,t)])},no=function(n,e,t){var r=eo(n,(function(n){return t(e,n.element)}));return r.length>0?O.some(r[0]):O.none()},eo=function(n,e){var t=X(n.all,(function(n){return n.cells}));return z(t,e)},to=function(n){var e={},t=0;return F(n.cells,(function(n){var r=n.colspan;_(r,(function(o){var u=t+o;e[u]=et(n.element,r,u)})),t+=r})),e},ro=function(n){var e={},t=[],r=en(n).map((function(n){return n.element})).bind(Mr),o=r.bind(Gr).getOr({}),u=0,i=0,c=0,a=W(n,(function(n){return"colgroup"===n.section})),l=a.pass,f=a.fail;F(f,(function(n){var r=[];F(n.cells,(function(n){var t=0;while(void 0!==e[Qr(c,t)])t++;for(var u=ze(o,t.toString()),a=Ye(n.element,n.rowspan,n.colspan,c,t,u),l=0;l<n.colspan;l++)for(var f=0;f<n.rowspan;f++){var s=c+f,d=t+l,m=Qr(s,d);e[m]=a,i=Math.max(i,d+1)}r.push(a)})),u++,t.push(Ge(n.element,r,n.section)),c++}));var s=tn(l).map((function(n){var e=to(n),t=tt(n.element,Le(e));return{colgroups:[t],columns:e}})).getOrThunk((function(){return{colgroups:[],columns:{}}})),d=s.columns,m=s.colgroups,g=Ke(u,i);return{grid:g,access:e,all:t,columns:d,colgroups:m}},oo=function(n){var e=Lr(n);return ro(e)},uo=function(n){return X(n.all,(function(n){return n.cells}))},io=function(n){return Le(n.columns)},co=function(n){return ke(n.columns).length>0},ao=function(n,e){return O.from(n.columns[e])},lo={fromTable:oo,generate:ro,getAt:Zr,findItem:no,filterItems:eo,justCells:uo,justColumns:io,hasColumns:co,getColumnAt:ao},fo=function(n,e){var t=e.column,r=e.column+e.colspan-1,o=e.row,u=e.row+e.rowspan-1;return t<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&u>=n.startRow},so=function(n,e){return e.column>=n.startCol&&e.column+e.colspan-1<=n.finishCol&&e.row>=n.startRow&&e.row+e.rowspan-1<=n.finishRow},mo=function(n,e){for(var t=!0,r=w(so,e),o=e.startRow;o<=e.finishRow;o++)for(var u=e.startCol;u<=e.finishCol;u++)t=t&&lo.getAt(n,o,u).exists(r);return t?O.some(e):O.none()},go=function(n,e){return nt(Math.min(n.row,e.row),Math.min(n.column,e.column),Math.max(n.row+n.rowspan-1,e.row+e.rowspan-1),Math.max(n.column+n.colspan-1,e.column+e.colspan-1))},po=function(n,e,t){var r=lo.findItem(n,e,Te),o=lo.findItem(n,t,Te);return r.bind((function(n){return o.map((function(e){return go(n,e)}))}))},vo=function(n,e,t){return po(n,e,t).bind((function(e){return mo(n,e)}))},ho=function(n,e,t,r){return lo.findItem(n,e,Te).bind((function(e){var o=t>0?e.row+e.rowspan-1:e.row,u=r>0?e.column+e.colspan-1:e.column,i=lo.getAt(n,o+t,u+r);return i.map((function(n){return n.element}))}))},bo=function(n,e,t){return po(n,e,t).map((function(e){var t=lo.filterItems(n,w(fo,e));return L(t,(function(n){return n.element}))}))},yo=function(n,e){var t=function(n,e){return De(e,n)};return lo.findItem(n,e,t).map((function(n){return n.element}))},wo=function(n,e,t){return Mr(n).bind((function(r){var o=So(r);return ho(o,n,e,t)}))},Co=function(n,e,t){var r=So(n);return bo(r,e,t)},xo=function(n,e,t,r,o){var u=So(n),i=Te(n,t)?O.some(e):yo(u,e),c=Te(n,o)?O.some(r):yo(u,r);return i.bind((function(n){return c.bind((function(e){return bo(u,n,e)}))}))},To=function(n,e,t){var r=So(n);return vo(r,e,t)},So=lo.fromTable,Ro=function(n,e){var t=pt(n);t.each((function(t){t.dom.insertBefore(e.dom,n.dom)}))},Do=function(n,e){var t=yt(n);t.fold((function(){var t=pt(n);t.each((function(n){ko(n,e)}))}),(function(n){Ro(n,e)}))},Ao=function(n,e){var t=xt(n);t.fold((function(){ko(n,e)}),(function(t){n.dom.insertBefore(e.dom,t.dom)}))},ko=function(n,e){n.dom.appendChild(e.dom)},Oo=function(n,e,t){Ct(n,t).fold((function(){ko(n,e)}),(function(n){Ro(n,e)}))},Po=function(n,e){Ro(n,e),ko(e,n)},Eo=function(n,e){F(e,(function(e){Ro(n,e)}))},Mo=function(n,e){F(e,(function(t,r){var o=0===r?n:e[r-1];Do(o,t)}))},No=function(n,e){F(e,(function(e){ko(n,e)}))},Io=function(n){n.dom.textContent="",F(wt(n),(function(n){Bo(n)}))},Bo=function(n){var e=n.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},_o=function(n){var e=wt(n);e.length>0&&Eo(n,e),Bo(n)},Lo=function(n,e){var t=function(t){if(!n(t))throw new Error("Can only get "+e+" value of a "+e+" node");return r(t).getOr("")},r=function(e){return n(e)?O.from(e.dom.nodeValue):O.none()},o=function(t,r){if(!n(t))throw new Error("Can only set raw "+e+" value of a "+e+" node");t.dom.nodeValue=r};return{get:t,getOption:r,set:o}},Fo=Lo(at,"text"),jo=function(n){return Fo.get(n)},Wo=function(n){return Fo.getOption(n)},zo=function(n,e){return Fo.set(n,e)},Ho=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Uo(){var n=function(n){return be.fromDom(n.dom.cloneNode(!1))},e=function(n){return mt(n).dom},t=function(n){return!!ct(n)&&("body"===rt(n)||I(Ho,rt(n)))},r=function(n){return!!ct(n)&&I(["br","img","hr","input"],rt(n))},o=function(n){return ct(n)&&"false"===Zt(n,"contenteditable")},u=function(n,e){return n.dom.compareDocumentPosition(e.dom)},i=function(n,e){var t=tr(n);Jt(e,t)},c=function(n){var e=rt(n);return I(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},a=function(n){return ct(n)?nr(n,"lang"):O.none()};return{up:h({selector:Kt,closest:Xt,predicate:zt,all:ht}),down:h({selector:jt,predicate:_t}),styles:h({get:gr,getRaw:vr,set:dr,remove:hr}),attrs:h({get:Zt,set:Gt,remove:er,copyTo:i}),insert:h({before:Ro,after:Do,afterAll:Mo,append:ko,appendAll:No,prepend:Ao,wrap:Po}),remove:h({unwrap:_o,remove:Bo}),create:h({nu:be.fromTag,clone:n,text:be.fromText}),query:h({comparePosition:u,prevSibling:bt,nextSibling:yt}),property:h({children:wt,name:rt,parent:pt,document:e,isText:at,isComment:it,isElement:ct,isSpecial:c,getLanguage:a,getText:jo,setText:zo,isBoundary:t,isEmptyTag:r,isNonEditable:o}),eq:Te,is:Ae}}var Vo=function(n,e,t,r){var o=t[0],u=t.slice(1);return r(n,e,o,u)},Ko=function(n,e,t){return t.length>0?Vo(n,e,t,$o):O.none()},$o=function(n,e,t,r){var o=e(n,t);return H(r,(function(t,r){var o=e(n,r);return qo(n,t,o)}),o)},qo=function(n,e,t){return e.bind((function(e){return t.filter(w(n.eq,e))}))},Xo=function(n,e){return w(n.eq,e)},Yo=function(n,e,t,r){void 0===r&&(r=T);var o=[e].concat(n.up().all(e)),u=[t].concat(n.up().all(t)),i=function(n){var e=$(n,r);return e.fold((function(){return n}),(function(e){return n.slice(0,e+1)}))},c=i(o),a=i(u),l=K(c,(function(e){return B(a,Xo(n,e))}));return{firstpath:c,secondpath:a,shared:l}},Go=Ko,Jo=Yo,Qo=Uo(),Zo=function(n,e){return Go(Qo,(function(e,t){return n(t)}),e)},nu=function(n,e,t){return Jo(Qo,n,e,t)},eu=function(n){return Kt(n,"table")},tu=function(n,e,t){var r=function(n){return function(e){return void 0!==t&&t(e)||Te(e,n)}};return Te(n,e)?O.some({boxes:O.some([n]),start:n,finish:e}):eu(n).bind((function(o){return eu(e).bind((function(u){if(Te(o,u))return O.some({boxes:Co(o,n,e),start:n,finish:e});if(De(o,u)){var i=Lt(e,"td,th",r(o)),c=i.length>0?i[i.length-1]:e;return O.some({boxes:xo(o,n,o,e,u),start:n,finish:c})}if(De(u,o)){i=Lt(n,"td,th",r(u));var a=i.length>0?i[i.length-1]:n;return O.some({boxes:xo(u,n,o,e,u),start:n,finish:a})}return nu(n,e).shared.bind((function(i){return Xt(i,"table",t).bind((function(t){var i=Lt(e,"td,th",r(t)),c=i.length>0?i[i.length-1]:e,a=Lt(n,"td,th",r(t)),l=a.length>0?a[a.length-1]:n;return O.some({boxes:xo(t,n,o,e,u),start:l,finish:c})}))}))}))}))},ru=function(n,e){var t=jt(n,e);return t.length>0?O.some(t):O.none()},ou=function(n,e){return K(n,(function(n){return ye(n,e)}))},uu=function(n,e,t){return qt(n,e).bind((function(e){return qt(n,t).bind((function(n){return Zo(eu,[e,n]).map((function(t){return{first:e,last:n,table:t}}))}))}))},iu=function(n,e){return Kt(n,"table").bind((function(t){return qt(t,e).bind((function(e){return tu(e,n).bind((function(n){return n.boxes.map((function(e){return{boxes:e,start:n.start,finish:n.finish}}))}))}))}))},cu=function(n,e,t,r,o){return ou(n,o).bind((function(n){return wo(n,e,t).bind((function(n){return iu(n,r)}))}))},au=function(n,e){return ru(n,e)},lu=function(n,e,t){return uu(n,e,t).bind((function(e){var t=function(e){return Te(n,e)},r="thead,tfoot,tbody,table",o=Kt(e.first,r,t),u=Kt(e.last,r,t);return o.bind((function(n){return u.bind((function(t){return Te(n,t)?To(e.table,e.first,e.last):O.none()}))}))}))},fu=function(n){if(!i(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var e=[],t={};return F(n,(function(r,o){var u=ke(r);if(1!==u.length)throw new Error("one and only one name per case");var c=u[0],a=r[c];if(void 0!==t[c])throw new Error("duplicate key detected:"+c);if("cata"===c)throw new Error("cannot have a case named cata (sorry)");if(!i(a))throw new Error("case arguments must be an array");e.push(c),t[c]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var u=t.length;if(u!==a.length)throw new Error("Wrong number of arguments to case "+c+". Expected "+a.length+" ("+a+"), got "+u);var i=function(n){var r=ke(n);if(e.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+r.join(","));var o=Y(e,(function(n){return I(r,n)}));if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+e.join(", "));return n[c].apply(null,t)};return{fold:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+e.length);var u=e[o];return u.apply(null,t)},match:i,log:function(n){console.log(n,{constructors:e,constructor:c,params:t})}}}})),t},su={generate:fu},du=su.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),mu=function(n,e,t,r){return n.fold(e,t,r)},gu=du.none,pu=du.multiple,vu=du.single,hu=function(n,e,t){var r=function(){return au(n(),t).fold((function(){return e().fold(gu,vu)}),(function(n){return pu(n)}))};return{get:r}},bu=tinymce.util.Tools.resolve("tinymce.PluginManager"),yu=function(n,e){return be.fromDom(n.dom.cloneNode(e))},wu=function(n){return yu(n,!1)},Cu=function(n){return yu(n,!0)},xu=function(n,e){var t=be.fromTag(e),r=tr(n);return Jt(t,r),t},Tu=function(n,e){var t=xu(n,e),r=wt(Cu(n));return No(t,r),t},Su=function(n,e){var t=xu(n,e);Ro(n,t);var r=wt(n);return No(t,r),Bo(n),t},Ru=function(n,e){var t=function(e,t){if(!m(t)&&!t.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+t);var r=e.dom;lr(r)&&(r.style[n]=t+"px")},r=function(t){var r=e(t);if(r<=0||null===r){var o=gr(t,n);return parseFloat(o)||0}return r},o=r,u=function(n,e){return U(e,(function(e,t){var r=gr(n,t),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o}),0)},i=function(n,e,t){var r=u(n,t),o=e>r?e-r:0;return o};return{set:t,get:r,getOuter:o,aggregate:u,max:i}},Du=function(){var n=ue().browser;return n.isIE()||n.isEdge()},Au=function(n,e){return On(n).getOr(e)},ku=function(n,e,t){return Au(gr(n,e),t)},Ou=function(n){return gr(n,"box-sizing")},Pu=function(n,e,t,r){var o=ku(n,"padding-"+t,0),u=ku(n,"padding-"+r,0),i=ku(n,"border-"+t+"-width",0),c=ku(n,"border-"+r+"-width",0);return e-o-u-i-c},Eu=function(n,e){var t=n.dom,r=t.getBoundingClientRect().height||t.offsetHeight;return"border-box"===e?r:Pu(n,r,"top","bottom")},Mu=function(n,e){var t=n.dom,r=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===e?r:Pu(n,r,"left","right")},Nu=function(n){return Du()?Eu(n,Ou(n)):ku(n,"height",n.dom.offsetHeight)},Iu=function(n){return Du()?Mu(n,Ou(n)):ku(n,"width",n.dom.offsetWidth)},Bu=function(n){return Mu(n,"content-box")},_u=Ru("width",(function(n){return n.dom.offsetWidth})),Lu=function(n){return _u.get(n)},Fu=function(n){return _u.getOuter(n)},ju=Bu,Wu=Iu,zu=function(n,e){void 0===e&&(e=S);var t=n.grid,r=_(t.columns,b),o=_(t.rows,b);return L(r,(function(t){var r=function(){return X(o,(function(e){return lo.getAt(n,e,t).filter((function(n){return n.column===t})).toArray()}))},u=function(n){return 1===n.colspan&&e(n.element)},i=function(){return lo.getAt(n,0,t)};return Hu(r,u,i)}))},Hu=function(n,e,t){var r=n(),o=K(r,e),u=o.orThunk((function(){return O.from(r[0]).orThunk(t)}));return u.map((function(n){return n.element}))},Uu=function(n){var e=n.grid,t=_(e.rows,b),r=_(e.columns,b);return L(t,(function(e){var t=function(){return X(r,(function(t){return lo.getAt(n,e,t).filter((function(n){return n.row===e})).fold(h([]),(function(n){return[n]}))}))},o=function(n){return 1===n.rowspan},u=function(){return lo.getAt(n,e,0)};return Hu(t,o,u)}))},Vu=function(n,e){if(e<0||e>=n.length-1)return O.none();var t=n[e].fold((function(){var t=G(n.slice(0,e));return rn(t,(function(n,e){return n.map((function(n){return{value:n,delta:e+1}}))}))}),(function(n){return O.some({value:n,delta:0})})),r=n[e+1].fold((function(){var t=n.slice(e+1);return rn(t,(function(n,e){return n.map((function(n){return{value:n,delta:e+1}}))}))}),(function(n){return O.some({value:n,delta:1})}));return t.bind((function(n){return r.map((function(e){var t=e.delta+n.delta;return Math.abs(e.value-n.value)/t}))}))},Ku=function(n,e){return function(t){return"rtl"===$u(t)?e:n}},$u=function(n){return"rtl"===gr(n,"direction")?"rtl":"ltr"},qu=Ru("height",(function(n){var e=n.dom;return Et(n)?e.getBoundingClientRect().height:e.offsetHeight})),Xu=function(n){return qu.get(n)},Yu=function(n){return qu.getOuter(n)},Gu=Nu,Ju=function(n,e){var t=function(t,r){return Ju(n+t,e+r)};return{left:n,top:e,translate:t}},Qu=Ju,Zu=function(n){var e=n.getBoundingClientRect();return Qu(e.left,e.top)},ni=function(n,e){return void 0!==n?n:void 0!==e?e:0},ei=function(n){var e=n.dom.ownerDocument,t=e.body,r=e.defaultView,o=e.documentElement;if(t===n.dom)return Qu(t.offsetLeft,t.offsetTop);var u=ni(null===r||void 0===r?void 0:r.pageYOffset,o.scrollTop),i=ni(null===r||void 0===r?void 0:r.pageXOffset,o.scrollLeft),c=ni(o.clientTop,t.clientTop),a=ni(o.clientLeft,t.clientLeft);return ti(n).translate(i-a,u-c)},ti=function(n){var e=n.dom,t=e.ownerDocument,r=t.body;return r===e?Qu(r.offsetLeft,r.offsetTop):Et(n)?Zu(e):Qu(0,0)},ri=function(n,e){return{row:n,y:e}},oi=function(n,e){return{col:n,x:e}},ui=function(n){var e=ei(n);return e.left+Fu(n)},ii=function(n){return ei(n).left},ci=function(n,e){return oi(n,ii(e))},ai=function(n,e){return oi(n,ui(e))},li=function(n){return ei(n).top},fi=function(n,e){return ri(n,li(e))},si=function(n,e){return ri(n,li(e)+Yu(e))},di=function(n,e,t){if(0===t.length)return[];var r=L(t.slice(1),(function(e,t){return e.map((function(e){return n(t,e)}))})),o=t[t.length-1].map((function(n){return e(t.length-1,n)}));return r.concat([o])},mi=function(n){return-n},gi={delta:b,positions:function(n){return di(fi,si,n)},edge:li},pi={delta:b,edge:ii,positions:function(n){return di(ci,ai,n)}},vi={delta:mi,edge:ui,positions:function(n){return di(ai,ci,n)}},hi=Ku(pi,vi),bi={delta:function(n,e){return hi(e).delta(n,e)},positions:function(n,e){return hi(e).positions(n,e)},edge:function(n){return hi(n).edge(n)}},yi={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},wi=function(){var n="[0-9]+",e="[+-]?"+n,t="[eE]"+e,r="\\.",o=function(n){return"(?:"+n+")?"},u=["Infinity",n+r+o(n)+o(t),r+n+o(t),n+o(t)].join("|"),i="[+-]?(?:"+u+")";return new RegExp("^("+i+")(.*)$")}(),Ci=function(n,e){return B(e,(function(e){return B(yi[e],(function(e){return n===e}))}))},xi=function(n,e){var t=O.from(wi.exec(n));return t.bind((function(n){var t=Number(n[1]),r=n[2];return Ci(r,e)?O.some({value:t,unit:r}):O.none()}))},Ti=/(\d+(\.\d+)?)%/,Si=/(\d+(\.\d+)?)px|em/,Ri=st("col"),Di=function(n,e,t){var r=vt(n).getOrThunk((function(){return Nt(dt(n))}));return e(n)/t(r)*100},Ai=function(n,e){dr(n,"width",e+"px")},ki=function(n,e){dr(n,"width",e+"%")},Oi=function(n,e){dr(n,"height",e+"px")},Pi=function(n){return Gu(n)+"px"},Ei=function(n,e,t,r){var o=Mr(n).map((function(n){var r=t(n);return Math.floor(e/100*r)})).getOr(e);return r(n,o),o},Mi=function(n,e,t,r){var o=parseFloat(n);return Sn(n,"%")&&"table"!==rt(e)?Ei(e,o,t,r):o},Ni=function(n){var e=Pi(n);return e?Mi(e,n,Xu,Oi):Xu(n)},Ii=function(n,e,t){var r=t(n),o=wr(n,e);return r/o},Bi=function(n,e){return vr(n,e).orThunk((function(){return nr(n,e).map((function(n){return n+"px"}))}))},_i=function(n){return Bi(n,"width")},Li=function(n){return Bi(n,"height")},Fi=function(n){return Di(n,Lu,ju)},ji=function(n){return Ri(n)?Lu(n):Wu(n)},Wi=function(n){return Ii(n,"rowspan",Ni)},zi=function(n){var e=_i(n);return e.bind((function(n){return xi(n,["fixed","relative","empty"])}))},Hi=function(n,e,t){dr(n,"width",e+t)},Ui=function(n){return Lu(n)+"px"},Vi=function(n){return Di(n,Lu,ju)+"%"},Ki=function(n){return _i(n).exists((function(n){return Ti.test(n)}))},$i=function(n){return _i(n).exists((function(n){return Si.test(n)}))},qi=function(n){return _i(n).isNone()},Xi=h(Ti),Yi=st("col"),Gi=function(n){return _i(n).getOrThunk((function(){return ji(n)+"px"}))},Ji=function(n){return Li(n).getOrThunk((function(){return Wi(n)+"px"}))},Qi=function(n){return L(lo.justColumns(n),(function(n){return O.from(n.element)}))},Zi=function(n){var e=ue().browser,t=e.isChrome()||e.isFirefox();return!Yi(n)||t},nc=function(n,e,t,r,o,u){return n.filter(r).fold((function(){return u(Vu(t,e))}),(function(n){return o(n)}))},ec=function(n,e,t,r){var o=zu(n),u=lo.hasColumns(n)?Qi(n):o,i=[O.some(bi.edge(e))].concat(L(bi.positions(o,e),(function(n){return n.map((function(n){return n.x}))}))),c=C(Cr);return L(u,(function(n,e){return nc(n,e,i,c,(function(n){if(Zi(n))return t(n);var u=ir(o[e],b);return nc(u,e,i,c,(function(n){return r(O.some(Lu(n)))}),r)}),r)}))},tc=function(n){return n.map((function(n){return n+"px"})).getOr("")},rc=function(n,e){return ec(n,e,Gi,tc)},oc=function(n,e,t){return ec(n,e,Fi,(function(n){return n.fold((function(){return t.minCellWidth()}),(function(n){return n/t.pixelWidth()*100}))}))},uc=function(n,e,t){return ec(n,e,ji,(function(n){return n.getOrThunk(t.minCellWidth)}))},ic=function(n,e,t,r,o){var u=Uu(n),i=[O.some(t.edge(e))].concat(L(t.positions(u,e),(function(n){return n.map((function(n){return n.y}))})));return L(u,(function(n,e){return nc(n,e,i,C(xr),r,o)}))},cc=function(n,e,t){return ic(n,e,t,Wi,(function(n){return n.getOrThunk(Rr)}))},ac=function(n,e,t){return ic(n,e,t,Ji,tc)},lc=function(n,e){return function(){return Et(n)?e(n):parseFloat(vr(n,"width").getOr("0"))}},fc=function(n){var e=lc(n,Lu),t=h(0),r=function(e,t){return uc(e,n,t)};return{width:e,pixelWidth:e,getWidths:r,getCellDelta:t,singleColumnWidth:h([0]),minCellWidth:t,setElementWidth:g,adjustTableWidth:g,isRelative:!0,label:"none"}},sc=function(n){var e=lc(n,(function(n){return parseFloat(Vi(n))})),t=lc(n,Lu),r=function(n){return n/t()*100},o=function(n,e){return[100-n]},u=function(){return Sr()/t()*100},i=function(t){var r=e(),o=t/100*r,u=r+o;ki(n,u)},c=function(e,t){return oc(e,n,t)};return{width:e,pixelWidth:t,getWidths:c,getCellDelta:r,singleColumnWidth:o,minCellWidth:u,setElementWidth:ki,adjustTableWidth:i,isRelative:!0,label:"percent"}},dc=function(n){var e=lc(n,Lu),t=b,r=function(n,e){var t=Math.max(Sr(),n+e);return[t-n]},o=function(t){var r=e()+t;Ai(n,r)},u=function(e,t){return uc(e,n,t)};return{width:e,pixelWidth:e,getWidths:u,getCellDelta:t,singleColumnWidth:r,minCellWidth:Sr,setElementWidth:Ai,adjustTableWidth:o,isRelative:!1,label:"pixel"}},mc=function(n,e){var t=Xi().exec(e);return null!==t?sc(n):dc(n)},gc=function(n){var e=_i(n);return e.fold((function(){return fc(n)}),(function(e){return mc(n,e)}))},pc={getTableSize:gc,pixelSize:dc,percentageSize:sc,noneSize:fc},vc=function(n,e,t,r,o,u){return{minRow:n,minCol:e,maxRow:t,maxCol:r,allCells:o,selectedCells:u}},hc=function(n,e){var t=n.grid.columns,r=n.grid.rows,o=r,u=t,i=0,c=0,a=[],l=[];return Pe(n.access,(function(n){if(a.push(n),e(n)){l.push(n);var t=n.row,r=t+n.rowspan-1,f=n.column,s=f+n.colspan-1;t<o?o=t:r>i&&(i=r),f<u?u=f:s>c&&(c=s)}})),vc(o,u,i,c,a,l)},bc=function(n,e,t){var r=n[t].element,o=be.fromTag("td");ko(o,be.fromTag("br"));var u=e?ko:Ao;u(r,o)},yc=function(n,e,t,r){for(var o=e.grid.columns,u=e.grid.rows,i=0;i<u;i++)for(var c=!1,a=0;a<o;a++)if(!(i<t.minRow||i>t.maxRow||a<t.minCol||a>t.maxCol)){var l=lo.getAt(e,i,a).filter(r).isNone();l?bc(n,c,i):c=!0}},wc=function(n,e,t,r){Pe(t.columns,(function(n){(n.column<e.minCol||n.column>e.maxCol)&&Bo(n.element)}));var o=z(Dr(n,"tr"),(function(n){return 0===n.dom.childElementCount}));F(o,Bo),e.minCol!==e.maxCol&&e.minRow!==e.maxRow||F(Dr(n,"th,td"),(function(n){er(n,"rowspan"),er(n,"colspan")})),er(n,Yr),er(n,"data-snooker-col-series");var u=pc.getTableSize(n);u.adjustTableWidth(r)},Cc=function(n,e,t,r){if(0===r.minCol&&e.grid.columns===r.maxCol+1)return 0;var o=uc(e,n,t),u=U(o,(function(n,e){return n+e}),0),i=U(o.slice(r.minCol,r.maxCol+1),(function(n,e){return n+e}),0),c=i/u*t.pixelWidth(),a=c-t.pixelWidth();return t.getCellDelta(a)},xc=function(n,e){var t=function(n){return ye(n.element,e)},r=Cu(n),o=Lr(r),u=pc.getTableSize(n),i=lo.generate(o),c=hc(i,t),a="th:not("+e+"),td:not("+e+")",l=Ar(r,"th,td",(function(n){return ye(n,a)}));F(l,Bo),yc(o,i,c,t);var f=lo.fromTable(n),s=Cc(n,f,u,c);return wc(r,c,i,s),r},Tc=" ",Sc=function(n){return"img"===rt(n)?1:Wo(n).fold((function(){return wt(n).length}),(function(n){return n.length}))},Rc=function(n){return Wo(n).filter((function(n){return 0!==n.trim().length||n.indexOf(Tc)>-1})).isSome()},Dc=["img","br"],Ac=function(n){var e=Rc(n);return e||I(Dc,rt(n))},kc=function(n){return Vt(n,Ac)},Oc=function(n){return Pc(n,Ac)},Pc=function(n,e){var t=function(n){for(var r=wt(n),o=r.length-1;o>=0;o--){var u=r[o];if(e(u))return O.some(u);var i=t(u);if(i.isSome())return i}return O.none()};return t(n)},Ec={scope:["row","col"]},Mc=function(n){return function(){var e=be.fromTag("td",n.dom);return ko(e,be.fromTag("br",n.dom)),e}},Nc=function(n){return function(){return be.fromTag("col",n.dom)}},Ic=function(n){return function(){return be.fromTag("colgroup",n.dom)}},Bc=function(n){return function(){return be.fromTag("tr",n.dom)}},_c=function(n,e,t){var r=Tu(n,e);return Pe(t,(function(n,e){null===n?er(r,e):Gt(r,e,n)})),r},Lc=function(n){return n},Fc=function(n,e,t){var r=kc(n);return r.map((function(r){var o=t.join(","),u=Lt(r,o,(function(e){return Te(e,n)}));return H(u,(function(n,e){var t=wu(e);return er(t,"contenteditable"),ko(n,t),t}),e)})).getOr(e)},jc=function(n,e){Pe(Ec,(function(t,r){return nr(n,r).filter((function(n){return I(t,n)})).each((function(n){return Gt(e,r,n)}))}))},Wc=function(n,e,t){var r=function(n,e){br(n.element,e),hr(e,"height"),1!==n.colspan&&hr(e,"width")},o=function(o){var u=be.fromTag(rt(o.element),e.dom),i=t.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=i.length>0?Fc(o.element,u,i):u;return ko(c,be.fromTag("br")),r(o,u),jc(o.element,u),n(o.element,u),u},u=function(t){var o=be.fromTag(rt(t.element),e.dom);return r(t,o),n(t.element,o),o};return{col:u,colgroup:Ic(e),row:Bc(e),cell:o,replace:_c,colGap:Nc(e),gap:Mc(e)}},zc=function(n){return{col:Nc(n),colgroup:Ic(n),row:Bc(n),cell:Mc(n),replace:Lc,colGap:Nc(n),gap:Mc(n)}},Hc=function(n,e){var t=e||document,r=t.createElement("div");return r.innerHTML=n,wt(be.fromDom(r))},Uc=function(n){return L(n,be.fromDom)},Vc=function(n){return n.nodeName.toLowerCase()},Kc=function(n){return be.fromDom(n.getBody())},$c=function(n){return n.getBoundingClientRect().width},qc=function(n){return n.getBoundingClientRect().height},Xc=function(n){return function(e){return Te(e,Kc(n))}},Yc=function(n){return n?n.replace(/px$/,""):""},Gc=function(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n},Jc=function(n){er(n,"data-mce-style");var e=function(n){return er(n,"data-mce-style")};F(Pr(n),e),F(Er(n),e),F(Nr(n),e)},Qc=function(n,e){var t=n.dom.getStyle(e,"width")||n.dom.getAttrib(e,"width");return O.from(t).filter(An)},Zc=function(n){return/^(\d+(\.\d+)?)%$/.test(n)},na=function(n){return/^(\d+(\.\d+)?)px$/.test(n)},ea=function(n){return be.fromDom(n.selection.getStart())},ta=function(n){return be.fromDom(n.selection.getEnd())},ra=function(n){return mu(n.get(),h([]),b,Q)},oa=function(n){var e=function(n,e){return nr(n,e).exists((function(n){return parseInt(n,10)>1}))},t=function(n){return e(n,"rowspan")||e(n,"colspan")},r=ra(n);return r.length>0&&Y(r,t)?O.some(r):O.none()},ua=function(n,e,t){return mu(e.get(),O.none,(function(e){return e.length<=1?O.none():lu(n,t.firstSelectedSelector,t.lastSelectedSelector).map((function(n){return{bounds:n,cells:e}}))}),O.none)},ia="data-mce-selected",ca="td["+ia+"],th["+ia+"]",aa="["+ia+"]",la="data-mce-first-selected",fa="td["+la+"],th["+la+"]",sa="data-mce-last-selected",da="td["+sa+"],th["+sa+"]",ma=aa,ga={selected:ia,selectedSelector:ca,firstSelected:la,firstSelectedSelector:fa,lastSelected:sa,lastSelectedSelector:da},pa=function(n){return{element:n,mergable:O.none(),unmergable:O.none(),selection:[n]}},va=function(n,e,t){return{element:t,mergable:ua(e,n,ga),unmergable:oa(n),selection:ra(n)}},ha=function(n,e,t){return{element:n,clipboard:e,generators:t}},ba=function(n,e,t,r){return{selection:ra(n),clipboard:t,generators:r}},ya=function(n){return Mr(n).bind((function(n){return au(n,ga.firstSelectedSelector)})).fold(h(n),(function(n){return n[0]}))},wa=function(n){return function(e,t){var r=rt(e),o="col"===r||"colgroup"===r?ya(e):e;return Xt(o,n,t)}},Ca=wa("th,td,caption"),xa=wa("th,td"),Ta=function(n){return ra(n)},Sa=function(n,e){var t=xa(n),r=t.bind((function(n){return Mr(n)})).map((function(n){return Nr(n)}));return ur(t,r,(function(n,t){return z(t,(function(t){return B(Uc(t.dom.cells),(function(t){return"1"===Zt(t,e)||Te(t,n)}))}))})).getOr([])},Ra=function(n){return Mr(n[0]).map((function(n){var e=xc(n,ma);return Jc(e),[e]}))},Da=function(n,e){return L(e,(function(e){return n.selection.serializer.serialize(e.dom,{})})).join("")},Aa=function(n){return L(n,(function(n){return n.dom.innerText})).join("")},ka=function(n,e,t){n.on("BeforeGetContent",(function(t){var r=function(e){t.preventDefault(),Ra(e).each((function(e){t.content="text"===t.format?Aa(e):Da(n,e)}))};!0===t.selection&&mu(e.get(),g,r,g)})),n.on("BeforeSetContent",(function(r){if(!0===r.selection&&!0===r.paste){var o=Ta(e);en(o).each((function(e){Mr(e).each((function(o){var u=z(Hc(r.content),(function(n){return"meta"!==rt(n)})),i=st("table");if(1===u.length&&i(u[0])){r.preventDefault();var c=be.fromDom(n.getDoc()),a=zc(c),l=ha(e,u[0],a);t.pasteCells(o,l).each((function(){n.focus()}))}}))}))}}))},Oa=su.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Pa=on({},Oa),Ea=function(n,e){return 0===n.length?Pa.none():1===n.length?Pa.only(0):0===e?Pa.left(0,1):e===n.length-1?Pa.right(e-1,e):e>0&&e<n.length-1?Pa.middle(e-1,e,e+1):Pa.none()},Ma=function(n,e,t,r,o){var u=n.slice(0),i=Ea(n,e),c=h(L(u,h(0))),a=function(n){return r.singleColumnWidth(u[n],t)},l=function(n,e){return o.calcLeftEdgeDeltas(u,n,e,t,r.minCellWidth(),r.isRelative)},f=function(n,e,i){return o.calcMiddleDeltas(u,n,e,i,t,r.minCellWidth(),r.isRelative)},s=function(n,e){return o.calcRightEdgeDeltas(u,n,e,t,r.minCellWidth(),r.isRelative)};return i.fold(c,a,l,f,s)},Na=function(n,e,t){for(var r=0,o=n;o<e;o++)r+=void 0!==t[o]?t[o]:0;return r},Ia=function(n,e){var t=lo.justCells(n);return L(t,(function(n){var t=Na(n.column,n.column+n.colspan,e);return{element:n.element,width:t,colspan:n.colspan}}))},Ba=function(n,e){var t=lo.justColumns(n);return L(t,(function(n,t){return{element:n.element,width:e[t],colspan:n.colspan}}))},_a=function(n,e){var t=lo.justCells(n);return L(t,(function(n){var t=Na(n.row,n.row+n.rowspan,e);return{element:n.element,height:t,rowspan:n.rowspan}}))},La=function(n,e){return L(n.all,(function(n,t){return{element:n.element,height:e[t]}}))},Fa=function(n){return H(n,(function(n,e){return n+e}),0)},ja=function(n,e){return lo.hasColumns(n)?Ba(n,e):Ia(n,e)},Wa=function(n,e,t){var r=ja(n,e);F(r,(function(n){t.setElementWidth(n.element,n.width)}))},za=function(n,e,t,r,o){var u=lo.fromTable(n),i=o.getCellDelta(e),c=o.getWidths(u,o),a=t===u.grid.columns-1,l=r.clampTableDelta(c,t,i,o.minCellWidth(),a),f=Ma(c,t,l,o,r),s=L(f,(function(n,e){return n+c[e]}));Wa(u,s,o),r.resizeTable(o.adjustTableWidth,l,a)},Ha=function(n,e,t,r){var o=lo.fromTable(n),u=cc(o,n,r),i=L(u,(function(n,r){return t===r?Math.max(e+n,Rr()):n})),c=_a(o,i),a=La(o,i);F(a,(function(n){Oi(n.element,n.height)})),F(c,(function(n){Oi(n.element,n.height)}));var l=Fa(i);Oi(n,l)},Ua=function(n,e,t,r,o){var u=lo.generate(e),i=r.getWidths(u,r),c=r.pixelWidth(),a=o.calcRedestributedWidths(i,c,t.pixelDelta,r.isRelative),l=a.newSizes,f=a.delta;Wa(u,l,r),r.adjustTableWidth(f)},Va=function(n,e,t,r){var o=lo.generate(e),u=r.getWidths(o,r);Wa(o,u,r)},Ka=function(n){return L(n,h(0))},$a=function(n,e,t,r,o){return o(n.slice(0,e)).concat(r).concat(o(n.slice(t)))},qa=function(n){return function(e,t,r,o){if(n(r)){var u=Math.max(o,e[t]-Math.abs(r)),i=Math.abs(u-e[t]);return r>=0?i:-i}return r}},Xa=qa((function(n){return n<0})),Ya=qa(S),Ga=function(){var n=function(n,e,t,r,o){var u=Xa(n,e,r,o);return $a(n,e,t+1,[u,0],Ka)},e=function(n,e,t,r){var o=(100+t)/100,u=Math.max(r,(n[e]+t)/o);return L(n,(function(n,t){var r=t===e?u:n/o;return r-n}))},t=function(t,r,o,u,i,c){return c?e(t,r,u,i):n(t,r,o,u,i)},r=function(n,e,r,o,u,i,c){return t(n,r,o,u,i,c)},o=function(n,e){return n(e)},u=function(n,t,r,o,u,i){if(i)return e(n,r,o,u);var c=Xa(n,r,o,u);return Ka(n.slice(0,r)).concat([c])},i=function(n,e,t,r){if(r){var o=e+t,u=o/e,i=L(n,(function(n){return n/u}));return{delta:100*u-100,newSizes:i}}return{delta:t,newSizes:n}};return{resizeTable:o,clampTableDelta:Xa,calcLeftEdgeDeltas:t,calcMiddleDeltas:r,calcRightEdgeDeltas:u,calcRedestributedWidths:i}},Ja=function(){var n=function(n,e,t,r,o){var u=r>=0?t:e,i=Ya(n,u,r,o);return $a(n,e,t+1,[i,-i],Ka)},e=function(e,t,r,o,u,i){return n(e,r,o,u,i)},t=function(n,e,t){t&&n(e)},r=function(n,e,t,r,o,u){if(u)return Ka(n);var i=r/n.length;return L(n,h(i))},o=function(n,e,t,r,o){if(o){if(t>=0)return t;var u=U(n,(function(n,e){return n+e-r}),0);return Math.max(-u,t)}return Xa(n,e,t,r)},u=function(n,e,t,r){return{delta:0,newSizes:n}};return{resizeTable:t,clampTableDelta:o,calcLeftEdgeDeltas:n,calcMiddleDeltas:e,calcRightEdgeDeltas:r,calcRedestributedWidths:u}},Qa=function(n,e){var t=O.from(n.dom.documentElement).map(be.fromDom).getOr(n);return{parent:h(t),view:h(n),origin:h(Qu(0,0)),isResizable:e}},Za=function(n,e,t){var r=function(){return ei(e)};return{parent:h(e),view:h(n),origin:r,isResizable:t}},nl=function(n,e,t){return{parent:h(e),view:h(n),origin:h(Qu(0,0)),isResizable:t}},el={only:Qa,detached:Za,body:nl},tl=su.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),rl=function(n,e,t){var r=t.substring(0,t.length-n.length),o=parseFloat(r);return r===o.toString()?e(o):tl.invalid(t)},ol=function(n){return Sn(n,"%")?rl("%",tl.percent,n):Sn(n,"px")?rl("px",tl.pixels,n):tl.invalid(n)},ul=on(on({},tl),{from:ol}),il=function(n,e){return L(n,(function(n){var t=ul.from(n);return t.fold((function(){return n}),(function(n){var t=n/e*100;return t+"%"}),(function(n){return n+"%"}))}))},cl=function(n,e,t){var r=t/e;return L(n,(function(n){var e=ul.from(n);return e.fold((function(){return n}),(function(n){return n*r+"px"}),(function(n){return n/100*t+"px"}))}))},al=function(n,e){var t=n.fold((function(){return h("")}),(function(n){var t=n/e;return h(t+"px")}),(function(){var n=100/e;return h(n+"%")}));return _(e,t)},ll=function(n,e,t){return n.fold((function(){return e}),(function(n){return cl(e,t,n)}),(function(n){return il(e,t)}))},fl=function(n,e,t){var r=ul.from(t),o=Y(n,(function(n){return"0px"===n}))?al(r,n.length):ll(r,n,e);return gl(o)},sl=function(n,e){return 0===n.length?e:H(n,(function(n,e){return ul.from(e).fold(h(0),b,b)+n}),0)},dl=function(n,e){var t=Math.floor(n);return{value:t+e,remainder:n-t}},ml=function(n,e){return ul.from(n).fold(h(n),(function(n){return n+e+"px"}),(function(n){return n+e+"%"}))},gl=function(n){if(0===n.length)return n;var e=H(n,(function(n,e){var t=ul.from(e).fold((function(){return{value:e,remainder:0}}),(function(n){return dl(n,"px")}),(function(n){return{value:n+"%",remainder:0}}));return{output:[t.value].concat(n.output),remainder:n.remainder+t.remainder}}),{output:[],remainder:0}),t=e.output;return t.slice(0,t.length-1).concat([ml(t[t.length-1],Math.round(e.remainder))])},pl=ul.from,vl=function(n,e,t){F(e,(function(e){var r=n.slice(e.column,e.colspan+e.column),o=sl(r,Sr());dr(e.element,"width",o+t)}))},hl=function(n,e,t){F(e,(function(e,r){var o=sl([n[r]],Sr());dr(e.element,"width",o+t)}))},bl=function(n,e,t,r){F(t,(function(e){var t=n.slice(e.row,e.rowspan+e.row),o=sl(t,Rr());dr(e.element,"height",o+r)})),F(e,(function(e,t){dr(e.element,"height",n[t])}))},yl=function(n){return pl(n).fold(h("px"),h("px"),h("%"))},wl=function(n,e,t){var r=lo.fromTable(n),o=r.all,u=lo.justCells(r),i=lo.justColumns(r);e.each((function(e){var t=yl(e),o=Lu(n),c=rc(r,n),a=fl(c,o,e);lo.hasColumns(r)?hl(a,i,t):vl(a,u,t),dr(n,"width",e)})),t.each((function(e){var t=yl(e),i=Xu(n),c=ac(r,n,gi),a=fl(c,i,e);bl(a,o,u,t),dr(n,"height",e)}))},Cl=Ki,xl=$i,Tl=qi,Sl=function(n){var e=lo.fromTable(n);return e.grid},Rl=function(n){var e=[],t=function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");e.push(n)},r=function(n){e=z(e,(function(e){return e!==n}))},o=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o={};F(n,(function(n,e){o[n]=t[e]})),F(e,(function(n){n(o)}))};return{bind:t,unbind:r,trigger:o}},Dl=function(n){var e=Ee(n,(function(n){return{bind:n.bind,unbind:n.unbind}})),t=Ee(n,(function(n){return n.trigger}));return{registry:e,trigger:t}},Al=function(n,e){var t=null,r=function(){c(t)||(clearTimeout(t),t=null)},o=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];r(),t=setTimeout((function(){t=null,n.apply(null,o)}),e)};return{cancel:r,throttle:o}},kl=function(n){return n.slice(0).sort()},Ol=function(n,e){throw new Error("All required keys ("+kl(n).join(", ")+") were not specified. Specified keys were: "+kl(e).join(", ")+".")},Pl=function(n){throw new Error("Unsupported keys for object: "+kl(n).join(", "))},El=function(n,e){if(!i(e))throw new Error("The "+n+" fields must be an array. Was: "+e+".");F(e,(function(e){if(!o(e))throw new Error("The value "+e+" in the "+n+" fields was not a string.")}))},Ml=function(n,e){throw new Error("All values need to be of type: "+e+". Keys ("+kl(n).join(", ")+") were not.")},Nl=function(n){var e=kl(n),t=K(e,(function(n,t){return t<e.length-1&&n===e[t+1]}));t.each((function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+e.join(", ")+"].")}))},Il=function(n,e){return Bl(n,e,{validate:d,label:"function"})},Bl=function(n,e,t){if(0===e.length)throw new Error("You must specify at least one required field.");return El("required",e),Nl(e),function(r){var o=ke(r),u=Y(e,(function(n){return I(o,n)}));u||Ol(e,o),n(e,o);var i=z(e,(function(n){return!t.validate(r[n],n)}));return i.length>0&&Ml(i,t.label),r}},_l=function(n,e){var t=z(e,(function(e){return!I(n,e)}));t.length>0&&Pl(t)},Ll=function(n){return Il(_l,n)},Fl=Ll(["compare","extract","mutate","sink"]),jl=Ll(["element","start","stop","destroy"]),Wl=Ll(["forceDrop","drop","move","delayDrop"]),zl=function(){var n=O.none(),e=function(){n=O.none()},t=function(e,t){var r=n.map((function(n){return e.compare(n,t)}));return n=O.some(t),r},r=function(n,e){var r=e.extract(n);r.each((function(n){var r=t(e,n);r.each((function(n){o.trigger.move(n)}))}))},o=Dl({move:Rl(["info"])});return{onEvent:r,reset:e,events:o.registry}},Hl=function(){var n=Dl({move:Rl(["info"])});return{onEvent:g,reset:g,events:n.registry}},Ul=function(){var n=Hl(),e=zl(),t=n,r=function(){t.reset(),t=e},o=function(){t.reset(),t=n},u=function(n,e){t.onEvent(n,e)},i=function(){return t===e};return{on:r,off:o,isOn:i,onEvent:u,events:e.events}},Vl=function(n,e,t){var r=!1,o=Dl({start:Rl([]),stop:Rl([])}),u=Ul(),i=function(){m.stop(),u.isOn()&&(u.off(),o.trigger.stop())},c=Al(i,200),a=function(n){m.start(n),u.on(),o.trigger.start()},l=function(n){c.cancel(),u.onEvent(n,e)};u.events.move.bind((function(t){e.mutate(n,t.info)}));var f=function(){r=!0},s=function(){r=!1},d=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r&&n.apply(null,e)}},m=e.sink(Wl({forceDrop:i,drop:d(i),move:d(l),delayDrop:d(c.throttle)}),t),g=function(){m.destroy()};return{element:m.element,go:a,on:f,off:s,destroy:g,events:o.registry}},Kl=function(n,e,t,r,o,u,i){return{target:n,x:e,y:t,stop:r,prevent:o,kill:u,raw:i}},$l=function(n){var e=be.fromDom(Ot(n).getOr(n.target)),t=function(){return n.stopPropagation()},r=function(){return n.preventDefault()},o=p(r,t);return Kl(e,n.clientX,n.clientY,t,r,o,n)},ql=function(n,e){return function(t){n(t)&&e($l(t))}},Xl=function(n,e,t,r,o){var u=ql(t,r);return n.dom.addEventListener(e,u,o),{unbind:w(Gl,n,e,u,o)}},Yl=function(n,e,t,r){return Xl(n,e,t,r,!1)},Gl=function(n,e,t,r){n.dom.removeEventListener(e,t,r)},Jl=S,Ql=function(n,e,t){return Yl(n,e,Jl,t)},Zl=$l,nf=function(n,e){var t=Zt(n,e);return void 0===t||""===t?[]:t.split(" ")},ef=function(n,e,t){var r=nf(n,e),o=r.concat([t]);return Gt(n,e,o.join(" ")),!0},tf=function(n,e,t){var r=z(nf(n,e),(function(n){return n!==t}));return r.length>0?Gt(n,e,r.join(" ")):er(n,e),!1},rf=function(n){return void 0!==n.dom.classList},of=function(n){return nf(n,"class")},uf=function(n,e){return ef(n,"class",e)},cf=function(n,e){return tf(n,"class",e)},af=function(n,e){rf(n)?n.dom.classList.add(e):uf(n,e)},lf=function(n){var e=rf(n)?n.dom.classList:of(n);0===e.length&&er(n,"class")},ff=function(n,e){if(rf(n)){var t=n.dom.classList;t.remove(e)}else cf(n,e);lf(n)},sf=function(n,e){return rf(n)&&n.dom.classList.contains(e)},df=function(n){var e=n.replace(/\./g,"-"),t=function(n){return e+"-"+n};return{resolve:t}},mf=df("ephox-dragster"),gf=mf.resolve,pf=function(n){var e=on({layerClass:gf("blocker")},n),t=be.fromTag("div");Gt(t,"role","presentation"),mr(t,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),af(t,gf("blocker")),af(t,e.layerClass);var r=h(t),o=function(){Bo(t)};return{element:r,destroy:o}},vf=function(n,e){return Qu(e.left-n.left,e.top-n.top)},hf=function(n){return O.some(Qu(n.x,n.y))},bf=function(n,e){n.mutate(e.left,e.top)},yf=function(n,e){var t=pf(e),r=Ql(t.element(),"mousedown",n.forceDrop),o=Ql(t.element(),"mouseup",n.drop),u=Ql(t.element(),"mousemove",n.move),i=Ql(t.element(),"mouseout",n.delayDrop),c=function(){t.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()},a=function(n){ko(n,t.element())},l=function(){Bo(t.element())};return jl({element:t.element,start:a,stop:l,destroy:c})},wf=Fl({compare:vf,extract:hf,sink:yf,mutate:bf}),Cf=function(n,e){void 0===e&&(e={});var t=void 0!==e.mode?e.mode:wf;return Vl(n,t,e)},xf=function(n){return Xt(n,"[contenteditable]")},Tf=function(n,e){return void 0===e&&(e=!1),!ue().browser.isIE()&&Et(n)?n.dom.isContentEditable:xf(n).fold(h(e),(function(n){return"true"===Sf(n)}))},Sf=function(n){return n.dom.contentEditable},Rf=df("ephox-snooker"),Df=Rf.resolve,Af=function(){var n=Dl({drag:Rl(["xDelta","yDelta"])}),e=function(e,t){n.trigger.drag(e,t)};return{mutate:e,events:n.registry}},kf=function(){var n=Dl({drag:Rl(["xDelta","yDelta","target"])}),e=O.none(),t=Af();t.events.drag.bind((function(t){e.each((function(e){n.trigger.drag(t.xDelta,t.yDelta,e)}))}));var r=function(n){e=O.some(n)},o=function(){return e};return{assign:r,get:o,mutate:t.mutate,events:n.registry}},Of=function(n,e,t,r,o){var u=be.fromTag("div");return mr(u,{position:"absolute",left:e-r/2+"px",top:t+"px",height:o+"px",width:r+"px"}),Jt(u,{"data-column":n,role:"presentation"}),u},Pf=function(n,e,t,r,o){var u=be.fromTag("div");return mr(u,{position:"absolute",left:e+"px",top:t-o/2+"px",height:o+"px",width:r+"px"}),Jt(u,{"data-row":n,role:"presentation"}),u},Ef=Df("resizer-bar"),Mf=Df("resizer-rows"),Nf=Df("resizer-cols"),If=7,Bf=function(n,e){return X(n.all,(function(n,t){return e(n.element)?[t]:[]}))},_f=function(n,e){var t=[];return _(n.grid.columns,(function(r){var o=lo.getColumnAt(n,r).map((function(n){return n.element}));o.forall(e)&&t.push(r)})),z(t,(function(t){var r=lo.filterItems(n,(function(n){return n.column===t}));return Y(r,(function(n){return e(n.element)}))}))},Lf=function(n){var e=jt(n.parent(),"."+Ef);F(e,Bo)},Ff=function(n,e,t){var r=n.origin();F(e,(function(e){e.each((function(e){var o=t(r,e);af(o,Ef),ko(n.parent(),o)}))}))},jf=function(n,e,t,r){Ff(n,e,(function(n,e){var o=Of(e.col,e.x-n.left,t.top-n.top,If,r);return af(o,Nf),o}))},Wf=function(n,e,t,r){Ff(n,e,(function(n,e){var o=Pf(e.row,t.left-n.left,e.y-n.top,r,If);return af(o,Mf),o}))},zf=function(n,e,t,r,o){var u=ei(t),i=e.isResizable,c=r.length>0?gi.positions(r,t):[],a=c.length>0?Bf(n,i):[],l=z(c,(function(n,e){return B(a,(function(n){return e===n}))}));Wf(e,l,u,Fu(t));var f=o.length>0?bi.positions(o,t):[],s=f.length>0?_f(n,i):[],d=z(f,(function(n,e){return B(s,(function(n){return e===n}))}));jf(e,d,u,Yu(t))},Hf=function(n,e){if(Lf(n),n.isResizable(e)){var t=lo.fromTable(e),r=Uu(t),o=zu(t);zf(t,n,e,r,o)}},Uf=function(n,e){var t=jt(n.parent(),"."+Ef);F(t,e)},Vf=function(n){Uf(n,(function(n){dr(n,"display","none")}))},Kf=function(n){Uf(n,(function(n){dr(n,"display","block")}))},$f=function(n){return sf(n,Mf)},qf=function(n){return sf(n,Nf)},Xf=Df("resizer-bar-dragging"),Yf=function(n){var e=kf(),t=Cf(e,{}),r=O.none(),o=function(n,e){return O.from(Zt(n,e))};e.events.drag.bind((function(n){o(n.target,"data-row").each((function(e){var t=Tr(n.target,"top");dr(n.target,"top",t+n.yDelta+"px")})),o(n.target,"data-column").each((function(e){var t=Tr(n.target,"left");dr(n.target,"left",t+n.xDelta+"px")}))}));var u=function(n,e){var t=Tr(n,e),r=yr(n,"data-initial-"+e,0);return t-r};t.events.stop.bind((function(){e.get().each((function(e){r.each((function(t){o(e,"data-row").each((function(n){var r=u(e,"top");er(e,"data-initial-top"),m.trigger.adjustHeight(t,r,parseInt(n,10))})),o(e,"data-column").each((function(n){var r=u(e,"left");er(e,"data-initial-left"),m.trigger.adjustWidth(t,r,parseInt(n,10))})),Hf(n,t)}))}))}));var i=function(r,o){m.trigger.startAdjust(),e.assign(r),Gt(r,"data-initial-"+o,Tr(r,o)),af(r,Xf),dr(r,"opacity","0.2"),t.go(n.parent())},c=Ql(n.parent(),"mousedown",(function(n){$f(n.target)&&i(n.target,"top"),qf(n.target)&&i(n.target,"left")})),a=function(e){return Te(e,n.view())},l=function(n){return Xt(n,"table",a).filter(Tf)},f=Ql(n.view(),"mouseover",(function(e){l(e.target).fold((function(){Et(e.target)&&Lf(n)}),(function(e){r=O.some(e),Hf(n,e)}))})),s=function(){c.unbind(),f.unbind(),t.destroy(),Lf(n)},d=function(e){Hf(n,e)},m=Dl({adjustHeight:Rl(["table","delta","row"]),adjustWidth:Rl(["table","delta","column"]),startAdjust:Rl([])});return{destroy:s,refresh:d,on:t.on,off:t.off,hideBars:w(Vf,n),showBars:w(Kf,n),events:m.registry}},Gf=function(n,e,t){var r=gi,o=bi,u=Yf(n),i=Dl({beforeResize:Rl(["table","type"]),afterResize:Rl(["table","type"]),startDrag:Rl([])});return u.events.adjustHeight.bind((function(n){var e=n.table;i.trigger.beforeResize(e,"row");var t=r.delta(n.delta,e);Ha(e,t,n.row,r),i.trigger.afterResize(e,"row")})),u.events.startAdjust.bind((function(n){i.trigger.startDrag()})),u.events.adjustWidth.bind((function(n){var r=n.table;i.trigger.beforeResize(r,"col");var u=o.delta(n.delta,r),c=t(r);za(r,u,n.column,e,c),i.trigger.afterResize(r,"col")})),{on:u.on,off:u.off,hideBars:u.hideBars,showBars:u.showBars,destroy:u.destroy,events:i.registry}},Jf={create:Gf},Qf=function(n,e){return n.fire("newrow",{node:e})},Zf=function(n,e){return n.fire("newcell",{node:e})},ns=function(n,e,t,r,o){n.fire("ObjectResizeStart",{target:e,width:t,height:r,origin:o})},es=function(n,e,t,r,o){n.fire("ObjectResized",{target:e,width:t,height:r,origin:o})},ts=function(n,e,t,r,o){n.fire("TableSelectionChange",{cells:e,start:t,finish:r,otherCells:o})},rs=function(n){n.fire("TableSelectionClear")},os=function(n,e,t){n.fire("TableModified",on(on({},t),{table:e}))},us={structure:!1,style:!0},is={structure:!0,style:!1},cs={structure:!0,style:!0},as="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",ls={"border-collapse":"collapse",width:"100%"},fs=_(5,(function(n){var e=n+1+"px";return{title:e,value:e}})),ss=L(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(function(n){return{title:n,value:n.toLowerCase()}})),ds=function(n){var e;if(Ns(n)){var t=n.dom,r=null!==(e=t.getParent(n.selection.getStart(),t.isBlock))&&void 0!==e?e:n.getBody(),o=ju(be.fromDom(r));return on(on({},ls),{width:o+"px"})}return Is(n)?Be(ls,(function(n,e){return"width"!==e})):ls},ms={border:"1"},gs="preservetable",ps=function(n){return n.getParam("table_sizing_mode","auto")},vs=function(n){return n.getParam("table_responsive_width")},hs=function(n){return n.getParam("table_border_widths",fs,"array")},bs=function(n){return n.getParam("table_border_styles",ss,"array")},ys=function(n){return n.getParam("table_default_attributes",ms,"object")},ws=function(n){return n.getParam("table_default_styles",ds(n),"object")},Cs=function(n){return n.getParam("table_resize_bars",!0,"boolean")},xs=function(n){return n.getParam("table_tab_navigation",!0,"boolean")},Ts=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},Ss=function(n){return n.getParam("table_row_advtab",!0,"boolean")},Rs=function(n){return n.getParam("table_advtab",!0,"boolean")},Ds=function(n){return n.getParam("table_appearance_options",!0,"boolean")},As=function(n){return n.getParam("table_grid",!0,"boolean")},ks=function(n){return n.getParam("table_style_by_css",!1,"boolean")},Os=function(n){return n.getParam("table_cell_class_list",[],"array")},Ps=function(n){return n.getParam("table_row_class_list",[],"array")},Es=function(n){return n.getParam("table_class_list",[],"array")},Ms=function(n){return"relative"===ps(n)||!0===vs(n)},Ns=function(n){return"fixed"===ps(n)||!1===vs(n)},Is=function(n){return"responsive"===ps(n)},Bs=function(n){return n.getParam("table_toolbar",as)},_s=function(n){return n.getParam("table_use_colgroups",!1,"boolean")},Ls=function(n){var e="section",t=n.getParam("table_header_type",e,"string"),r=["section","cells","sectionCells","auto"];return I(r,t)?t:e},Fs=function(n){var e=["preservetable","resizetable"],t=n.getParam("table_column_resizing",gs,"string");return K(e,(function(n){return n===t})).getOr(gs)},js=function(n){return"preservetable"===Fs(n)},Ws=function(n){return"resizetable"===Fs(n)},zs=function(n){var e=n.getParam("table_clone_elements");return o(e)?O.some(e.split(/[ ,]/)):Array.isArray(e)?O.some(e):O.none()},Hs=function(n){var e=n.getParam("object_resizing",!0);return o(e)?"table"===e:e},Us=function(n){return n.getParam("table_background_color_map",[],"array")},Vs=function(n){return n.getParam("table_border_color_map",[],"array")},Ks=function(n,e){return Ms(n)?pc.percentageSize(e):Ns(n)?pc.pixelSize(e):pc.getTableSize(e)},$s=function(n){er(n,"width")},qs=function(n){var e=Vi(n);wl(n,O.some(e),O.none()),$s(n)},Xs=function(n){var e=Ui(n);wl(n,O.some(e),O.none()),$s(n)},Ys=function(n){hr(n,"width");var e=Er(n),t=e.length>0?e:Pr(n);F(t,(function(n){hr(n,"width"),$s(n)})),$s(n)},Gs=qs,Js=Xs,Qs=Ys,Zs=function(n){var e=lo.fromTable(n);lo.hasColumns(e)||F(Pr(n),(function(n){var e=gr(n,"width");dr(n,"width",e),er(n,"width")}))},nd=function(){var n=be.fromTag("div");return mr(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),ko(Mt(),n),n},ed=function(n,e){return n.inline?el.body(Kc(n),nd(),e):el.only(be.fromDom(n.getDoc()),e)},td=function(n,e){n.inline&&Bo(e.parent())},rd="bar-",od=function(n){return"false"!==Zt(n,"data-mce-resize")},ud=function(n){var e,t,r=O.none(),o=O.none(),u=O.none(),i=function(n){return"TABLE"===n.nodeName},c=function(){return o},a=function(){return u.getOr(el.only(be.fromDom(n.getBody()),od))},l=function(e){return Ks(n,e)},f=function(){return js(n)?Ja():Ga()},s=function(n){return Sl(n).columns},d=function(r,o,u){var i=Sn(o,"e");if(""===t&&Gs(r),u!==e&&""!==t){dr(r,"width",t);var c=f(),a=l(r),d=js(n)||i?s(r)-1:0;za(r,u-e,d,c,a)}else if(Zc(t)){var m=parseFloat(t.replace("%","")),g=u*m/e;dr(r,"width",g+"%")}na(t)&&Zs(r)},m=function(){o.each((function(n){n.destroy()})),u.each((function(e){td(n,e)}))};return n.on("init",(function(){var e=ed(n,od);if(u=O.some(e),Hs(n)&&Cs(n)){var t=f(),i=Jf.create(e,t,l);i.on(),i.events.startDrag.bind((function(e){r=O.some(n.selection.getRng())})),i.events.beforeResize.bind((function(e){var t=e.table.dom;ns(n,t,$c(t),qc(t),rd+e.type)})),i.events.afterResize.bind((function(e){var t=e.table,o=t.dom;Jc(t),r.each((function(e){n.selection.setRng(e),n.focus()})),es(n,o,$c(o),qc(o),rd+e.type),n.undoManager.add()})),o=O.some(i)}})),n.on("ObjectResizeStart",(function(r){var o=r.target;if(i(o)){var u=be.fromDom(o);F(n.dom.select(".mce-clonedresizable"),(function(e){n.dom.addClass(e,"mce-"+Fs(n)+"-columns")})),!xl(u)&&Ns(n)?Js(u):!Cl(u)&&Ms(n)&&Gs(u),Tl(u)&&Tn(r.origin,rd)&&Gs(u),e=r.width,t=Is(n)?"":Qc(n,o).getOr("")}})),n.on("ObjectResized",(function(e){var t=e.target;if(i(t)){var r=be.fromDom(t),o=e.origin;Tn(o,"corner-")&&d(r,o,e.width),Jc(r),os(n,r.dom,us)}})),n.on("SwitchMode",(function(){c().each((function(e){n.mode.isReadOnly()?e.hideBars():e.showBars()}))})),{lazyResize:c,lazyWire:a,destroy:m}},id=function(n,e){return{element:n,offset:e}},cd=function(n,e,t){return n.property().isText(e)&&0===n.property().getText(e).trim().length||n.property().isComment(e)?t(e).bind((function(e){return cd(n,e,t).orThunk((function(){return O.some(e)}))})):O.none()},ad=function(n,e){if(n.property().isText(e))return n.property().getText(e).length;var t=n.property().children(e);return t.length},ld=function(n,e){var t=cd(n,e,n.query().prevSibling).getOr(e);if(n.property().isText(t))return id(t,ad(n,t));var r=n.property().children(t);return r.length>0?ld(n,r[r.length-1]):id(t,ad(n,t))},fd=ld,sd=Uo(),dd=function(n){return fd(sd,n)},md=function(n,e){var t=wr(n,"colspan");if(1===t){var r=zi(n);r.each((function(t){var r=t.value/2;Hi(n,r,t.unit),Hi(e,r,t.unit)}))}},gd=st("th"),pd=function(n){return Y(n,(function(n){return gd(n.element)}))},vd=function(n,e){return n&&e?"sectionCells":n?"section":"cells"},hd=function(n){var e="thead"===n.section,t=rr(bd(n.cells),"th");return e||t?{type:"header",subType:vd(e,t)}:"tfoot"===n.section?{type:"footer"}:{type:"body"}},bd=function(n){var e=z(n,(function(n){return gd(n.element)}));return 0===e.length?O.some("td"):e.length===n.length?O.some("th"):O.none()},yd=function(n){var e=L(n,(function(n){return hd(n).type})),t=I(e,"header"),r=I(e,"footer");if(t||r){var o=I(e,"body");return!t||o||r?t||o||!r?O.none():O.some("footer"):O.some("header")}return O.some("body")},wd=function(n){return rn(n.all,(function(n){var e=hd(n);return"header"===e.type?O.from(e.subType):O.none()}))},Cd=function(n,e,t){return Qe(t(n.element,e),!0,n.isLocked)},xd=function(n,e){return n.section!==e?Ze(n.element,n.cells,e,n.isNew):n},Td=function(){return{transformRow:xd,transformCell:function(n,e,t){var r=t(n.element,e),o="td"!==rt(r)?Su(r,"td"):r;return Qe(o,n.isNew,n.isLocked)}}},Sd=function(){return{transformRow:xd,transformCell:Cd}},Rd=function(){return{transformRow:function(n,e){var t="thead"===e?"tbody":e;return xd(n,t)},transformCell:Cd}},Dd=function(){return{transformRow:b,transformCell:Cd}},Ad=function(n,e){var t=lo.fromTable(n),r=wd(t).getOr(e);switch(r){case"section":return Td();case"sectionCells":return Sd();case"cells":return Rd()}},kd={getTableSectionType:Ad,section:Td,sectionCells:Sd,cells:Rd,fallback:Dd},Od=function(n,e,t,r){t===r?er(n,e):Gt(n,e,t)},Pd=function(n,e,t){tn(Ft(n,e)).fold((function(){return Ao(n,t)}),(function(n){return Do(n,t)}))},Ed=function(n,e){var t=$t(n,e).getOrThunk((function(){var t=be.fromTag(e,dt(n).dom);return"thead"===e?Pd(n,"caption,colgroup",t):"colgroup"===e?Pd(n,"caption",t):ko(n,t),t}));return Io(t),t},Md=function(n,e){var t=[],r=[],o=function(n){return L(n,(function(n){n.isNew&&t.push(n.element);var e=n.element;return Io(e),F(n.cells,(function(n){n.isNew&&r.push(n.element),Od(n.element,"colspan",n.colspan,1),Od(n.element,"rowspan",n.rowspan,1),ko(e,n.element)})),e}))},u=function(n){return X(n,(function(n){return L(n.cells,(function(n){return Od(n.element,"span",n.colspan,1),n.element}))}))},i=function(e,t){var r=Ed(n,t),i="colgroup"===t?u:o,c=i(e);No(r,c)},c=function(e){$t(n,e).each(Bo)},a=function(n,e){n.length>0?i(n,e):c(e)},l=[],f=[],s=[],d=[];return F(e,(function(n){switch(n.section){case"thead":l.push(n);break;case"tbody":f.push(n);break;case"tfoot":s.push(n);break;case"colgroup":d.push(n);break}})),a(d,"colgroup"),a(l,"thead"),a(f,"tbody"),a(s,"tfoot"),{newRows:t,newCells:r}},Nd=function(n){return L(n,(function(n){var e=wu(n.element);return F(n.cells,(function(n){var t=Cu(n.element);Od(t,"colspan",n.colspan,1),Od(t,"rowspan",n.rowspan,1),ko(e,t)})),e}))},Id=function(n,e){return L(n,(function(n){return Vr(n,e)}))},Bd=function(n,e){return n[e]},_d=function(n,e){if(0===n.length)return 0;var t=n[0],r=$(n,(function(n){return!e(t.element,n.element)}));return r.getOr(n.length)},Ld=function(n,e,t,r){var o=Bd(n,e),u="colgroup"===o.section,i=_d(o.cells.slice(t),r),c=u?1:_d(Id(n.slice(e),t),r);return{colspan:i,rowspan:c}},Fd=function(n,e){var t=L(n,(function(n){return L(n.cells,T)})),r=function(n,e,r,o){for(var u=n;u<n+r;u++)for(var i=e;i<e+o;i++)t[u][i]=!0};return L(n,(function(o,u){var i=X(o.cells,(function(o,i){if(!1===t[u][i]){var c=Ld(n,u,i,e);return r(u,i,c.rowspan,c.colspan),[Xe(o.element,c.rowspan,c.colspan,o.isNew)]}return[]}));return Je(o.element,i,o.section,o.isNew)}))},jd=function(n,e,t){var r=[];F(n.colgroups,(function(o){for(var u=[],i=0;i<n.grid.columns;i++){var c=lo.getColumnAt(n,i).map((function(n){return Qe(n.element,t,!1)})).getOrThunk((function(){return Qe(e.colGap(),!0,!1)}));u.push(c)}r.push(Ze(o.element,u,"colgroup",t))}));for(var o=0;o<n.grid.rows;o++){for(var u=[],i=0;i<n.grid.columns;i++){var c=lo.getAt(n,o,i).map((function(n){return Qe(n.element,t,n.isLocked)})).getOrThunk((function(){return Qe(e.gap(),!0,!1)}));u.push(c)}var a=n.all[o],l=Ze(a.element,u,a.section,t);r.push(l)}return r},Wd=function(n,e){return jd(n,e,!1)},zd=function(n){return Fd(n,Te)},Hd=function(n,e){return rn(n.all,(function(n){return K(n.cells,(function(n){return Te(e,n.element)}))}))},Ud=function(n,e,t){var r=L(e.selection,(function(e){return Or(e).bind((function(e){return Hd(n,e)})).filter(t)})),o=or(r);return ar(o.length>0,o)},Vd=function(n,e,t,r,o){return function(u,i,c,a,l){var f=lo.fromTable(i),s=O.from(null===l||void 0===l?void 0:l.section).getOrThunk(kd.fallback),d=e(f,c).map((function(e){var t=Wd(f,a),r=n(t,e,Te,o(a),s),u=Jr(r.grid),i=zd(r.grid);return{info:e,grid:i,cursor:r.cursor,lockedColumns:u}}));return d.bind((function(n){var e=Md(i,n.grid),o=O.from(null===l||void 0===l?void 0:l.sizing).getOrThunk((function(){return pc.getTableSize(i)})),c=O.from(null===l||void 0===l?void 0:l.resize).getOrThunk(Ja);return t(i,n.grid,n.info,{sizing:o,resize:c,section:s}),r(i),Hf(u,i),er(i,Yr),n.lockedColumns.length>0&&Gt(i,Yr,n.lockedColumns.join(",")),O.some({cursor:n.cursor,newRows:e.newRows,newCells:e.newCells})}))}},Kd=function(n,e){return Or(e.element).bind((function(t){return Hd(n,t).map((function(n){var t=on(on({},n),{generators:e.generators,clipboard:e.clipboard});return t}))}))},$d=function(n,e){return Ud(n,e,S).map((function(n){return{cells:n,generators:e.generators,clipboard:e.clipboard}}))},qd=function(n,e){return e.mergable},Xd=function(n,e){return e.unmergable},Yd=function(n,e){return Ud(n,e,S)},Gd=function(n,e){return Ud(n,e,(function(n){return!n.isLocked}))},Jd=function(n,e){return Hd(n,e).exists((function(n){return!n.isLocked}))},Qd=function(n,e){return Y(e,(function(e){return Jd(n,e)}))},Zd=function(n,e){return qd(n,e).filter((function(e){return Qd(n,e.cells)}))},nm=function(n,e){return Xd(n,e).filter((function(e){return Qd(n,e)}))},em=function(n,e,t,r){var o=qr(n).rows;if(0===o.length)return n;for(var u=e.startRow;u<=e.finishRow;u++)for(var i=e.startCol;i<=e.finishCol;i++){var c=o[u],a=Vr(c,i).isLocked;zr(c,i,Qe(r(),!1,a))}return n},tm=function(n,e,t,r){for(var o=qr(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<$r(o[0]);c++){var a=o[i],l=Vr(a,c),f=l.element,s=t(f,e);!0===s&&!1===u?zr(a,c,Qe(r(),!0,l.isLocked)):!0===s&&(u=!1)}return n},rm=function(n,e){return U(n,(function(n,t){return B(n,(function(n){return e(n.element,t.element)}))?n:n.concat([t])}),[])},om=function(n,e,t,r){return e>0&&e<n[0].cells.length&&F(n,(function(n){var o=n.cells[e-1],u=n.cells[e],i=t(u.element,o.element);i&&zr(n,e,Qe(r(),!0,u.isLocked))})),n},um=function(n,e,t,r){var o=qr(n).rows;if(e>0&&e<o.length){var u=o[e-1].cells,i=rm(u,t);F(i,(function(n){for(var u=O.none(),i=e;i<o.length;i++)for(var c=function(e){var c=o[i],a=Vr(c,e),l=t(a.element,n.element);l&&(u.isNone()&&(u=O.some(r())),u.each((function(n){zr(c,e,Qe(n,!0,a.isLocked))})))},a=0;a<$r(o[0]);a++)c(a)}))}return n},im=function(n){var e=function(e){return im(n)},t=function(e){return im(n)},r=function(e){return im(e(n))},o=function(e){return im(n)},u=function(e){e(n)},i=function(e){return e(n)},c=function(e,t){return t(n)},a=function(e){return e(n)},l=function(e){return e(n)},f=function(){return O.some(n)};return{isValue:S,isError:T,getOr:h(n),getOrThunk:h(n),getOrDie:h(n),or:e,orThunk:t,fold:c,map:r,mapError:o,each:u,bind:i,exists:a,forall:l,toOptional:f}},cm=function(n){var e=function(n){return n()},t=function(){return x(String(n))()},r=b,o=function(n){return n()},u=function(e){return cm(n)},i=function(e){return cm(e(n))},c=function(e){return cm(n)},a=function(e,t){return e(n)};return{isValue:T,isError:S,getOr:b,getOrThunk:e,getOrDie:t,or:r,orThunk:o,fold:a,map:u,mapError:i,each:g,bind:c,exists:T,forall:S,toOptional:O.none}},am=function(n,e){return n.fold((function(){return cm(e)}),im)},lm={value:im,error:cm,fromOption:am},fm=function(n,e,t){if(n.row>=e.length||n.column>$r(e[0]))return lm.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=e.slice(n.row),o=r[0].cells.slice(n.column),u=$r(t[0]),i=t.length;return lm.value({rowDelta:r.length-i,colDelta:o.length-u})},sm=function(n,e){var t=$r(n[0]),r=$r(e[0]);return{rowDelta:0,colDelta:t-r}},dm=function(n,e){var t=n.length,r=e.length;return{rowDelta:t-r,colDelta:0}},mm=function(n,e,t,r){var o="colgroup"===e.section?t.col:t.cell;return _(n,(function(n){return Qe(o(),!0,r(n))}))},gm=function(n,e,t,r){var o=n[n.length-1];return n.concat(_(e,(function(){var n="colgroup"===o.section?t.colgroup:t.row,e=Xr(o,n,b),u=mm(e.cells.length,e,t,(function(n){return We(r,n.toString())}));return Hr(e,u)})))},pm=function(n,e,t,r){return L(n,(function(n){var o=mm(e,n,t,T);return jr(n,r,o)}))},vm=function(n,e,t){return L(n,(function(n){return U(t,(function(t,r){var o=mm(1,n,e,S)[0];return Wr(t,r,o)}),n)}))},hm=function(n,e,t){var r=e.colDelta<0?pm:b,o=e.rowDelta<0?gm:b,u=Jr(n),i=$r(n[0]),c=B(u,(function(n){return n===i-1})),a=r(n,Math.abs(e.colDelta),t,c?i-1:i),l=Jr(a);return o(a,Math.abs(e.rowDelta),t,J(l,S))},bm=function(n,e,t,r){var o=Vr(n[e],t),u=w(r,o.element),i=n[e];return n.length>1&&$r(i)>1&&(t>0&&u(Kr(i,t-1))||t<i.cells.length-1&&u(Kr(i,t+1))||e>0&&u(Kr(n[e-1],t))||e<n.length-1&&u(Kr(n[e+1],t)))},ym=function(n,e,t,r,o,u){for(var i=n.row,c=n.column,a=t.length,l=$r(t[0]),f=i+a,s=c+l+u.length,d=J(u,S),m=i;m<f;m++)for(var g=0,p=c;p<s;p++)if(d[p])g++;else{bm(e,m,p,o)&&tm(e,Kr(e[m],p),o,r.cell);var v=p-c-g,h=Vr(t[m-i],v),b=h.element,y=r.replace(b);zr(e[m],p,Qe(y,!0,h.isLocked))}return e},wm=function(n,e,t){var r=$r(e[0]),o=qr(e).cols.length+n.row,u=_(r-n.column,(function(e){return e+n.column})),i=K(u,(function(n){return Y(t,(function(e){return e!==n}))})).getOr(r-1);return{row:o,column:i}},Cm=function(n,e,t){return z(t,(function(t){return t>=n.column&&t<=$r(e[0])+n.column}))},xm=function(n,e,t,r,o){var u=Jr(e),i=wm(n,e,u),c=qr(t).rows,a=Cm(i,c,u),l=fm(i,e,c);return l.map((function(n){var t=on(on({},n),{colDelta:n.colDelta-a.length}),u=hm(e,t,r),l=Jr(u),f=Cm(i,c,l);return ym(i,u,c,r,o,f)}))},Tm=function(n,e,t,r,o){om(e,n,o,r.cell);var u=dm(t,e),i=hm(t,u,r),c=dm(e,i),a=hm(e,c,r);return L(a,(function(e,t){return jr(e,n,i[t].cells)}))},Sm=function(n,e,t,r,o){um(e,n,o,r.cell);var u=Jr(e),i=sm(e,t),c=on(on({},i),{colDelta:i.colDelta-u.length}),a=hm(e,c,r),l=qr(a),f=l.cols,s=l.rows,d=Jr(a),m=sm(t,e),g=on(on({},m),{colDelta:m.colDelta+d.length}),p=vm(t,r,d),v=hm(p,g,r);return f.concat(s.slice(0,n)).concat(v).concat(s.slice(n,s.length))},Rm=function(n,e,t,r){return Xr(n,(function(n){return r(n,t)}),e)},Dm=function(n,e,t,r,o){var u=qr(n),i=u.rows,c=u.cols,a=i.slice(0,e),l=i.slice(e),f=Rm(i[t],(function(n,t){var u=e>0&&e<i.length&&r(Kr(i[e-1],t),Kr(i[e],t)),c=u?Vr(i[e],t):Qe(o(n.element,r),!0,n.isLocked);return c}),r,o);return c.concat(a).concat([f]).concat(l)},Am=function(n,e,t,r,o,u,i){if("colgroup"!==t&&r)return Vr(n,e);var c=Vr(n,o);return Qe(i(c.element,u),!0,!1)},km=function(n,e,t,r,o){return L(n,(function(n){var u=e>0&&e<$r(n)&&r(Kr(n,e-1),Kr(n,e)),i=Am(n,e,n.section,u,t,r,o);return Wr(n,e,i)}))},Om=function(n,e){return X(n,(function(n){var t=n.cells,r=H(e,(function(n,e){return e>=0&&e<n.length?n.slice(0,e).concat(n.slice(e+1)):n}),t);return r.length>0?[Ze(n.element,r,n.section,n.isNew)]:[]}))},Pm=function(n,e,t){var r=qr(n),o=r.rows,u=r.cols;return u.concat(o.slice(0,e)).concat(o.slice(t+1))},Em=function(n,e,t,r){return void 0!==Kr(n[e],t)&&e>0&&r(Kr(n[e-1],t),Kr(n[e],t))},Mm=function(n,e,t){return e>0&&t(Kr(n,e-1),Kr(n,e))},Nm=function(n,e,t,r){return Em(n,e,t,r)||Mm(n[e],t,r)},Im=function(n,e){var t=Y(e,b)&&pd(n.cells);return t?S:function(n,t,r){var o=rt(n.element);return!("th"===o&&e[r])}},Bm=function(n,e){var t=Y(e,b)&&pd(n);return t?S:function(n,t,r){var o=rt(n.element);return!("th"===o&&e[t])}},_m=function(n,e,t,r){var o=function(n){return"row"===n?xr(e):Cr(e)},u=function(n){return o(n)?n+"group":n};if(n)return gd(e)?u(t):null;if(r&&gd(e)){var i="row"===t?"col":"row";return u(i)}return null},Lm=function(n,e){return function(t,r,o){return O.some(_m(n,t.element,"col",e[o]))}},Fm=function(n,e){return function(t,r){return O.some(_m(n,t.element,"row",e[r]))}},jm=function(n,e,t){return Qe(t(n.element,e),!0,n.isLocked)},Wm=function(n,e,t,r,o,u,i){var c=function(n){return B(e,(function(e){return t(n.element,e.element)}))};return L(n,(function(n,e){return Ur(n,(function(n,a){if(c(n)){var l=i(n,e,a)?o(n,t,r):n;return u(l,e,a).each((function(n){Qt(l.element,{scope:O.from(n)})})),l}return n}))}))},zm=function(n,e,t){return X(n,(function(r,o){return Nm(n,o,e,t)?[]:[Vr(r,e)]}))},Hm=function(n,e,t){var r=n[e];return X(r.cells,(function(r,o){return Nm(n,e,o,t)?[]:[r]}))},Um=function(n,e,t,r,o){var u=qr(n).rows,i=X(e,(function(n){return zm(u,n,r)})),c=L(n,(function(n){return pd(n.cells)})),a=Bm(i,c),l=Fm(t,c);return Wm(n,i,r,o,jm,l,a)},Vm=function(n,e,t,r,o,u,i){var c=qr(n),a=c.cols,l=c.rows,f=l[e[0]],s=X(e,(function(n){return Hm(l,n,o)})),d=L(f.cells,(function(n,e){return pd(zm(l,e,o))})),m=un([],l,!0);F(e,(function(n){m[n]=i.transformRow(l[n],t)}));var g=a.concat(m),p=Im(f,d),v=Lm(r,d);return Wm(g,s,o,u,i.transformCell,v,p)},Km=function(n,e,t,r){var o=qr(n).rows,u=L(e,(function(n){return Vr(o[n.row],n.column)}));return Wm(n,u,t,r,jm,O.none,S)},$m=function(n){var e=function(n,e){var t=B(n,(function(n){return n.column===e.column}));return t?n:n.concat([e])};return U(n,e,[]).sort((function(n,e){return n.column-e.column}))},qm=st("col"),Xm=st("colgroup"),Ym=function(n){return"tr"===rt(n)||Xm(n)},Gm=function(n){var e=yr(n,"colspan",1),t=yr(n,"rowspan",1);return{element:n,colspan:e,rowspan:t}},Jm=function(n,e){void 0===e&&(e=Gm);var t=function(e){return qm(e.element)?n.col(e):n.cell(e)},r=function(e){return Xm(e.element)?n.colgroup(e):n.row(e)},o=function(n){if(Ym(n))return r({element:n});var o=t(e(n));return u=O.some({item:n,replacement:o}),o},u=O.none(),i=function(n,e){return u.fold((function(){return o(n)}),(function(t){return e(n,t.item)?t.replacement:o(n)}))};return{getOrInit:i}},Qm=function(n){return function(e){var t=[],r=function(n,e){return K(t,(function(t){return e(t.item,n)}))},o=function(r){var o="td"===n?{scope:null}:{},u=e.replace(r,n,o);return t.push({item:r,sub:u}),u},u=function(n,e){return Ym(n)||qm(n)?n:r(n,e).fold((function(){return o(n)}),(function(t){return e(n,t.item)?t.sub:o(n)}))};return{replaceOrInit:u}}},Zm=function(n){return nr(n,"scope").map((function(n){return n.substr(0,3)}))},ng=function(n){var e=function(e){var t=Zm(e);return t.each((function(n){return Gt(e,"scope",n)})),function(){var r=n.cell({element:e,colspan:1,rowspan:1});return hr(r,"width"),hr(e,"width"),t.each((function(n){return Gt(r,"scope",n)})),r}},t=function(n){var e=function(){var e=or(L(n,Zm));if(0===e.length)return O.none();var t=e[0],r=["row","col"],o=B(e,(function(n){return n!==t&&I(r,n)}));return o?O.none():O.from(t)};return hr(n[0],"width"),e().fold((function(){return er(n[0],"scope")}),(function(e){return Gt(n[0],"scope",e+"group")})),h(n[0])};return{unmerge:e,merge:t}},eg={modification:Jm,transform:Qm,merging:ng},tg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],rg=function(n,e){var t=n.property().name(e);return I(["ol","ul"],t)},og=function(n,e){var t=n.property().name(e);return I(tg,t)},ug=function(n,e){return I(["br","img","hr","input"],n.property().name(e))},ig=Uo(),cg=function(n){return og(ig,n)},ag=function(n){return rg(ig,n)},lg=function(n){return ug(ig,n)},fg=function(n){var e=function(n){return"br"===rt(n)},t=function(n){return Y(n,(function(n){return e(n)||at(n)&&0===jo(n).trim().length}))},r=function(n){return"li"===rt(n)||zt(n,ag).isSome()},o=function(n){return yt(n).map((function(n){return!!cg(n)||!!lg(n)&&"img"!==rt(n)})).getOr(!1)},u=function(n){return Oc(n).bind((function(t){var u=o(t);return pt(t).map((function(o){return!0===u||r(o)||e(t)||cg(o)&&!Te(n,o)?[]:[be.fromTag("br")]}))})).getOr([])},i=function(){var e=X(n,(function(n){var e=wt(n);return t(e)?[]:e.concat(u(n))}));return 0===e.length?[be.fromTag("br")]:e},c=i();Io(n[0]),No(n[0],c)},sg=function(n){return Tf(n,!0)},dg=function(n){var e=Pr(n);0===e.length&&Bo(n)},mg=function(n,e){return{grid:n,cursor:e}},gg=function(n){return rn(n,(function(n){return rn(n.cells,(function(n){var e=n.element;return ar(sg(e),e)}))}))},pg=function(n,e,t){var r,o,u=qr(n).rows;return O.from(null===(o=null===(r=u[e])||void 0===r?void 0:r.cells[t])||void 0===o?void 0:o.element).filter(sg).orThunk((function(){return gg(u)}))},vg=function(n,e,t){var r=pg(n,e,t);return mg(n,r)},hg=function(n){var e=function(n,e){var t=B(n,(function(n){return n.row===e.row}));return t?n:n.concat([e])};return U(n,e,[]).sort((function(n,e){return n.row-e.row}))},bg=function(n,e,t,r){var o=e[0].row,u=hg(e),i=H(u,(function(n,e){var u=Dm(n.grid,o,e.row+n.delta,t,r.getOrInit);return{grid:u,delta:n.delta+1}}),{grid:n,delta:0}).grid;return vg(i,o,e[0].column)},yg=function(n,e,t,r){var o=hg(e),u=o[o.length-1],i=u.row+u.rowspan,c=H(o,(function(n,e){return Dm(n,i,e.row,t,r.getOrInit)}),n);return vg(c,i,e[0].column)},wg=function(n,e,t,r){var o=e.details,u=$m(o),i=u[0].column,c=H(u,(function(n,e){var o=km(n.grid,i,e.column+n.delta,t,r.getOrInit);return{grid:o,delta:n.delta+1}}),{grid:n,delta:0}).grid;return vg(c,o[0].row,i)},Cg=function(n,e,t,r){var o=e.details,u=o[o.length-1],i=u.column+u.colspan,c=$m(o),a=H(c,(function(n,e){return km(n,i,e.column,t,r.getOrInit)}),n);return vg(a,o[0].row,i)},xg=function(n,e,t,r){var o=$m(e),u=L(o,(function(n){return n.column})),i=Um(n,u,!0,t,r.replaceOrInit);return vg(i,e[0].row,e[0].column)},Tg=function(n,e,t,r){var o=Km(n,e,t,r.replaceOrInit);return vg(o,e[0].row,e[0].column)},Sg=function(n,e,t,r){var o=$m(e),u=L(o,(function(n){return n.column})),i=Um(n,u,!1,t,r.replaceOrInit);return vg(i,e[0].row,e[0].column)},Rg=function(n,e,t,r){var o=Km(n,e,t,r.replaceOrInit);return vg(o,e[0].row,e[0].column)},Dg=function(n,e){return function(t,r,o,u,i){var c=hg(r),a=L(c,(function(n){return n.row})),l=Vm(t,a,n,e,o,u.replaceOrInit,i);return vg(l,r[0].row,r[0].column)}},Ag=Dg("thead",!0),kg=Dg("tbody",!1),Og=Dg("tfoot",!1),Pg=function(n,e,t,r){var o=$m(e.details),u=Om(n,L(o,(function(n){return n.column}))),i=u.length>0?u[0].cells.length-1:0;return vg(u,o[0].row,Math.min(o[0].column,i))},Eg=function(n,e,t,r){var o=hg(e),u=Pm(n,o[0].row,o[o.length-1].row),i=u.length>0?u.length-1:0;return vg(u,Math.min(e[0].row,i),e[0].column)},Mg=function(n,e,t,r){var o=e.cells;fg(o);var u=em(n,e.bounds,t,r.merge(o));return mg(u,O.from(o[0]))},Ng=function(n,e,t,r){var o=function(n,e){return tm(n,e,t,r.unmerge(e))},u=H(e,o,n);return mg(u,O.from(e[0]))},Ig=function(n,e,t,r){var o=function(n,e){var t=lo.fromTable(n);return jd(t,e,!0)},u=o(e.clipboard,e.generators),i=$e(e.row,e.column),c=xm(i,n,u,e.generators,t);return c.fold((function(){return mg(n,O.some(e.element))}),(function(n){return vg(n,e.row,e.column)}))},Bg=function(n,e,t){var r=Fr(n,t.section),o=lo.generate(r);return jd(o,e,!0)},_g=function(n,e,t,r){var o=qr(n).rows,u=e.cells[0].column,i=o[e.cells[0].row],c=Bg(e.clipboard,e.generators,i),a=Tm(u,n,c,e.generators,t);return vg(a,e.cells[0].row,e.cells[0].column)},Lg=function(n,e,t,r){var o=qr(n).rows,u=e.cells[e.cells.length-1].column+e.cells[e.cells.length-1].colspan,i=o[e.cells[0].row],c=Bg(e.clipboard,e.generators,i),a=Tm(u,n,c,e.generators,t);return vg(a,e.cells[0].row,e.cells[0].column)},Fg=function(n,e,t,r){var o=qr(n).rows,u=e.cells[0].row,i=o[u],c=Bg(e.clipboard,e.generators,i),a=Sm(u,n,c,e.generators,t);return vg(a,e.cells[0].row,e.cells[0].column)},jg=function(n,e,t,r){var o=qr(n).rows,u=e.cells[e.cells.length-1].row+e.cells[e.cells.length-1].rowspan,i=o[e.cells[0].row],c=Bg(e.clipboard,e.generators,i),a=Sm(u,n,c,e.generators,t);return vg(a,e.cells[0].row,e.cells[0].column)},Wg=function(n,e){var t=lo.fromTable(n),r=Yd(t,e);return r.bind((function(n){var e=n[n.length-1],r=n[0].column,o=e.column+e.colspan,u=q(L(t.all,(function(n){return z(n.cells,(function(n){return n.column>=r&&n.column<o}))})));return bd(u)})).getOr("")},zg=function(n,e){var t=lo.fromTable(n),r=Yd(t,e);return r.bind(bd).getOr("")},Hg=function(n,e){var t=lo.fromTable(n),r=Yd(t,e);return r.bind((function(n){var e=n[n.length-1],r=n[0].row,o=e.row+e.rowspan,u=t.all.slice(r,o);return yd(u)})).getOr("")},Ug=function(n,e,t,r){return Va(n,e,t,r.sizing)},Vg=function(n,e,t,r){return Ua(n,e,t,r.sizing,r.resize)},Kg=function(n,e){return B(e,(function(n){return 0===n.column&&n.isLocked}))},$g=function(n,e){return B(e,(function(e){return e.column+e.colspan>=n.grid.columns&&e.isLocked}))},qg=function(n,e){var t=zu(n),r=$m(e);return U(r,(function(n,e){var r=t[e.column],o=r.map(Fu).getOr(0);return n+o}),0)},Xg=function(n){return function(e,t){return Yd(e,t).filter((function(t){var r=n?Kg:$g;return!r(e,t)})).map((function(n){return{details:n,pixelDelta:qg(e,n)}}))}},Yg=function(n,e){return Gd(n,e).map((function(e){return{details:e,pixelDelta:-qg(n,e)}}))},Gg=function(n){return function(e,t){return $d(e,t).filter((function(t){var r=n?Kg:$g;return!r(e,t.cells)}))}},Jg=eg.transform("th"),Qg=eg.transform("td"),Zg=Vd(bg,Yd,g,g,eg.modification),np=Vd(yg,Yd,g,g,eg.modification),ep=Vd(wg,Xg(!0),Vg,g,eg.modification),tp=Vd(Cg,Xg(!1),Vg,g,eg.modification),rp=Vd(Pg,Yg,Vg,dg,eg.modification),op=Vd(Eg,Yd,g,dg,eg.modification),up=Vd(xg,Gd,g,g,Jg),ip=Vd(Sg,Gd,g,g,Qg),cp=Vd(Ag,Gd,g,g,Jg),ap=Vd(kg,Gd,g,g,Qg),lp=Vd(Og,Gd,g,g,Qg),fp=Vd(Tg,Gd,g,g,Jg),sp=Vd(Rg,Gd,g,g,Qg),dp=Vd(Mg,Zd,Ug,g,eg.merging),mp=Vd(Ng,nm,Ug,g,eg.merging),gp=Vd(Ig,Kd,Ug,g,eg.modification),pp=Vd(_g,Gg(!0),g,g,eg.modification),vp=Vd(Lg,Gg(!1),g,g,eg.modification),hp=Vd(Fg,$d,g,g,eg.modification),bp=Vd(jg,$d,g,g,eg.modification),yp=Wg,wp=zg,Cp=Hg,xp=function(n,e,t){var r=function(n){return"table"===rt(Kc(n))},o=function(e){return!1===r(n)||Sl(e).rows>1},u=function(e){return!1===r(n)||Sl(e).columns>1},i=zs(n),c=Ws(n)?g:md,a=function(e){switch(Ls(n)){case"section":return kd.section();case"sectionCells":return kd.sectionCells();case"cells":return kd.cells();default:return kd.getTableSectionType(e,"section")}},l=function(t,r){return r.cursor.fold((function(){var r=Pr(t);return en(r).filter(Et).map((function(r){e.clear(t);var o=n.dom.createRng();return o.selectNode(r.dom),n.selection.setRng(o),Gt(r,"data-mce-selected","1"),o}))}),(function(r){var o=dd(r),u=n.dom.createRng();return u.setStart(o.element.dom,o.offset),u.setEnd(o.element.dom,o.offset),n.selection.setRng(u),e.clear(t),O.some(u)}))},f=function(e,t,r,o,u){return function(c,f,s){void 0===s&&(s=!1),Jc(c);var d=o(),m=be.fromDom(n.getDoc()),g=Wc(r,m,i),p={sizing:Ks(n,c),resize:Ws(n)?Ga():Ja(),section:a(c)};return t(c)?e(d,c,f,g,p).bind((function(e){F(e.newRows,(function(e){Qf(n,e.dom)})),F(e.newCells,(function(e){Zf(n,e.dom)}));var t=l(c,e);return Et(c)&&(Jc(c),s||os(n,c.dom,u)),t.map((function(n){return{rng:n,effect:u}}))})):O.none()}},s=f(op,o,g,t,is),d=f(rp,u,g,t,is),m=f(Zg,S,g,t,is),p=f(np,S,g,t,is),v=f(ep,S,c,t,is),h=f(tp,S,c,t,is),b=f(dp,S,g,t,is),y=f(mp,S,g,t,is),w=f(pp,S,g,t,is),C=f(vp,S,g,t,is),x=f(hp,S,g,t,is),T=f(bp,S,g,t,is),R=f(gp,S,g,t,cs),D=f(fp,S,g,t,is),A=f(sp,S,g,t,is),k=f(up,S,g,t,is),P=f(ip,S,g,t,is),E=f(cp,S,g,t,is),M=f(ap,S,g,t,is),N=f(lp,S,g,t,is),I=wp,B=yp,_=Cp;return{deleteRow:s,deleteColumn:d,insertRowsBefore:m,insertRowsAfter:p,insertColumnsBefore:v,insertColumnsAfter:h,mergeCells:b,unmergeCells:y,pasteColsBefore:w,pasteColsAfter:C,pasteRowsBefore:x,pasteRowsAfter:T,pasteCells:R,makeCellsHeader:D,unmakeCellsHeader:A,makeColumnsHeader:k,unmakeColumnsHeader:P,makeRowsHeader:E,makeRowsBody:M,makeRowsFooter:N,getTableRowType:_,getTableCellType:I,getTableColType:B}},Tp={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Sp=function(){return be.fromTag("th")},Rp=function(){return be.fromTag("td")},Dp=function(){return be.fromTag("col")},Ap=function(n,e,t,r){for(var o=be.fromTag("tr"),u=0;u<n;u++){var i=r<e||u<t?Sp():Rp();u<t&&Gt(i,"scope","row"),r<e&&Gt(i,"scope","col"),ko(i,be.fromTag("br")),ko(o,i)}return o},kp=function(n){var e=be.fromTag("colgroup");return _(n,(function(){return ko(e,Dp())})),e},Op=function(n,e,t,r){return _(n,(function(n){return Ap(e,t,r,n)}))},Pp=function(n,e,t,r,o,u){void 0===u&&(u=Tp);var i=be.fromTag("table"),c="cells"!==o;mr(i,u.styles),Jt(i,u.attributes),u.colGroups&&ko(i,kp(e));var a=Math.min(n,t);if(c&&t>0){var l=be.fromTag("thead");ko(i,l);var f="sectionCells"===o?a:0,s=Op(t,e,f,r);No(l,s)}var d=be.fromTag("tbody");ko(i,d);var m=c?n-a:n,g=c?0:t,p=Op(m,e,g,r);return No(d,p),i},Ep=function(n){return n.dom.innerHTML},Mp=function(n){var e=be.fromTag("div"),t=be.fromDom(n.dom.cloneNode(!0));return ko(e,t),Ep(e)},Np=function(n,e){n.selection.select(e.dom,!0),n.selection.collapse(!0)},Ip=function(n,e){qt(e,"td,th").each(w(Np,n))},Bp=function(n,e){F(jt(e,"tr"),(function(e){Qf(n,e.dom),F(jt(e,"th,td"),(function(e){Zf(n,e.dom)}))}))},_p=function(n){return o(n)&&-1!==n.indexOf("%")},Lp=function(n,e,t,r,o){var u=ws(n),i={styles:u,attributes:ys(n),colGroups:_s(n)};return n.undoManager.ignore((function(){var u=Pp(t,e,o,r,Ls(n),i);Gt(u,"data-mce-id","__mce");var c=Mp(u);n.insertContent(c),n.addVisual()})),qt(Kc(n),'table[data-mce-id="__mce"]').map((function(e){return Ns(n)?Js(e):Is(n)?Qs(e):(Ms(n)||_p(u.width))&&Gs(e),Jc(e),er(e,"data-mce-id"),Bp(n,e),Ip(n,e),e.dom})).getOr(null)},Fp=function(n,e,t,r,o){void 0===r&&(r={});var u=function(n){return m(n)&&n>0};if(u(e)&&u(t)){var i=r.headerRows||0,c=r.headerColumns||0;return Lp(n,t,e,c,i)}return console.error(o),null},jp=function(n){return function(){return n().fold((function(){return[]}),(function(n){return L(n,(function(n){return n.dom}))}))}},Wp=function(n){return function(e){var t=e.length>0?O.some(Uc(e)):O.none();n(t)}},zp=function(n){return function(e,t,r){void 0===r&&(r={});var o=Fp(n,t,e,r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return n.undoManager.add(),o}},Hp=function(n,e,t,r){return{insertTable:zp(n),setClipboardRows:Wp(e.setRows),getClipboardRows:jp(e.getRows),setClipboardCols:Wp(e.setColumns),getClipboardCols:jp(e.getColumns),resizeHandler:t,selectionTargets:r}},Up=function(n,e,t){var r=yr(n,e,1);1===t||r<=1?er(n,e):Gt(n,e,Math.min(t,r))},Vp=function(n,e,t){if(lo.hasColumns(n)){var r=z(lo.justColumns(n),(function(n){return n.column>=e&&n.column<t})),o=L(r,(function(n){var r=Cu(n.element);return Up(r,"span",t-e),r})),u=be.fromTag("colgroup");return No(u,o),[u]}return[]},Kp=function(n,e,t){return L(n.all,(function(n){var r=z(n.cells,(function(n){return n.column>=e&&n.column<t})),o=L(r,(function(n){var r=Cu(n.element);return Up(r,"colspan",t-e),r})),u=be.fromTag("tr");return No(u,o),u}))},$p=function(n,e){var t=lo.fromTable(n),r=Gd(t,e);return r.map((function(n){var e=n[n.length-1],r=n[0].column,o=e.column+e.colspan,u=Vp(t,r,o),i=Kp(t,r,o);return un(un([],u,!0),i,!0)}))},qp=function(n,e,t){var r=lo.fromTable(n),o=Yd(r,e);return o.bind((function(n){var e=jd(r,t,!1),o=qr(e).rows,u=o.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),i=X(u,(function(n){var e=z(n.cells,(function(n){return!n.isLocked}));return e.length>0?[on(on({},n),{cells:e})]:[]})),c=zd(i);return ar(c.length>0,c)})).map((function(n){return Nd(n)}))},Xp=tinymce.util.Tools.resolve("tinymce.util.Tools"),Yp=function(n,e,t){var r,o=n.select("td,th",e),u=function(e,r){for(var o=0;o<r.length;o++){var u=n.getStyle(r[o],t);if("undefined"===typeof e&&(e=u),e!==u)return""}return e};return u(r,o)},Gp=function(n,e,t){t&&n.formatter.apply("align"+t,{},e)},Jp=function(n,e,t){t&&n.formatter.apply("valign"+t,{},e)},Qp=function(n,e){Xp.each("left center right".split(" "),(function(t){n.formatter.remove("align"+t,{},e)}))},Zp=function(n,e){Xp.each("top middle bottom".split(" "),(function(t){n.formatter.remove("valign"+t,{},e)}))},nv=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],ev=function(n){return{value:n}},tv=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,rv=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ov=function(n){return tv.test(n)||rv.test(n)},uv=function(n){return Cn(n,"#").toUpperCase()},iv=function(n){return ov(n)?O.some({value:uv(n)}):O.none()},cv=function(n){var e=n.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},av=function(n){var e=cv(n.red)+cv(n.green)+cv(n.blue);return ev(e)},lv=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,fv=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,sv=function(n,e,t,r){return{red:n,green:e,blue:t,alpha:r}},dv=function(n,e,t,r){var o=parseInt(n,10),u=parseInt(e,10),i=parseInt(t,10),c=parseFloat(r);return sv(o,u,i,c)},mv=function(n){if("transparent"===n)return O.some(sv(0,0,0,0));var e=lv.exec(n);if(null!==e)return O.some(dv(e[1],e[2],e[3],"1"));var t=fv.exec(n);return null!==t?O.some(dv(t[1],t[2],t[3],t[4])):O.none()},gv=function(n){return iv(n).orThunk((function(){return mv(n).map(av)})).getOrThunk((function(){var e=document.createElement("canvas");e.height=1,e.width=1;var t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=n,t.fillRect(0,0,1,1);var r=t.getImageData(0,0,1,1).data,o=r[0],u=r[1],i=r[2],c=r[3];return av(sv(o,u,i,c))}))},pv=function(n){var e=n,t=function(){return e},r=function(n){e=n};return{get:t,set:r}},vv=function(n){var e=pv(O.none()),t=function(){return e.get().each(n)},r=function(){t(),e.set(O.none())},o=function(){return e.get().isSome()},u=function(){return e.get()},i=function(n){t(),e.set(O.some(n))};return{clear:r,isSet:o,get:u,set:i}},hv=function(){return vv((function(n){return n.unbind()}))},bv=function(){var n=vv(g),e=function(e){return n.get().each(e)};return on(on({},n),{on:e})},yv=function(n,e,t,r){return function(o){var u=hv(),i=kn(r),c=function(){var c=Ta(e),a=function(e){return n.formatter.match(t,{value:r},e.dom,i)};i?(o.setActive(!B(c,a)),u.set(n.formatter.formatChanged(t,(function(n){return o.setActive(!n)}),!0))):(o.setActive(Y(c,a)),u.set(n.formatter.formatChanged(t,o.setActive,!1,{value:r})))};return n.initialized?c():n.on("init",c),u.clear}},wv=function(n){return ze(n,"menu")},Cv=function(n){return L(n,(function(n){var e=n.text||n.title;return wv(n)?{text:e,items:Cv(n.menu)}:{text:e,value:n.value}}))},xv=function(n,e,t,r,o){return L(t,(function(t){var u=t.text||t.title;return wv(t)?{type:"nestedmenuitem",text:u,getSubmenuItems:function(){return xv(n,e,t.menu,r,o)}}:{text:u,type:"togglemenuitem",onAction:function(){return o(t.value)},onSetup:yv(n,e,r,t.value)}}))},Tv=function(n,e){return function(t){var r;n.execCommand("mceTableApplyCellStyle",!1,(r={},r[e]=t,r))}},Sv=function(n){return X(n,(function(n){return wv(n)?[on(on({},n),{menu:Sv(n.menu)})]:An(n.value)?[n]:[]}))},Rv=function(n,e,t,r,o){return function(u){return u(xv(n,e,t,r,o))}},Dv=function(n,e,t){var r=L(e,(function(n){return{text:n.title,value:"#"+gv(n.value).value,type:"choiceitem"}}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:r.length>0?r:void 0,allowCustomColors:!1},onAction:function(e){var r,o="remove"===e.value?"":e.value;n.execCommand("mceTableApplyCellStyle",!1,(r={},r[t]=o,r))}}]},Av=function(n){return function(){var e=n.queryCommandValue("mceTableRowType"),t="header"===e?"body":"header";n.execCommand("mceTableRowType",!1,{type:t})}},kv=function(n){return function(){var e=n.queryCommandValue("mceTableColType"),t="th"===e?"td":"th";n.execCommand("mceTableColType",!1,{type:t})}},Ov=function(n){var e=Cv(Os(n));return e.length>0?O.some({name:"class",type:"listbox",label:"Class",items:e}):O.none()},Pv=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:nv}],Ev=function(n){return Pv.concat(Ov(n).toArray())},Mv=function(n,e){var t=[{text:"Select...",value:""}],r=[{name:"borderstyle",type:"listbox",label:"Border style",items:t.concat(Cv(bs(n)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],o={name:"borderwidth",type:"input",label:"Border width"},u="cell"===e?[o].concat(r):r;return{title:"Advanced",name:"advanced",items:u}},Nv=function(n){return function(e,t){var r=e.dom,o=function(e,o){n&&!o||r.setAttrib(t,e,o)},u=function(e,o){n&&!o||r.setStyle(t,e,o)},i=function(r,o){n&&!o||(""===o?e.formatter.remove(r,{value:null},t,!0):e.formatter.apply(r,{value:o},t))};return{setAttrib:o,setStyle:u,setFormat:i}}},Iv={normal:Nv(!1),ifTruthy:Nv(!0)},Bv=function(n){return function(e){return Tn(e,"rgb")?n.toHex(e):e}},_v=function(n,e){var t=be.fromDom(e);return{borderwidth:vr(t,"border-width").getOr(""),borderstyle:vr(t,"border-style").getOr(""),bordercolor:vr(t,"border-color").map(Bv(n)).getOr(""),backgroundcolor:vr(t,"background-color").map(Bv(n)).getOr("")}},Lv=function(n){var e=n[0],t=n.slice(1);return F(t,(function(n){F(ke(e),(function(t){Pe(n,(function(n,r){var o=e[t];""!==o&&t===r&&o!==n&&(e[t]="")}))}))})),e},Fv=function(n,e,t,r){return K(n,(function(n){return!l(t.formatter.matchNode(r,e+n))})).getOr("")},jv=w(Fv,["left","center","right"],"align"),Wv=w(Fv,["top","middle","bottom"],"valign"),zv=function(n,e){var t=ws(n),r=ys(n),o=function(n){return{borderstyle:je(t,"border-style").getOr(""),bordercolor:Bv(n)(je(t,"border-color").getOr("")),backgroundcolor:Bv(n)(je(t,"background-color").getOr(""))}},u={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},i=function(){var e=t["border-width"];return ks(n)&&e?{border:e}:je(r,"border").fold((function(){return{}}),(function(n){return{border:n}}))},c=e?o(n.dom):{},a=function(){var n=je(t,"border-spacing").or(je(r,"cellspacing")).fold((function(){return{}}),(function(n){return{cellspacing:n}})),e=je(t,"border-padding").or(je(r,"cellpadding")).fold((function(){return{}}),(function(n){return{cellpadding:n}}));return on(on({},n),e)},l=on(on(on(on(on(on({},u),t),r),c),i()),a());return l},Hv=function(n){return Mr(be.fromDom(n)).map((function(e){var t={selection:Uc(n.cells)};return Cp(e,t)})).getOr("")},Uv=function(n,e,t){var r=function(e,t){var r=vr(be.fromDom(t),"border-width");return ks(n)&&r.isSome()?r.getOr(""):e.getAttrib(t,"border")||Yp(n.dom,t,"border-width")||Yp(n.dom,t,"border")},o=n.dom,u=ks(n)?o.getStyle(e,"border-spacing")||o.getAttrib(e,"cellspacing"):o.getAttrib(e,"cellspacing")||o.getStyle(e,"border-spacing"),i=ks(n)?Yp(o,e,"padding")||o.getAttrib(e,"cellpadding"):o.getAttrib(e,"cellpadding")||Yp(o,e,"padding");return on({width:o.getStyle(e,"width")||o.getAttrib(e,"width"),height:o.getStyle(e,"height")||o.getAttrib(e,"height"),cellspacing:u,cellpadding:i,border:r(o,e),caption:!!o.select("caption",e)[0],class:o.getAttrib(e,"class",""),align:jv(n,e)},t?_v(o,e):{})},Vv=function(n,e,t){var r=n.dom;return on({height:r.getStyle(e,"height")||r.getAttrib(e,"height"),class:r.getAttrib(e,"class",""),type:Hv(e),align:jv(n,e)},t?_v(r,e):{})},Kv=function(n,e,t,r){var o=n.dom,u=r.getOr(e),i=function(n,e){return o.getStyle(n,e)||o.getAttrib(n,e)};return on({width:i(u,"width"),height:i(e,"height"),scope:o.getAttrib(e,"scope"),celltype:Vc(e),class:o.getAttrib(e,"class",""),halign:jv(n,e),valign:Wv(n,e)},t?_v(o,e):{})},$v=function(n,e){var t=lo.fromTable(n),r=lo.justCells(t),o=z(r,(function(n){return B(e,(function(e){return Te(n.element,e)}))}));return L(o,(function(n){return{element:n.element.dom,column:lo.getColumnAt(t,n.column).map((function(n){return n.element.dom}))}}))},qv=function(n,e,t){n.setAttrib("scope",t.scope),n.setAttrib("class",t.class),n.setStyle("height",Gc(t.height)),e.setStyle("width",Gc(t.width))},Xv=function(n,e){n.setFormat("tablecellbackgroundcolor",e.backgroundcolor),n.setFormat("tablecellbordercolor",e.bordercolor),n.setFormat("tablecellborderstyle",e.borderstyle),n.setFormat("tablecellborderwidth",Gc(e.borderwidth))},Yv=function(n,e,t){var r=1===e.length;F(e,(function(e){var o=e.element,u=r?Iv.normal(n,o):Iv.ifTruthy(n,o),i=e.column.map((function(e){return r?Iv.normal(n,e):Iv.ifTruthy(n,e)})).getOr(u);qv(u,i,t),Ts(n)&&Xv(u,t),r&&(Qp(n,o),Zp(n,o)),t.halign&&Gp(n,o,t.halign),t.valign&&Jp(n,o,t.valign)}))},Gv=function(n,e){n.execCommand("mceTableCellType",!1,{type:e.celltype,no_events:!0})},Jv=function(n,e,t,r){var o=Be(r,(function(n,e){return t[e]!==n}));Fe(o)>0&&e.length>=1&&Mr(e[0]).each((function(t){var u=$v(t,e),i=Fe(Be(o,(function(n,e){return"scope"!==e&&"celltype"!==e})))>0,c=We(o,"celltype");(i||We(o,"scope"))&&Yv(n,u,r),c&&Gv(n,r),os(n,t.dom,{structure:c,style:i})}))},Qv=function(n,e,t,r){var o=r.getData();r.close(),n.undoManager.transact((function(){Jv(n,e,t,o),n.focus()}))},Zv=function(n,e){var t=Mr(e[0]).map((function(t){return L($v(t,e),(function(e){return Kv(n,e.element,Ts(n),e.column)}))}));return Lv(t.getOrDie())},nh=function(n,e){var t=Ta(e);if(0!==t.length){var r=Zv(n,t),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ev(n)},Mv(n,"cell")]},u={type:"panel",items:[{type:"grid",columns:2,items:Ev(n)}]};n.windowManager.open({title:"Cell Properties",size:"normal",body:Ts(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:w(Qv,n,t,r)})}},eh=function(n){var e=Cv(Ps(n));return e.length>0?O.some({name:"class",type:"listbox",label:"Class",items:e}):O.none()},th=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],rh=function(n){return th.concat(eh(n).toArray())},oh=function(n,e){n.setAttrib("class",e.class),n.setStyle("height",Gc(e.height))},uh=function(n,e){n.setStyle("background-color",e.backgroundcolor),n.setStyle("border-color",e.bordercolor),n.setStyle("border-style",e.borderstyle)},ih=function(n,e,t,r){var o=1===e.length;F(e,(function(e){var u=o?Iv.normal(n,e):Iv.ifTruthy(n,e);oh(u,t),Ss(n)&&uh(u,t),t.align!==r.align&&(Qp(n,e),Gp(n,e,t.align))}))},ch=function(n,e){n.execCommand("mceTableRowType",!1,{type:e.type,no_events:!0})},ah=function(n,e,t,r){var o=Be(r,(function(n,e){return t[e]!==n}));if(Fe(o)>0){var u=We(o,"type"),i=!u||Fe(o)>1;i&&ih(n,e,r,t),u&&ch(n,r),Mr(be.fromDom(e[0])).each((function(e){return os(n,e.dom,{structure:u,style:i})}))}},lh=function(n,e,t,r){var o=r.getData();r.close(),n.undoManager.transact((function(){ah(n,e,t,o),n.focus()}))},fh=function(n){var e=Sa(ea(n),ga.selected);if(0!==e.length){var t=L(e,(function(e){return Vv(n,e.dom,Ss(n))})),r=Lv(t),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:rh(n)},Mv(n,"row")]},u={type:"panel",items:[{type:"grid",columns:2,items:rh(n)}]};n.windowManager.open({title:"Row Properties",size:"normal",body:Ss(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:w(lh,n,L(e,(function(n){return n.dom})),r)})}},sh=function(n,e,t){var r=t?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],u=Ds(n)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],c=e.length>0?[{type:"listbox",name:"class",label:"Class",items:e}]:[];return r.concat(o).concat(u).concat(i).concat(c)},dh=function(n,e,t,r){if("TD"===e.tagName||"TH"===e.tagName)o(t)?n.setStyle(e,t,r):n.setStyle(e,t);else if(e.children)for(var u=0;u<e.children.length;u++)dh(n,e.children[u],t,r)},mh=function(n,e,t){var r=n.dom,o={},u={};if(o.class=t.class,u.height=Gc(t.height),r.getAttrib(e,"width")&&!ks(n)?o.width=Yc(t.width):u.width=Gc(t.width),ks(n)?(u["border-width"]=Gc(t.border),u["border-spacing"]=Gc(t.cellspacing)):(o.border=t.border,o.cellpadding=t.cellpadding,o.cellspacing=t.cellspacing),ks(n)&&e.children)for(var i=0;i<e.children.length;i++)dh(r,e.children[i],{"border-width":Gc(t.border),padding:Gc(t.cellpadding)}),Rs(n)&&dh(r,e.children[i],{"border-color":t.bordercolor});Rs(n)&&(u["background-color"]=t.backgroundcolor,u["border-color"]=t.bordercolor,u["border-style"]=t.borderstyle),o.style=r.serializeStyle(on(on({},ws(n)),u)),r.setAttribs(e,on(on({},ys(n)),o))},gh=function(n,e,t,r){var o=n.dom,u=r.getData(),i=Be(u,(function(n,e){return t[e]!==n}));r.close(),""===u.class&&delete u.class,n.undoManager.transact((function(){if(!e){var t=parseInt(u.cols,10)||1,r=parseInt(u.rows,10)||1;e=Lp(n,t,r,0,0)}if(Fe(i)>0){mh(n,e,u);var c=o.select("caption",e)[0];(c&&!u.caption||!c&&u.caption)&&n.execCommand("mceTableToggleCaption"),""===u.align?Qp(n,e):Gp(n,e,u.align)}if(n.focus(),n.addVisual(),Fe(i)>0){var a=We(i,"caption"),l=!a||Fe(i)>1;os(n,e,{structure:a,style:l})}}))},ph=function(n,e){var t,r=n.dom,o=zv(n,Rs(n));!1===e?(t=r.getParent(n.selection.getStart(),"table",n.getBody()),t?o=Uv(n,t,Rs(n)):Rs(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")):(o.cols="1",o.rows="1",Rs(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var u=Cv(Es(n));u.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var i={type:"grid",columns:2,items:sh(n,u,e)},c=function(){return{type:"panel",items:[i]}},a=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[i]},Mv(n,"table")]}},l=Rs(n)?a():c();n.windowManager.open({title:"Table Properties",size:"normal",body:l,onSubmit:w(gh,n,t,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},vh=function(n){return Ca(ea(n),Xc(n))},hh=function(n){return xa(ea(n),Xc(n))},bh=function(n,e,t,r,i){var c=Xc(n),a=function(){return vh(n).each((function(e){Mr(e,c).filter(C(c)).each((function(e){var t=be.fromText("");if(Do(e,t),Bo(e),n.dom.isEmpty(n.getBody()))n.setContent(""),n.selection.setCursorLocation();else{var r=n.dom.createRng();r.setStart(t.dom,0),r.setEnd(t.dom,0),n.selection.setRng(r),n.nodeChanged()}}))}))},l=function(e){return vh(n).each((function(t){var r=Is(n)||Ns(n)||Ms(n);r||Mr(t,c).each((function(t){"relative"!==e||Cl(t)?"fixed"!==e||xl(t)?"responsive"!==e||Tl(t)||Qs(t):Js(t):Gs(t),Jc(t),os(n,t.dom,is)}))}))},f=function(n){return Mr(n,c)},s=function(e){return hh(n).bind((function(n){return f(n).map((function(t){return e(t,n)}))}))},d=function(e,t){s((function(e){n.formatter.toggle("tableclass",{value:t},e.dom),os(n,e.dom,us)}))},m=function(e,t){s((function(e){var o=Ta(r),u=Y(o,(function(e){return n.formatter.match("tablecellclass",{value:t},e.dom)})),i=u?n.formatter.remove:n.formatter.apply;F(o,(function(n){return i("tablecellclass",{value:t},n.dom)})),os(n,e.dom,us)}))},p=function(){vh(n).each((function(e){Mr(e,c).each((function(t){$t(t,"caption").fold((function(){var e=be.fromTag("caption");ko(e,be.fromText("Caption")),Oo(t,e,0),n.selection.setCursorLocation(e.dom,0)}),(function(r){st("caption")(e)&&xe("td",t).each((function(e){return n.selection.setCursorLocation(e.dom,0)})),Bo(r)})),os(n,t.dom,is)}))}))},v=function(e){n.focus()},h=function(n,e){return void 0===e&&(e=!1),s((function(t,o){var u=va(r,t,o);n(t,u,e).each(v)}))},b=function(){return s((function(e,t){var o=va(r,e,t),u=Wc(g,be.fromDom(n.getDoc()),O.none());return qp(e,o,u)}))},y=function(){return s((function(n,e){var t=va(r,n,e);return $p(n,t)}))},x=function(e,t){return t().each((function(t){var o=L(t,(function(n){return Cu(n)}));s((function(t,u){var i=zc(be.fromDom(n.getDoc())),c=ba(r,u,o,i);e(t,c).each(v)}))}))},T=function(n){return function(e,t){return je(t,"type").each((function(e){h(n(e),t.no_events)}))}};Pe({mceTableSplitCells:function(){return h(e.unmergeCells)},mceTableMergeCells:function(){return h(e.mergeCells)},mceTableInsertRowBefore:function(){return h(e.insertRowsBefore)},mceTableInsertRowAfter:function(){return h(e.insertRowsAfter)},mceTableInsertColBefore:function(){return h(e.insertColumnsBefore)},mceTableInsertColAfter:function(){return h(e.insertColumnsAfter)},mceTableDeleteCol:function(){return h(e.deleteColumn)},mceTableDeleteRow:function(){return h(e.deleteRow)},mceTableCutCol:function(){return y().each((function(n){i.setColumns(n),h(e.deleteColumn)}))},mceTableCutRow:function(){return b().each((function(n){i.setRows(n),h(e.deleteRow)}))},mceTableCopyCol:function(){return y().each((function(n){return i.setColumns(n)}))},mceTableCopyRow:function(){return b().each((function(n){return i.setRows(n)}))},mceTablePasteColBefore:function(){return x(e.pasteColsBefore,i.getColumns)},mceTablePasteColAfter:function(){return x(e.pasteColsAfter,i.getColumns)},mceTablePasteRowBefore:function(){return x(e.pasteRowsBefore,i.getRows)},mceTablePasteRowAfter:function(){return x(e.pasteRowsAfter,i.getRows)},mceTableDelete:a,mceTableCellToggleClass:m,mceTableToggleClass:d,mceTableToggleCaption:p,mceTableSizingMode:function(n,e){return l(e)},mceTableCellType:T((function(n){return"th"===n?e.makeCellsHeader:e.unmakeCellsHeader})),mceTableColType:T((function(n){return"th"===n?e.makeColumnsHeader:e.unmakeColumnsHeader})),mceTableRowType:T((function(n){switch(n){case"header":return e.makeRowsHeader;case"footer":return e.makeRowsFooter;default:return e.makeRowsBody}}))},(function(e,t){return n.addCommand(t,e)})),Pe({mceTableProps:w(ph,n,!1),mceTableRowProps:w(fh,n),mceTableCellProps:w(nh,n,r)},(function(e,t){return n.addCommand(t,(function(){return e()}))})),n.addCommand("mceInsertTable",(function(e,t){u(t)&&ke(t).length>0?Fp(n,t.rows,t.columns,t.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):ph(n,!0)})),n.addCommand("mceTableApplyCellStyle",(function(e,t){var i=function(n){return"tablecell"+n.toLowerCase().replace("-","")};if(u(t)){var c=Ta(r);if(0!==c.length){var a=Be(t,(function(e,t){return n.formatter.has(i(t))&&o(e)}));He(a)||(Pe(a,(function(e,t){F(c,(function(r){Iv.normal(n,r.dom).setFormat(i(t),e)}))})),f(c[0]).each((function(e){return os(n,e.dom,us)})))}}}))},yh=function(n,e,t){var r=Xc(n),o=function(e){return xa(ea(n)).bind((function(n){return Mr(n,r).map((function(r){var o=va(t,r,n);return e(r,o)}))})).getOr("")};Pe({mceTableRowType:function(){return o(e.getTableRowType)},mceTableCellType:function(){return o(e.getTableCellType)},mceTableColType:function(){return o(e.getTableColType)}},(function(e,t){return n.addQueryValueHandler(t,e)}))},wh=function(){var n=bv(),e=bv();return{getRows:n.get,setRows:function(t){t.fold(n.clear,n.set),e.clear()},clearRows:n.clear,getColumns:e.get,setColumns:function(t){t.fold(e.clear,e.set),n.clear()},clearColumns:e.clear}},Ch={remove_similar:!0,inherit:!1},xh=on({selector:"td,th"},Ch),Th={tablecellbackgroundcolor:on({styles:{backgroundColor:"%value"}},xh),tablecellverticalalign:on({styles:{"vertical-align":"%value"}},xh),tablecellbordercolor:on({styles:{borderColor:"%value"}},xh),tablecellclass:on({classes:["%value"]},xh),tableclass:on({selector:"table",classes:["%value"]},Ch),tablecellborderstyle:on({styles:{borderStyle:"%value"}},xh),tablecellborderwidth:on({styles:{borderWidth:"%value"}},xh)},Sh=function(n){n.formatter.register(Th)},Rh=su.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Dh=function(n){return void 0===n&&(n=void 0),Rh.none(n)},Ah=on(on({},Rh),{none:Dh}),kh=function(n,e,t,r,o){void 0===o&&(o=S);var u=1===r;if(!u&&t<=0)return Ah.first(n[0]);if(u&&t>=n.length-1)return Ah.last(n[n.length-1]);var i=t+r,c=n[i];return o(c)?Ah.middle(e,c):kh(n,e,i,r,o)},Oh=function(n,e){return Mr(n,e).bind((function(e){var t=Pr(e),r=$(t,(function(e){return Te(n,e)}));return r.map((function(n){return{index:n,all:t}}))}))},Ph=function(n,e,t){var r=Oh(n,t);return r.fold((function(){return Ah.none(n)}),(function(t){return kh(t.all,n,t.index,1,e)}))},Eh=function(n,e,t){var r=Oh(n,t);return r.fold((function(){return Ah.none()}),(function(t){return kh(t.all,n,t.index,-1,e)}))},Mh=function(n,e,t,r){return{start:n,soffset:e,finish:t,foffset:r}},Nh={create:Mh},Ih=su.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Bh=function(n,e,t,r){return n.fold(e,t,r)},_h=function(n){return n.fold(b,b,b)},Lh=Ih.before,Fh=Ih.on,jh=Ih.after,Wh={before:Lh,on:Fh,after:jh,cata:Bh,getStart:_h},zh=su.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Hh=function(n){return zh.exact(n.start,n.soffset,n.finish,n.foffset)},Uh=function(n){return n.match({domRange:function(n){return be.fromDom(n.startContainer)},relative:function(n,e){return Wh.getStart(n)},exact:function(n,e,t,r){return n}})},Vh=zh.domRange,Kh=zh.relative,$h=zh.exact,qh=function(n){var e=Uh(n);return gt(e)},Xh=Nh.create,Yh={domRange:Vh,relative:Kh,exact:$h,exactFromRange:Hh,getWin:qh,range:Xh},Gh=function(n,e){var t=n.document.createRange();return t.selectNode(e.dom),t},Jh=function(n,e){var t=n.document.createRange();return Qh(t,e),t},Qh=function(n,e){return n.selectNodeContents(e.dom)},Zh=function(n,e){e.fold((function(e){n.setStartBefore(e.dom)}),(function(e,t){n.setStart(e.dom,t)}),(function(e){n.setStartAfter(e.dom)}))},nb=function(n,e){e.fold((function(e){n.setEndBefore(e.dom)}),(function(e,t){n.setEnd(e.dom,t)}),(function(e){n.setEndAfter(e.dom)}))},eb=function(n,e,t){var r=n.document.createRange();return Zh(r,e),nb(r,t),r},tb=function(n,e,t,r,o){var u=n.document.createRange();return u.setStart(e.dom,t),u.setEnd(r.dom,o),u},rb=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},ob=function(n){var e=n.getClientRects(),t=e.length>0?e[0]:n.getBoundingClientRect();return t.width>0||t.height>0?O.some(t).map(rb):O.none()},ub=su.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ib=function(n,e,t){return e(be.fromDom(t.startContainer),t.startOffset,be.fromDom(t.endContainer),t.endOffset)},cb=function(n,e){return e.match({domRange:function(n){return{ltr:h(n),rtl:O.none}},relative:function(e,t){return{ltr:cn((function(){return eb(n,e,t)})),rtl:cn((function(){return O.some(eb(n,t,e))}))}},exact:function(e,t,r,o){return{ltr:cn((function(){return tb(n,e,t,r,o)})),rtl:cn((function(){return O.some(tb(n,r,o,e,t))}))}}})},ab=function(n,e){var t=e.ltr();if(t.collapsed){var r=e.rtl().filter((function(n){return!1===n.collapsed}));return r.map((function(n){return ub.rtl(be.fromDom(n.endContainer),n.endOffset,be.fromDom(n.startContainer),n.startOffset)})).getOrThunk((function(){return ib(n,ub.ltr,t)}))}return ib(n,ub.ltr,t)},lb=function(n,e){var t=cb(n,e);return ab(n,t)},fb=function(n,e){var t=lb(n,e);return t.match({ltr:function(e,t,r,o){var u=n.document.createRange();return u.setStart(e.dom,t),u.setEnd(r.dom,o),u},rtl:function(e,t,r,o){var u=n.document.createRange();return u.setStart(r.dom,o),u.setEnd(e.dom,t),u}})};ub.ltr,ub.rtl;var sb=function(n,e,t,r,o){if(0===o)return 0;if(e===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),a=Math.abs(e-c.left);if(t<=c.bottom){if(t<c.top||a>u)return i-1;u=a}}return 0},db=function(n,e,t){return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom},mb=function(n,e,t,r,o){var u=function(t){var r=n.dom.createRange();return r.setStart(e.dom,t),r.collapse(!0),r},i=function(n){var e=u(n);return e.getBoundingClientRect()},c=jo(e).length,a=sb(i,t,r,o.right,c);return u(a)},gb=function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getClientRects(),i=rn(u,(function(n){return db(n,t,r)?O.some(n):O.none()}));return i.map((function(o){return mb(n,e,t,r,o)}))},pb=function(n,e,t,r){var o=n.dom.createRange(),u=wt(e);return rn(u,(function(e){return o.selectNode(e.dom),db(o.getBoundingClientRect(),t,r)?vb(n,e,t,r):O.none()}))},vb=function(n,e,t,r){return at(e)?gb(n,e,t,r):pb(n,e,t,r)},hb=function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,t)),c=Math.max(u.top,Math.min(u.bottom,r));return vb(n,e,i,c)},bb=!0,yb=!1,wb=function(n,e){return e-n.left<n.right-e?bb:yb},Cb=function(n,e,t){var r=n.dom.createRange();return r.selectNode(e.dom),r.collapse(t),r},xb=function(n,e,t){var r=n.dom.createRange();r.selectNode(e.dom);var o=r.getBoundingClientRect(),u=wb(o,t),i=u===bb?kc:Oc;return i(e).map((function(e){return Cb(n,e,u)}))},Tb=function(n,e,t){var r=e.dom.getBoundingClientRect(),o=wb(r,t);return O.some(Cb(n,e,o))},Sb=function(n,e,t){var r=0===wt(e).length?Tb:xb;return r(n,e,t)},Rb=function(n,e,t){var r,o;return O.from(null===(o=(r=n.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,t)).bind((function(e){if(null===e.offsetNode)return O.none();var t=n.dom.createRange();return t.setStart(e.offsetNode,e.offset),t.collapse(),O.some(t)}))},Db=function(n,e,t){var r,o;return O.from(null===(o=(r=n.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,t))},Ab=function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,t)),c=Math.max(u.top,Math.min(u.bottom,r));return hb(n,e,i,c)},kb=function(n,e,t){return be.fromPoint(n,e,t).bind((function(r){var o=function(){return Sb(n,r,e)};return 0===wt(r).length?o():Ab(n,r,e,t).orThunk(o)}))},Ob=function(){return document.caretPositionFromPoint?Rb:document.caretRangeFromPoint?Db:kb}(),Pb=function(n,e,t){var r=be.fromDom(n.document);return Ob(r,e,t).map((function(n){return Nh.create(be.fromDom(n.startContainer),n.startOffset,be.fromDom(n.endContainer),n.endOffset)}))},Eb=function(n,e){var t=rt(n);return"input"===t?Wh.after(n):I(["br","img"],t)?0===e?Wh.before(n):Wh.after(n):Wh.on(n,e)},Mb=function(n,e){var t=n.fold(Wh.before,Eb,Wh.after),r=e.fold(Wh.before,Eb,Wh.after);return Yh.relative(t,r)},Nb=function(n,e,t,r){var o=Eb(n,e),u=Eb(t,r);return Yh.relative(o,u)},Ib=function(n){return n.match({domRange:function(n){var e=be.fromDom(n.startContainer),t=be.fromDom(n.endContainer);return Nb(e,n.startOffset,t,n.endOffset)},relative:Mb,exact:Nb})},Bb=function(n,e,t,r){var o=dt(n),u=o.dom.createRange();return u.setStart(n.dom,e),u.setEnd(t.dom,r),u},_b=function(n,e,t,r){var o=Bb(n,e,t,r),u=Te(n,t)&&e===r;return o.collapsed&&!u},Lb=function(n){return O.from(n.getSelection())},Fb=function(n,e){Lb(n).each((function(n){n.removeAllRanges(),n.addRange(e)}))},jb=function(n,e,t,r,o){var u=tb(n,e,t,r,o);Fb(n,u)},Wb=function(n,e,t,r,o,u){e.collapse(t.dom,r),e.extend(o.dom,u)},zb=function(n,e){return lb(n,e).match({ltr:function(e,t,r,o){jb(n,e,t,r,o)},rtl:function(e,t,r,o){Lb(n).each((function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(e.dom,t,r.dom,o);else if(u.extend)try{Wb(n,u,e,t,r,o)}catch(i){jb(n,r,o,e,t)}else jb(n,r,o,e,t)}))}})},Hb=function(n,e,t,r,o){var u=Nb(e,t,r,o);zb(n,u)},Ub=function(n,e,t){var r=Mb(e,t);zb(n,r)},Vb=function(n){var e=Yh.getWin(n).dom,t=function(n,t,r,o){return tb(e,n,t,r,o)},r=Ib(n);return lb(e,r).match({ltr:t,rtl:t})},Kb=function(n){if(n.rangeCount>0){var e=n.getRangeAt(0),t=n.getRangeAt(n.rangeCount-1);return O.some(Nh.create(be.fromDom(e.startContainer),e.startOffset,be.fromDom(t.endContainer),t.endOffset))}return O.none()},$b=function(n){if(null===n.anchorNode||null===n.focusNode)return Kb(n);var e=be.fromDom(n.anchorNode),t=be.fromDom(n.focusNode);return _b(e,n.anchorOffset,t,n.focusOffset)?O.some(Nh.create(e,n.anchorOffset,t,n.focusOffset)):Kb(n)},qb=function(n,e,t){void 0===t&&(t=!0);var r=t?Jh:Gh,o=r(n,e);Fb(n,o)},Xb=function(n){return Lb(n).filter((function(n){return n.rangeCount>0})).bind($b)},Yb=function(n){return Xb(n).map((function(n){return Yh.exact(n.start,n.soffset,n.finish,n.foffset)}))},Gb=function(n,e){var t=fb(n,e);return ob(t)},Jb=function(n,e,t){return Pb(n,e,t)},Qb=function(n){Lb(n).each((function(n){return n.removeAllRanges()}))},Zb=tinymce.util.Tools.resolve("tinymce.util.VK"),ny=function(n,e,t){return ry(n,e,Ph(t,Tf))},ey=function(n,e,t){return ry(n,e,Eh(t,Tf))},ty=function(n,e){var t=Yh.exact(e,0,e,0);return Vb(t)},ry=function(n,e,t){return t.fold(O.none,O.none,(function(e,t){return kc(t).map((function(e){return ty(n,e)}))}),(function(t){return n.execCommand("mceTableInsertRowAfter"),ny(n,e,t)}))},oy=["table","li","dl"],uy=function(n,e,t){if(n.keyCode===Zb.TAB){var r=Kc(e),o=function(n){var e=rt(n);return Te(n,r)||I(oy,e)},u=e.selection.getRng(),i=be.fromDom(n.shiftKey?u.startContainer:u.endContainer);Or(i,o).each((function(r){n.preventDefault(),Mr(r,o).each(t.clear),e.selection.collapse(n.shiftKey);var u=n.shiftKey?ey:ny,i=u(e,o,r);i.each((function(n){e.selection.setRng(n)}))}))}},iy=function(n,e){return{selection:n,kill:e}},cy={create:iy},ay=function(n,e,t,r){return{start:Wh.on(n,e),finish:Wh.on(t,r)}},ly={create:ay},fy=function(n,e){var t=fb(n,e);return Nh.create(be.fromDom(t.startContainer),t.startOffset,be.fromDom(t.endContainer),t.endOffset)},sy=ly.create,dy=function(n,e,t,r,o,u,i){return Te(t,o)&&r===u?O.none():Xt(t,"td,th",e).bind((function(t){return Xt(o,"td,th",e).bind((function(r){return my(n,e,t,r,i)}))}))},my=function(n,e,t,r,o){return Te(t,r)?O.none():tu(t,r,e).bind((function(e){var r=e.boxes.getOr([]);return r.length>1?(o(n,r,e.start,e.finish),O.some(cy.create(O.some(sy(t,0,t,Sc(t))),!0))):O.none()}))},gy=function(n,e,t,r,o){var u=function(n){return o.clearBeforeUpdate(t),o.selectRange(t,n.boxes,n.start,n.finish),n.boxes};return cu(r,n,e,o.firstSelectedSelector,o.lastSelectedSelector).map(u)},py=function(n,e){return{item:n,mode:e}},vy=function(n,e,t,r){return void 0===r&&(r=hy),n.property().parent(e).map((function(n){return py(n,r)}))},hy=function(n,e,t,r){return void 0===r&&(r=by),t.sibling(n,e).map((function(n){return py(n,r)}))},by=function(n,e,t,r){void 0===r&&(r=by);var o=n.property().children(e),u=t.first(o);return u.map((function(n){return py(n,r)}))},yy=[{current:vy,next:hy,fallback:O.none()},{current:hy,next:by,fallback:O.some(vy)},{current:by,next:by,fallback:O.some(hy)}],wy=function(n,e,t,r,o){void 0===o&&(o=yy);var u=K(o,(function(n){return n.current===t}));return u.bind((function(t){return t.current(n,e,r,t.next).orThunk((function(){return t.fallback.bind((function(t){return wy(n,e,t,r)}))}))}))},Cy=function(){var n=function(n,e){return n.query().prevSibling(e)},e=function(n){return n.length>0?O.some(n[n.length-1]):O.none()};return{sibling:n,first:e}},xy=function(){var n=function(n,e){return n.query().nextSibling(e)},e=function(n){return n.length>0?O.some(n[0]):O.none()};return{sibling:n,first:e}},Ty={left:Cy,right:xy},Sy=function(n,e,t,r,o,u){var i=wy(n,e,r,o);return i.bind((function(e){return u(e.item)?O.none():t(e.item)?O.some(e.item):Sy(n,e.item,t,e.mode,o,u)}))},Ry=function(n,e,t,r){return Sy(n,e,t,hy,Ty.left(),r)},Dy=function(n,e,t,r){return Sy(n,e,t,hy,Ty.right(),r)},Ay=function(n){return function(e){return 0===n.property().children(e).length}},ky=function(n,e,t){return Py(n,e,Ay(n),t)},Oy=function(n,e,t){return Ey(n,e,Ay(n),t)},Py=Ry,Ey=Dy,My=Uo(),Ny=function(n,e){return ky(My,n,e)},Iy=function(n,e){return Oy(My,n,e)},By=function(n,e,t){return Py(My,n,e,t)},_y=function(n,e,t){return Ey(My,n,e,t)},Ly=function(n,e,t){return zt(n,e,t).isSome()},Fy=su.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),jy=function(n,e,t){var r=n.getRect(e),o=n.getRect(t);return o.right>r.left&&o.left<r.right},Wy=function(n){return Xt(n,"tr")},zy=function(n,e,t,r,o,u,i){return Xt(r,"td,th",i).bind((function(t){return Xt(e,"td,th",i).map((function(e){return Te(t,e)?Te(r,t)&&Sc(t)===o?u(e):Fy.none("in same cell"):Zo(Wy,[t,e]).fold((function(){return jy(n,e,t)?Fy.success():u(e)}),(function(n){return u(e)}))}))})).getOr(Fy.none("default"))},Hy=function(n,e,t,r,o){return n.fold(e,t,r,o)},Uy=on(on({},Fy),{verify:zy,cata:Hy}),Vy=function(n,e,t,r){return{parent:n,children:e,element:t,index:r}},Ky=function(n){return pt(n).bind((function(e){var t=wt(e);return $y(t,n).map((function(r){return Vy(e,t,n,r)}))}))},$y=function(n,e){return $(n,w(Te,e))},qy=function(n){return"br"===rt(n)},Xy=function(n,e,t){return e(n,t).bind((function(n){return at(n)&&0===jo(n).trim().length?Xy(n,e,t):O.some(n)}))},Yy=function(n,e,t){return t.traverse(e).orThunk((function(){return Xy(e,t.gather,n)})).map(t.relative)},Gy=function(n,e){return Ct(n,e).filter(qy).orThunk((function(){return Ct(n,e-1).filter(qy)}))},Jy=function(n,e,t,r){return Gy(e,t).bind((function(e){return r.traverse(e).fold((function(){return Xy(e,r.gather,n).map(r.relative)}),(function(n){return Ky(n).map((function(n){return Wh.on(n.parent,n.index)}))}))}))},Qy=function(n,e,t,r){var o=qy(e)?Yy(n,e,r):Jy(n,e,t,r);return o.map((function(n){return{start:n,finish:n}}))},Zy=function(n){return Uy.cata(n,(function(n){return O.none()}),(function(){return O.none()}),(function(n){return O.some(id(n,0))}),(function(n){return O.some(id(n,Sc(n)))}))},nw=function(n,e){return{left:n.left,top:n.top+e,right:n.right,bottom:n.bottom+e}},ew=function(n,e){return{left:n.left,top:n.top-e,right:n.right,bottom:n.bottom-e}},tw=function(n,e,t){return{left:n.left+e,top:n.top+t,right:n.right+e,bottom:n.bottom+t}},rw=function(n){return n.top},ow=function(n){return n.bottom},uw=function(n,e,t){return t>=0&&t<Sc(e)?n.getRangedRect(e,t,e,t+1):t>0?n.getRangedRect(e,t-1,e,t):O.none()},iw=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},cw=function(n,e){return O.some(n.getRect(e))},aw=function(n,e,t){return ct(e)?cw(n,e).map(iw):at(e)?uw(n,e,t).map(iw):O.none()},lw=function(n,e){return ct(e)?cw(n,e).map(iw):at(e)?n.getRangedRect(e,0,e,Sc(e)).map(iw):O.none()},fw=5,sw=100,dw=su.generate([{none:[]},{retry:["caret"]}]),mw=function(n,e){return n.left<e.left||Math.abs(e.right-n.left)<1||n.left>e.right},gw=function(n,e,t){return Ht(e,cg).fold(T,(function(e){return lw(n,e).exists((function(n){return mw(t,n)}))}))},pw=function(n,e,t,r,o){var u=nw(o,fw);return Math.abs(t.bottom-r.bottom)<1||t.top>o.bottom?dw.retry(u):t.top===o.bottom?dw.retry(nw(o,1)):gw(n,e,o)?dw.retry(tw(u,fw,0)):dw.none()},vw=function(n,e,t,r,o){var u=ew(o,fw);return Math.abs(t.top-r.top)<1||t.bottom<o.top?dw.retry(u):t.bottom===o.top?dw.retry(ew(o,1)):gw(n,e,o)?dw.retry(tw(u,fw,0)):dw.none()},hw={point:rw,adjuster:vw,move:ew,gather:Ny},bw={point:ow,adjuster:pw,move:nw,gather:Iy},yw=function(n,e,t){return n.elementFromPoint(e,t).filter((function(n){return"table"===rt(n)})).isSome()},ww=function(n,e,t,r,o){return Cw(n,e,t,e.move(r,fw),o)},Cw=function(n,e,t,r,o){return 0===o?O.some(r):yw(n,r.left,e.point(r))?ww(n,e,t,r,o-1):n.situsFromPoint(r.left,e.point(r)).bind((function(u){return u.start.fold(O.none,(function(u){return lw(n,u).bind((function(i){return e.adjuster(n,u,i,t,r).fold(O.none,(function(r){return Cw(n,e,t,r,o-1)}))})).orThunk((function(){return O.some(r)}))}),O.none)}))},xw=function(n,e){return n.situsFromPoint(e.left,e.bottom+fw)},Tw=function(n,e){return n.situsFromPoint(e.left,e.top-fw)},Sw=function(n,e,t){return n.point(e)>t.getInnerHeight()?O.some(n.point(e)-t.getInnerHeight()):n.point(e)<0?O.some(-n.point(e)):O.none()},Rw=function(n,e,t){var r=n.move(t,fw),o=Cw(e,n,t,r,sw).getOr(r);return Sw(n,o,e).fold((function(){return e.situsFromPoint(o.left,n.point(o))}),(function(t){return e.scrollBy(0,t),e.situsFromPoint(o.left,n.point(o)-t)}))},Dw={tryUp:w(Rw,hw),tryDown:w(Rw,bw),ieTryUp:Tw,ieTryDown:xw,getJumpSize:h(fw)},Aw=20,kw=function(n,e,t){return n.getSelection().bind((function(r){return Qy(e,r.finish,r.foffset,t).fold((function(){return O.some(id(r.finish,r.foffset))}),(function(o){var u=n.fromSitus(o),i=Uy.verify(n,r.finish,r.foffset,u.finish,u.foffset,t.failure,e);return Zy(i)}))}))},Ow=function(n,e,t,r,o,u){return 0===u?O.none():Mw(n,e,t,r,o).bind((function(i){var c=n.fromSitus(i),a=Uy.verify(n,t,r,c.finish,c.foffset,o.failure,e);return Uy.cata(a,(function(){return O.none()}),(function(){return O.some(i)}),(function(i){return Te(t,i)&&0===r?Pw(n,t,r,ew,o):Ow(n,e,i,0,o,u-1)}),(function(i){return Te(t,i)&&r===Sc(i)?Pw(n,t,r,nw,o):Ow(n,e,i,Sc(i),o,u-1)}))}))},Pw=function(n,e,t,r,o){return aw(n,e,t).bind((function(e){return Ew(n,o,r(e,Dw.getJumpSize()))}))},Ew=function(n,e,t){var r=ue().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?e.otherRetry(n,t):r.isIE()?e.ieRetry(n,t):O.none()},Mw=function(n,e,t,r,o){return aw(n,t,r).bind((function(e){return Ew(n,o,e)}))},Nw=function(n,e,t){return kw(n,e,t).bind((function(r){return Ow(n,e,r.element,r.offset,t,Aw).map(n.fromSitus)}))},Iw=function(n,e){return Ly(n,(function(n){return pt(n).exists((function(n){return Te(n,e)}))}))},Bw=function(n,e,t,r,o){return Xt(r,"td,th",e).bind((function(r){return Xt(r,"table",e).bind((function(u){return Iw(o,u)?Nw(n,e,t).bind((function(n){return Xt(n.finish,"td,th",e).map((function(e){return{start:r,finish:e,range:n}}))})):O.none()}))}))},_w=function(n,e,t,r,o,u){return ue().browser.isIE()?O.none():u(r,e).orThunk((function(){return Bw(n,e,t,r,o).map((function(n){var e=n.range;return cy.create(O.some(sy(e.start,e.soffset,e.finish,e.foffset)),!0)}))}))},Lw=function(n,e){return Xt(n,"tr",e).bind((function(n){return Xt(n,"table",e).bind((function(t){var r=jt(t,"tr");return Te(n,r[0])?By(t,(function(n){return Oc(n).isSome()}),e).map((function(n){var e=Sc(n);return cy.create(O.some(sy(n,e,n,e)),!0)})):O.none()}))}))},Fw=function(n,e){return Xt(n,"tr",e).bind((function(n){return Xt(n,"table",e).bind((function(t){var r=jt(t,"tr");return Te(n,r[r.length-1])?_y(t,(function(n){return kc(n).isSome()}),e).map((function(n){return cy.create(O.some(sy(n,0,n,0)),!0)})):O.none()}))}))},jw=function(n,e,t,r,o,u,i){return Bw(n,t,r,o,u).bind((function(n){return my(e,t,n.start,n.finish,i)}))},Ww=function(n,e){return Xt(n,"td,th",e)},zw=function(n,e,t,r){var o=bv(),u=o.clear,i=function(u){o.on((function(o){r.clearBeforeUpdate(e),Ww(u.target,t).each((function(i){tu(o,i,t).each((function(t){var o=t.boxes.getOr([]);if(1===o.length){var c=o[0],a="false"===Sf(c),l=rr(xf(u.target),c,Te);a&&l&&(r.selectRange(e,o,c,c),n.selectContents(c))}else o.length>1&&(r.selectRange(e,o,t.start,t.finish),n.selectContents(i))}))}))}))},c=function(n){r.clear(e),Ww(n.target,t).each(o.set)},a=function(n){i(n)},l=function(n){i(n),u()};return{clearstate:u,mousedown:c,mouseover:a,mouseup:l}},Hw={traverse:yt,gather:Iy,relative:Wh.before,otherRetry:Dw.tryDown,ieRetry:Dw.ieTryDown,failure:Uy.failedDown},Uw={traverse:bt,gather:Ny,relative:Wh.before,otherRetry:Dw.tryUp,ieRetry:Dw.ieTryUp,failure:Uy.failedUp},Vw=function(n){return function(e){return e===n}},Kw=Vw(38),$w=Vw(40),qw=function(n){return n>=37&&n<=40},Xw={isBackward:Vw(37),isForward:Vw(39)},Yw={isBackward:Vw(39),isForward:Vw(37)},Gw=function(n){var e=void 0!==n?n.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return Qu(t,r)},Jw=function(n,e,t){var r=void 0!==t?t.dom:document,o=r.defaultView;o&&o.scrollBy(n,e)},Qw=function(n){var e=function(e,t){return be.fromPoint(be.fromDom(n.document),e,t)},t=function(n){return n.dom.getBoundingClientRect()},r=function(e,t,r,o){var u=Yh.exact(e,t,r,o);return Gb(n,u)},o=function(){return Yb(n).map((function(e){return fy(n,e)}))},u=function(e){var t=Yh.relative(e.start,e.finish);return fy(n,t)},i=function(e,t){return Jb(n,e,t).map((function(n){return ly.create(n.start,n.soffset,n.finish,n.foffset)}))},c=function(){Qb(n)},a=function(e){void 0===e&&(e=!1),Yb(n).each((function(t){return t.fold((function(n){return n.collapse(e)}),(function(t,r){var o=e?t:r;Ub(n,o,o)}),(function(t,r,o,u){var i=e?t:o,c=e?r:u;Hb(n,i,c,i,c)}))}))},l=function(e){qb(n,e,!1)},f=function(e){qb(n,e)},s=function(e){Hb(n,e.start,e.soffset,e.finish,e.foffset)},d=function(e,t){Ub(n,e,t)},m=function(){return n.innerHeight},g=function(){var e=Gw(be.fromDom(n.document));return e.top},p=function(e,t){Jw(e,t,be.fromDom(n.document))};return{elementFromPoint:e,getRect:t,getRangedRect:r,getSelection:o,fromSitus:u,situsFromPoint:i,clearSelection:c,collapseSelection:a,setSelection:s,setRelativeSelection:d,selectNode:l,selectContents:f,getInnerHeight:m,getScrollY:g,scrollBy:p}},Zw=function(n,e){return{rows:n,cols:e}},nC=function(n,e,t,r){var o=Qw(n),u=zw(o,e,t,r);return{clearstate:u.clearstate,mousedown:u.mousedown,mouseover:u.mouseover,mouseup:u.mouseup}},eC=function(n,e,t,r){var o=Qw(n),u=function(){return r.clear(e),O.none()},i=function(n,i,c,a,l,f){var s=n.raw,d=s.which,m=!0===s.shiftKey,g=ru(e,r.selectedSelector).fold((function(){return qw(d)&&!m&&r.clearBeforeUpdate(e),$w(d)&&m?w(jw,o,e,t,Hw,a,i,r.selectRange):Kw(d)&&m?w(jw,o,e,t,Uw,a,i,r.selectRange):$w(d)?w(_w,o,t,Hw,a,i,Fw):Kw(d)?w(_w,o,t,Uw,a,i,Lw):O.none}),(function(n){var t=function(t){return function(){var u=rn(t,(function(t){return gy(t.rows,t.cols,e,n,r)}));return u.fold((function(){return uu(e,r.firstSelectedSelector,r.lastSelectedSelector).map((function(n){var t=$w(d)||f.isForward(d)?Wh.after:Wh.before;return o.setRelativeSelection(Wh.on(n.first,0),t(n.table)),r.clear(e),cy.create(O.none(),!0)}))}),(function(n){return O.some(cy.create(O.none(),!0))}))}};return $w(d)&&m?t([Zw(1,0)]):Kw(d)&&m?t([Zw(-1,0)]):f.isBackward(d)&&m?t([Zw(0,-1),Zw(-1,0)]):f.isForward(d)&&m?t([Zw(0,1),Zw(1,0)]):qw(d)&&!m?u:O.none}));return g()},c=function(n,o,u,i,c){return ru(e,r.selectedSelector).fold((function(){var a=n.raw,l=a.which,f=!0===a.shiftKey;return f&&qw(l)?dy(e,t,o,u,i,c,r.selectRange):O.none()}),O.none)};return{keydown:i,keyup:c}},tC=function(n,e,t,r){var o=Qw(n);return function(n,u){r.clearBeforeUpdate(e),tu(n,u,t).each((function(n){var t=n.boxes.getOr([]);r.selectRange(e,t,n.start,n.finish),o.selectContents(u),o.collapseSelection()}))}},rC=function(n,e){F(e,(function(e){ff(n,e)}))},oC=function(n){return function(e){af(e,n)}},uC=function(n){return function(e){rC(e,n)}},iC=function(n){var e=oC(n.selected),t=uC([n.selected,n.lastSelected,n.firstSelected]),r=function(e){var r=jt(e,n.selectedSelector);F(r,t)},o=function(t,o,u,i){r(t),F(o,e),af(u,n.firstSelected),af(i,n.lastSelected)};return{clearBeforeUpdate:r,clear:r,selectRange:o,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},cC=function(n,e,t){var r=function(e){er(e,n.selected),er(e,n.firstSelected),er(e,n.lastSelected)},o=function(e){Gt(e,n.selected,"1")},u=function(n){i(n),t()},i=function(e){var t=jt(e,n.selectedSelector+","+n.firstSelectedSelector+","+n.lastSelectedSelector);F(t,r)},c=function(t,r,i,c){u(t),F(r,o),Gt(i,n.firstSelected,"1"),Gt(c,n.lastSelected,"1"),e(r,i,c)};return{clearBeforeUpdate:i,clear:u,selectRange:c,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},aC={byClass:iC,byAttr:cC},lC=function(n,e){var t=n.slice(0,e[e.length-1].row+1),r=zd(t);return X(r,(function(n){var t=n.cells.slice(0,e[e.length-1].column+1);return L(t,(function(n){return n.element}))}))},fC=function(n,e){var t=n.slice(e[0].row+e[0].rowspan-1,n.length),r=zd(t);return X(r,(function(n){var t=n.cells.slice(e[0].column+e[0].colspan-1,n.cells.length);return L(t,(function(n){return n.element}))}))},sC=function(n,e,t){var r=lo.fromTable(n),o=Yd(r,e);return o.map((function(n){var e=jd(r,t,!1),o=lC(e,n),u=fC(e,n);return{upOrLeftCells:o,downOrRightCells:u}}))},dC=tinymce.util.Tools.resolve("tinymce.Env"),mC=function(n){return!1===sf(be.fromDom(n.target),"ephox-snooker-resizer-bar")};function gC(n,e,t){var r=function(e,r,o){t.targets().each((function(t){var u=Mr(r);u.each((function(u){var i=zs(n),c=Wc(g,be.fromDom(n.getDoc()),i),a=sC(u,t,c);ts(n,e,r,o,a)}))}))},o=function(){return rs(n)},u=aC.byAttr(ga,r,o);return n.on("init",(function(t){var r=n.getWin(),o=Kc(n),i=Xc(n),c=function(){var e=n.selection,t=be.fromDom(e.getStart()),r=be.fromDom(e.getEnd()),i=Zo(Mr,[t,r]);i.fold((function(){return u.clear(o)}),g)},a=nC(r,o,i,u),l=eC(r,o,i,u),f=tC(r,o,i,u),s=function(n){return!0===n.raw.shiftKey};n.on("TableSelectorChange",(function(n){return f(n.start,n.finish)}));var d=function(e,t){s(e)&&(t.kill&&e.kill(),t.selection.each((function(e){var t=Yh.relative(e.start,e.finish),o=fb(r,t);n.selection.setRng(o)})))},m=function(e){var t=Zl(e);if(t.raw.shiftKey&&qw(t.raw.which)){var r=n.selection.getRng(),o=be.fromDom(r.startContainer),u=be.fromDom(r.endContainer);l.keyup(t,o,r.startOffset,u,r.endOffset).each((function(n){d(t,n)}))}},p=function(t){var r=Zl(t);e().each((function(n){return n.hideBars()}));var o=n.selection.getRng(),u=be.fromDom(o.startContainer),i=be.fromDom(o.endContainer),c=Ku(Xw,Yw)(be.fromDom(n.selection.getStart()));l.keydown(r,u,o.startOffset,i,o.endOffset,c).each((function(n){d(r,n)})),e().each((function(n){return n.showBars()}))},v=function(n){return 0===n.button},h=function(n){return void 0===n.buttons||(!(!dC.browser.isEdge()||0!==n.buttons)||0!==(1&n.buttons))},b=function(n){a.clearstate()},y=function(n){v(n)&&mC(n)&&a.mousedown(Zl(n))},w=function(n){h(n)&&mC(n)&&a.mouseover(Zl(n))},C=function(n){v(n)&&mC(n)&&a.mouseup(Zl(n))},x=function(){var n=pv(be.fromDom(o)),e=pv(0),t=function(t){var r=be.fromDom(t.target);if("td"===rt(r)||"th"===rt(r)){var o=n.get(),u=e.get();Te(o,r)&&t.timeStamp-u<300&&(t.preventDefault(),f(r,r))}n.set(r),e.set(t.timeStamp)};return{touchEnd:t}},T=x();n.on("dragstart",b),n.on("mousedown",y),n.on("mouseover",w),n.on("mouseup",C),n.on("touchend",T.touchEnd),n.on("keyup",m),n.on("keydown",p),n.on("NodeChange",c)})),{clear:u.clear}}var pC=function(n,e){return $t(n,e).isSome()},vC=function(n,e){var t=pv(O.none()),r=pv([]),o=O.none(),u=st("caption"),i=function(n){return o.forall((function(e){return!e[n]}))},c=function(){return Ca(ea(n),Xc(n))},a=function(){return Ca(ta(n),Xc(n))},l=function(){return c().bind((function(n){return cr(ur(Mr(n),a().bind(Mr),(function(t,r){return Te(t,r)?u(n)?O.some(pa(n)):O.some(va(e,t,n)):O.none()})))}))},f=function(n){var e=Mr(n.element);return e.map((function(e){var t=lo.fromTable(e),r=Yd(t,n).getOr([]),o=U(r,(function(n,e){return e.isLocked&&(n.onAny=!0,0===e.column?n.onFirst=!0:e.column+e.colspan>=t.grid.columns&&(n.onLast=!0)),n}),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Zd(t,n).isSome(),unmergeable:nm(t,n).isSome(),locked:o}}))},s=function(){t.set(cn(l)()),o=t.get().bind(f),F(r.get(),(function(n){return n()}))},d=function(n){return n(),r.set(r.get().concat([n])),function(){r.set(z(r.get(),(function(e){return e!==n})))}},m=function(n,e){return d((function(){return t.get().fold((function(){n.setDisabled(!0)}),(function(t){n.setDisabled(e(t))}))}))},g=function(n,e,r){return d((function(){return t.get().fold((function(){n.setDisabled(!0),n.setActive(!1)}),(function(t){n.setDisabled(e(t)),n.setActive(r(t))}))}))},p=function(n){return o.exists((function(e){return e.locked[n]}))},v=function(n){return m(n,(function(n){return!1}))},h=function(n){return m(n,(function(n){return u(n.element)}))},b=function(n){return function(e){return m(e,(function(e){return u(e.element)||p(n)}))}},y=function(n){return function(e){return m(e,(function(e){return u(e.element)||n().isNone()}))}},w=function(n,e){return function(t){return m(t,(function(t){return u(t.element)||n().isNone()||p(e)}))}},C=function(n){return m(n,(function(n){return i("mergeable")}))},x=function(n){return m(n,(function(n){return i("unmergeable")}))},S=function(e){return g(e,T,(function(e){var t=Mr(e.element,Xc(n));return t.exists((function(n){return pC(n,"caption")}))}))},R=function(e,t){return function(r){return g(r,(function(n){return u(n.element)}),(function(){return n.queryCommandValue(e)===t}))}},D=R("mceTableRowType","header"),A=R("mceTableColType","th");return n.on("NodeChange ExecCommand TableSelectorChange",s),{onSetupTable:v,onSetupCellOrRow:h,onSetupColumn:b,onSetupPasteable:y,onSetupPasteableColumn:w,onSetupMergeable:C,onSetupUnmergeable:x,resetTargets:s,onSetupTableWithCaption:S,onSetupTableRowHeaders:D,onSetupTableColumnHeaders:A,targets:t.get}},hC=function(n,e,t,r){n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});var o=function(e){return function(){return n.execCommand(e)}};n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")}),n.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var u=Sv(Es(n));0!==u.length&&n.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Rv(n,e,u,"tableclass",(function(e){return n.execCommand("mceTableToggleClass",!1,e)})),onSetup:t.onSetupTable});var i=Sv(Os(n));0!==i.length&&n.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Rv(n,e,i,"tablecellclass",(function(e){return n.execCommand("mceTableCellToggleClass",!1,e)})),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Rv(n,e,nv,"tablecellverticalalign",Tv(n,"vertical-align")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Rv(n,e,hs(n),"tablecellborderwidth",Tv(n,"border-width")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Rv(n,e,bs(n),"tablecellborderstyle",Tv(n,"border-style")),onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:t.onSetupTableWithCaption}),n.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(e){return e(Dv(n,Us(n),"background-color"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(e){return e(Dv(n,Vs(n),"border-color"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Av(n),onSetup:t.onSetupTableRowHeaders}),n.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:kv(n),onSetup:t.onSetupTableColumnHeaders})},bC=function(n){var e=function(e){return n.dom.is(e,"table")&&n.getBody().contains(e)},t=Bs(n);t.length>0&&n.ui.registry.addContextToolbar("table",{predicate:e,items:t,scope:"node",position:"node"})},yC=function(n,e,t,r){var o=function(e){return function(){return n.execCommand(e)}},u=function(e){n.execCommand("mceInsertTable",!1,{rows:e.numRows,columns:e.numColumns})},i={text:"Table properties",onSetup:t.onSetupTable,onAction:o("mceTableProps")},c={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:o("mceTableDelete")};n.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),n.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)});var a={type:"nestedmenuitem",text:"Row",getSubmenuItems:h("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};n.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:t.onSetupColumn("onFirst")}),n.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:t.onSetupColumn("onLast")}),n.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")});var l={type:"nestedmenuitem",text:"Column",getSubmenuItems:h("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};n.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:t.onSetupMergeable}),n.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:t.onSetupUnmergeable});var f={type:"nestedmenuitem",text:"Cell",getSubmenuItems:h("tablecellprops tablemergecells tablesplitcells")};!1===As(n)?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:u}]}}),n.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),n.ui.registry.addMenuItem("tableprops",i),n.ui.registry.addMenuItem("deletetable",c),n.ui.registry.addNestedMenuItem("row",a),n.ui.registry.addNestedMenuItem("column",l),n.ui.registry.addNestedMenuItem("cell",f),n.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold(h(""),(function(n){return"caption"===rt(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}});var s=Sv(Es(n));0!==s.length&&n.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return xv(n,e,s,"tableclass",(function(e){return n.execCommand("mceTableToggleClass",!1,e)}))},onSetup:t.onSetupTable});var d=Sv(Os(n));0!==d.length&&n.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return xv(n,e,d,"tablecellclass",(function(e){return n.execCommand("mceTableCellToggleClass",!1,e)}))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return xv(n,e,nv,"tablecellverticalalign",Tv(n,"vertical-align"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return xv(n,e,hs(n),"tablecellborderwidth",Tv(n,"border-width"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return xv(n,e,bs(n),"tablecellborderstyle",Tv(n,"border-style"))},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:t.onSetupTableWithCaption}),n.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Dv(n,Us(n),"background-color")},onSetup:t.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Dv(n,Vs(n),"border-color")},onSetup:t.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Av(n),onSetup:t.onSetupTableRowHeaders}),n.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:kv(n),onSetup:t.onSetupTableColumnHeaders})},wC=function(n){var e=hu((function(){return Kc(n)}),(function(){return xa(ea(n),Xc(n))}),ga.selectedSelector),t=vC(n,e),r=ud(n),o=gC(n,r.lazyResize,t),u=xp(n,o,r.lazyWire),i=wh();return bh(n,u,o,e,i),yh(n,u,e),ka(n,e,u),yC(n,e,t,i),hC(n,e,t,i),bC(n),n.on("PreInit",(function(){n.serializer.addTempAttr(ga.firstSelected),n.serializer.addTempAttr(ga.lastSelected),Sh(n)})),xs(n)&&n.on("keydown",(function(e){uy(e,n,o)})),n.on("remove",(function(){r.destroy()})),Hp(n,i,r,t)};function CC(){bu.add("table",wC)}CC()})()},daed:function(n,e,t){t("dfc7c")},dfc7c:function(n,e){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env"),t=function(n){n.addCommand("mcePrint",(function(){e.browser.isIE()?n.getDoc().execCommand("print",!1,null):n.getWin().print()}))},r=function(n){var e=function(){return n.execCommand("mcePrint")};n.ui.registry.addButton("print",{icon:"print",tooltip:"Print",onAction:e}),n.ui.registry.addMenuItem("print",{text:"Print...",icon:"print",onAction:e})};function o(){n.add("print",(function(n){t(n),r(n),n.addShortcut("Meta+P","","mcePrint")}))}o()})()},f016:function(n,e,t){t("4948")},f2a5:function(n,e){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n){var e=typeof n;return null===n?"null":"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e},t=function(n){return function(t){return e(t)===n}},r=function(n){return function(e){return typeof e===n}},o=t("string"),u=r("function"),i=function(){},c=function(n){return function(){return n}},a=function(n){return n};function l(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.concat(t);return n.apply(null,o)}}var f=c(!1),s=c(!0),d=tinymce.util.Tools.resolve("tinymce.util.Tools"),m=tinymce.util.Tools.resolve("tinymce.util.XHR"),g=function(n){return n.getParam("template_cdate_classes","cdate")},p=function(n){return n.getParam("template_mdate_classes","mdate")},v=function(n){return n.getParam("template_selected_content_classes","selcontent")},h=function(n){return n.getParam("template_preview_replace_values")},b=function(n){return n.getParam("content_style","","string")},y=function(n){return n.getParam("content_css_cors",!1,"boolean")},w=function(n){return n.getParam("template_replace_values")},C=function(n){return n.getParam("templates")},x=function(n){return n.getParam("template_cdate_format",n.translate("%Y-%m-%d"))},T=function(n){return n.getParam("template_mdate_format",n.translate("%Y-%m-%d"))},S=function(n){var e=n.getParam("body_class","","hash");return e[n.id]||""},R=function(n){var e=n.getParam("body_class","","string");return-1===e.indexOf("=")?e:S(n)},D=function(n,e){if(n=""+n,n.length<e)for(var t=0;t<e-n.length;t++)n="0"+n;return n},A=function(n,e,t){void 0===t&&(t=new Date);var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),i="January February March April May June July August September October November December".split(" ");return e=e.replace("%D","%m/%d/%Y"),e=e.replace("%r","%I:%M:%S %p"),e=e.replace("%Y",""+t.getFullYear()),e=e.replace("%y",""+t.getYear()),e=e.replace("%m",D(t.getMonth()+1,2)),e=e.replace("%d",D(t.getDate(),2)),e=e.replace("%H",""+D(t.getHours(),2)),e=e.replace("%M",""+D(t.getMinutes(),2)),e=e.replace("%S",""+D(t.getSeconds(),2)),e=e.replace("%I",""+((t.getHours()+11)%12+1)),e=e.replace("%p",t.getHours()<12?"AM":"PM"),e=e.replace("%B",""+n.translate(i[t.getMonth()])),e=e.replace("%b",""+n.translate(u[t.getMonth()])),e=e.replace("%A",""+n.translate(o[t.getDay()])),e=e.replace("%a",""+n.translate(r[t.getDay()])),e=e.replace("%%","%"),e},k=function(n,e){return function(){var t=C(n);u(t)?t(e):o(t)?m.send({url:t,success:function(n){e(JSON.parse(n))}}):e(t)}},O=function(n,e){return d.each(e,(function(e,t){u(e)&&(e=e(t)),n=n.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)})),n},P=function(n,e){var t=n.dom,r=w(n);d.each(t.select("*",e),(function(n){d.each(r,(function(e,r){t.hasClass(n,r)&&u(e)&&e(n)}))}))},E=function(n,e){return new RegExp("\\b"+e+"\\b","g").test(n.className)},M=function(n,e,t){var r=n.dom,o=n.selection.getContent();t=O(t,w(n));var u=r.create("div",null,t),i=r.select(".mceTmpl",u);i&&i.length>0&&(u=r.create("div",null),u.appendChild(i[0].cloneNode(!0))),d.each(r.select("*",u),(function(e){E(e,g(n).replace(/\s+/g,"|"))&&(e.innerHTML=A(n,x(n))),E(e,p(n).replace(/\s+/g,"|"))&&(e.innerHTML=A(n,T(n))),E(e,v(n).replace(/\s+/g,"|"))&&(e.innerHTML=o)})),P(n,u),n.execCommand("mceInsertContent",!1,u.innerHTML),n.addVisual()},N=function(){return I},I=function(){var n=function(n){return n()},e=a,t={fold:function(n,e){return n()},isSome:f,isNone:s,getOr:e,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:e,orThunk:n,map:N,each:i,bind:N,exists:f,forall:s,filter:function(){return N()},toArray:function(){return[]},toString:c("none()")};return t}(),B=function(n){var e=c(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},isSome:s,isNone:f,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return B(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:I},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},_=function(n){return null===n||void 0===n?I:B(n)},L={some:B,none:N,from:_},F=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},j=function(n,e,t){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(e(u,r))return L.some(u);if(t(u,r))break}return L.none()},W=function(n,e){return j(n,e,f)},z=tinymce.util.Tools.resolve("tinymce.Env"),H=tinymce.util.Tools.resolve("tinymce.util.Promise"),U=Object.hasOwnProperty,V=function(n,e){return K(n,e)?L.from(n[e]):L.none()},K=function(n,e){return U.call(n,e)},$={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},q=function(n){return n.replace(/["'<>&]/g,(function(n){return V($,n).getOr(n)}))},X=function(n,e){if(-1===e.indexOf("<html>")){var t="",r=b(n),o=y(n)?' crossorigin="anonymous"':"";d.each(n.contentCSS,(function(e){t+='<link type="text/css" rel="stylesheet" href="'+n.documentBaseURI.toAbsolute(e)+'"'+o+">"})),r&&(t+='<style type="text/css">'+r+"</style>");var u=R(n),i=n.dom.encode,c=z.mac?"e.metaKey":"e.ctrlKey && !e.altKey",a='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+c+")) {e.preventDefault();}}}, false);<\/script> ",l=n.getBody().dir,f=l?' dir="'+i(l)+'"':"";e='<!DOCTYPE html><html><head><base href="'+i(n.documentBaseURI.getURI())+'">'+t+a+'</head><body class="'+i(u)+'"'+f+">"+e+"</body></html>"}return O(e,h(n))},Y=function(n,e){var t=function(){if(!e||0===e.length){var t=n.translate("No templates defined.");return n.notificationManager.open({text:t,type:"info"}),L.none()}return L.from(d.map(e,(function(n,e){var t=function(n){return void 0!==n.url};return{selected:0===e,text:n.title,value:{url:t(n)?L.from(n.url):L.none(),content:t(n)?L.none():L.from(n.content),description:n.description}}})))},r=function(n){return F(n,(function(n){return{text:n.text,value:n.text}}))},o=function(n,e){return W(n,(function(n){return n.text===e}))},u=function(e){n.windowManager.alert("Could not load the specified template.",(function(){return e.focus("template")}))},i=function(n){return new H((function(e,t){n.value.url.fold((function(){return e(n.value.content.getOr(""))}),(function(n){return m.send({url:n,success:function(n){e(n)},error:function(n){t(n)}})}))}))},c=function(n,e){return function(t,r){if("template"===r.name){var c=t.getData().template;o(n,c).each((function(n){t.block("Loading..."),i(n).then((function(r){e(t,n,r)})).catch((function(){e(t,n,""),t.disable("save"),u(t)}))}))}}},a=function(e){return function(t){var r=t.getData();o(e,r.template).each((function(e){i(e).then((function(e){n.execCommand("mceInsertTemplate",!1,e),t.close()})).catch((function(){t.disable("save"),u(t)}))}))}},l=function(e){var t=r(e),o=function(n,t){return{title:"Insert Template",size:"large",body:{type:"panel",items:n},initialData:t,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:a(e),onChange:c(e,l)}},l=function(e,r,u){var i=X(n,u),c=[{type:"selectbox",name:"template",label:"Templates",items:t},{type:"htmlpanel",html:'<p aria-live="polite">'+q(r.value.description)+"</p>"},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1}],a={template:r.text,preview:i};e.unblock(),e.redial(o(c,a)),e.focus("template")},f=n.windowManager.open(o([],{template:"",preview:""}));f.block("Loading..."),i(e[0]).then((function(n){l(f,e[0],n)})).catch((function(){l(f,e[0],""),f.disable("save"),u(f)}))},f=t();f.each(l)},G=function(n){return function(e){Y(n,e)}},J=function(n){n.addCommand("mceInsertTemplate",l(M,n)),n.addCommand("mceTemplate",k(n,G(n)))},Q=function(n){n.on("PreProcess",(function(e){var t=n.dom,r=T(n);d.each(t.select("div",e.node),(function(e){t.hasClass(e,"mceTmpl")&&(d.each(t.select("*",e),(function(e){t.hasClass(e,p(n).replace(/\s+/g,"|"))&&(e.innerHTML=A(n,r))})),P(n,e))}))}))},Z=function(n){var e=function(){return n.execCommand("mceTemplate")};n.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:e}),n.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:e})};function nn(){n.add("template",(function(n){Z(n),J(n),Q(n)}))}nn()})()},fb04:function(n,e){(function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env"),t=function(n){return n.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")},r=function(n){return n.getParam("pagebreak_split_block",!1)},o="mce-pagebreak",u=function(n){var t='<img src="'+e.transparentSrc+'" class="'+o+'" data-mce-resize="false" data-mce-placeholder />';return n?"<p>"+t+"</p>":t},i=function(n){var e=t(n),i=function(){return r(n)},c=new RegExp(e.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,(function(n){return"\\"+n})),"gi");n.on("BeforeSetContent",(function(n){n.content=n.content.replace(c,u(i()))})),n.on("PreInit",(function(){n.serializer.addNodeFilter("img",(function(t){var r,u,c=t.length;while(c--)if(r=t[c],u=r.attr("class"),u&&-1!==u.indexOf(o)){var a=r.parent;if(n.schema.getBlockElements()[a.name]&&i()){a.type=3,a.value=e,a.raw=!0,r.remove();continue}r.type=3,r.value=e,r.raw=!0}}))}))},c=function(n){n.addCommand("mcePageBreak",(function(){n.insertContent(u(r(n)))}))},a=function(n){n.on("ResolveName",(function(e){"IMG"===e.target.nodeName&&n.dom.hasClass(e.target,o)&&(e.name="pagebreak")}))},l=function(n){var e=function(){return n.execCommand("mcePageBreak")};n.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:e}),n.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:e})};function f(){n.add("pagebreak",(function(n){c(n),l(n),i(n),a(n)}))}f()})()}}]);