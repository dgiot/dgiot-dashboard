/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2021-12-31 05:59:03
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors-dgiot-app-dgiot-6d5e77f7"],{"02b3":function(e,t,i){},"0f43":function(e,t,i){"use strict";i.r(t),i.d(t,"ModesHoverController",(function(){return Re}));var o=i("d3a2"),n=i("92db"),s=i("ae58"),r=i("d8b0"),a=i("7c05"),d=i("12fe"),l=i("7863"),h=i("d208"),c=i("ac21"),u=i("a9b7"),g=i("945a"),p=i("e0ab"),_=i("2f07"),m=i("d778"),f=i("4163"),b=i("98ef"),v=i("272e"),C=i("675e"),w=i("d578"),S=i("114a"),y=i("d1e2"),R=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},M=function(e,t){return function(i,o){t(i,o,e)}},x=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};class k{constructor(e,t,i,o){this.owner=e,this.range=t,this.model=i,this.provider=o,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let O=class{constructor(e,t,i){this._editor=e,this._hover=t,this._themeService=i}computeSync(e,t){return[]}computeAsync(e,t,i){return x(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const e=C["a"].get(this._editor);for(const i of t){if("color-detector-color"!==i.options.description)continue;const t=e.getColorData(i.range.getStartPosition());if(t){const e=yield this._createColorHover(this._editor.getModel(),t.colorInfo,t.provider);return[e]}}return[]}))}_createColorHover(e,t,i){return x(this,void 0,void 0,(function*(){const o=e.getValueInRange(t.range),{red:n,green:s,blue:a,alpha:d}=t.color,l=new b["c"](Math.round(255*n),Math.round(255*s),Math.round(255*a),d),h=new b["a"](l),c=yield Object(v["a"])(e,t,i,f["a"].None),u=new w["a"](h,[],0);return u.colorPresentations=c||[],u.guessColorPresentation(h,o),new k(this,r["a"].lift(t.range),u,i)}))}renderHoverParts(e,t,i){if(0===e.length||!this._editor.hasModel())return n["a"].None;const o=new n["b"],s=e[0],a=this._editor.getModel(),d=s.model,l=o.add(new S["a"](t,d,this._editor.getOption(127),this._themeService));let h=new r["a"](s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn);const c=()=>{let e,t;if(d.presentation.textEdit){e=[d.presentation.textEdit],t=new r["a"](d.presentation.textEdit.range.startLineNumber,d.presentation.textEdit.range.startColumn,d.presentation.textEdit.range.endLineNumber,d.presentation.textEdit.range.endColumn);const i=this._editor.getModel()._setTrackedRange(null,t,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e),t=this._editor.getModel()._getTrackedRange(i)||t}else e=[{identifier:null,range:h,text:d.presentation.label,forceMoveMarkers:!1}],t=h.setEndPosition(h.endLineNumber,h.startColumn+d.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e);d.presentation.additionalTextEdits&&(e=[...d.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",e),this._hover.hide()),this._editor.pushUndoStop(),h=t},u=e=>Object(v["a"])(a,{range:h,color:{red:e.rgba.r/255,green:e.rgba.g/255,blue:e.rgba.b/255,alpha:e.rgba.a}},s.provider,f["a"].None).then(e=>{d.colorPresentations=e||[]});return o.add(d.onColorFlushed(e=>{u(e).then(c)})),o.add(d.onDidChangeColor(u)),this._hover.setColorPicker(l),o}};O=R([M(2,y["b"])],O);var D=i("4b4a"),I=i("f123");class N{constructor(e,t,i,o,n){this._computer=e,this._state=0,this._hoverTime=n,this._firstWaitScheduler=new D["e"](()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new D["e"](()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new D["e"](()=>this._showLoadingMessage(),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=i,this._progressCallback=o}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=Object(D["h"])(e=>this._computer.computeAsync(e)),this._asyncComputationPromise.then(e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)},e=>this._onError(e))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){3===this._state&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),3===this._state&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):Object(I["f"])(e)}_onProgress(e){this._progressCallback(e)}start(e){if(0===e)0===this._state&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._loadingMessageScheduler.cancel(),1===this._state&&this._firstWaitScheduler.cancel(),2===this._state&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),3===this._state&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}}var L=i("d93f"),P=i("6b5e"),E=i("05a3");function F(e,t,i){const o=m["p"].ordered(e),n=o.map(o=>Promise.resolve(o.provideHover(e,t,i)).then(e=>e&&A(e)?e:void 0,e=>{Object(I["g"])(e)}));return Promise.all(n).then(g["e"])}function A(e){const t="undefined"!==typeof e.range,i="undefined"!==typeof e.contents&&e.contents&&e.contents.length>0;return t&&i}Object(s["n"])("_executeHoverProvider",(e,t)=>F(e,t,f["a"].None));var T=i("d4b5"),j=i("672a"),W=i("0aba"),V=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},B=function(e,t){return function(i,o){t(i,o,e)}},H=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const U=h["a"];class K{constructor(e,t,i){this.owner=e,this.range=t,this.contents=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let q=class{constructor(e,t,i,o,n){this._editor=e,this._hover=t,this._modeService=i,this._openerService=o,this._configurationService=n}createLoadingMessage(e){return new K(this,e.range,[(new P["a"]).appendText(T["a"]("modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),o=e.range.startLineNumber,n=i.getLineMaxColumn(o),s=[];for(const h of t){const t=h.range.startLineNumber===o?h.range.startColumn:1,i=h.range.endLineNumber===o?h.range.endColumn:n,a=h.options.hoverMessage;if(!a||Object(P["b"])(a))continue;const d=new r["a"](e.range.startLineNumber,t,e.range.startLineNumber,i);s.push(new K(this,d,Object(g["c"])(a)))}const a=i.getLineLength(o),d=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),l=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:d});return"number"===typeof l&&a>=l&&s.push(new K(this,e.range,[{value:T["a"]("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),s}computeAsync(e,t,i){return H(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||1!==e.type)return Promise.resolve([]);const t=this._editor.getModel();if(!m["p"].has(t))return Promise.resolve([]);const o=yield F(t,new p["a"](e.range.startLineNumber,e.range.startColumn),i),n=[];for(const i of o){if(Object(P["b"])(i.contents))continue;const t=i.range?r["a"].lift(i.range):e.range;n.push(new K(this,t,i.contents))}return n}))}renderHoverParts(e,t,i){const o=new n["b"];for(const n of e)for(const e of n.contents){if(Object(P["b"])(e))continue;const i=U("div.hover-row.markdown-hover"),n=h["q"](i,U("div.hover-contents")),s=o.add(new E["a"]({editor:this._editor},this._modeService,this._openerService));o.add(s.onDidRenderAsync(()=>{n.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const r=o.add(s.render(e));n.appendChild(r.element),t.appendChild(i)}return o}};q=V([B(2,d["a"]),B(3,W["a"]),B(4,j["a"])],q);var $=i("1ff1"),G=i("6c08"),z=i("b361"),Z=i("ed96"),X=i("389a"),Q=i("bec3"),Y=i("0c01"),J=i("b5f6"),ee=i("f7fb"),te=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},ie=function(e,t){return function(i,o){t(i,o,e)}};const oe=h["a"];class ne{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const se={type:1,filter:{include:X["b"].QuickFix}};let re=class{constructor(e,t,i,o){this._editor=e,this._hover=t,this._markerDecorationsService=i,this._openerService=o,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),o=e.range.startLineNumber,n=i.getLineMaxColumn(o),s=[];for(const a of t){const t=a.range.startLineNumber===o?a.range.startColumn:1,d=a.range.endLineNumber===o?a.range.endColumn:n,l=this._markerDecorationsService.getMarker(i.uri,a);if(!l)continue;const h=new r["a"](e.range.startLineNumber,t,e.range.startLineNumber,d);s.push(new ne(this,h,l))}return s}renderHoverParts(e,t,i){if(!e.length)return n["a"].None;const o=new n["b"];e.forEach(e=>t.appendChild(this.renderMarkerHover(e,o)));const s=1===e.length?e[0]:e.sort((e,t)=>Y["c"].compare(e.marker.severity,t.marker.severity))[0];return this.renderMarkerStatusbar(s,i,o),o}renderMarkerHover(e,t){const i=oe("div.hover-row"),o=h["q"](i,oe("div.marker.hover-contents")),{source:n,message:s,code:r,relatedInformation:a}=e.marker;this._editor.applyFontInfo(o);const d=h["q"](o,oe("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=s,n||r)if(r&&"string"!==typeof r){const e=oe("span");if(n){const t=h["q"](e,oe("span"));t.innerText=n}const i=h["q"](e,oe("a.code-link"));i.setAttribute("href",r.target.toString()),t.add(h["i"](i,"click",e=>{this._openerService.open(r.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()}));const s=h["q"](i,oe("span"));s.innerText=r.value;const a=h["q"](o,e);a.style.opacity="0.6",a.style.paddingLeft="6px"}else{const e=h["q"](o,oe("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=n&&r?`${n}(${r})`:n||`(${r})`}if(Object(g["n"])(a))for(const{message:l,resource:c,startLineNumber:u,startColumn:g}of a){const e=h["q"](o,oe("div"));e.style.marginTop="8px";const i=h["q"](e,oe("a"));i.innerText=`${Object($["b"])(c)}(${u}, ${g}): `,i.style.cursor="pointer",t.add(h["i"](i,"click",e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(c,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:u,startColumn:g}}}).catch(I["f"])}));const n=h["q"](e,oe("span"));n.innerText=l,this._editor.applyFontInfo(n)}return i}renderMarkerStatusbar(e,t,i){if(e.marker.severity!==Y["c"].Error&&e.marker.severity!==Y["c"].Warning&&e.marker.severity!==Y["c"].Info||t.addAction({label:T["a"]("view problem","View Problem"),commandId:Q["NextMarkerAction"].ID,run:()=>{this._hover.hide(),Q["MarkerController"].get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const o=t.append(oe("div"));this.recentMarkerCodeActionsInfo&&(Y["a"].makeKey(this.recentMarkerCodeActionsInfo.marker)===Y["a"].makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(o.textContent=T["a"]("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?n["a"].None:i.add(Object(D["i"])(()=>o.textContent=T["a"]("checkingForQuickFixes","Checking for quick fixes..."),200));o.textContent||(o.textContent=String.fromCharCode(160));const r=this.getCodeActions(e.marker);i.add(Object(n["i"])(()=>r.cancel())),r.then(r=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:r.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return r.dispose(),void(o.textContent=T["a"]("noQuickFixes","No quick fixes available"));o.style.display="none";let a=!1;i.add(Object(n["i"])(()=>{a||r.dispose()})),t.addAction({label:T["a"]("quick fixes","Quick Fix..."),commandId:Z["e"].Id,run:e=>{a=!0;const t=Z["f"].get(this._editor),i=h["D"](e);this._hover.hide(),t.showCodeActions(se,r,{x:i.left+6,y:i.top+i.height+6})}})},I["f"])}}getCodeActions(e){return Object(D["h"])(t=>Object(z["d"])(this._editor.getModel(),new r["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),se,J["b"].None,t))}};re=te([ie(2,G["a"]),ie(3,W["a"])],re),Object(y["f"])((e,t)=>{const i=e.getColor(ee["Pc"]);i&&t.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${i}; }`);const o=e.getColor(ee["Oc"]);o&&t.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${o}; }`)});var ae=i("9ef8"),de=i("6ad4"),le=i("bf32"),he=i("5365"),ce=i("042f"),ue=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},ge=function(e,t){return function(i,o){t(i,o,e)}},pe=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const _e=h["a"];let me=class extends n["a"]{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=_e("div.hover-row.status-bar"),this.actionsElement=h["q"](this.hoverElement,_e("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(c["a"].render(this.actionsElement,e,i))}append(e){const t=h["q"](this.actionsElement,e);return this._hasContent=!0,t}};me=ue([ge(0,he["a"])],me);class fe{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(1!==t.type)return[];const i=e.getModel(),o=t.range.startLineNumber,n=i.getLineMaxColumn(o);return e.getLineDecorations(o).filter(e=>{if(e.options.isWholeLine)return!0;const i=e.range.startLineNumber===o?e.range.startColumn:1,s=e.range.endLineNumber===o?e.range.endColumn:n;return!(i>t.range.startColumn||t.range.endColumn>s)})}computeAsync(e){return pe(this,void 0,void 0,(function*(){const t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);const i=fe._getLineDecorations(this._editor,t),o=yield Promise.all(this._participants.map(o=>this._computeAsync(o,i,t,e)));return Object(g["k"])(o)}))}_computeAsync(e,t,i,o){return pe(this,void 0,void 0,(function*(){return e.computeAsync?e.computeAsync(i,t,o):[]}))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=fe._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return Object(g["e"])(t)}onResult(e,t){this._result=t?e.concat(this._result):this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor)for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}return this._result.slice(0)}}let be=class e extends u["a"]{constructor(e,t,i,o,n){super(),this._hoverVisibleKey=t,this._keybindingService=o,this._contextKeyService=n,this.allowEditorOverflow=!0,this._participants=[i.createInstance(O,e,this),i.createInstance(q,e,this),i.createInstance(ae["a"],e,this),i.createInstance(re,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new c["b"]),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,e=>{e.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new fe(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new N(this._computer,e=>this._withResult(e,!0),null,e=>this._withResult(e,!1),this._editor.getOption(52).delay),this._register(h["o"](this.getDomNode(),h["d"].FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(h["o"](this.getDomNode(),h["d"].BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(m["F"].onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return e.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(6===t)return!0;if(7===t){const t=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,i=e.target.detail;if(i&&!i.isAfterLines&&"number"===typeof i.horizontalDistanceToText&&i.horizontalDistanceToText<t)return!0}return!1}maybeShowAt(e){var t;const i=[];for(const o of this._participants)if("function"===typeof o.suggestHoverAnchor){const t=o.suggestHoverAnchor(e);t&&i.push(t)}if(this._shouldShowAt(e)&&e.target.range){const o=[...(null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]].find(e=>e.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1,n=o?new r["a"](e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;i.push(new L["b"](0,n))}return 0!==i.length&&(i.sort((e,t)=>t.priority-e.priority),this._startShowingAt(i[0],0,!1),!0)}_showAt(e,t,i){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=i,i&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(ce["b"].Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){const e=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));e.forEach(e=>this._editor.applyFontInfo(e))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:i}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=t+"px",this._hover.contentsDomNode.style.lineHeight=""+i/t,this._hover.contentsDomNode.style.maxHeight=e+"px",this._hover.contentsDomNode.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px"}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,i){this._startShowingAt(new L["b"](0,e),t,i)}_startShowingAt(e,t,i){if(!this._lastAnchor||!this._lastAnchor.equals(e)){if(this._hoverOperation.cancel(),this._isVisible)if(this._showAtPosition&&this._lastAnchor&&e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition)){const t=this._messages.filter(t=>t.isValidForHoverAnchor(e));if(0===t.length)this.hide();else{if(t.length===this._messages.length)return;this._renderMessages(e,t)}}else this.hide();this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=i,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(t,i){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let o=1073741824,s=i[0].range,a=null,d=document.createDocumentFragment();const l=new n["b"],h=new Map;for(const e of i){o=Math.min(o,e.range.startColumn),s=r["a"].plusRange(s,e.range),e.forceShowAtRange&&(a=e.range),h.has(e.owner)||h.set(e.owner,[]);const t=h.get(e.owner);t.push(e)}const c=l.add(new me(this._keybindingService));for(const[e,n]of h)l.add(e.renderHoverParts(n,d,c));c.hasContent&&d.appendChild(c.hoverElement),this._renderDisposable=l,d.hasChildNodes()&&(a?this._showAt(a.getStartPosition(),a,this._shouldFocus):this._showAt(new p["a"](t.range.startLineNumber,o),s,this._shouldFocus),this._updateContents(d)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,s?[{range:s,options:e._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};be.ID="editor.contrib.modesContentHoverWidget",be._DECORATION_OPTIONS=_["b"].register({description:"content-hover-highlight",className:"hoverHighlight"}),be=ue([ge(2,le["a"]),ge(3,he["a"]),ge(4,de["b"])],be);const ve=h["a"];class Ce{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=e=>({value:e}),t=this._editor.getLineDecorations(this._lineNumber),i=[];if(!t)return i;for(const o of t){if(!o.options.glyphMarginClassName)continue;const t=o.options.glyphMarginHoverMessage;t&&!Object(P["b"])(t)&&i.push(...Object(g["c"])(t).map(e))}return i}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class we extends u["a"]{constructor(e,t,i=W["b"]){super(),this._renderDisposeables=this._register(new n["b"]),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new c["b"]),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new E["a"]({editor:this._editor},t,i)),this._computer=new Ce(this._editor),this._hoverOperation=new N(this._computer,e=>this._withResult(e),void 0,e=>this._withResult(e),300),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return we.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),o=this._editor.getScrollTop(),n=this._editor.getOption(58),s=this._hover.containerDomNode.clientHeight,r=i-o-(s-n)/2;this._hover.containerDomNode.style.left=t.glyphMarginLeft+t.glyphMarginWidth+"px",this._hover.containerDomNode.style.top=Math.max(Math.round(r),0)+"px"}_updateFont(){const e=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));e.forEach(e=>this._editor.applyFontInfo(e))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const o of t){const e=ve("div.hover-row.markdown-hover"),t=h["q"](e,ve("div.hover-contents")),n=this._renderDisposeables.add(this._markdownRenderer.render(o.value));t.appendChild(n.element),i.appendChild(e)}this._updateContents(i),this._showAt(e)}}we.ID="editor.contrib.modesGlyphHoverWidget";var Se=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},ye=function(e,t){return function(i,o){t(i,o,e)}};let Re=class e{constructor(e,t,i,o,s){this._editor=e,this._instantiationService=t,this._openerService=i,this._modeService=o,this._toUnhook=new n["b"],this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(e=>{e.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=a["a"].hoverVisible.bindTo(s)}static get(t){return t.getContribution(e.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._toUnhook.add(this._editor.onMouseUp(e=>this._onEditorMouseUp(e))),this._toUnhook.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._toUnhook.add(this._editor.onKeyDown(e=>this._onKeyDown(e))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._toUnhook.add(this._editor.onKeyDown(e=>this._onKeyDown(e)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(e=>this._onEditorScrollChanged(e)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;null===(e=this._contentWidget)||void 0===e||e.onModelDecorationsChanged(),null===(t=this._glyphWidget)||void 0===t||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;9!==t||e.target.detail!==be.ID?12===t&&e.target.detail===we.ID||(12!==t&&e.target.detail!==we.ID&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,i,o,n,s;let r=e.target.type;if(this._isMouseDown&&this._hoverClicked)return;if(this._isHoverSticky&&9===r&&e.target.detail===be.ID)return;if(this._isHoverSticky&&!(null===(i=null===(t=e.event.browserEvent.view)||void 0===t?void 0:t.getSelection())||void 0===i?void 0:i.isCollapsed))return;if(!this._isHoverSticky&&9===r&&e.target.detail===be.ID&&(null===(o=this._contentWidget)||void 0===o?void 0:o.isColorPickerVisible()))return;if(this._isHoverSticky&&12===r&&e.target.detail===we.ID)return;if(!this._isHoverEnabled)return void this._hideWidgets();const a=this._getOrCreateContentWidget();if(!a.maybeShowAt(e))return 2===r&&e.target.position?(null===(s=this._contentWidget)||void 0===s||s.hide(),this._glyphWidget||(this._glyphWidget=new we(this._editor,this._modeService,this._openerService)),void this._glyphWidget.startShowingAt(e.target.position.lineNumber)):void this._hideWidgets();null===(n=this._glyphWidget)||void 0===n||n.hide()}_onKeyDown(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}_hideWidgets(){var e,t,i;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(i=this._contentWidget)||void 0===i||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(be,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,i){this._getOrCreateContentWidget().startShowingAtRange(e,t,i)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}};Re.ID="editor.contrib.hover",Re=Se([ye(1,le["a"]),ye(2,W["a"]),ye(3,d["a"]),ye(4,de["b"])],Re);class Me extends s["b"]{constructor(){super({id:"editor.action.showHover",label:T["a"]({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:a["a"].editorTextFocus,primary:Object(o["c"])(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let i=Re.get(t);if(!i)return;const o=t.getPosition(),n=new r["a"](o.lineNumber,o.column,o.lineNumber,o.column),s=2===t.getOption(2);i.showContentHover(n,1,s)}}class xe extends s["b"]{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:T["a"]({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let i=Re.get(t);if(!i)return;const o=t.getPosition();if(!o)return;const n=new r["a"](o.lineNumber,o.column,o.lineNumber,o.column),s=l["GotoDefinitionAtPositionEditorContribution"].get(t),a=s.startFindDefinitionFromCursor(o);a.then(()=>{i.showContentHover(n,1,!0)})}}Object(s["l"])(Re.ID,Re),Object(s["j"])(Me),Object(s["j"])(xe),Object(y["f"])((e,t)=>{const i=e.getColor(ee["H"]);i&&t.addRule(`.monaco-editor .hoverHighlight { background-color: ${i}; }`);const o=e.getColor(ee["E"]);o&&t.addRule(`.monaco-editor .monaco-hover { background-color: ${o}; }`);const n=e.getColor(ee["F"]);n&&(t.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${n}; }`),t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${n.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${n.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${n.transparent(.5)}; }`));const s=e.getColor(ee["Pc"]);s&&t.addRule(`.monaco-editor .monaco-hover a { color: ${s}; }`);const r=e.getColor(ee["Oc"]);r&&t.addRule(`.monaco-editor .monaco-hover a:hover { color: ${r}; }`);const a=e.getColor(ee["G"]);a&&t.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const d=e.getColor(ee["I"]);d&&t.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${d}; }`);const l=e.getColor(ee["Nc"]);l&&t.addRule(`.monaco-editor .monaco-hover code { background-color: ${l}; }`)})},"194c":function(e,t,i){"use strict";i.r(t),i.d(t,"DragAndDropController",(function(){return u}));var o=i("92db"),n=i("cb4a"),s=(i("b94e"),i("ae58")),r=i("e0ab"),a=i("d8b0"),d=i("17e0"),l=i("2f07");class h{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){let i=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new a["a"](this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new d["a"](this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new d["a"](this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new d["a"](this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new d["a"](this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new d["a"](this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(e,t){return this.targetSelection}}function c(e){return n["f"]?e.altKey:e.ctrlKey}class u extends o["a"]{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(e))),this._register(this._editor.onMouseDrag(e=>this._onEditorMouseDrag(e))),this._register(this._editor.onMouseDrop(e=>this._onEditorMouseDrop(e))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(e=>this.onEditorKeyDown(e))),this._register(this._editor.onKeyUp(e=>this.onEditorKeyUp(e))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){this._editor.getOption(31)&&!this._editor.getOption(18)&&(c(e)&&(this._modifierPressed=!0),this._mouseDown&&c(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){this._editor.getOption(31)&&!this._editor.getOption(18)&&(c(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===u.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(null===this._dragSelection){const e=this._editor.getSelections()||[];let i=e.filter(e=>t.position&&e.containsPosition(t.position));if(1!==i.length)return;this._dragSelection=i[0]}c(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new r["a"](e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){let i=null;if(e.event.shiftKey){let e=this._editor.getSelection();if(e){const{selectionStartLineNumber:o,selectionStartColumn:n}=e;i=[new d["a"](o,n,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(e=>e.containsPosition(t)?new d["a"](t.lineNumber,t.column,t.lineNumber,t.column):e);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(c(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(u.ID,new h(this._dragSelection,t,c(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new a["a"](e.lineNumber,e.column,e.lineNumber,e.column),options:u._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return 6===e.type||7===e.type}_hitMargin(e){return 2===e.type||3===e.type||4===e.type}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}u.ID="editor.contrib.dragAndDrop",u.TRIGGER_KEY_VALUE=n["f"]?6:5,u._DECORATION_OPTIONS=l["b"].register({description:"dnd-target",className:"dnd-target"}),Object(s["l"])(u.ID,u)},4826:function(e,t,i){},"4c77":function(e,t,i){"use strict";i.d(t,"a",(function(){return ce}));var o=i("4b4a"),n=i("f123"),s=i("d3a2"),r=i("92db"),a=i("47f8"),d=i("e0ab"),l=i("d8b0"),h=i("8ec0"),c=i("d4b5"),u=i("d5b7"),g=i("672a"),p=i("6ad4"),_=i("bf32"),m=i("f3a5"),f=i("bbd3"),b=i("eb8f"),v=i("0100"),C=i("9cc3"),w=i("d208"),S=i("78a9"),y=i("98ef"),R=i("f295"),M=i("dbd6"),x=i("1ff1"),k=(i("02b3"),i("22a8")),O=i("2f07"),D=i("6b8c"),I=i("12fe"),N=i("d00e"),L=i("c815"),P=i("5474"),E=i("1af1"),F=i("d535"),A=i("f55d"),T=i("5365"),j=i("3c41"),W=i("9bef"),V=i("d1e2"),B=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},H=function(e,t){return function(i,o){t(i,o,e)}};let U=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof C["c"]||e instanceof C["a"]}getChildren(e){if(e instanceof C["c"])return e.groups;if(e instanceof C["a"])return e.resolve(this._resolverService).then(e=>e.children);throw new Error("bad tree")}};U=B([H(0,N["a"])],U);class K{getHeight(){return 23}getTemplateId(e){return e instanceof C["a"]?z.id:X.id}}let q=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof C["b"]){const i=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(i)return i.value}return Object(x["b"])(e.uri)}};q=B([H(0,T["a"])],q);class ${getId(e){return e instanceof C["b"]?e.id:e.uri}}let G=class extends r["a"]{constructor(e,t,i){super(),this._uriLabel=t;const o=document.createElement("div");o.classList.add("reference-file"),this.file=this._register(new E["a"](o,{supportHighlights:!0})),this.badge=new L["a"](w["q"](o,w["a"](".count"))),this._register(Object(W["a"])(this.badge,i)),e.appendChild(o)}set(e,t){let i=Object(x["d"])(e.uri);this.file.setLabel(Object(A["a"])(e.uri),this._uriLabel.getUriLabel(i,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const o=e.children.length;this.badge.setCount(o),o>1?this.badge.setTitleFormat(Object(c["a"])("referencesCount","{0} references",o)):this.badge.setTitleFormat(Object(c["a"])("referenceCount","{0} reference",o))}};G=B([H(1,j["a"]),H(2,V["b"])],G);let z=class e{constructor(t){this._instantiationService=t,this.templateId=e.id}renderTemplate(e){return this._instantiationService.createInstance(G,e)}renderElement(e,t,i){i.set(e.element,Object(F["c"])(e.filterData))}disposeTemplate(e){e.dispose()}};z.id="FileReferencesRenderer",z=B([H(0,_["a"])],z);class Z{constructor(e){this.label=new P["a"](e,!1)}set(e,t){var i;const o=null===(i=e.parent.getPreview(e))||void 0===i?void 0:i.preview(e.range);if(o&&o.value){const{value:e,highlight:i}=o;t&&!F["a"].isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,Object(F["c"])(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[i]))}else this.label.set(`${Object(x["b"])(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`)}}class X{constructor(){this.templateId=X.id}renderTemplate(e){return new Z(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}}X.id="OneReferenceRenderer";class Q{getWidgetAriaLabel(){return Object(c["a"])("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var Y=i("f7fb"),J=i("14f2"),ee=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},te=function(e,t){return function(i,o){t(i,o,e)}},ie=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};class oe{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new r["b"],this._callOnModelChange=new r["b"],this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(let t of this._model.references)if(t.uri.toString()===e.uri.toString())return void this._addDecorations(t.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let n=0,s=e.children.length;n<s;n++){let o=e.children[n];this._decorationIgnoreSet.has(o.id)||o.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:o.range,options:oe.DecorationOptions}),i.push(n))}const o=this._editor.deltaDecorations([],t);for(let n=0;n<o.length;n++)this._decorations.set(o[n],e.children[i[n]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[i,o]of this._decorations){const n=t.getDecorationRange(i);if(!n)continue;let s=!1;if(!l["a"].equalsRange(n,o.range)){if(l["a"].spansMultipleLines(n))s=!0;else{const e=o.range.endColumn-o.range.startColumn,t=n.endColumn-n.startColumn;e!==t&&(s=!0)}s?(this._decorationIgnoreSet.add(o.id),e.push(i)):o.range=n}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}oe.DecorationOptions=O["b"].register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class ne{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const o=JSON.parse(e);t=o.ratio,i=o.heightInLines}catch(o){}return{ratio:t||.7,heightInLines:i||18}}}class se extends f["c"]{}let re=class extends h["c"]{constructor(e,t,i,o,n,s,a,d,l,h,c,u){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},s),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=n,this._instantiationService=s,this._peekViewService=a,this._uriLabel=d,this._undoRedoService=l,this._keybindingService=h,this._modeService=c,this._languageConfigurationService=u,this._disposeOnNewModel=new r["b"],this._callOnDispose=new r["b"],this._onDidSelectReference=new R["b"],this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new w["b"](0,0),this._applyTheme(o.getColorTheme()),this._callOnDispose.add(o.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Object(r["f"])(this._preview),Object(r["f"])(this._previewNotAvailableMessage),Object(r["f"])(this._tree),Object(r["f"])(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(h["e"])||y["a"].transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(h["p"])||y["a"].transparent,primaryHeadingColor:e.getColor(h["q"]),secondaryHeadingColor:e.getColor(h["r"])})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=w["q"](e,w["a"]("div.messages")),w["K"](this._messageContainer),this._splitView=new S["b"](e,{orientation:1}),this._previewContainer=w["q"](e,w["a"]("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(k["a"],this._previewContainer,t,this.editor),w["K"](this._previewContainer),this._previewNotAvailableMessage=new O["c"](c["a"]("missingPreviewMessage","no preview available"),O["c"].DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=w["q"](e,w["a"]("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Q,keyboardNavigationLabelProvider:this._instantiationService.createInstance(q),identityProvider:new $,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:h["j"]}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(w["o"](this._treeContainer,"keydown",e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(se,"ReferencesWidget",this._treeContainer,new K,[this._instantiationService.createInstance(z),this._instantiationService.createInstance(X)],this._instantiationService.createInstance(U),i),this._splitView.addView({onDidChange:R["c"].None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},S["a"].Distribute),this._splitView.addView({onDidChange:R["c"].None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=this._dim.height+"px",this._treeContainer.style.width=e+"px",this._tree.layout(this._dim.height,e)}},S["a"].Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let o=(e,t)=>{e instanceof C["b"]&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen(e=>{e.sideBySide?o(e.element,"side"):e.editorOptions.pinned?o(e.element,"goto"):o(e.element,"show")}),w["K"](this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new w["b"](t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=c["a"]("noResults","No results"),w["W"](this._messageContainer),Promise.resolve(void 0)):(w["K"](this._messageContainer),this._decorationsManager=new oe(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const o=this._getFocusedReference();o&&this._onDidSelectReference.fire({element:{uri:o.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),w["W"](this._treeContainer),w["W"](this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof C["b"]?e:e instanceof C["a"]&&e.children.length>0?e.children[0]:void 0}revealReference(e){return ie(this,void 0,void 0,(function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}))}_revealReference(e,t){return ie(this,void 0,void 0,(function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==M["c"].inMemory?this.setTitle(Object(x["c"])(e.uri),this._uriLabel.getUriLabel(Object(x["d"])(e.uri))):this.setTitle(c["a"]("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent)),this._tree.reveal(e);const o=yield i;if(!this._model)return void o.dispose();Object(r["f"])(this._previewModelReference);const n=o.object;if(n){const t=this._preview.getModel()===n.textEditorModel?0:1,i=l["a"].lift(e.range).collapseToStart();this._previewModelReference=o,this._preview.setModel(n.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),o.dispose()}))}};re=ee([te(3,V["b"]),te(4,N["a"]),te(5,_["a"]),te(6,h["a"]),te(7,j["a"]),te(8,J["a"]),te(9,T["a"]),te(10,I["a"]),te(11,D["a"])],re),Object(V["f"])((e,t)=>{const i=e.getColor(h["m"]);i&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${i}; }`);const o=e.getColor(h["h"]);o&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${o}; }`);const n=e.getColor(h["i"]);n&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${n}; box-sizing: border-box; }`);const s=e.getColor(Y["b"]);s&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${s}; box-sizing: border-box; }`);const r=e.getColor(h["j"]);r&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${r}; }`);const a=e.getColor(h["l"]);a&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);const d=e.getColor(h["k"]);d&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${d}; }`);const l=e.getColor(h["n"]);l&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${l}; }`);const c=e.getColor(h["o"]);c&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${c} !important; }`);const u=e.getColor(h["f"]);u&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\tbackground-color: ${u};}`);const g=e.getColor(h["g"]);g&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\tbackground-color: ${g};}`)});var ae=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},de=function(e,t){return function(i,o){t(i,o,e)}},le=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const he=new p["c"]("referenceSearchVisible",!1,c["a"]("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let ce=class e{constructor(e,t,i,o,n,s,a,d){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=o,this._notificationService=n,this._instantiationService=s,this._storageService=a,this._configurationService=d,this._disposables=new r["b"],this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=he.bindTo(i)}static get(t){return t.getContribution(e.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let o;if(this._widget&&(o=this._widget.position),this.closeWidget(),o&&e.containsPosition(o))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const n="peekViewLayout",s=ne.fromJSON(this._storageService.get(n,0,"{}"));this._widget=this._instantiationService.createInstance(re,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(c["a"]("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(n,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(e=>{let{element:t,kind:o}=e;if(t)switch(o){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(t,!1,!1);break;case"side":this.openReference(t,!0,!1);break;case"goto":i?this._gotoReference(t):this.openReference(t,!1,!0);break}}));const r=++this._requestIdPool;t.then(t=>{var i;if(r===this._requestIdPool&&this._widget)return null===(i=this._model)||void 0===i||i.dispose(),this._model=t,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(c["a"]("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let t=this._editor.getModel().uri,i=new d["a"](e.startLineNumber,e.startColumn),o=this._model.nearestReference(t,i);if(o)return this._widget.setSelection(o).then(()=>{this._widget&&"editor"===this._editor.getOption(76)&&this._widget.focusOnPreviewEditor()})}});t.dispose()},e=>{this._notificationService.error(e)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return le(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const o=this._model.nextOrPreviousReference(i,e),n=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(o),yield this._gotoReference(o),n?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor()}))}revealReference(e){return le(this,void 0,void 0,(function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(e))}))}closeWidget(e=!0){var t,i;null===(t=this._widget)||void 0===t||t.dispose(),null===(i=this._model)||void 0===i||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(t){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const i=l["a"].lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:i}},this._editor).then(t=>{var n;if(this._ignoreModelChangeEvent=!1,t&&this._widget)if(this._editor===t)this._widget.show(i),this._widget.focusOnReferenceTree();else{const s=e.get(t),r=this._model.clone();this.closeWidget(),t.focus(),s.toggleWidget(i,Object(o["h"])(e=>Promise.resolve(r)),null!==(n=this._peekMode)&&void 0!==n&&n)}else this.closeWidget()},e=>{this._ignoreModelChangeEvent=!1,Object(n["f"])(e)})}openReference(e,t,i){t||this.closeWidget();const{uri:o,range:n}=e;this._editorService.openCodeEditor({resource:o,options:{selection:n,pinned:i}},this._editor,t)}};function ue(e,t){const i=Object(h["d"])(e);if(!i)return;let o=ce.get(i);o&&t(o)}ce.ID="editor.contrib.referencesController",ce=ae([de(2,p["b"]),de(3,a["a"]),de(4,b["a"]),de(5,_["a"]),de(6,v["a"]),de(7,g["a"])],ce),m["a"].registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Object(s["c"])(2089,60),when:p["a"].or(he,h["b"].inPeekEditor),handler(e){ue(e,e=>{e.changeFocusBetweenPreviewAndReferences()})}}),m["a"].registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:p["a"].or(he,h["b"].inPeekEditor),handler(e){ue(e,e=>{e.goToNextOrPreviousReference(!0)})}}),m["a"].registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:p["a"].or(he,h["b"].inPeekEditor),handler(e){ue(e,e=>{e.goToNextOrPreviousReference(!1)})}}),u["a"].registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),u["a"].registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),u["a"].registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),u["a"].registerCommand("closeReferenceSearch",e=>ue(e,e=>e.closeWidget())),m["a"].registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:p["a"].and(h["b"].inPeekEditor,p["a"].not("config.editor.stablePeek"))}),m["a"].registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:p["a"].and(he,p["a"].not("config.editor.stablePeek"))}),m["a"].registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:p["a"].and(he,f["e"]),handler(e){var t;const i=e.get(f["a"]),o=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(o)&&o[0]instanceof C["b"]&&ue(e,e=>e.revealReference(o[0]))}}),m["a"].registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:p["a"].and(he,f["e"]),handler(e){var t;const i=e.get(f["a"]),o=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(o)&&o[0]instanceof C["b"]&&ue(e,e=>e.openReference(o[0],!0,!0))}}),u["a"].registerCommand("openReference",e=>{var t;const i=e.get(f["a"]),o=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(o)&&o[0]instanceof C["b"]&&ue(e,e=>e.openReference(o[0],!1,!0))})},"5a4d":function(e,t,i){},"630c":function(e,t,i){},6353:function(e,t,i){"use strict";i.r(t);var o=i("ae58"),n=i("69e5"),s=i("d4b5");class r extends o["b"]{constructor(){super({id:"editor.action.fontZoomIn",label:s["a"]("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){n["a"].setZoomLevel(n["a"].getZoomLevel()+1)}}class a extends o["b"]{constructor(){super({id:"editor.action.fontZoomOut",label:s["a"]("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){n["a"].setZoomLevel(n["a"].getZoomLevel()-1)}}class d extends o["b"]{constructor(){super({id:"editor.action.fontZoomReset",label:s["a"]("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){n["a"].setZoomLevel(0)}}Object(o["j"])(r),Object(o["j"])(a),Object(o["j"])(d)},7863:function(e,t,i){"use strict";i.r(t),i.d(t,"GotoDefinitionAtPositionEditorContribution",(function(){return M}));var o=i("4b4a"),n=i("f123"),s=i("6b5e"),r=i("92db"),a=i("4d73"),d=(i("4826"),i("5e2a")),l=i("ae58"),h=i("e0ab"),c=i("d8b0"),u=i("d778"),g=i("12fe"),p=i("d00e"),_=i("9c55"),m=i("8ec0"),f=i("d4b5"),b=i("6ad4"),v=i("f7fb"),C=i("d1e2"),w=i("f61d"),S=i("a974"),y=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},R=function(e,t){return function(i,o){t(i,o,e)}};let M=class e{constructor(e,t,i){this.textModelResolverService=t,this.modeService=i,this.toUnhook=new r["b"],this.toUnhookForKeyboard=new r["b"],this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let o=new _["a"](e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown(([e,t])=>{this.startFindDefinitionFromMouse(e,Object(a["p"])(t))})),this.toUnhook.add(o.onExecute(e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},e=>{this.removeLinkDecorations(),Object(n["f"])(e)})})),this.toUnhook.add(o.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(t){return t.getContribution(e.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;let r=new d["a"](this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Object(o["h"])(t=>this.findDefinition(e,t)),this.previousPromise.then(t=>{if(t&&t.length&&r.validate(this.editor))if(t.length>1)this.addDecoration(new c["a"](e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),(new s["a"]).appendText(f["a"]("multipleResults","Click to show {0} definitions.",t.length)));else{let o=t[0];if(!o.uri)return;this.textModelResolverService.createModelReference(o.uri).then(t=>{if(!t.object||!t.object.textEditorModel)return void t.dispose();const{object:{textEditorModel:n}}=t,{startLineNumber:r}=o.range;if(r<1||r>n.getLineCount())return void t.dispose();const a=this.getPreviewValue(n,r,o);let d;d=o.originSelectionRange?c["a"].lift(o.originSelectionRange):new c["a"](e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);const l=this.modeService.getModeIdByFilepathOrFirstLine(n.uri);this.addDecoration(d,(new s["a"]).appendCodeblock(l||"",a)),t.dispose()})}else this.removeLinkDecorations()}).then(void 0,n["f"])}getPreviewValue(t,i,o){let n=o.targetSelectionRange?o.range:this.getPreviewRangeBasedOnBrackets(t,i);const s=n.endLineNumber-n.startLineNumber;s>=e.MAX_SOURCE_PREVIEW_LINES&&(n=this.getPreviewRangeBasedOnIndentation(t,i));const r=this.stripIndentationFromPreviewRange(t,i,n);return r}stripIndentationFromPreviewRange(e,t,i){const o=e.getLineFirstNonWhitespaceColumn(t);let n=o;for(let r=t+1;r<i.endLineNumber;r++){const t=e.getLineFirstNonWhitespaceColumn(r);n=Math.min(n,t)}const s=e.getValueInRange(i).replace(new RegExp(`^\\s{${n-1}}`,"gm"),"").trim();return s}getPreviewRangeBasedOnIndentation(t,i){const o=t.getLineFirstNonWhitespaceColumn(i),n=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES);let s=i+1;for(;s<n;s++){let e=t.getLineFirstNonWhitespaceColumn(s);if(o===e)break}return new c["a"](i,1,s+1,1)}getPreviewRangeBasedOnBrackets(t,i){const o=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES),n=[];let s=!0,r=t.findNextBracket(new h["a"](i,1));while(null!==r){if(0===n.length)n.push(r);else{const e=n[n.length-1];if(e.open[0]===r.open[0]&&e.isOpen&&!r.isOpen?n.pop():n.push(r),0===n.length){if(!s)return new c["a"](i,1,r.range.endLineNumber+1,1);s=!1}}const e=t.getLineMaxColumn(i);let a=r.range.endLineNumber,d=r.range.endColumn;if(e===r.range.endColumn&&(a++,d=1),a>o)return new c["a"](i,1,o+1,1);r=t.findNextBracket(new h["a"](a,d))}return new c["a"](i,1,o+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[i])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&u["f"].has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?Object(S["b"])(i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(e=>{const i=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(e),o=new w["DefinitionAction"]({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0});return o.run(e,this.editor)})}isInPeekEditor(e){const t=e.get(b["b"]);return m["b"].inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};M.ID="editor.contrib.gotodefinitionatposition",M.MAX_SOURCE_PREVIEW_LINES=8,M=y([R(1,p["a"]),R(2,g["a"])],M),Object(l["l"])(M.ID,M),Object(C["f"])((e,t)=>{const i=e.getColor(v["q"]);i&&t.addRule(`.monaco-editor .goto-definition-link { color: ${i} !important; }`)})},8544:function(e,t,i){"use strict";i.r(t);var o=i("945a"),n=i("4163"),s=i("f123"),r=i("d3a2"),a=i("92db"),d=i("ae58"),l=i("47f8"),h=i("37e9"),c=i("d8b0"),u=i("7c05"),g=i("d778"),p=i("6fc9"),_=i("9d20"),m=i("fcfd"),f=i("d4b5"),b=i("d5b7"),v=i("6ad4"),C=i("bf32"),w=i("b5f6"),S=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,o){t(i,o,e)}},R=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};let M=class{constructor(e,t){this._workerService=t,this._callOnDispose=new a["b"],this._callOnModel=new a["b"],this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(g["x"].onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(48))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=g["x"].ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let i=new h["b"];for(let o of t.autoFormatTriggerCharacters)i.add(o.charCodeAt(0));this._callOnModel.add(this._editor.onDidType(e=>{let t=e.charCodeAt(e.length-1);i.has(t)&&this._trigger(String.fromCharCode(t))}))}_trigger(e){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition();let n=!1;const s=this._editor.onDidChangeModelContent(e=>{if(e.isFlush)return n=!0,void s.dispose();for(let t=0,o=e.changes.length;t<o;t++){const o=e.changes[t];if(o.range.endLineNumber<=i.lineNumber)return n=!0,void s.dispose()}});Object(_["e"])(this._workerService,t,i,e,t.getFormattingOptions()).then(e=>{s.dispose(),n||Object(o["n"])(e)&&(m["a"].execute(this._editor,e,!0),Object(_["b"])(e))},e=>{throw s.dispose(),e})}};M.ID="editor.contrib.autoFormat",M=S([y(1,p["a"])],M);let x=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new a["b"],this._callOnModel=new a["b"],this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(g["j"].onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(47)&&this.editor.hasModel()&&g["j"].has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(_["c"],this.editor,e,2,w["b"].None,n["a"].None).catch(s["f"]))}};x.ID="editor.contrib.formatOnPaste",x=S([y(1,C["a"])],x);class k extends d["b"]{constructor(){super({id:"editor.action.formatDocument",label:f["a"]("formatDocument.label","Format Document"),alias:"Format Document",precondition:v["a"].and(u["a"].notInCompositeEditor,u["a"].writable,u["a"].hasDocumentFormattingProvider),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return R(this,void 0,void 0,(function*(){if(t.hasModel()){const i=e.get(C["a"]),o=e.get(w["a"]);yield o.showWhile(i.invokeFunction(_["d"],t,1,w["b"].None,n["a"].None),250)}}))}}class O extends d["b"]{constructor(){super({id:"editor.action.formatSelection",label:f["a"]("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:v["a"].and(u["a"].writable,u["a"].hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:Object(r["c"])(2089,2084),weight:100},contextMenuOpts:{when:u["a"].hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return R(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(C["a"]),o=t.getModel(),s=t.getSelections().map(e=>e.isEmpty()?new c["a"](e.startLineNumber,1,e.startLineNumber,o.getLineMaxColumn(e.startLineNumber)):e),r=e.get(w["a"]);yield r.showWhile(i.invokeFunction(_["c"],t,s,1,w["b"].None,n["a"].None),250)}))}}Object(d["l"])(M.ID,M),Object(d["l"])(x.ID,x),Object(d["j"])(k),Object(d["j"])(O),b["a"].registerCommand("editor.action.format",e=>R(void 0,void 0,void 0,(function*(){const t=e.get(l["a"]).getFocusedCodeEditor();if(!t||!t.hasModel())return;const i=e.get(b["b"]);t.getSelection().isEmpty()?yield i.executeCommand("editor.action.formatDocument"):yield i.executeCommand("editor.action.formatSelection")})))},9678:function(e,t,i){"use strict";i.r(t),i.d(t,"getSelectionSearchString",(function(){return Ge})),i.d(t,"CommonFindController",(function(){return ze})),i.d(t,"FindController",(function(){return Ze})),i.d(t,"StartFindAction",(function(){return Xe})),i.d(t,"StartFindWithSelectionAction",(function(){return Qe})),i.d(t,"MatchFindAction",(function(){return Ye})),i.d(t,"NextMatchFindAction",(function(){return Je})),i.d(t,"PreviousMatchFindAction",(function(){return et})),i.d(t,"SelectionMatchFindAction",(function(){return tt})),i.d(t,"NextSelectionMatchFindAction",(function(){return it})),i.d(t,"PreviousSelectionMatchFindAction",(function(){return ot})),i.d(t,"StartFindReplaceAction",(function(){return nt}));var o=i("4b4a"),n=i("92db"),s=i("1537"),r=i("ae58"),a=i("7c05"),d=i("945a"),l=i("0fff"),h=i("e0ab"),c=i("d8b0"),u=i("17e0"),g=i("5961"),p=i("3a12"),_=i("2f07"),m=i("f7fb"),f=i("d1e2");class b{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(e=>this._editor.getModel().getDecorationRange(e)).filter(e=>!!e);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const e=i.options;if(e===b._FIND_MATCH_DECORATION||e===b._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let o=0,n=this._decorations.length;o<n;o++){let n=this._editor.getModel().getDecorationRange(this._decorations[o]);if(e.equalsRange(n)){t=this._decorations[o],i=o+1;break}}return null===this._highlightedDecorationId&&null===t||this._editor.changeDecorations(e=>{if(null!==this._highlightedDecorationId&&(e.changeDecorationOptions(this._highlightedDecorationId,b._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),null!==t&&(this._highlightedDecorationId=t,e.changeDecorationOptions(this._highlightedDecorationId,b._CURRENT_FIND_MATCH_DECORATION)),null!==this._rangeHighlightDecorationId&&(e.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),null!==t){let i=this._editor.getModel().getDecorationRange(t);if(i.startLineNumber!==i.endLineNumber&&1===i.endColumn){let e=i.endLineNumber-1,t=this._editor.getModel().getLineMaxColumn(e);i=new c["a"](i.startLineNumber,i.startColumn,e,t)}this._rangeHighlightDecorationId=e.addDecoration(i,b._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let o=b._FIND_MATCH_DECORATION,n=[];if(e.length>1e3){o=b._FIND_MATCH_NO_OVERVIEW_DECORATION;const t=this._editor.getModel().getLineCount(),i=this._editor.getLayoutInfo().height,s=i/t,r=Math.max(2,Math.ceil(3/s));let a=e[0].range.startLineNumber,d=e[0].range.endLineNumber;for(let o=1,l=e.length;o<l;o++){const t=e[o].range;d+r>=t.startLineNumber?t.endLineNumber>d&&(d=t.endLineNumber):(n.push({range:new c["a"](a,1,d,1),options:b._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),a=t.startLineNumber,d=t.endLineNumber)}n.push({range:new c["a"](a,1,d,1),options:b._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let s=new Array(e.length);for(let t=0,r=e.length;t<r;t++)s[t]={range:e[t].range,options:o};this._decorations=i.deltaDecorations(this._decorations,s),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,n),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(e=>i.removeDecoration(e)),this._findScopeDecorationIds=[]),(null===t||void 0===t?void 0:t.length)&&(this._findScopeDecorationIds=t.map(e=>i.addDecoration(e,b._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(0===this._decorations.length)return null;for(let t=this._decorations.length-1;t>=0;t--){let i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(o&&!(o.endLineNumber>e.lineNumber)){if(o.endLineNumber<e.lineNumber)return o;if(!(o.endColumn>e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(0===this._decorations.length)return null;for(let t=0,i=this._decorations.length;t<i;t++){let i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(o&&!(o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}b._CURRENT_FIND_MATCH_DECORATION=_["b"].register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Object(f["g"])(m["oc"]),position:p["g"].Center},minimap:{color:Object(f["g"])(m["fc"]),position:p["f"].Inline}}),b._FIND_MATCH_DECORATION=_["b"].register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Object(f["g"])(m["oc"]),position:p["g"].Center},minimap:{color:Object(f["g"])(m["fc"]),position:p["f"].Inline}}),b._FIND_MATCH_NO_OVERVIEW_DECORATION=_["b"].register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),b._FIND_MATCH_ONLY_OVERVIEW_DECORATION=_["b"].register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Object(f["g"])(m["oc"]),position:p["g"].Center}}),b._RANGE_HIGHLIGHT_DECORATION=_["b"].register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),b._FIND_SCOPE_DECORATION=_["b"].register({description:"find-scope",className:"findScope",isWholeLine:!0});class v{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let e=[];for(let t=0;t<this._ranges.length;t++)e.push({range:this._ranges[t],text:this._replaceStrings[t]});e.sort((e,t)=>c["a"].compareRangesUsingStarts(e.range,t.range));let i=[],o=e[0];for(let t=1;t<e.length;t++)o.range.endLineNumber===e[t].range.startLineNumber&&o.range.endColumn===e[t].range.startColumn?(o.range=o.range.plusRange(e[t].range),o.text=o.text+e[t].text):(i.push(o),o=e[t]);i.push(o);for(const n of i)t.addEditOperation(n.range,n.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}var C=i("c365");class w{constructor(e){this.staticValue=e,this.kind=0}}class S{constructor(e){this.pieces=e,this.kind=1}}class y{constructor(e){e&&0!==e.length?1===e.length&&null!==e[0].staticValue?this._state=new w(e[0].staticValue):this._state=new S(e):this._state=new w("")}static fromStaticValue(e){return new y([R.staticValue(e)])}get hasReplacementPatterns(){return 1===this._state.kind}buildReplaceString(e,t){if(0===this._state.kind)return t?Object(C["a"])(e,this._state.staticValue):this._state.staticValue;let i="";for(let o=0,n=this._state.pieces.length;o<n;o++){let t=this._state.pieces[o];if(null!==t.staticValue){i+=t.staticValue;continue}let n=y._substitute(t.matchIndex,e);if(null!==t.caseOps&&t.caseOps.length>0){let e=[],i=t.caseOps.length,o=0;for(let s=0,r=n.length;s<r;s++){if(o>=i){e.push(n.slice(s));break}switch(t.caseOps[o]){case"U":e.push(n[s].toUpperCase());break;case"u":e.push(n[s].toUpperCase()),o++;break;case"L":e.push(n[s].toLowerCase());break;case"l":e.push(n[s].toLowerCase()),o++;break;default:e.push(n[s])}}n=e.join("")}i+=n}return i}static _substitute(e,t){if(null===t)return"";if(0===e)return t[0];let i="";while(e>0){if(e<t.length){let o=t[e]||"";return o+i}i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class R{constructor(e,t,i){this.staticValue=e,this.matchIndex=t,i&&0!==i.length?this.caseOps=i.slice(0):this.caseOps=null}static staticValue(e){return new R(e,-1,null)}static caseOps(e,t){return new R(null,e,t)}}class M{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){0!==e.length&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=R.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=R.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=R.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new y(this._result)}}function x(e){if(!e||0===e.length)return new y(null);let t=[],i=new M(e);for(let o=0,n=e.length;o<n;o++){let s=e.charCodeAt(o);if(92!==s){if(36===s){if(o++,o>=n)break;let s=e.charCodeAt(o);if(36===s){i.emitUnchanged(o-1),i.emitStatic("$",o+1);continue}if(48===s||38===s){i.emitUnchanged(o-1),i.emitMatchIndex(0,o+1,t),t.length=0;continue}if(49<=s&&s<=57){let r=s-48;if(o+1<n){let n=e.charCodeAt(o+1);if(48<=n&&n<=57){o++,r=10*r+(n-48),i.emitUnchanged(o-2),i.emitMatchIndex(r,o+1,t),t.length=0;continue}}i.emitUnchanged(o-1),i.emitMatchIndex(r,o+1,t),t.length=0;continue}}}else{if(o++,o>=n)break;let s=e.charCodeAt(o);switch(s){case 92:i.emitUnchanged(o-1),i.emitStatic("\\",o+1);break;case 110:i.emitUnchanged(o-1),i.emitStatic("\n",o+1);break;case 116:i.emitUnchanged(o-1),i.emitStatic("\t",o+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(o-1),i.emitStatic("",o+1),t.push(String.fromCharCode(s));break}}}return i.finalize()}var k=i("6ad4");const O=new k["c"]("findWidgetVisible",!1),D=new k["c"]("findInputFocussed",!1),I=new k["c"]("replaceInputFocussed",!1),N={primary:545,mac:{primary:2593}},L={primary:565,mac:{primary:2613}},P={primary:560,mac:{primary:2608}},E={primary:554,mac:{primary:2602}},F={primary:558,mac:{primary:2606}},A={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},T=19999,j=240;class W{constructor(e,t){this._toDispose=new n["b"],this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new o["g"],this._decorations=new b(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new o["e"](()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(e=>{3!==e.reason&&5!==e.reason&&6!==e.reason||this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(e=>{this._ignoreModelContentChanged||(e.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,Object(n["f"])(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){if(!this._isDisposed&&this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)){let t=this._editor.getModel();t.isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},j)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;"undefined"!==typeof t?null!==t&&(i=Array.isArray(t)?t:[t]):i=this._decorations.getFindScopes(),null!==i&&(i=i.map(e=>{if(e.startLineNumber!==e.endLineNumber){let t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new c["a"](e.startLineNumber,1,t,this._editor.getModel().getLineMaxColumn(t))}return e}));let o=this._findMatches(i,!1,T);this._decorations.set(o,i);const n=this._editor.getSelection();let s=this._decorations.getCurrentMatchesPosition(n);if(0===s&&o.length>0){const e=Object(d["h"])(o.map(e=>e.range),e=>c["a"].compareRangesUsingStarts(e,n)>=0);s=e>0?e-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:o}=e,n=this._editor.getModel();return t||1===o?(1===i?i=n.getLineCount():i--,o=n.getLineMaxColumn(i)):o--,new h["a"](i,o)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const t=this._decorations.matchAfterPosition(e);return void(t&&this._setCurrentFindMatch(t))}if(this._decorations.getCount()<T){let t=this._decorations.matchBeforePosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),t=this._decorations.matchBeforePosition(e)),void(t&&this._setCurrentFindMatch(t))}if(this._cannotFind())return;let i=this._decorations.getFindScope(),o=W._getSearchRange(this._editor.getModel(),i);o.getEndPosition().isBefore(e)&&(e=o.getEndPosition()),e.isBefore(o.getStartPosition())&&(e=o.getEndPosition());let{lineNumber:n,column:s}=e,r=this._editor.getModel(),a=new h["a"](n,s),d=r.findPreviousMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1);return d&&d.range.isEmpty()&&d.range.getStartPosition().equals(a)&&(a=this._prevSearchPosition(a),d=r.findPreviousMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1)),d?t||o.containsRange(d.range)?void this._setCurrentFindMatch(d.range):this._moveToPrevMatch(d.range.getStartPosition(),!0):void 0}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:o}=e,n=this._editor.getModel();return t||o===n.getLineMaxColumn(i)?(i===n.getLineCount()?i=1:i++,o=1):o++,new h["a"](i,o)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const t=this._decorations.matchBeforePosition(e);return void(t&&this._setCurrentFindMatch(t))}if(this._decorations.getCount()<T){let t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,o=!1){if(this._cannotFind())return null;let n=this._decorations.getFindScope(),s=W._getSearchRange(this._editor.getModel(),n);s.getEndPosition().isBefore(e)&&(e=s.getStartPosition()),e.isBefore(s.getStartPosition())&&(e=s.getStartPosition());let{lineNumber:r,column:a}=e,d=this._editor.getModel(),l=new h["a"](r,a),c=d.findNextMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t);return i&&c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._nextSearchPosition(l),c=d.findNextMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t)),c?o||s.containsRange(c.range)?c:this._getNextMatch(c.range.getEndPosition(),t,i,!0):null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?x(this._state.replaceString):y.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){let o=e.buildReplaceString(i.matches,this._state.preserveCase),n=new l["a"](t,o);this._executeEditorCommand("replace",n),this._decorations.setStartPosition(new h["a"](t.startLineNumber,t.startColumn+o.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const o=(e||[null]).map(e=>W._getSearchRange(this._editor.getModel(),e));return this._editor.getModel().findMatches(this._state.searchString,o,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=T?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const e=new g["a"](this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null),t=e.parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let e="mu";i.ignoreCase&&(e+="i"),i.global&&(e+="g"),i=new RegExp(i.source,e)}const o=this._editor.getModel(),n=o.getValue(1),s=o.getFullModelRange(),r=this._getReplacePattern();let a;const d=this._state.preserveCase;a=r.hasReplacementPatterns||d?n.replace(i,(function(){return r.buildReplaceString(arguments,d)})):n.replace(i,r.buildReplaceString(null,d));let h=new l["b"](s,a,this._editor.getSelection());this._executeEditorCommand("replaceAll",h)}_regularReplaceAll(e){const t=this._getReplacePattern();let i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),o=[];for(let s=0,r=i.length;s<r;s++)o[s]=t.buildReplaceString(i[s].matches,this._state.preserveCase);let n=new v(this._editor.getSelection(),i.map(e=>e.range),o);this._executeEditorCommand("replaceAll",n)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824),i=t.map(e=>new u["a"](e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)),o=this._editor.getSelection();for(let n=0,s=i.length;n<s;n++){let e=i[n];if(e.equalsRange(o)){i=[o].concat(i.slice(0,n)).concat(i.slice(n+1));break}}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}var V=i("d208"),B=i("895a"),H=i("a9b7");class U extends H["a"]{constructor(e,t,i,n){super(),this._hideSoon=this._register(new o["e"](()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s=n.getColorTheme().getColor(m["lb"]),r=n.getColorTheme().getColor(m["mb"]),a=n.getColorTheme().getColor(m["kb"]);this.caseSensitive=this._register(new B["a"]({appendTitle:this._keybindingLabelFor(A.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new B["c"]({appendTitle:this._keybindingLabelFor(A.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new B["b"]({appendTitle:this._keybindingLabelFor(A.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(e=>{let t=!1;e.isRegex&&(this.regex.checked=this._state.isRegex,t=!0),e.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,t=!0),e.matchCase&&(this.caseSensitive.checked=this._state.matchCase,t=!0),!this._state.isRevealed&&t&&this._revealTemporarily()})),this._register(V["j"](this._domNode,e=>this._onMouseOut())),this._register(V["i"](this._domNode,"mouseover",e=>this._onMouseOver())),this._applyTheme(n.getColorTheme()),this._register(n.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return U.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(m["lb"]),inputActiveOptionForeground:e.getColor(m["mb"]),inputActiveOptionBackground:e.getColor(m["kb"])};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}U.ID="editor.contrib.findOptionsWidget",Object(f["f"])((e,t)=>{const i=e.getColor(m["cb"]);i&&t.addRule(`.monaco-editor .findOptionsWidget { background-color: ${i}; }`);const o=e.getColor(m["eb"]);o&&t.addRule(`.monaco-editor .findOptionsWidget { color: ${o}; }`);const n=e.getColor(m["Tc"]);n&&t.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${n}; }`);const s=e.getColor(m["h"]);s&&t.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${s}; }`)});var K=i("f295");function q(e,t){return 1===e||2!==e&&t}class $ extends n["a"]{constructor(){super(),this._onFindReplaceStateChange=this._register(new K["b"]),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return q(this._isRegexOverride,this._isRegex)}get wholeWord(){return q(this._wholeWordOverride,this._wholeWord)}get matchCase(){return q(this._matchCaseOverride,this._matchCase)}get preserveCase(){return q(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,i){let o={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},n=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,o.matchesPosition=!0,n=!0),this._matchesCount!==t&&(this._matchesCount=t,o.matchesCount=!0,n=!0),"undefined"!==typeof i&&(c["a"].equalsRange(this._currentMatch,i)||(this._currentMatch=i,o.currentMatch=!0,n=!0)),n&&this._onFindReplaceStateChange.fire(o)}change(e,t,i=!0){var o;let n={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},s=!1;const r=this.isRegex,a=this.wholeWord,d=this.matchCase,l=this.preserveCase;"undefined"!==typeof e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,n.searchString=!0,s=!0),"undefined"!==typeof e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,n.replaceString=!0,s=!0),"undefined"!==typeof e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,n.isRevealed=!0,s=!0),"undefined"!==typeof e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,n.isReplaceRevealed=!0,s=!0),"undefined"!==typeof e.isRegex&&(this._isRegex=e.isRegex),"undefined"!==typeof e.wholeWord&&(this._wholeWord=e.wholeWord),"undefined"!==typeof e.matchCase&&(this._matchCase=e.matchCase),"undefined"!==typeof e.preserveCase&&(this._preserveCase=e.preserveCase),"undefined"!==typeof e.searchScope&&((null===(o=e.searchScope)||void 0===o?void 0:o.every(e=>{var t;return null===(t=this._searchScope)||void 0===t?void 0:t.some(t=>!c["a"].equalsRange(t,e))}))||(this._searchScope=e.searchScope,n.searchScope=!0,s=!0)),"undefined"!==typeof e.loop&&this._loop!==e.loop&&(this._loop=e.loop,n.loop=!0,s=!0),this._isRegexOverride="undefined"!==typeof e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride="undefined"!==typeof e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride="undefined"!==typeof e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride="undefined"!==typeof e.preserveCaseOverride?e.preserveCaseOverride:0,r!==this.isRegex&&(s=!0,n.isRegex=!0),a!==this.wholeWord&&(s=!0,n.wholeWord=!0),d!==this.matchCase&&(s=!0,n.matchCase=!0),l!==this.preserveCase&&(s=!0,n.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(n)}canNavigateBack(){return this.canNavigateInLoop()||1!==this.matchesPosition}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=T}}var G=i("4d3c"),z=i("9d4a"),Z=i("3d8c"),X=i("47a8"),Q=i("f123"),Y=i("cb4a"),J=(i("5a4d"),i("d4b5")),ee=i("e338"),te=i("b2eb"),ie=i("6276"),oe=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const ne=Object(ie["b"])("find-selection",X["b"].selection,J["a"]("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),se=Object(ie["b"])("find-collapsed",X["b"].chevronRight,J["a"]("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),re=Object(ie["b"])("find-expanded",X["b"].chevronDown,J["a"]("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),ae=Object(ie["b"])("find-replace",X["b"].replace,J["a"]("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),de=Object(ie["b"])("find-replace-all",X["b"].replaceAll,J["a"]("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),le=Object(ie["b"])("find-previous-match",X["b"].arrowUp,J["a"]("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),he=Object(ie["b"])("find-next-match",X["b"].arrowDown,J["a"]("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),ce=J["a"]("label.find","Find"),ue=J["a"]("placeholder.find","Find"),ge=J["a"]("label.previousMatchButton","Previous Match"),pe=J["a"]("label.nextMatchButton","Next Match"),_e=J["a"]("label.toggleSelectionFind","Find in Selection"),me=J["a"]("label.closeButton","Close"),fe=J["a"]("label.replace","Replace"),be=J["a"]("placeholder.replace","Replace"),ve=J["a"]("label.replaceButton","Replace"),Ce=J["a"]("label.replaceAllButton","Replace All"),we=J["a"]("label.toggleReplaceButton","Toggle Replace"),Se=J["a"]("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",T),ye=J["a"]("label.matchesLocation","{0} of {1}"),Re=J["a"]("label.noResults","No results"),Me=419,xe=275,ke=xe-54;let Oe=69;const De=33,Ie="ctrlEnterReplaceAll.windows.donotask",Ne=Y["f"]?256:2048;class Le{constructor(e){this.afterLineNumber=e,this.heightInPx=De,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Pe(e,t,i){const o=!!t.match(/\n/);i&&o&&i.selectionStart>0&&e.stopPropagation()}function Ee(e,t,i){const o=!!t.match(/\n/);i&&o&&i.selectionEnd<i.value.length&&e.stopPropagation()}class Fe extends H["a"]{constructor(e,t,i,s,r,a,d,l,h){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=s,this._keybindingService=r,this._contextKeyService=a,this._storageService=l,this._notificationService=h,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(Ie,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new o["a"](500),this._register(Object(n["i"])(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(e=>{if(e.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),e.hasChanged(129)&&this._tryUpdateWidgetWidth(),e.hasChanged(2)&&this.updateAccessibilitySupport(),e.hasChanged(35)){const e=this._codeEditor.getOption(35).addExtraSpaceOnTop;e&&!this._viewZone&&(this._viewZone=new Le(0),this._showViewZone()),!e&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>oe(this,void 0,void 0,(function*(){if(this._isVisible){let e=yield this._controller.getGlobalBufferTerm();e&&e!==this._state.searchString&&(this._state.change({searchString:e},!1),this._findInput.select())}})))),this._findInputFocused=D.bindTo(a),this._findFocusTracker=this._register(V["Y"](this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=I.bindTo(a),this._replaceFocusTracker=this._register(V["Y"](this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new Le(0)),this._applyTheme(d.getColorTheme()),this._register(d.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(e=>{e.scrollTopChanged?this._layoutViewZone():setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return Fe.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(80)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=V["I"](this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let e=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",e),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Q["f"])}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){let e;if(this._matchesCount.style.minWidth=Oe+"px",this._state.matchesCount>=T?this._matchesCount.title=Se:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=T&&(t+="+");let i=String(this._state.matchesPosition);"0"===i&&(i="?"),e=s["v"](ye,i,t)}else e=Re;this._matchesCount.appendChild(document.createTextNode(e)),Object(G["a"])(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Oe=Math.max(Oe,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===Re)return""===i?J["a"]("ariaSearchNoResultEmpty","{0} found",e):J["a"]("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const o=J["a"]("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),n=this._codeEditor.getModel();if(n&&t.startLineNumber<=n.getLineCount()&&t.startLineNumber>=1){const e=n.getLineContent(t.startLineNumber);return`${e}, ${o}`}return o}return J["a"]("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let i=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const t=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=t;break;default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const o=V["D"](i),n=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),s=o.left+(n?n.left:0),r=n?n.top:0;if(this._viewZone&&r<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const i=V["G"](this._domNode).left;s>i&&(t=!1);const n=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition()),r=o.left+(n?n.left:0);r>i&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){const t=this._codeEditor.getOption(35).addExtraSpaceOnTop;if(!t)return void this._removeViewZone();if(!this._isVisible)return;const i=this._viewZone;void 0===this._viewZoneId&&i&&this._codeEditor.changeViewZones(t=>{i.heightInPx=this._getHeight(),this._viewZoneId=t.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible)return;const t=this._codeEditor.getOption(35).addExtraSpaceOnTop;if(!t)return;void 0===this._viewZone&&(this._viewZone=new Le(0));const i=this._viewZone;this._codeEditor.changeViewZones(t=>{if(void 0!==this._viewZoneId){const o=this._getHeight();if(o===i.heightInPx)return;let n=o-i.heightInPx;return i.heightInPx=o,t.layoutZone(this._viewZoneId),void(e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+n))}{let o=this._getHeight();if(o-=this._codeEditor.getOption(74).top,o<=0)return;i.heightInPx=o,this._viewZoneId=t.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{void 0!==this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(m["lb"]),inputActiveOptionBackground:e.getColor(m["kb"]),inputActiveOptionForeground:e.getColor(m["mb"]),inputBackground:e.getColor(m["nb"]),inputForeground:e.getColor(m["pb"]),inputBorder:e.getColor(m["ob"]),inputValidationInfoBackground:e.getColor(m["tb"]),inputValidationInfoForeground:e.getColor(m["vb"]),inputValidationInfoBorder:e.getColor(m["ub"]),inputValidationWarningBackground:e.getColor(m["wb"]),inputValidationWarningForeground:e.getColor(m["yb"]),inputValidationWarningBorder:e.getColor(m["xb"]),inputValidationErrorBackground:e.getColor(m["qb"]),inputValidationErrorForeground:e.getColor(m["sb"]),inputValidationErrorBorder:e.getColor(m["rb"])};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible)return;if(!V["N"](this._domNode))return;const e=this._codeEditor.getLayoutInfo(),t=e.contentWidth;if(t<=0)return void this._domNode.classList.add("hiddenEditor");this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,o=e.minimap.minimapWidth;let n=!1,s=!1,r=!1;if(this._resized){let e=V["I"](this._domNode);if(e>Me)return this._domNode.style.maxWidth=i-28-o-15+"px",void(this._replaceInput.width=V["I"](this._findInput.domNode))}if(Me+28+o>=i&&(s=!0),Me+28+o-Oe>=i&&(r=!0),Me+28+o-Oe>=i+50&&(n=!0),this._domNode.classList.toggle("collapsed-find-widget",n),this._domNode.classList.toggle("narrow-find-widget",r),this._domNode.classList.toggle("reduced-find-widget",s),r||n||(this._domNode.style.maxWidth=i-28-o-15+"px"),this._resized){this._findInput.inputBox.layout();let e=this._findInput.inputBox.element.clientWidth;e>0&&(this._replaceInput.width=e)}else this._isReplaceVisible&&(this._replaceInput.width=V["I"](this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height=e+"px",!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(e=>{1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1)));const t=this._state.currentMatch;return e.startLineNumber===e.endLineNumber||c["a"].equalsRange(e,t)?null:e}).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){return e.equals(3|Ne)?(this._keybindingService.dispatchEvent(e,e.target)||this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?Pe(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?Ee(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}_onReplaceInputKeyDown(e){return e.equals(3|Ne)?(this._keybindingService.dispatchEvent(e,e.target)||(Y["i"]&&Y["g"]&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(J["a"]("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(Ie,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n")),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?Pe(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?Ee(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){const e=!0,t=!0;this._findInput=this._register(new ee["a"](null,this._contextViewProvider,{width:ke,label:ce,placeholder:ue,appendCaseSensitiveLabel:this._keybindingLabelFor(A.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(A.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(A.ToggleRegexCommand),validation:e=>{if(0===e.length||!this._findInput.getRegex())return null;try{return new RegExp(e,"gu"),null}catch(t){return{content:t.message}}},flexibleHeight:e,flexibleWidth:t,flexibleMaxHeight:118,showHistoryHint:()=>Object(te["a"])(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(e=>this._onFindInputKeyDown(e))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(e=>{e.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),e.preventDefault())})),this._register(this._findInput.onRegexKeyDown(e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),e.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(e=>{this._tryUpdateHeight()&&this._showViewZone()})),Y["d"]&&this._register(this._findInput.onMouseDown(e=>this._onFindInputMouseDown(e))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new Ae({label:ge+this._keybindingLabelFor(A.PreviousMatchFindAction),icon:le,onTrigger:()=>{this._codeEditor.getAction(A.PreviousMatchFindAction).run().then(void 0,Q["f"])}})),this._nextBtn=this._register(new Ae({label:pe+this._keybindingLabelFor(A.NextMatchFindAction),icon:he,onTrigger:()=>{this._codeEditor.getAction(A.NextMatchFindAction).run().then(void 0,Q["f"])}}));let i=document.createElement("div");i.className="find-part",i.appendChild(this._findInput.domNode);const o=document.createElement("div");o.className="find-actions",i.appendChild(o),o.appendChild(this._matchesCount),o.appendChild(this._prevBtn.domNode),o.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new z["a"]({icon:ne,title:_e+this._keybindingLabelFor(A.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let e=this._codeEditor.getSelections();e.map(e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e)).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}else this._state.change({searchScope:null},!0)})),o.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Ae({label:me+this._keybindingLabelFor(A.CloseFindWidgetCommand),icon:ie["c"],onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),e.preventDefault())}})),o.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new ee["b"](null,void 0,{label:fe,placeholder:be,appendPreserveCaseLabel:this._keybindingLabelFor(A.TogglePreserveCaseCommand),history:[],flexibleHeight:e,flexibleWidth:t,flexibleMaxHeight:118,showHistoryHint:()=>Object(te["a"])(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(e=>this._onReplaceInputKeyDown(e))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(e=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(e=>{e.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),e.preventDefault())})),this._replaceBtn=this._register(new Ae({label:ve+this._keybindingLabelFor(A.ReplaceOneAction),icon:ae,onTrigger:()=>{this._controller.replace()},onKeyDown:e=>{e.equals(1026)&&(this._closeBtn.focus(),e.preventDefault())}})),this._replaceAllBtn=this._register(new Ae({label:Ce+this._keybindingLabelFor(A.ReplaceAllAction),icon:de,onTrigger:()=>{this._controller.replaceAll()}}));let n=document.createElement("div");n.className="replace-part",n.appendChild(this._replaceInput.domNode);const s=document.createElement("div");s.className="replace-actions",n.appendChild(s),s.appendChild(this._replaceBtn.domNode),s.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Ae({label:we,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=V["I"](this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=Me+"px",this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(i),this._domNode.appendChild(n),this._resizeSash=new Z["b"](this._domNode,this,{orientation:0,size:2}),this._resized=!1;let r=Me;this._register(this._resizeSash.onDidStart(()=>{r=V["I"](this._domNode)})),this._register(this._resizeSash.onDidChange(e=>{this._resized=!0;let t=r+e.startX-e.currentX;if(t<Me)return;const i=parseFloat(V["A"](this._domNode).maxWidth)||0;t>i||(this._domNode.style.width=t+"px",this._isReplaceVisible&&(this._replaceInput.width=V["I"](this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const e=V["I"](this._domNode);if(e<Me)return;let t=Me;if(!this._resized||e===Me){const e=this._codeEditor.getLayoutInfo();t=e.width-28-e.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=t+"px",this._isReplaceVisible&&(this._replaceInput.width=V["I"](this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}Fe.ID="editor.contrib.findWidget";class Ae extends H["a"]{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+f["d"].asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,e=>{this._opts.onTrigger(),e.preventDefault()}),this.onkeydown(this._domNode,e=>{if(e.equals(10)||e.equals(3))return this._opts.onTrigger(),void e.preventDefault();this._opts.onKeyDown&&this._opts.onKeyDown(e)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...f["d"].asClassNameArray(se)),this._domNode.classList.add(...f["d"].asClassNameArray(re))):(this._domNode.classList.remove(...f["d"].asClassNameArray(re)),this._domNode.classList.add(...f["d"].asClassNameArray(se)))}}Object(f["f"])((e,t)=>{const i=(e,i)=>{i&&t.addRule(`.monaco-editor ${e} { background-color: ${i}; }`)};i(".findMatch",e.getColor(m["x"])),i(".currentFindMatch",e.getColor(m["v"])),i(".findScope",e.getColor(m["z"]));const o=e.getColor(m["cb"]);i(".find-widget",o);const n=e.getColor(m["Tc"]);n&&t.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${n}; }`);const s=e.getColor(m["y"]);s&&t.addRule(`.monaco-editor .findMatch { border: 1px ${"hc"===e.type?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const r=e.getColor(m["w"]);r&&t.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${r}; padding: 1px; box-sizing: border-box; }`);const a=e.getColor(m["A"]);a&&t.addRule(`.monaco-editor .findScope { border: 1px ${"hc"===e.type?"dashed":"solid"} ${a}; }`);const d=e.getColor(m["h"]);d&&t.addRule(`.monaco-editor .find-widget { border: 1px solid ${d}; }`);const l=e.getColor(m["eb"]);l&&t.addRule(`.monaco-editor .find-widget { color: ${l}; }`);const h=e.getColor(m["gb"]);h&&t.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${h}; }`);const c=e.getColor(m["fb"]);if(c)t.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${c}; }`);else{const i=e.getColor(m["db"]);i&&t.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${i}; }`)}const u=e.getColor(m["Qc"]);u&&t.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${u} !important;\n\t\t}\n\t`);const g=e.getColor(m["hb"]);g&&t.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${g}; }`)});var Te=i("cd62"),je=i("a1d3"),We=i("5e73"),Ve=i("5365"),Be=i("eb8f"),He=i("0100"),Ue=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Ke=function(e,t){return function(i,o){t(i,o,e)}},qe=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const $e=524288;function Ge(e,t="single",i=!1){if(!e.hasModel())return null;const o=e.getSelection();if("single"===t&&o.startLineNumber===o.endLineNumber||"multiple"===t)if(o.isEmpty()){const t=e.getConfiguredWordAtPosition(o.getStartPosition());if(t&&!1===i)return t.word}else if(e.getModel().getValueLengthInRange(o)<$e)return e.getModel().getValueInRange(o);return null}let ze=class e extends n["a"]{constructor(e,t,i,n){super(),this._editor=e,this._findWidgetVisible=O.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=n,this._updateHistoryDelayer=new o["a"](500),this._state=this._register(new $),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let e=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(t){return t.getContribution(e.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!D.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._editor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e)).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=s["t"](e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e){return qe(this,void 0,void 0,(function*(){if(this.disposeModel(),!this._editor.hasModel())return;let t={isRevealed:!0};if("single"===e.seedSearchStringFromSelection){let i=Ge(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?t.searchString=s["t"](i):t.searchString=i)}else if("multiple"===e.seedSearchStringFromSelection&&!e.updateSearchScope){let i=Ge(this._editor,e.seedSearchStringFromSelection);i&&(t.searchString=i)}if(!t.searchString&&e.seedSearchStringFromGlobalClipboard){let e=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;e&&(t.searchString=e)}if(e.forceRevealReplace?t.isReplaceRevealed=!0:this._findWidgetVisible.get()||(t.isReplaceRevealed=!1),e.updateSearchScope){let e=this._editor.getSelections();e.some(e=>!e.isEmpty())&&(t.searchScope=e)}t.loop=e.loop,this._state.change(t,!1),this._model||(this._model=new W(this._editor,this._state))}))}start(e){return this._start(e)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){return!!this._model&&(this._model.replaceAll(),!0)}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}getGlobalBufferTerm(){return qe(this,void 0,void 0,(function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}))}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};ze.ID="editor.contrib.findController",ze=Ue([Ke(1,k["b"]),Ke(2,He["a"]),Ke(3,je["a"])],ze);let Ze=class extends ze{constructor(e,t,i,o,n,s,r,a){super(e,i,r,a),this._contextViewService=t,this._keybindingService=o,this._themeService=n,this._notificationService=s,this._widget=null,this._findOptionsWidget=null}_start(e){const t=Object.create(null,{_start:{get:()=>super._start}});return qe(this,void 0,void 0,(function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let o=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":o=!0;break;case"never":o=!1;break;case"multiline":const e=!!i&&i.startLineNumber!==i.endLineNumber;o=e;break;default:break}e.updateSearchScope=o,yield t._start.call(this,e),this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput())}))}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new Fe(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new U(this._editor,this._state,this._keybindingService,this._themeService))}};Ze=Ue([Ke(1,We["b"]),Ke(2,k["b"]),Ke(3,Ve["a"]),Ke(4,f["b"]),Ke(5,Be["a"]),Ke(6,He["a"]),Ke(7,je["a"])],Ze);const Xe=Object(r["p"])(new r["f"]({id:A.StartFindAction,label:J["a"]("startFindAction","Find"),alias:"Find",precondition:k["a"].or(a["a"].focus,k["a"].has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Te["b"].MenubarEditMenu,group:"3_find",title:J["a"]({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));Xe.addImplementation(0,(e,t,i)=>{const o=ze.get(t);return!!o&&o.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop})});class Qe extends r["b"]{constructor(){super({id:A.StartFindWithSelection,label:J["a"]("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return qe(this,void 0,void 0,(function*(){let e=ze.get(t);e&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),e.setGlobalBufferTerm(e.getState().searchString))}))}}class Ye extends r["b"]{run(e,t){return qe(this,void 0,void 0,(function*(){let e=ze.get(t);e&&!this._run(e)&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==t.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(e))}))}}class Je extends Ye{constructor(){super({id:A.NextMatchFindAction,label:J["a"]("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:a["a"].focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:k["a"].and(a["a"].focus,D),primary:3,weight:100}]})}_run(e){const t=e.moveToNextMatch();return!!t&&(e.editor.pushUndoStop(),!0)}}class et extends Ye{constructor(){super({id:A.PreviousMatchFindAction,label:J["a"]("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:a["a"].focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:k["a"].and(a["a"].focus,D),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class tt extends r["b"]{run(e,t){return qe(this,void 0,void 0,(function*(){let e=ze.get(t);if(!e)return;const i="selection"===t.getOption(35).seedSearchStringFromSelection;let o=null;"never"!==t.getOption(35).seedSearchStringFromSelection&&(o=Ge(t,"single",i)),o&&e.setSearchString(o),this._run(e)||(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:i,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(e))}))}}class it extends tt{constructor(){super({id:A.NextSelectionMatchFindAction,label:J["a"]("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:a["a"].focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class ot extends tt{constructor(){super({id:A.PreviousSelectionMatchFindAction,label:J["a"]("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:a["a"].focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const nt=Object(r["p"])(new r["f"]({id:A.StartFindReplaceAction,label:J["a"]("startReplace","Replace"),alias:"Replace",precondition:k["a"].or(a["a"].focus,k["a"].has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Te["b"].MenubarEditMenu,group:"3_find",title:J["a"]({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));nt.addImplementation(0,(e,t,i)=>{if(!t.hasModel()||t.getOption(80))return!1;const o=ze.get(t);if(!o)return!1;const n=t.getSelection(),s=o.isFindInputFocused(),r=!n.isEmpty()&&n.startLineNumber===n.endLineNumber&&"never"!==t.getOption(35).seedSearchStringFromSelection&&!s,a=s||r?2:1;return o.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(35).seedSearchStringFromSelection,shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop})}),Object(r["l"])(ze.ID,Ze),Object(r["j"])(Qe),Object(r["j"])(Je),Object(r["j"])(et),Object(r["j"])(it),Object(r["j"])(ot);const st=r["c"].bindToContribution(ze.get);Object(r["k"])(new st({id:A.CloseFindWidgetCommand,precondition:O,handler:e=>e.closeFindWidget(),kbOpts:{weight:105,kbExpr:k["a"].and(a["a"].focus,k["a"].not("isComposing")),primary:9,secondary:[1033]}})),Object(r["k"])(new st({id:A.ToggleCaseSensitiveCommand,precondition:void 0,handler:e=>e.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:N.primary,mac:N.mac,win:N.win,linux:N.linux}})),Object(r["k"])(new st({id:A.ToggleWholeWordCommand,precondition:void 0,handler:e=>e.toggleWholeWords(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:L.primary,mac:L.mac,win:L.win,linux:L.linux}})),Object(r["k"])(new st({id:A.ToggleRegexCommand,precondition:void 0,handler:e=>e.toggleRegex(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:P.primary,mac:P.mac,win:P.win,linux:P.linux}})),Object(r["k"])(new st({id:A.ToggleSearchScopeCommand,precondition:void 0,handler:e=>e.toggleSearchScope(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:E.primary,mac:E.mac,win:E.win,linux:E.linux}})),Object(r["k"])(new st({id:A.TogglePreserveCaseCommand,precondition:void 0,handler:e=>e.togglePreserveCase(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:F.primary,mac:F.mac,win:F.win,linux:F.linux}})),Object(r["k"])(new st({id:A.ReplaceOneAction,precondition:O,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:3094}})),Object(r["k"])(new st({id:A.ReplaceOneAction,precondition:O,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:k["a"].and(a["a"].focus,I),primary:3}})),Object(r["k"])(new st({id:A.ReplaceAllAction,precondition:O,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:2563}})),Object(r["k"])(new st({id:A.ReplaceAllAction,precondition:O,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:k["a"].and(a["a"].focus,I),primary:void 0,mac:{primary:2051}}})),Object(r["k"])(new st({id:A.SelectAllMatchesAction,precondition:O,handler:e=>e.selectAllMatches(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:515}}))},"9c55":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var o=i("f295"),n=i("92db"),s=i("cb4a");function r(e,t){return!!e[t]}class a{constructor(e,t){this.target=e.target,this.hasTriggerModifier=r(e.event,t.triggerModifier),this.hasSideBySideModifier=r(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class d{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=r(e,t.triggerModifier)}}class l{constructor(e,t,i,o){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=o}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function h(e){return"altKey"===e?s["f"]?new l(57,"metaKey",6,"altKey"):new l(5,"ctrlKey",6,"altKey"):s["f"]?new l(6,"altKey",57,"metaKey"):new l(6,"altKey",5,"ctrlKey")}class c extends n["a"]{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new o["b"]),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new o["b"]),this.onExecute=this._onExecute.event,this._onCancel=this._register(new o["b"]),this.onCancel=this._onCancel.event,this._editor=e,this._opts=h(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(e=>{if(e.hasChanged(69)){const e=h(this._editor.getOption(69));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(e=>this._onEditorMouseMove(new a(e,this._opts)))),this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(new a(e,this._opts)))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(new a(e,this._opts)))),this._register(this._editor.onKeyDown(e=>this._onEditorKeyDown(new d(e,this._opts)))),this._register(this._editor.onKeyUp(e=>this._onEditorKeyUp(new d(e,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(e=>this._onDidChangeCursorSelection(e))),this._register(this._editor.onDidChangeModel(e=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},"9cc3":function(e,t,i){"use strict";i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return _})),i.d(t,"c",(function(){return m}));var o=i("f123"),n=i("f295"),s=i("8ed8"),r=i("92db"),a=i("1a26"),d=i("1ff1"),l=i("1537"),h=i("d8b0"),c=i("d4b5"),u=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};class g{constructor(e,t,i,o){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=o,this.id=s["b"].nextId()}get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?Object(c["a"])({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",Object(d["b"])(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):Object(c["a"])("aria.oneReference","symbol in {0} on line {1} at column {2}",Object(d["b"])(this.uri),this.range.startLineNumber,this.range.startColumn)}}class p{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:o,startColumn:n,endLineNumber:s,endColumn:r}=e,a=i.getWordUntilPosition({lineNumber:o,column:n-t}),d=new h["a"](o,a.startColumn,o,n),l=new h["a"](s,r,s,1073741824),c=i.getValueInRange(d).replace(/^\s+/,""),u=i.getValueInRange(e),g=i.getValueInRange(l).replace(/\s+$/,"");return{value:c+u+g,highlight:{start:c.length,end:c.length+u.length}}}}class _{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new a["b"]}dispose(){Object(r["f"])(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?Object(c["a"])("aria.fileReferences.1","1 symbol in {0}, full path {1}",Object(d["b"])(this.uri),this.uri.fsPath):Object(c["a"])("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Object(d["b"])(this.uri),this.uri.fsPath)}resolve(e){return u(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(let i of this.children)if(!this._previews.has(i.uri))try{const t=yield e.createModelReference(i.uri);this._previews.set(i.uri,new p(t))}catch(t){Object(o["f"])(t)}return this}))}}class m{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new n["b"],this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;let o;e.sort(m._compareReferences);for(let n of e)if(o&&d["e"].isEqual(o.uri,n.uri,!0)||(o=new _(this,n.uri),this.groups.push(o)),0===o.children.length||0!==m._compareReferences(n,o.children[o.children.length-1])){const e=new g(i===n,o,n,e=>this._onDidChangeReferenceRange.fire(e));this.references.push(e),o.children.push(e)}}dispose(){Object(r["f"])(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new m(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?Object(c["a"])("aria.result.0","No results found"):1===this.references.length?Object(c["a"])("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?Object(c["a"])("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):Object(c["a"])("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:i}=e,o=i.children.indexOf(e),n=i.children.length,s=i.parent.groups.length;return 1===s||t&&o+1<n||!t&&o>0?(o=t?(o+1)%n:(o+n-1)%n,i.children[o]):(o=i.parent.groups.indexOf(i),t?(o=(o+1)%s,i.parent.groups[o].children[0]):(o=(o+s-1)%s,i.parent.groups[o].children[i.parent.groups[o].children.length-1]))}nearestReference(e,t){const i=this.references.map((i,o)=>({idx:o,prefixLen:l["d"](i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)})).sort((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&h["a"].containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return d["e"].compare(e.uri,t.uri)||h["a"].compareRangesUsingStarts(e.range,t.range)}}},"9d20":function(e,t,i){"use strict";i.d(t,"b",(function(){return M})),i.d(t,"a",(function(){return k})),i.d(t,"c",(function(){return O})),i.d(t,"d",(function(){return I})),i.d(t,"e",(function(){return E}));var o=i("4d3c"),n=i("945a"),s=i("4163"),r=i("f123"),a=i("bd20"),d=i("bbbb"),l=i("4d73"),h=i("c189"),c=i("5e2a"),u=i("80f8"),g=i("e0ab"),p=i("d8b0"),_=i("17e0"),m=i("d778"),f=i("6fc9"),b=i("d00e"),v=i("fcfd"),C=i("d4b5"),w=i("d5b7"),S=i("3507"),y=i("bf32"),R=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};function M(e){if(e=e.filter(e=>e.range),!e.length)return;let{range:t}=e[0];for(let o=1;o<e.length;o++)t=p["a"].plusRange(t,e[o].range);const{startLineNumber:i,endLineNumber:n}=t;i===n?1===e.length?Object(o["a"])(C["a"]("hint11","Made 1 formatting edit on line {0}",i)):Object(o["a"])(C["a"]("hintn1","Made {0} formatting edits on line {1}",e.length,i)):1===e.length?Object(o["a"])(C["a"]("hint1n","Made 1 formatting edit between lines {0} and {1}",i,n)):Object(o["a"])(C["a"]("hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,i,n))}function x(e){const t=[],i=new Set,o=m["g"].ordered(e);for(const s of o)t.push(s),s.extensionId&&i.add(S["a"].toKey(s.extensionId));const n=m["j"].ordered(e);for(const s of n){if(s.extensionId){if(i.has(S["a"].toKey(s.extensionId)))continue;i.add(S["a"].toKey(s.extensionId))}t.push({displayName:s.displayName,extensionId:s.extensionId,provideDocumentFormattingEdits(e,t,i){return s.provideDocumentRangeFormattingEdits(e,e.getFullModelRange(),t,i)}})}return t}class k{static setFormatterSelector(e){const t=k._selectors.unshift(e);return{dispose:t}}static select(e,t,i){return R(this,void 0,void 0,(function*(){if(0===e.length)return;const o=a["a"].first(k._selectors);return o?yield o(e,t,i):void 0}))}}function O(e,t,i,o,n,s){return R(this,void 0,void 0,(function*(){const r=e.get(y["a"]),a=Object(u["b"])(t)?t.getModel():t,d=m["j"].ordered(a),l=yield k.select(d,a,o);l&&(n.report(l),yield r.invokeFunction(D,l,t,i,s))}))}function D(e,t,i,o,s){return R(this,void 0,void 0,(function*(){const r=e.get(f["a"]);let a,d;Object(u["b"])(i)?(a=i.getModel(),d=new c["b"](i,5,void 0,s)):(a=i,d=new c["d"](i,s));let l=[],h=0;for(let e of Object(n["c"])(o).sort(p["a"].compareRangesUsingStarts))h>0&&p["a"].areIntersectingOrTouching(l[h-1],e)?l[h-1]=p["a"].fromPositions(l[h-1].getStartPosition(),e.getEndPosition()):h=l.push(e);const g=e=>R(this,void 0,void 0,(function*(){return(yield t.provideDocumentRangeFormattingEdits(a,e,a.getFormattingOptions(),d.token))||[]})),m=(e,t)=>{if(!e.length||!t.length)return!1;const i=e.reduce((e,t)=>p["a"].plusRange(e,t.range),e[0].range);if(!t.some(e=>p["a"].intersectRanges(i,e.range)))return!1;for(let o of e)for(let e of t)if(p["a"].intersectRanges(o.range,e.range))return!0;return!1},b=[],C=[];try{for(let e of l){if(d.token.isCancellationRequested)return!0;C.push(yield g(e))}for(let e=0;e<l.length;++e)for(let t=e+1;t<l.length;++t){if(d.token.isCancellationRequested)return!0;if(m(C[e],C[t])){const i=p["a"].plusRange(l[e],l[t]),o=yield g(i);l.splice(t,1),l.splice(e,1),l.push(i),C.splice(t,1),C.splice(e,1),C.push(o),e=0,t=0}}for(let e of C){if(d.token.isCancellationRequested)return!0;const t=yield r.computeMoreMinimalEdits(a.uri,e);t&&b.push(...t)}}finally{d.dispose()}if(0===b.length)return!1;if(Object(u["b"])(i))v["a"].execute(i,b,!0),M(b),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{const[{range:e}]=b,t=new _["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);a.pushEditOperations([t],b.map(e=>({text:e.text,range:p["a"].lift(e.range),forceMoveMarkers:!0})),e=>{for(const{range:i}of e)if(p["a"].areIntersectingOrTouching(i,t))return[new _["a"](i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null})}return!0}))}function I(e,t,i,o,n){return R(this,void 0,void 0,(function*(){const s=e.get(y["a"]),r=Object(u["b"])(t)?t.getModel():t,a=x(r),d=yield k.select(a,r,i);d&&(o.report(d),yield s.invokeFunction(N,d,t,i,n))}))}function N(e,t,i,o,n){return R(this,void 0,void 0,(function*(){const s=e.get(f["a"]);let r,a,d;Object(u["b"])(i)?(r=i.getModel(),a=new c["b"](i,5,void 0,n)):(r=i,a=new c["d"](i,n));try{const e=yield t.provideDocumentFormattingEdits(r,r.getFormattingOptions(),a.token);if(d=yield s.computeMoreMinimalEdits(r.uri,e),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!d||0===d.length)return!1;if(Object(u["b"])(i))v["a"].execute(i,d,2!==o),2!==o&&(M(d),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1));else{const[{range:e}]=d,t=new _["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);r.pushEditOperations([t],d.map(e=>({text:e.text,range:p["a"].lift(e.range),forceMoveMarkers:!0})),e=>{for(const{range:i}of e)if(p["a"].areIntersectingOrTouching(i,t))return[new _["a"](i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null})}return!0}))}function L(e,t,i,o,s){return R(this,void 0,void 0,(function*(){const a=m["j"].ordered(t);for(const d of a){let a=yield Promise.resolve(d.provideDocumentRangeFormattingEdits(t,i,o,s)).catch(r["g"]);if(Object(n["n"])(a))return yield e.computeMoreMinimalEdits(t.uri,a)}}))}function P(e,t,i,o){return R(this,void 0,void 0,(function*(){const s=x(t);for(const a of s){let s=yield Promise.resolve(a.provideDocumentFormattingEdits(t,i,o)).catch(r["g"]);if(Object(n["n"])(s))return yield e.computeMoreMinimalEdits(t.uri,s)}}))}function E(e,t,i,o,n){const a=m["x"].ordered(t);return 0===a.length||a[0].autoFormatTriggerCharacters.indexOf(o)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,o,n,s["a"].None)).catch(r["g"]).then(i=>e.computeMoreMinimalEdits(t.uri,i))}k._selectors=new d["a"],w["a"].registerCommand("_executeFormatRangeProvider",(function(e,...t){return R(this,void 0,void 0,(function*(){const[i,o,n]=t;Object(l["c"])(h["a"].isUri(i)),Object(l["c"])(p["a"].isIRange(o));const r=e.get(b["a"]),a=e.get(f["a"]),d=yield r.createModelReference(i);try{return L(a,d.object.textEditorModel,p["a"].lift(o),n,s["a"].None)}finally{d.dispose()}}))})),w["a"].registerCommand("_executeFormatDocumentProvider",(function(e,...t){return R(this,void 0,void 0,(function*(){const[i,o]=t;Object(l["c"])(h["a"].isUri(i));const n=e.get(b["a"]),r=e.get(f["a"]),a=yield n.createModelReference(i);try{return P(r,a.object.textEditorModel,o,s["a"].None)}finally{a.dispose()}}))})),w["a"].registerCommand("_executeFormatOnTypeProvider",(function(e,...t){return R(this,void 0,void 0,(function*(){const[i,o,n,s]=t;Object(l["c"])(h["a"].isUri(i)),Object(l["c"])(g["a"].isIPosition(o)),Object(l["c"])("string"===typeof n);const r=e.get(b["a"]),a=e.get(f["a"]),d=yield r.createModelReference(i);try{return E(a,d.object.textEditorModel,g["a"].lift(o),n,s)}finally{d.dispose()}}))}))},a79e:function(e,t,i){"use strict";i.r(t),i.d(t,"FoldingController",(function(){return he})),i.d(t,"foldBackgroundBackground",(function(){return De})),i.d(t,"editorFoldForeground",(function(){return Ie}));var o=i("4b4a"),n=i("f123"),s=i("d3a2"),r=i("92db"),a=i("1537"),d=i("4d73"),l=(i("d006"),i("5e2a")),h=i("ae58"),c=i("7c05"),u=i("d778"),g=i("6b8c"),p=i("f295");const _=65535,m=16777215,f=4278190080;class b{constructor(e,t,i){if(e.length!==t.length||e.length>_)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(t,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=t&&this.getEndLineNumber(o)>=i};for(let i=0,o=this._startIndexes.length;i<o;i++){let o=this._startIndexes[i],n=this._endIndexes[i];if(o>m||n>m)throw new Error("startLineNumber or endLineNumber must not exceed "+m);while(e.length>0&&!t(o,n))e.pop();let s=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=o+((255&s)<<24),this._endIndexes[i]=n+((65280&s)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&m}getEndLineNumber(e){return this._endIndexes[e]&m}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,i=e%32;return 0!==(this._collapseStates[t]&1<<i)}setCollapsed(e,t){let i=e/32|0,o=e%32,n=this._collapseStates[i];this._collapseStates[i]=t?n|1<<o:n&~(1<<o)}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let o=0;o<this._types.length;o++)this._types[o]===e&&(this.setCollapsed(o,t),i=!0);return i}toRegion(e){return new v(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&f)>>>24)+((this._endIndexes[e]&f)>>>16);return t===_?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(0===i)return-1;while(t<i){let o=Math.floor((t+i)/2);e<this.getStartLineNumber(o)?i=o:t=o+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){let i=this.getEndLineNumber(t);if(i>=e)return t;t=this.getParentIndex(t);while(-1!==t){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class v{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class C{constructor(e,t){this._updateEventEmitter=new p["b"],this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new b(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((e,t)=>e.regionIndex-t.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let o=0,n=-1,s=-1;const r=e=>{while(o<e){const e=this._regions.getEndLineNumber(o),t=this._regions.isCollapsed(o);e<=n&&i.changeDecorationOptions(this._editorDecorationIds[o],this._decorationProvider.getDecorationOption(t,e<=s)),t&&e>s&&(s=e),o++}};for(let a of e){let e=a.regionIndex,i=this._editorDecorationIds[e];if(i&&!t[i]){t[i]=!0,r(e);let o=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,o),n=Math.max(n,this._regions.getEndLineNumber(e))}}r(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let i=[],o=(e,i)=>{for(let o of t)if(e<o&&o<=i)return!0;return!1},n=-1,s=(t,s)=>{const r=e.getStartLineNumber(t),a=e.getEndLineNumber(t);s||(s=e.isCollapsed(t)),s&&o(r,a)&&(s=!1),e.setCollapsed(t,s);const d=this._textModel.getLineMaxColumn(r),l={startLineNumber:r,startColumn:Math.max(d-1,1),endLineNumber:r,endColumn:d};i.push({range:l,options:this._decorationProvider.getDecorationOption(s,a<=n)}),s&&a>n&&(n=a)},r=0,a=()=>{while(r<this._regions.length){let e=this._regions.isCollapsed(r);if(r++,e)return r-1}return-1},d=0,l=a();while(-1!==l&&d<e.length){let t=this._textModel.getDecorationRange(this._editorDecorationIds[l]);if(t){let i=t.startLineNumber;if(t.startColumn===Math.max(t.endColumn-1,1)&&this._textModel.getLineMaxColumn(i)===t.endColumn)while(d<e.length){let t=e.getStartLineNumber(d);if(!(i>=t))break;s(d,i===t),d++}}l=a()}while(d<e.length)s(d,!1),d++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let i=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(i){let o=i.startLineNumber,n=i.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:o,endLineNumber:n})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let i of e){let e=this.getRegionAtLine(i.startLineNumber);e&&!e.isCollapsed&&t.push(e)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let i=[];if(this._regions){let o=this._regions.findRange(e),n=1;while(o>=0){let e=this._regions.toRegion(o);t&&!t(e,n)||i.push(e),n++,o=e.parentIndex}}return i}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let i=[],o=e?e.regionIndex+1:0,n=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length){const e=[];for(let s=o,r=this._regions.length;s<r;s++){let o=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<n))break;while(e.length>0&&!o.containedBy(e[e.length-1]))e.pop();e.push(o),t(o,e.length)&&i.push(o)}}else for(let s=o,r=this._regions.length;s<r;s++){let e=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<n))break;t&&!t(e)||i.push(e)}return i}}function w(e,t,i){let o=[];for(let n of i){let i=e.getRegionAtLine(n);if(i){const n=!i.isCollapsed;if(o.push(i),t>1){let s=e.getRegionsInside(i,(e,i)=>e.isCollapsed!==n&&i<t);o.push(...s)}}}e.toggleCollapseState(o)}function S(e,t,i=Number.MAX_VALUE,o){let n=[];if(o&&o.length>0)for(let s of o){let o=e.getRegionAtLine(s);if(o&&(o.isCollapsed!==t&&n.push(o),i>1)){let s=e.getRegionsInside(o,(e,o)=>e.isCollapsed!==t&&o<i);n.push(...s)}}else{let o=e.getRegionsInside(null,(e,o)=>e.isCollapsed!==t&&o<i);n.push(...o)}e.toggleCollapseState(n)}function y(e,t,i,o){let n=[];for(let s of o){let o=e.getAllRegionsAtLine(s,(e,o)=>e.isCollapsed!==t&&o<=i);n.push(...o)}e.toggleCollapseState(n)}function R(e,t,i){let o=[];for(let n of i){let i=e.getAllRegionsAtLine(n,e=>e.isCollapsed!==t);i.length>0&&o.push(i[0])}e.toggleCollapseState(o)}function M(e,t,i,o){let n=(e,n)=>n===t&&e.isCollapsed!==i&&!o.some(t=>e.containsLine(t)),s=e.getRegionsInside(null,n);e.toggleCollapseState(s)}function x(e,t,i){let o=[];for(let r of i)o.push(e.getAllRegionsAtLine(r,void 0)[0]);let n=e=>o.every(t=>!t.containedBy(e)&&!e.containedBy(t))&&e.isCollapsed!==t,s=e.getRegionsInside(null,n);e.toggleCollapseState(s)}function k(e,t,i){let o=e.textModel,n=e.regions,s=[];for(let r=n.length-1;r>=0;r--)if(i!==n.isCollapsed(r)){let e=n.getStartLineNumber(r);t.test(o.getLineContent(e))&&s.push(n.toRegion(r))}e.toggleCollapseState(s)}function O(e,t,i){let o=e.regions,n=[];for(let s=o.length-1;s>=0;s--)i!==o.isCollapsed(s)&&t===o.getType(s)&&n.push(o.toRegion(s));e.toggleCollapseState(n)}function D(e,t){let i=null,o=t.getRegionAtLine(e);if(null!==o&&(i=o.startLineNumber,e===i)){let e=o.parentIndex;i=-1!==e?t.regions.getStartLineNumber(e):null}return i}function I(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){if(e!==i.startLineNumber)return i.startLineNumber;{let e=i.parentIndex,o=0;-1!==e&&(o=t.regions.getStartLineNumber(i.parentIndex));while(null!==i){if(!(i.regionIndex>0))return null;if(i=t.regions.toRegion(i.regionIndex-1),i.startLineNumber<=o)return null;if(i.parentIndex===e)return i.startLineNumber}}}else if(t.regions.length>0){i=t.regions.toRegion(t.regions.length-1);while(null!==i){if(i.startLineNumber<e)return i.startLineNumber;i=i.regionIndex>0?t.regions.toRegion(i.regionIndex-1):null}}return null}function N(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){let e=i.parentIndex,o=0;if(-1!==e)o=t.regions.getEndLineNumber(i.parentIndex);else{if(0===t.regions.length)return null;o=t.regions.getEndLineNumber(t.regions.length-1)}while(null!==i){if(!(i.regionIndex<t.regions.length))return null;if(i=t.regions.toRegion(i.regionIndex+1),i.startLineNumber>=o)return null;if(i.parentIndex===e)return i.startLineNumber}}else if(t.regions.length>0){i=t.regions.toRegion(0);while(null!==i){if(i.startLineNumber>e)return i.startLineNumber;i=i.regionIndex<t.regions.length?t.regions.toRegion(i.regionIndex+1):null}}return null}var L=i("945a"),P=i("d8b0");class E{constructor(e){this._updateEventEmitter=new p["b"],this._foldingModel=e,this._foldingModelListener=e.onDidChange(e=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let e=!1,t=[],i=0,o=0,n=Number.MAX_VALUE,s=-1,r=this._foldingModel.regions;for(;i<r.length;i++){if(!r.isCollapsed(i))continue;let a=r.getStartLineNumber(i)+1,d=r.getEndLineNumber(i);n<=a&&d<=s||(!e&&o<this._hiddenRanges.length&&this._hiddenRanges[o].startLineNumber===a&&this._hiddenRanges[o].endLineNumber===d?(t.push(this._hiddenRanges[o]),o++):(e=!0,t.push(new P["a"](a,1,d,1))),n=a,s=d)}(e||o<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||0===e.length)return!1;let t=[];for(let i of e){if(!i.startLineNumber||!i.endLineNumber)return!1;t.push(new P["a"](i.startLineNumber+1,1,i.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return null!==A(this._hiddenRanges,e)}adjustSelections(e){let t=!1,i=this._foldingModel.textModel,o=null,n=e=>(o&&F(e,o)||(o=A(this._hiddenRanges,e)),o?o.startLineNumber-1:null);for(let s=0,r=e.length;s<r;s++){let o=e[s],r=n(o.startLineNumber);r&&(o=o.setStartPosition(r,i.getLineMaxColumn(r)),t=!0);let a=n(o.endLineNumber);a&&(o=o.setEndPosition(a,i.getLineMaxColumn(a)),t=!0),e[s]=o}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function F(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}function A(e,t){let i=Object(L["h"])(e,e=>t<e.startLineNumber)-1;return i>=0&&e[i].endLineNumber>=t?e[i]:null}var T=i("2f07");const j=5e3,W="indent";class V{constructor(e){this.editorModel=e,this.id=W}dispose(){}compute(e){let t=g["b"].getFoldingRules(this.editorModel.getLanguageId()),i=t&&!!t.offSide,o=t&&t.markers;return Promise.resolve(H(this.editorModel,i,o))}}class B{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>m||t>m)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=this._length-1,o=0;i>=0;i--,o++)e[o]=this._startIndexes[i],t[o]=this._endIndexes[i];return new b(e,t)}{let t=0,i=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){let o=this._indentOccurrences[e];if(o){if(o+t>this._foldingRangesLimit){i=e;break}t+=o}}const o=e.getOptions().tabSize;let n=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit);for(let r=this._length-1,a=0;r>=0;r--){let d=this._startIndexes[r],l=e.getLineContent(d),h=T["c"].computeIndentLevel(l,o);(h<i||h===i&&t++<this._foldingRangesLimit)&&(n[a]=d,s[a]=this._endIndexes[r],a++)}return new b(n,s)}}}function H(e,t,i,o=j){const n=e.getOptions().tabSize;let s=new B(o),r=void 0;i&&(r=new RegExp(`(${i.start.source})|(?:${i.end.source})`));let a=[],d=e.getLineCount()+1;a.push({indent:-1,endAbove:d,line:d});for(let l=e.getLineCount();l>0;l--){let i,o=e.getLineContent(l),d=T["c"].computeIndentLevel(o,n),h=a[a.length-1];if(-1!==d){if(r&&(i=o.match(r))){if(!i[1]){a.push({indent:-2,endAbove:l,line:l});continue}{let e=a.length-1;while(e>0&&-2!==a[e].indent)e--;if(e>0){a.length=e+1,h=a[e],s.insertFirst(l,h.line,d),h.line=l,h.indent=d,h.endAbove=l;continue}}}if(h.indent>d){do{a.pop(),h=a[a.length-1]}while(h.indent>d);let e=h.endAbove-1;e-l>=1&&s.insertFirst(l,e,d)}h.indent===d?h.endAbove=l:a.push({indent:d,endAbove:l,line:l})}else t&&(h.endAbove=l)}return s.toIndentRanges(e)}const U=5e3,K={},q="syntax";class ${constructor(e,t,i,o=U){this.editorModel=e,this.providers=t,this.limit=o,this.id=q;for(const n of t)"function"===typeof n.onDidChange&&(this.disposables||(this.disposables=new r["b"]),this.disposables.add(n.onDidChange(i)))}compute(e){return G(this.providers,this.editorModel,e).then(e=>{if(e){let t=Z(e,this.limit);return t}return null})}dispose(){var e;null===(e=this.disposables)||void 0===e||e.dispose()}}function G(e,t,i){let o=null,s=e.map((e,s)=>Promise.resolve(e.provideFoldingRanges(t,K,i)).then(e=>{if(!i.isCancellationRequested&&Array.isArray(e)){Array.isArray(o)||(o=[]);let i=t.getLineCount();for(let t of e)t.start>0&&t.end>t.start&&t.end<=i&&o.push({start:t.start,end:t.end,rank:s,kind:t.kind})}},n["g"]));return Promise.all(s).then(e=>o)}class z{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,o){if(e>m||t>m)return;let n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._nestingLevels[n]=o,this._types[n]=i,this._length++,o<30&&(this._nestingLevelCounts[o]=(this._nestingLevelCounts[o]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=0;i<this._length;i++)e[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new b(e,t,this._types)}{let e=0,t=this._nestingLevelCounts.length;for(let s=0;s<this._nestingLevelCounts.length;s++){let i=this._nestingLevelCounts[s];if(i){if(i+e>this._foldingRangesLimit){t=s;break}e+=i}}let i=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit),n=[];for(let s=0,r=0;s<this._length;s++){let a=this._nestingLevels[s];(a<t||a===t&&e++<this._foldingRangesLimit)&&(i[r]=this._startIndexes[s],o[r]=this._endIndexes[s],n[r]=this._types[s],r++)}return new b(i,o,n)}}}function Z(e,t){let i=e.sort((e,t)=>{let i=e.start-t.start;return 0===i&&(i=e.rank-t.rank),i}),o=new z(t),n=void 0,s=[];for(let r of i)if(n){if(r.start>n.start)if(r.end<=n.end)s.push(n),n=r,o.add(r.start,r.end,r.kind&&r.kind.value,s.length);else{if(r.start>n.end){do{n=s.pop()}while(n&&r.start>n.end);n&&s.push(n),n=r}o.add(r.start,r.end,r.kind&&r.kind.value,s.length)}}else n=r,o.add(r.start,r.end,r.kind&&r.kind.value,s.length);return o.toIndentRanges()}const X="init";class Q{constructor(e,t,i,o){if(this.editorModel=e,this.id=X,t.length){let n=t=>({range:{startLineNumber:t.startLineNumber,startColumn:0,endLineNumber:t.endLineNumber,endColumn:e.getLineLength(t.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(n)),this.timeout=setTimeout(i,o)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),"number"===typeof this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let i of this.decorationIds){let e=this.editorModel.getDecorationRange(i);e&&t.push({start:e.startLineNumber,end:e.endLineNumber,rank:1})}return Promise.resolve(Z(t,Number.MAX_VALUE))}}var Y=i("d4b5"),J=i("6ad4"),ee=i("f7fb"),te=i("d1e2"),ie=i("47a8"),oe=i("6276");const ne=Object(oe["b"])("folding-expanded",ie["b"].chevronDown,Object(Y["a"])("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),se=Object(oe["b"])("folding-collapsed",ie["b"].chevronRight,Object(Y["a"])("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class re{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?re.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?re.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:re.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?re.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:re.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}re.COLLAPSED_VISUAL_DECORATION=T["b"].register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:te["d"].asClassName(se)}),re.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=T["b"].register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:te["d"].asClassName(se)}),re.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=T["b"].register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:te["d"].asClassName(ne)}),re.EXPANDED_VISUAL_DECORATION=T["b"].register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+te["d"].asClassName(ne)}),re.HIDDEN_RANGE_DECORATION=T["b"].register({description:"folding-hidden-range-decoration",stickiness:1});var ae=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},de=function(e,t){return function(i,o){t(i,o,e)}};const le=new J["c"]("foldingEnabled",!1);let he=class e extends r["a"]{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new r["b"]),this.editor=e;const i=this.editor.getOptions();this._isEnabled=i.get(37),this._useFoldingProviders="indentation"!==i.get(38),this._unfoldOnClickAfterEndOfLine=i.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=i.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new re(e),this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===i.get(98),this.foldingDecorationProvider.showFoldingHighlights=i.get(39),this.foldingEnabled=le.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(e=>{if(e.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(98)||e.hasChanged(39)){const e=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===e.get(98),this.foldingDecorationProvider.showFoldingHighlights=e.get(39),this.onModelContentChanged()}e.hasChanged(38)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(38),this.onFoldingStrategyChanged()),e.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),e.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(t){return t.getContribution(e.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)return;if(!e||e.lineCount!==t.getLineCount())return;if(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions)return;e.provider!==q&&e.provider!==X||(this.foldingStateMemento=e);const i=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(i)){const e=this.getFoldingModel();e&&e.then(e=>{if(e){this._restoringViewState=!0;try{e.applyMemento(i)}finally{this._restoringViewState=!1}}}).then(void 0,n["f"])}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();this._isEnabled&&e&&!e.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new C(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new E(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(e=>this.onHiddenRangesChanges(e))),this.updateScheduler=new o["a"](200),this.cursorChangedScheduler=new o["e"](()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(u["o"].onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(()=>this.onModelContentChanged())),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(e=>this.onEditorMouseDown(e))),this.localToDispose.add(this.editor.onMouseUp(e=>this.onEditorMouseUp(e))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new V(e),this._useFoldingProviders&&this.foldingModel){let t=u["o"].ordered(this.foldingModel.textModel);if(0===t.length&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions){const t=this.rangeProvider=new Q(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);return t}t.length>0&&(this.rangeProvider=new $(e,t,()=>this.onModelContentChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let i=this.foldingRegionPromise=Object(o["h"])(e=>t.compute(e));return i.then(t=>{if(t&&i===this.foldingRegionPromise){let i;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const e=t.setCollapsedAllOfType(u["n"].Imports.value,!0);e&&(i=l["c"].capture(this.editor),this._currentModelHasFoldedImports=e)}let o=this.editor.getSelections(),n=o?o.map(e=>e.startLineNumber):[];e.update(t,n),i&&i.restore(this.editor)}return e})}).then(void 0,e=>(Object(n["f"])(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(e=>{if(e){let t=this.editor.getSelections();if(t&&t.length>0){let i=[];for(let o of t){let t=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(t)&&i.push(...e.getAllRegionsAtLine(t,e=>e.isCollapsed&&t>e.startLineNumber))}i.length&&(e.toggleCollapseState(i),this.reveal(t[0].getPosition()))}}}).then(void 0,n["f"])}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range)return;if(!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:const o=e.target.detail,n=e.target.element.offsetLeft,s=o.offsetX-n;if(s<5)return;i=!0;break;case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){const t=e.target.detail;if(!t.isAfterLines)break}return;case 6:if(this.hiddenRangeModel.hasRanges()){let e=this.editor.getModel();if(e&&t.startColumn===e.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let i=this.mouseDownInfo.lineNumber,o=this.mouseDownInfo.iconClicked,s=e.target.range;if(s&&s.startLineNumber===i){if(o){if(4!==e.target.type)return}else{let e=this.editor.getModel();if(!e||s.startColumn!==e.getLineMaxColumn(i))return}t.then(t=>{if(t){let n=t.getRegionAtLine(i);if(n&&n.startLineNumber===i){let s=n.isCollapsed;if(o||s){let o=e.event.altKey,r=[];if(o){let e=e=>!e.containedBy(n)&&!n.containedBy(e),i=t.getRegionsInside(null,e);for(const t of i)t.isCollapsed&&r.push(t);0===r.length&&(r=i)}else{let i=e.event.middleButton||e.event.shiftKey;if(i)for(const e of t.getRegionsInside(n))e.isCollapsed===s&&r.push(e);!s&&i&&0!==r.length||r.push(n)}t.toggleCollapseState(r),this.reveal({lineNumber:i,column:1})}}}}).then(void 0,n["f"])}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};he.ID="editor.contrib.folding",he=ae([de(1,J["b"])],he);class ce extends h["b"]{runEditorCommand(e,t,i){let o=he.get(t);if(!o)return;let n=o.getFoldingModel();return n?(this.reportTelemetry(e,t),n.then(e=>{if(e){this.invoke(o,e,t,i);const n=t.getSelection();n&&o.reveal(n.getStartPosition())}})):void 0}getSelectedLines(e){let t=e.getSelections();return t?t.map(e=>e.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(e=>e+1):this.getSelectedLines(t)}run(e,t){}}function ue(e){if(!d["m"](e)){if(!d["k"](e))return!1;const t=e;if(!d["m"](t.levels)&&!d["j"](t.levels))return!1;if(!d["m"](t.direction)&&!d["l"](t.direction))return!1;if(!d["m"](t.selectionLines)&&(!d["f"](t.selectionLines)||!t.selectionLines.every(d["j"])))return!1}return!0}class ge extends ce{constructor(){super({id:"editor.unfold",label:Y["a"]("unfoldAction.label","Unfold"),alias:"Unfold",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:ue,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,o){let n=o&&o.levels||1,s=this.getLineNumbers(o,i);o&&"up"===o.direction?y(t,!1,n,s):S(t,!1,n,s)}}class pe extends ce{constructor(){super({id:"editor.unfoldRecursively",label:Y["a"]("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2137),weight:100}})}invoke(e,t,i,o){S(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class _e extends ce{constructor(){super({id:"editor.fold",label:Y["a"]("foldAction.label","Fold"),alias:"Fold",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:ue,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,o){let n=this.getLineNumbers(o,i);const s=o&&o.levels,r=o&&o.direction;"number"!==typeof s&&"string"!==typeof r?R(t,!0,n):"up"===r?y(t,!0,s||1,n):S(t,!0,s||1,n)}}class me extends ce{constructor(){super({id:"editor.toggleFold",label:Y["a"]("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2090),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);w(t,1,o)}}class fe extends ce{constructor(){super({id:"editor.foldRecursively",label:Y["a"]("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2135),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);S(t,!0,Number.MAX_VALUE,o)}}class be extends ce{constructor(){super({id:"editor.foldAllBlockComments",label:Y["a"]("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2133),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())O(t,u["n"].Comment.value,!0);else{const e=i.getModel();if(!e)return;const o=g["b"].getComments(e.getLanguageId());if(o&&o.blockCommentStartToken){let e=new RegExp("^\\s*"+Object(a["t"])(o.blockCommentStartToken));k(t,e,!0)}}}}class ve extends ce{constructor(){super({id:"editor.foldAllMarkerRegions",label:Y["a"]("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2077),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())O(t,u["n"].Region.value,!0);else{const e=i.getModel();if(!e)return;const o=g["b"].getFoldingRules(e.getLanguageId());if(o&&o.markers&&o.markers.start){let e=new RegExp(o.markers.start);k(t,e,!0)}}}}class Ce extends ce{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:Y["a"]("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2078),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())O(t,u["n"].Region.value,!1);else{const e=i.getModel();if(!e)return;const o=g["b"].getFoldingRules(e.getLanguageId());if(o&&o.markers&&o.markers.start){let e=new RegExp(o.markers.start);k(t,e,!1)}}}}class we extends ce{constructor(){super({id:"editor.foldAllExcept",label:Y["a"]("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2131),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);x(t,!0,o)}}class Se extends ce{constructor(){super({id:"editor.unfoldAllExcept",label:Y["a"]("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2129),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);x(t,!1,o)}}class ye extends ce{constructor(){super({id:"editor.foldAll",label:Y["a"]("foldAllAction.label","Fold All"),alias:"Fold All",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2069),weight:100}})}invoke(e,t,i){S(t,!0)}}class Re extends ce{constructor(){super({id:"editor.unfoldAll",label:Y["a"]("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2088),weight:100}})}invoke(e,t,i){S(t,!1)}}class Me extends ce{getFoldingLevel(){return parseInt(this.id.substr(Me.ID_PREFIX.length))}invoke(e,t,i){M(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}Me.ID_PREFIX="editor.foldLevel",Me.ID=e=>Me.ID_PREFIX+e;class xe extends ce{constructor(){super({id:"editor.gotoParentFold",label:Y["a"]("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=D(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}class ke extends ce{constructor(){super({id:"editor.gotoPreviousFold",label:Y["a"]("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=I(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}class Oe extends ce{constructor(){super({id:"editor.gotoNextFold",label:Y["a"]("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=N(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}Object(h["l"])(he.ID,he),Object(h["j"])(ge),Object(h["j"])(pe),Object(h["j"])(_e),Object(h["j"])(fe),Object(h["j"])(ye),Object(h["j"])(Re),Object(h["j"])(be),Object(h["j"])(ve),Object(h["j"])(Ce),Object(h["j"])(we),Object(h["j"])(Se),Object(h["j"])(me),Object(h["j"])(xe),Object(h["j"])(ke),Object(h["j"])(Oe);for(let Ne=1;Ne<=7;Ne++)Object(h["m"])(new Me({id:Me.ID(Ne),label:Y["a"]("foldLevelAction.label","Fold Level {0}",Ne),alias:"Fold Level "+Ne,precondition:le,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:Object(s["c"])(2089,2048|21+Ne),weight:100}}));const De=Object(ee["Cc"])("editor.foldBackground",{light:Object(ee["Rc"])(ee["V"],.3),dark:Object(ee["Rc"])(ee["V"],.3),hc:null},Y["a"]("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),Ie=Object(ee["Cc"])("editorGutter.foldingControlForeground",{dark:ee["jb"],light:ee["jb"],hc:ee["jb"]},Y["a"]("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));Object(te["f"])((e,t)=>{const i=e.getColor(De);i&&t.addRule(`.monaco-editor .folded-background { background-color: ${i}; }`);const o=e.getColor(Ie);o&&t.addRule(`\n\t\t.monaco-editor .cldr${te["d"].asCSSSelector(ne)},\n\t\t.monaco-editor .cldr${te["d"].asCSSSelector(se)} {\n\t\t\tcolor: ${o} !important;\n\t\t}\n\t\t`)})},a974:function(e,t,i){"use strict";i.d(t,"b",(function(){return h})),i.d(t,"a",(function(){return c})),i.d(t,"c",(function(){return u})),i.d(t,"e",(function(){return g})),i.d(t,"d",(function(){return p}));var o=i("4163"),n=i("f123"),s=i("ae58"),r=i("d778"),a=i("9cc3"),d=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};function l(e,t,i,o){const s=i.ordered(e),r=s.map(i=>Promise.resolve(o(i,e,t)).then(void 0,e=>{Object(n["g"])(e)}));return Promise.all(r).then(e=>{const t=[];for(let i of e)Array.isArray(i)?t.push(...i):i&&t.push(i);return t})}function h(e,t,i){return l(e,t,r["f"],(e,t,o)=>e.provideDefinition(t,o,i))}function c(e,t,i){return l(e,t,r["e"],(e,t,o)=>e.provideDeclaration(t,o,i))}function u(e,t,i){return l(e,t,r["q"],(e,t,o)=>e.provideImplementation(t,o,i))}function g(e,t,i){return l(e,t,r["G"],(e,t,o)=>e.provideTypeDefinition(t,o,i))}function p(e,t,i,o){return l(e,t,r["y"],(e,t,n)=>d(this,void 0,void 0,(function*(){const s=yield e.provideReferences(t,n,{includeDeclaration:!0},o);if(!i||!s||2!==s.length)return s;const r=yield e.provideReferences(t,n,{includeDeclaration:!1},o);return r&&1===r.length?r:s})))}function _(e){return d(this,void 0,void 0,(function*(){const t=yield e(),i=new a["c"](t,""),o=i.references.map(e=>e.link);return i.dispose(),o}))}Object(s["n"])("_executeDefinitionProvider",(e,t)=>_(()=>h(e,t,o["a"].None))),Object(s["n"])("_executeDeclarationProvider",(e,t)=>_(()=>c(e,t,o["a"].None))),Object(s["n"])("_executeImplementationProvider",(e,t)=>_(()=>u(e,t,o["a"].None))),Object(s["n"])("_executeTypeDefinitionProvider",(e,t)=>_(()=>g(e,t,o["a"].None))),Object(s["n"])("_executeReferenceProvider",(e,t)=>_(()=>p(e,t,!1,o["a"].None)))},b94e:function(e,t,i){},bec3:function(e,t,i){"use strict";i.r(t),i.d(t,"MarkerController",(function(){return oe})),i.d(t,"NextMarkerAction",(function(){return se}));var o=i("47a8"),n=i("92db"),s=i("ae58"),r=i("47f8"),a=i("e0ab"),d=i("d8b0"),l=i("7c05"),h=i("945a"),c=i("f295"),u=i("bbbb"),g=i("1537"),p=i("c189"),_=i("3f3e"),m=i("bf32"),f=i("0c01"),b=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},v=function(e,t){return function(i,o){t(i,o,e)}};class C{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let w=class e{constructor(t,i){this._markerService=i,this._onDidChange=new c["b"],this.onDidChange=this._onDidChange.event,this._dispoables=new n["b"],this._markers=[],this._nextIdx=-1,p["a"].isUri(t)?this._resourceFilter=e=>e.toString()===t.toString():t&&(this._resourceFilter=t);const o=()=>{this._markers=this._markerService.read({resource:p["a"].isUri(t)?t:void 0,severities:f["c"].Error|f["c"].Warning|f["c"].Info}),"function"===typeof t&&(this._markers=this._markers.filter(e=>this._resourceFilter(e.resource))),this._markers.sort(e._compareMarker)};o(),this._dispoables.add(i.onMarkerChanged(e=>{this._resourceFilter&&!e.some(e=>this._resourceFilter(e))||(o(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new C(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let o=!1,n=this._markers.findIndex(t=>t.resource.toString()===e.uri.toString());n<0&&(n=Object(h["d"])(this._markers,{resource:e.uri},(e,t)=>Object(g["f"])(e.resource.toString(),t.resource.toString())),n<0&&(n=~n));for(let s=n;s<this._markers.length;s++){let i=d["a"].lift(this._markers[s]);if(i.isEmpty()){const t=e.getWordAtPosition(i.getStartPosition());t&&(i=new d["a"](i.startLineNumber,t.startColumn,i.startLineNumber,t.endColumn))}if(t&&(i.containsPosition(t)||t.isBeforeOrEqual(i.getStartPosition()))){this._nextIdx=s,o=!0;break}if(this._markers[s].resource.toString()!==e.uri.toString())break}o||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(0===this._markers.length)return!1;let o=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),o!==this._nextIdx}find(e,t){let i=this._markers.findIndex(t=>t.resource.toString()===e.toString());if(!(i<0))for(;i<this._markers.length;i++)if(d["a"].containsPosition(this._markers[i],t))return new C(this._markers[i],i+1,this._markers.length)}static _compareMarker(e,t){let i=Object(g["f"])(e.resource.toString(),t.resource.toString());return 0===i&&(i=f["c"].compare(e.severity,t.severity)),0===i&&(i=d["a"].compareRangesUsingStarts(e,t)),i}};w=b([v(1,f["b"])],w);const S=Object(m["c"])("IMarkerNavigationService");let y=class{constructor(e){this._markerService=e,this._provider=new u["a"]}getMarkerList(e){for(let t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new w(e,this._markerService)}};y=b([v(0,f["b"])],y),Object(_["b"])(S,y,!0);var R=i("d4b5"),M=i("cd62"),x=i("6ad4"),k=i("6276"),O=i("d208"),D=i("adab"),I=i("98ef"),N=i("f55d"),L=i("1ff1"),P=(i("630c"),i("8ec0")),E=i("5b7f"),F=i("3c41"),A=i("0aba"),T=i("cd76"),j=i("f7fb"),W=i("d1e2"),V=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},B=function(e,t){return function(i,o){t(i,o,e)}};class H{constructor(e,t,i,o,s){this._openerService=o,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new n["b"],this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(O["o"](this._relatedBlock,"click",e=>{e.preventDefault();const t=this._relatedDiagnostics.get(e.target);t&&i(t)})),this._scrollable=new D["b"](r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(e=>{r.style.left=`-${e.scrollLeft}px`,r.style.top=`-${e.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){Object(n["f"])(this._disposables)}update(e){const{source:t,message:i,relatedInformation:o,code:n}=e;let s=((null===t||void 0===t?void 0:t.length)||0)+"()".length;n&&(s+="string"===typeof n?n.length:n.value.length);const r=Object(g["Q"])(i);this._lines=r.length,this._longestLineLength=0;for(const h of r)this._longestLineLength=Math.max(h.length+s,this._longestLineLength);O["t"](this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let a=this._messageBlock;for(const h of r)a=document.createElement("div"),a.innerText=h,""===h&&(a.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(a);if(t||n){const e=document.createElement("span");if(e.classList.add("details"),a.appendChild(e),t){const i=document.createElement("span");i.innerText=t,i.classList.add("source"),e.appendChild(i)}if(n)if("string"===typeof n){const t=document.createElement("span");t.innerText=`(${n})`,t.classList.add("code"),e.appendChild(t)}else{this._codeLink=O["a"]("a.code-link"),this._codeLink.setAttribute("href",""+n.target.toString()),this._codeLink.onclick=e=>{this._openerService.open(n.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};const t=O["q"](this._codeLink,O["a"]("span"));t.innerText=n.value,e.appendChild(this._codeLink)}}if(O["t"](this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Object(h["n"])(o)){const e=this._relatedBlock.appendChild(document.createElement("div"));e.style.paddingTop=Math.floor(.66*this._editor.getOption(58))+"px",this._lines+=1;for(const t of o){let i=document.createElement("div"),o=document.createElement("a");o.classList.add("filename"),o.innerText=`${Object(N["a"])(t.resource)}(${t.startLineNumber}, ${t.startColumn}): `,o.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(o,t);let n=document.createElement("span");n.innerText=t.message,i.appendChild(o),i.appendChild(n),this._lines+=1,e.appendChild(i)}}const d=this._editor.getOption(43),l=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),c=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:l,scrollHeight:c})}layout(e,t){this._scrollable.getDomNode().style.height=e+"px",this._scrollable.getDomNode().style.width=t+"px",this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case f["c"].Error:t=R["a"]("Error","Error");break;case f["c"].Warning:t=R["a"]("Warning","Warning");break;case f["c"].Info:t=R["a"]("Info","Info");break;case f["c"].Hint:t=R["a"]("Hint","Hint");break}let i=R["a"]("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const o=this._editor.getModel();if(o&&e.startLineNumber<=o.getLineCount()&&e.startLineNumber>=1){const t=o.getLineContent(e.startLineNumber);i=`${t}, ${i}`}return i}}let U=class e extends P["c"]{constructor(e,t,i,o,s,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=i,this._menuService=o,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new n["b"],this._onDidSelectRelatedInformation=new c["b"],this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=f["c"].Warning,this._backgroundColor=I["a"].white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(J);let t=G,i=z;this._severity===f["c"].Warning?(t=Z,i=X):this._severity===f["c"].Info&&(t=Q,i=Y);const o=e.getColor(t),n=e.getColor(i);this.style({arrowColor:o,frameColor:o,headerBackgroundColor:n,primaryHeadingColor:e.getColor(P["q"]),secondaryHeadingColor:e.getColor(P["r"])})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(t){super._fillHead(t),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(e=>this.editor.focus()));const i=[],o=this._menuService.createMenu(e.TitleMenu,this._contextKeyService);Object(E["c"])(o,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),o.dispose()}_fillTitleIcon(e){this._icon=O["q"](e,O["a"](""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new H(this._container,this.editor,e=>this._onDidSelectRelatedInformation.fire(e),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let o=d["a"].lift(e);const n=this.editor.getPosition();let s=n&&o.containsPosition(n)?n:o.getStartPosition();super.show(s,this.computeRequiredHeight());const r=this.editor.getModel();if(r){const e=i>1?R["a"]("problems","{0} of {1} problems",t,i):R["a"]("change","{0} of {1} problem",t,i);this.setTitle(Object(L["b"])(r.uri),e)}this._icon.className="codicon "+T["a"].className(f["c"].toSeverity(this._severity)),this.editor.revealPositionNearTop(s,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=e+"px"}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};U.TitleMenu=new M["b"]("gotoErrorTitleMenu"),U=V([B(1,W["b"]),B(2,A["a"]),B(3,M["a"]),B(4,m["a"]),B(5,x["b"]),B(6,F["a"])],U);let K=Object(j["nc"])(j["u"],j["t"]),q=Object(j["nc"])(j["bb"],j["ab"]),$=Object(j["nc"])(j["M"],j["L"]);const G=Object(j["Cc"])("editorMarkerNavigationError.background",{dark:K,light:K,hc:j["h"]},R["a"]("editorMarkerNavigationError","Editor marker navigation widget error color.")),z=Object(j["Cc"])("editorMarkerNavigationError.headerBackground",{dark:Object(j["Rc"])(G,.1),light:Object(j["Rc"])(G,.1),hc:null},R["a"]("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Z=Object(j["Cc"])("editorMarkerNavigationWarning.background",{dark:q,light:q,hc:j["h"]},R["a"]("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),X=Object(j["Cc"])("editorMarkerNavigationWarning.headerBackground",{dark:Object(j["Rc"])(Z,.1),light:Object(j["Rc"])(Z,.1),hc:"#0C141F"},R["a"]("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),Q=Object(j["Cc"])("editorMarkerNavigationInfo.background",{dark:$,light:$,hc:j["h"]},R["a"]("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),Y=Object(j["Cc"])("editorMarkerNavigationInfo.headerBackground",{dark:Object(j["Rc"])(Q,.1),light:Object(j["Rc"])(Q,.1),hc:null},R["a"]("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),J=Object(j["Cc"])("editorMarkerNavigation.background",{dark:j["r"],light:j["r"],hc:j["r"]},R["a"]("editorMarkerNavigationBackground","Editor marker navigation widget background."));Object(W["f"])((e,t)=>{const i=e.getColor(j["Pc"]);i&&t.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${i}; }`);const o=e.getColor(j["Oc"]);o&&t.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${o}; }`)});var ee=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},te=function(e,t){return function(i,o){t(i,o,e)}},ie=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};let oe=class e{constructor(e,t,i,o,s){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=o,this._instantiationService=s,this._sessionDispoables=new n["b"],this._editor=e,this._widgetVisible=le.bindTo(this._contextKeyService)}static get(t){return t.getContribution(e.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(U,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e=>{var t,i,o;(null===(t=this._model)||void 0===t?void 0:t.selected)&&d["a"].containsPosition(null===(i=this._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(o=this._model)||void 0===o||o.resetIndex()})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:d["a"].lift(e).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new a["a"](e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(t,i){return ie(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const o=this._getOrCreateModel(i?void 0:this._editor.getModel().uri);if(o.move(t,this._editor.getModel(),this._editor.getPosition()),!o.selected)return;if(o.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const n=yield this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);n&&(e.get(n).close(),e.get(n).nagivate(t,i))}else this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}}))}};oe.ID="editor.contrib.markerController",oe=ee([te(1,S),te(2,x["b"]),te(3,r["a"]),te(4,m["a"])],oe);class ne extends s["b"]{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}run(e,t){return ie(this,void 0,void 0,(function*(){t.hasModel()&&oe.get(t).nagivate(this._next,this._multiFile)}))}}class se extends ne{constructor(){super(!0,!1,{id:se.ID,label:se.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:578,weight:100},menuOpts:{menuId:U.TitleMenu,title:se.LABEL,icon:Object(k["b"])("marker-navigation-next",o["b"].arrowDown,R["a"]("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}se.ID="editor.action.marker.next",se.LABEL=R["a"]("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class re extends ne{constructor(){super(!1,!1,{id:re.ID,label:re.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:1602,weight:100},menuOpts:{menuId:U.TitleMenu,title:se.LABEL,icon:Object(k["b"])("marker-navigation-previous",o["b"].arrowUp,R["a"]("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}re.ID="editor.action.marker.prev",re.LABEL=R["a"]("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class ae extends ne{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:R["a"]("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:66,weight:100},menuOpts:{menuId:M["b"].MenubarGoMenu,title:R["a"]({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class de extends ne{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:R["a"]("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:l["a"].focus,primary:1090,weight:100},menuOpts:{menuId:M["b"].MenubarGoMenu,title:R["a"]({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Object(s["l"])(oe.ID,oe),Object(s["j"])(se),Object(s["j"])(re),Object(s["j"])(ae),Object(s["j"])(de);const le=new x["c"]("markersNavigationVisible",!1),he=s["c"].bindToContribution(oe.get);Object(s["k"])(new he({id:"closeMarkersNavigation",precondition:le,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:l["a"].focus,primary:9,secondary:[1033]}}))},ca7e:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var o=i("945a"),n=i("4163"),s=i("f123"),r=i("bd20"),a=i("1a26"),d=i("d8b0"),l=i("d778"),h=i("0650");class c{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let i;"string"===typeof e?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,void 0!==t.children.get(i)&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let o=i;for(let n=0;void 0!==t.children.get(o);n++)o=`${i}_${n}`;return o}static empty(e){return 0===e.children.size}}class u extends c{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class g extends c{constructor(e,t,i,o){super(),this.id=e,this.parent=t,this.label=i,this.order=o,this.children=new Map}}class p extends c{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t){let i=this._keys.for(e,!0),o=p._requests.get(i);if(!o){let t=new n["b"];o={promiseCnt:0,source:t,promise:p._create(e,t.token),model:void 0},p._requests.set(i,o);const s=Date.now();o.promise.then(()=>{this._requestDurations.update(e,Date.now()-s)})}return o.model?Promise.resolve(o.model):(o.promiseCnt+=1,t.onCancellationRequested(()=>{0===--o.promiseCnt&&(o.source.cancel(),p._requests.delete(i))}),new Promise((e,t)=>{o.promise.then(t=>{o.model=t,e(t)},e=>{p._requests.delete(i),t(e)})}))}static _create(e,t){const i=new n["b"](t),r=new p(e.uri),a=l["m"].ordered(e),d=a.map((t,o)=>{var n;let a=c.findId("provider_"+o,r),d=new g(a,r,null!==(n=t.displayName)&&void 0!==n?n:"Unknown Outline Provider",o);return Promise.resolve(t.provideDocumentSymbols(e,i.token)).then(e=>{for(const t of e||[])p._makeOutlineElement(t,d);return d},e=>(Object(s["g"])(e),d)).then(e=>{c.empty(e)?e.remove():r._groups.set(a,e)})}),h=l["m"].onDidChange(()=>{const t=l["m"].ordered(e);Object(o["g"])(t,a)||i.cancel()});return Promise.all(d).then(()=>i.token.isCancellationRequested&&!t.isCancellationRequested?p._create(e,t):r._compact()).finally(()=>{h.dispose()})}static _makeOutlineElement(e,t){let i=c.findId(e,t),o=new u(i,t,e);if(e.children)for(const n of e.children)p._makeOutlineElement(n,o);t.children.set(o.id,o)}_compact(){let e=0;for(const[t,i]of this._groups)0===i.children.size?this._groups.delete(t):e+=1;if(1!==e)this.children=this._groups;else{let e=r["a"].first(this._groups.values());for(let[,t]of e.children)t.parent=this,this.children.set(t.id,t)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof u?e.push(t.symbol):e.push(...r["a"].map(t.children.values(),e=>e.symbol));return e.sort((e,t)=>d["a"].compareRangesUsingStarts(e.range,t.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return p._flattenDocumentSymbols(t,e,""),t.sort((e,t)=>d["a"].compareRangesUsingStarts(e.range,t.range))}static _flattenDocumentSymbols(e,t,i){for(const o of t)e.push({kind:o.kind,tags:o.tags,name:o.name,detail:o.detail,containerName:o.containerName||i,range:o.range,selectionRange:o.selectionRange,children:void 0}),o.children&&p._flattenDocumentSymbols(e,o.children,o.name)}}p._requestDurations=new h["b"](l["m"],350),p._requests=new a["a"](9,.75),p._keys=new class{constructor(){this._counter=1,this._data=new WeakMap}for(e,t){return`${e.id}/${t?e.getVersionId():""}/${this._hash(l["m"].all(e))}`}_hash(e){let t="";for(const i of e){let e=this._data.get(i);"undefined"===typeof e&&(e=this._counter++,this._data.set(i,e)),t+=e}return t}}},d006:function(e,t,i){},d93f:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return n}));class o{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}class n{constructor(e,t,i){this.priority=e,this.owner=t,this.range=i,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}}},eadb:function(e,t,i){"use strict";i.r(t),i.d(t,"getDocumentSymbols",(function(){return c}));var o=i("4163"),n=i("4d73"),s=i("c189"),r=i("1edf"),a=i("d00e"),d=i("ca7e"),l=i("d5b7"),h=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};function c(e,t,i){return h(this,void 0,void 0,(function*(){const o=yield d["a"].create(e,i);return t?o.asListOfDocumentSymbols():o.getTopLevelSymbols()}))}l["a"].registerCommand("_executeDocumentSymbolProvider",(function(e,...t){return h(this,void 0,void 0,(function*(){const[i]=t;Object(n["c"])(s["a"].isUri(i));const d=e.get(r["a"]).getModel(i);if(d)return c(d,!1,o["a"].None);const l=yield e.get(a["a"]).createModelReference(i);try{return yield c(l.object.textEditorModel,!1,o["a"].None)}finally{l.dispose()}}))}))},f61d:function(e,t,i){"use strict";i.r(t),i.d(t,"DefinitionAction",(function(){return te}));var o=i("28e9"),n=i("4d3c"),s=i("4b4a"),r=i("d3a2"),a=i("cb4a"),d=i("4d73"),l=i("c189"),h=i("5e2a"),c=i("80f8"),u=i("ae58"),g=i("47f8"),p=i("22a8"),_=i("e0ab"),m=i("d8b0"),f=i("7c05"),b=i("d778"),v=i("4c77"),C=i("9cc3"),w=i("f295"),S=i("92db"),y=i("1ff1"),R=i("d4b5"),M=i("6ad4"),x=i("3f3e"),k=i("bf32"),O=i("5365"),D=i("f3a5"),I=i("eb8f"),N=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},L=function(e,t){return function(i,o){t(i,o,e)}};const P=new M["c"]("hasSymbols",!1,Object(R["a"])("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),E=Object(k["c"])("ISymbolNavigationService");let F=class{constructor(e,t,i,o){this._editorService=t,this._notificationService=i,this._keybindingService=o,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=P.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1)return void this.reset();this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new A(this._editorService),o=i.onDidChange(e=>{if(this._ignoreEditorChange)return;const i=this._editorService.getActiveCodeEditor();if(!i)return;const o=i.getModel(),n=i.getPosition();if(!o||!n)return;let s=!1,r=!1;for(const a of t.references)if(Object(y["f"])(a.uri,o.uri))s=!0,r=r||m["a"].containsPosition(a.range,n);else if(s)break;s&&r||this.reset()});this._currentState=Object(S["e"])(i,o)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:m["a"].collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?Object(R["a"])("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):Object(R["a"])("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};F=N([L(0,M["b"]),L(1,g["a"]),L(2,I["a"]),L(3,O["a"])],F),Object(x["b"])(E,F,!0),Object(u["k"])(new class extends u["c"]{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:P,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(E).revealNext(t)}}),D["a"].registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:P,primary:9,handler(e){e.get(E).reset()}});let A=class{constructor(e){this._listener=new Map,this._disposables=new S["b"],this._onDidChange=new w["b"],this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),Object(S["f"])(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Object(S["e"])(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}};A=N([L(0,g["a"])],A);var T,j,W,V,B,H,U,K,q=i("90d4"),$=i("8ec0"),G=i("cd62"),z=i("d5b7"),Z=i("b5f6"),X=i("a974"),Q=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};G["d"].appendMenuItem(G["b"].EditorContext,{submenu:G["b"].EditorContextPeek,title:R["a"]("peek.submenu","Peek"),group:"navigation",order:100});const Y=new Set;function J(e){const t=new e;return Object(u["m"])(t),Y.add(t.id),t}class ee extends u["b"]{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const i=e.get(I["a"]),o=e.get(g["a"]),r=e.get(Z["a"]),a=e.get(E),d=t.getModel(),l=t.getPosition(),c=new h["b"](t,5),u=Object(s["l"])(this._getLocationModel(d,l,c.token),c.token).then(e=>Q(this,void 0,void 0,(function*(){if(!e||c.token.isCancellationRequested)return;let i;if(Object(n["a"])(e.ariaMessage),e.referenceAt(d.uri,l)){const e=this._getAlternativeCommand(t);e!==this.id&&Y.has(e)&&(i=t.getAction(e))}const s=e.references.length;if(0===s){if(!this._configuration.muteMessage){const e=d.getWordAtPosition(l);q["a"].get(t).showMessage(this._getNoResultFoundMessage(e),l)}}else{if(1!==s||!i)return this._onResult(o,a,t,e);i.run()}})),e=>{i.error(e)}).finally(()=>{c.dispose()});return r.showWhile(u,250),u}_onResult(e,t,i,o){return Q(this,void 0,void 0,(function*(){const n=this._getGoToPreference(i);if(i instanceof p["a"]||!(this._configuration.openInPeek||"peek"===n&&o.references.length>1)){const s=o.firstReference(),r=o.references.length>1&&"gotoAndPeek"===n,a=yield this._openReference(i,e,s,this._configuration.openToSide,!r);r&&a?this._openInPeek(a,o):o.dispose(),"goto"===n&&t.put(s)}else this._openInPeek(i,o)}))}_openReference(e,t,i,o,n){return Q(this,void 0,void 0,(function*(){let s=void 0;if(Object(b["J"])(i)&&(s=i.targetSelectionRange),s||(s=i.range),!s)return;const r=yield t.openCodeEditor({resource:i.uri,options:{selection:m["a"].collapseToStart(s),selectionRevealType:3}},e,o);if(r){if(n){const e=r.getModel(),t=r.deltaDecorations([],[{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{r.getModel()===e&&r.deltaDecorations(t,[])},350)}return r}}))}_openInPeek(e,t){let i=v["a"].get(e);i&&e.hasModel()?i.toggleWidget(e.getSelection(),Object(s["h"])(e=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class te extends ee{_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(X["b"])(e,t,i),R["a"]("def.title","Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?R["a"]("noResultWord","No definition found for '{0}'",e.word):R["a"]("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const ie=a["h"]&&!o["i"]?2118:70;J((T=class e extends te{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:R["a"]("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:M["a"].and(f["a"].hasDefinitionProvider,f["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:f["a"].editorTextFocus,primary:ie,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),z["a"].registerCommandAlias("editor.action.goToDeclaration",e.id)}},T.id="editor.action.revealDefinition",T)),J((j=class e extends te{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:e.id,label:R["a"]("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:M["a"].and(f["a"].hasDefinitionProvider,f["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:f["a"].editorTextFocus,primary:Object(r["c"])(2089,ie),weight:100}}),z["a"].registerCommandAlias("editor.action.openDeclarationToTheSide",e.id)}},j.id="editor.action.revealDefinitionAside",j)),J((W=class e extends te{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.id,label:R["a"]("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:M["a"].and(f["a"].hasDefinitionProvider,$["b"].notInPeekEditor,f["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:f["a"].editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:G["b"].EditorContextPeek,group:"peek",order:2}}),z["a"].registerCommandAlias("editor.action.previewDeclaration",e.id)}},W.id="editor.action.peekDefinition",W));class oe extends ee{_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(X["a"])(e,t,i),R["a"]("decl.title","Declarations"))}))}_getNoResultFoundMessage(e){return e&&e.word?R["a"]("decl.noResultWord","No declaration found for '{0}'",e.word):R["a"]("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}J((V=class e extends oe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:R["a"]("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:M["a"].and(f["a"].hasDeclarationProvider,f["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?R["a"]("decl.noResultWord","No declaration found for '{0}'",e.word):R["a"]("decl.generic.noResults","No declaration found")}},V.id="editor.action.revealDeclaration",V)),J(class extends oe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:R["a"]("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:M["a"].and(f["a"].hasDeclarationProvider,$["b"].notInPeekEditor,f["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:G["b"].EditorContextPeek,group:"peek",order:3}})}});class ne extends ee{_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(X["e"])(e,t,i),R["a"]("typedef.title","Type Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?R["a"]("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):R["a"]("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}J((B=class e extends ne{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:R["a"]("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:M["a"].and(f["a"].hasTypeDefinitionProvider,f["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:f["a"].editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},B.ID="editor.action.goToTypeDefinition",B)),J((H=class e extends ne{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:R["a"]("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:M["a"].and(f["a"].hasTypeDefinitionProvider,$["b"].notInPeekEditor,f["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:G["b"].EditorContextPeek,group:"peek",order:4}})}},H.ID="editor.action.peekTypeDefinition",H));class se extends ee{_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(X["c"])(e,t,i),R["a"]("impl.title","Implementations"))}))}_getNoResultFoundMessage(e){return e&&e.word?R["a"]("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):R["a"]("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}J((U=class e extends se{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:R["a"]("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:M["a"].and(f["a"].hasImplementationProvider,f["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:f["a"].editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},U.ID="editor.action.goToImplementation",U)),J((K=class e extends se{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:R["a"]("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:M["a"].and(f["a"].hasImplementationProvider,$["b"].notInPeekEditor,f["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:f["a"].editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:G["b"].EditorContextPeek,group:"peek",order:5}})}},K.ID="editor.action.peekImplementation",K));class re extends ee{_getNoResultFoundMessage(e){return e?R["a"]("references.no","No references found for '{0}'",e.word):R["a"]("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}J(class extends re{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:R["a"]("goToReferences.label","Go to References"),alias:"Go to References",precondition:M["a"].and(f["a"].hasReferenceProvider,$["b"].notInPeekEditor,f["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:f["a"].editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(X["d"])(e,t,!0,i),R["a"]("ref.title","References"))}))}}),J(class extends re{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:R["a"]("references.action.label","Peek References"),alias:"Peek References",precondition:M["a"].and(f["a"].hasReferenceProvider,$["b"].notInPeekEditor,f["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:G["b"].EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(X["d"])(e,t,!1,i),R["a"]("ref.title","References"))}))}});class ae extends ee{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",label:R["a"]("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:M["a"].and($["b"].notInPeekEditor,f["a"].isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](this._references,R["a"]("generic.title","Locations"))}))}_getNoResultFoundMessage(e){return e&&R["a"]("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}z["a"].registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:l["a"]},{name:"position",description:"The position at which to start",constraint:_["a"].isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(e,t,i,o,n,s,r)=>Q(void 0,void 0,void 0,(function*(){Object(d["c"])(l["a"].isUri(t)),Object(d["c"])(_["a"].isIPosition(i)),Object(d["c"])(Array.isArray(o)),Object(d["c"])("undefined"===typeof n||"string"===typeof n),Object(d["c"])("undefined"===typeof r||"boolean"===typeof r);const a=e.get(g["a"]),h=yield a.openCodeEditor({resource:t},a.getFocusedCodeEditor());if(Object(c["b"])(h))return h.setPosition(i),h.revealPositionInCenterIfOutsideViewport(i,0),h.invokeWithinContext(e=>{const t=new class extends ae{_getNoResultFoundMessage(e){return s||super._getNoResultFoundMessage(e)}}({muteMessage:!Boolean(s),openInPeek:Boolean(r),openToSide:!1},o,n);e.get(k["a"]).invokeFunction(t.run.bind(t),h)})}))}),z["a"].registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:l["a"]},{name:"position",description:"The position at which to start",constraint:_["a"].isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(e,t,i,o,n)=>Q(void 0,void 0,void 0,(function*(){e.get(z["b"]).executeCommand("editor.action.goToLocations",t,i,o,n,void 0,!0)}))}),z["a"].registerCommand({id:"editor.action.findReferences",handler:(e,t,i)=>{Object(d["c"])(l["a"].isUri(t)),Object(d["c"])(_["a"].isIPosition(i));const o=e.get(g["a"]);return o.openCodeEditor({resource:t},o.getFocusedCodeEditor()).then(e=>{if(!Object(c["b"])(e)||!e.hasModel())return;const t=v["a"].get(e);if(!t)return;const o=Object(s["h"])(t=>Object(X["d"])(e.getModel(),_["a"].lift(i),!1,t).then(e=>new C["c"](e,R["a"]("ref.title","References")))),n=new m["a"](i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(t.toggleWidget(n,o,!1))})}}),z["a"].registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),G["d"].appendMenuItems([{id:G["b"].MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:R["a"]({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:G["b"].MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:R["a"]({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:G["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:R["a"]({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:G["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:R["a"]({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:G["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:R["a"]({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}])},fcfd:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var o=i("ae41"),n=i("d8b0");class s{static _handleEolEdits(e,t){let i=void 0,o=[];for(let n of t)"number"===typeof n.eol&&(i=n.eol),n.range&&"string"===typeof n.text&&o.push(n);return"number"===typeof i&&e.hasModel()&&e.getModel().pushEOL(i),o}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),o=i.validateRange(t.range),n=i.getFullModelRange();return n.equalsRange(o)}static execute(e,t,i){i&&e.pushUndoStop();const r=s._handleEolEdits(e,t);1===r.length&&s._isFullModelReplaceEdit(e,r[0])?e.executeEdits("formatEditsCommand",r.map(e=>o["a"].replace(n["a"].lift(e.range),e.text))):e.executeEdits("formatEditsCommand",r.map(e=>o["a"].replaceMove(n["a"].lift(e.range),e.text))),i&&e.pushUndoStop()}}}}]);