/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2022-01-17 14:27:31
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors-dgiot-80332e28"],{"02b3":function(e,t,i){},"0f43":function(e,t,i){"use strict";i.r(t),i.d(t,"ModesHoverController",(function(){return Re}));var n=i("d3a2"),o=i("92db"),r=i("ae58"),s=i("d8b0"),a=i("7c05"),l=i("12fe"),c=i("7863"),d=i("d208"),h=i("ac21"),u=i("a9b7"),g=i("945a"),p=i("e0ab"),m=i("2f07"),f=i("d778"),b=i("4163"),v=i("98ef"),_=i("272e"),C=i("675e"),w=i("d578"),y=i("114a"),S=i("d1e2"),L=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},O=function(e,t){return function(i,n){t(i,n,e)}},x=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class k{constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let M=class{constructor(e,t,i){this._editor=e,this._hover=t,this._themeService=i}computeSync(e,t){return[]}computeAsync(e,t,i){return x(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const e=C["a"].get(this._editor);for(const i of t){if("color-detector-color"!==i.options.description)continue;const t=e.getColorData(i.range.getStartPosition());if(t){const e=yield this._createColorHover(this._editor.getModel(),t.colorInfo,t.provider);return[e]}}return[]}))}_createColorHover(e,t,i){return x(this,void 0,void 0,(function*(){const n=e.getValueInRange(t.range),{red:o,green:r,blue:a,alpha:l}=t.color,c=new v["c"](Math.round(255*o),Math.round(255*r),Math.round(255*a),l),d=new v["a"](c),h=yield Object(_["a"])(e,t,i,b["a"].None),u=new w["a"](d,[],0);return u.colorPresentations=h||[],u.guessColorPresentation(d,n),new k(this,s["a"].lift(t.range),u,i)}))}renderHoverParts(e,t,i){if(0===e.length||!this._editor.hasModel())return o["a"].None;const n=new o["b"],r=e[0],a=this._editor.getModel(),l=r.model,c=n.add(new y["a"](t,l,this._editor.getOption(127),this._themeService));let d=new s["a"](r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);const h=()=>{let e,t;if(l.presentation.textEdit){e=[l.presentation.textEdit],t=new s["a"](l.presentation.textEdit.range.startLineNumber,l.presentation.textEdit.range.startColumn,l.presentation.textEdit.range.endLineNumber,l.presentation.textEdit.range.endColumn);const i=this._editor.getModel()._setTrackedRange(null,t,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e),t=this._editor.getModel()._getTrackedRange(i)||t}else e=[{identifier:null,range:d,text:l.presentation.label,forceMoveMarkers:!1}],t=d.setEndPosition(d.endLineNumber,d.startColumn+l.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e);l.presentation.additionalTextEdits&&(e=[...l.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",e),this._hover.hide()),this._editor.pushUndoStop(),d=t},u=e=>Object(_["a"])(a,{range:d,color:{red:e.rgba.r/255,green:e.rgba.g/255,blue:e.rgba.b/255,alpha:e.rgba.a}},r.provider,b["a"].None).then(e=>{l.colorPresentations=e||[]});return n.add(l.onColorFlushed(e=>{u(e).then(h)})),n.add(l.onDidChangeColor(u)),this._hover.setColorPicker(c),n}};M=L([O(2,S["b"])],M);var D=i("4b4a"),I=i("f123");class N{constructor(e,t,i,n,o){this._computer=e,this._state=0,this._hoverTime=o,this._firstWaitScheduler=new D["e"](()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new D["e"](()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new D["e"](()=>this._showLoadingMessage(),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=i,this._progressCallback=n}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=Object(D["h"])(e=>this._computer.computeAsync(e)),this._asyncComputationPromise.then(e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)},e=>this._onError(e))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){3===this._state&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),3===this._state&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):Object(I["f"])(e)}_onProgress(e){this._progressCallback(e)}start(e){if(0===e)0===this._state&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._loadingMessageScheduler.cancel(),1===this._state&&this._firstWaitScheduler.cancel(),2===this._state&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),3===this._state&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}}class R{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}class P{constructor(e,t,i){this.priority=e,this.owner=t,this.range=i,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}}var E=i("6b5e"),T=i("05a3");function A(e,t,i){const n=f["p"].ordered(e),o=n.map(n=>Promise.resolve(n.provideHover(e,t,i)).then(e=>e&&j(e)?e:void 0,e=>{Object(I["g"])(e)}));return Promise.all(o).then(g["e"])}function j(e){const t="undefined"!==typeof e.range,i="undefined"!==typeof e.contents&&e.contents&&e.contents.length>0;return t&&i}Object(r["n"])("_executeHoverProvider",(e,t)=>A(e,t,b["a"].None));var z=i("c602"),W=i("672a"),F=i("0aba"),U=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},V=function(e,t){return function(i,n){t(i,n,e)}},H=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const K=d["a"];class B{constructor(e,t,i){this.owner=e,this.range=t,this.contents=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let q=class{constructor(e,t,i,n,o){this._editor=e,this._hover=t,this._modeService=i,this._openerService=n,this._configurationService=o}createLoadingMessage(e){return new B(this,e.range,[(new E["a"]).appendText(z["localize"]("vs/editor/contrib/hover/markdownHoverParticipant","modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),r=[];for(const d of t){const t=d.range.startLineNumber===n?d.range.startColumn:1,i=d.range.endLineNumber===n?d.range.endColumn:o,a=d.options.hoverMessage;if(!a||Object(E["b"])(a))continue;const l=new s["a"](e.range.startLineNumber,t,e.range.startLineNumber,i);r.push(new B(this,l,Object(g["c"])(a)))}const a=i.getLineLength(n),l=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),c=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l});return"number"===typeof c&&a>=c&&r.push(new B(this,e.range,[{value:z["localize"]("vs/editor/contrib/hover/markdownHoverParticipant","too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),r}computeAsync(e,t,i){return H(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||1!==e.type)return Promise.resolve([]);const t=this._editor.getModel();if(!f["p"].has(t))return Promise.resolve([]);const n=yield A(t,new p["a"](e.range.startLineNumber,e.range.startColumn),i),o=[];for(const i of n){if(Object(E["b"])(i.contents))continue;const t=i.range?s["a"].lift(i.range):e.range;o.push(new B(this,t,i.contents))}return o}))}renderHoverParts(e,t,i){const n=new o["b"];for(const o of e)for(const e of o.contents){if(Object(E["b"])(e))continue;const i=K("div.hover-row.markdown-hover"),o=d["q"](i,K("div.hover-contents")),r=n.add(new T["a"]({editor:this._editor},this._modeService,this._openerService));n.add(r.onDidRenderAsync(()=>{o.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const s=n.add(r.render(e));o.appendChild(s.element),t.appendChild(i)}return n}};q=U([V(2,l["a"]),V(3,F["a"]),V(4,W["a"])],q);var $=i("1ff1"),G=i("6c08"),Z=i("b361"),J=i("ed96"),Q=i("389a"),X=i("bec3"),Y=i("0c01"),ee=i("b5f6"),te=i("f7fb"),ie=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ne=function(e,t){return function(i,n){t(i,n,e)}};const oe=d["a"];class re{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const se={type:1,filter:{include:Q["b"].QuickFix}};let ae=class{constructor(e,t,i,n){this._editor=e,this._hover=t,this._markerDecorationsService=i,this._openerService=n,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),r=[];for(const a of t){const t=a.range.startLineNumber===n?a.range.startColumn:1,l=a.range.endLineNumber===n?a.range.endColumn:o,c=this._markerDecorationsService.getMarker(i.uri,a);if(!c)continue;const d=new s["a"](e.range.startLineNumber,t,e.range.startLineNumber,l);r.push(new re(this,d,c))}return r}renderHoverParts(e,t,i){if(!e.length)return o["a"].None;const n=new o["b"];e.forEach(e=>t.appendChild(this.renderMarkerHover(e,n)));const r=1===e.length?e[0]:e.sort((e,t)=>Y["c"].compare(e.marker.severity,t.marker.severity))[0];return this.renderMarkerStatusbar(r,i,n),n}renderMarkerHover(e,t){const i=oe("div.hover-row"),n=d["q"](i,oe("div.marker.hover-contents")),{source:o,message:r,code:s,relatedInformation:a}=e.marker;this._editor.applyFontInfo(n);const l=d["q"](n,oe("span"));if(l.style.whiteSpace="pre-wrap",l.innerText=r,o||s)if(s&&"string"!==typeof s){const e=oe("span");if(o){const t=d["q"](e,oe("span"));t.innerText=o}const i=d["q"](e,oe("a.code-link"));i.setAttribute("href",s.target.toString()),t.add(d["i"](i,"click",e=>{this._openerService.open(s.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()}));const r=d["q"](i,oe("span"));r.innerText=s.value;const a=d["q"](n,e);a.style.opacity="0.6",a.style.paddingLeft="6px"}else{const e=d["q"](n,oe("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=o&&s?`${o}(${s})`:o||`(${s})`}if(Object(g["n"])(a))for(const{message:c,resource:h,startLineNumber:u,startColumn:g}of a){const e=d["q"](n,oe("div"));e.style.marginTop="8px";const i=d["q"](e,oe("a"));i.innerText=`${Object($["b"])(h)}(${u}, ${g}): `,i.style.cursor="pointer",t.add(d["i"](i,"click",e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(h,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:u,startColumn:g}}}).catch(I["f"])}));const o=d["q"](e,oe("span"));o.innerText=c,this._editor.applyFontInfo(o)}return i}renderMarkerStatusbar(e,t,i){if(e.marker.severity!==Y["c"].Error&&e.marker.severity!==Y["c"].Warning&&e.marker.severity!==Y["c"].Info||t.addAction({label:z["localize"]("vs/editor/contrib/hover/markerHoverParticipant","view problem","View Problem"),commandId:X["NextMarkerAction"].ID,run:()=>{this._hover.hide(),X["MarkerController"].get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const n=t.append(oe("div"));this.recentMarkerCodeActionsInfo&&(Y["a"].makeKey(this.recentMarkerCodeActionsInfo.marker)===Y["a"].makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=z["localize"]("vs/editor/contrib/hover/markerHoverParticipant","noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const r=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?o["a"].None:i.add(Object(D["i"])(()=>n.textContent=z["localize"]("vs/editor/contrib/hover/markerHoverParticipant","checkingForQuickFixes","Checking for quick fixes..."),200));n.textContent||(n.textContent=String.fromCharCode(160));const s=this.getCodeActions(e.marker);i.add(Object(o["i"])(()=>s.cancel())),s.then(s=>{if(r.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:s.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return s.dispose(),void(n.textContent=z["localize"]("vs/editor/contrib/hover/markerHoverParticipant","noQuickFixes","No quick fixes available"));n.style.display="none";let a=!1;i.add(Object(o["i"])(()=>{a||s.dispose()})),t.addAction({label:z["localize"]("vs/editor/contrib/hover/markerHoverParticipant","quick fixes","Quick Fix..."),commandId:J["e"].Id,run:e=>{a=!0;const t=J["f"].get(this._editor),i=d["D"](e);this._hover.hide(),t.showCodeActions(se,s,{x:i.left+6,y:i.top+i.height+6})}})},I["f"])}}getCodeActions(e){return Object(D["h"])(t=>Object(Z["d"])(this._editor.getModel(),new s["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),se,ee["b"].None,t))}};ae=ie([ne(2,G["a"]),ne(3,F["a"])],ae),Object(S["f"])((e,t)=>{const i=e.getColor(te["Pc"]);i&&t.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${i}; }`);const n=e.getColor(te["Oc"]);n&&t.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});var le=i("40da"),ce=i("0af7"),de=i("cd62"),he=i("d5b7"),ue=i("6ad4"),ge=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},pe=function(e,t){return function(i,n){t(i,n,e)}};class me{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let fe=class{constructor(e,t,i,n,o,r,s,a){this._editor=e,this._hover=t,this._commandService=i,this._menuService=n,this._contextKeyService=o,this._modeService=r,this._openerService=s,this.accessibilityService=a}suggestHoverAnchor(e){const t=le["GhostTextController"].get(this._editor);if(!t)return null;if(8===e.target.type){const i=e.target.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new P(1e3,this,s["a"].fromPositions(i.positionBefore||i.position,i.positionBefore||i.position))}if(7===e.target.type&&e.target.range&&t.shouldShowHoverAt(e.target.range))return new P(1e3,this,e.target.range);if(6===e.target.type&&e.target.range&&e.target.detail){const i=e.target.detail.mightBeForeignElement;if(i&&t.shouldShowHoverAt(e.target.range))return new P(1e3,this,e.target.range)}return null}computeSync(e,t){const i=le["GhostTextController"].get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new me(this,e.range,i)]:[]}renderHoverParts(e,t,i){const n=new o["b"],r=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(r,t,n);const s=n.add(this._menuService.createMenu(de["b"].InlineCompletionsActions,this._contextKeyService)),a=i.addAction({label:z["localize"]("vs/editor/contrib/inlineCompletions/inlineCompletionsHoverParticipant","showNextInlineSuggestion","Next"),commandId:le["ShowNextInlineSuggestionAction"].ID,run:()=>this._commandService.executeCommand(le["ShowNextInlineSuggestionAction"].ID)}),l=i.addAction({label:z["localize"]("vs/editor/contrib/inlineCompletions/inlineCompletionsHoverParticipant","showPreviousInlineSuggestion","Previous"),commandId:le["ShowPreviousInlineSuggestionAction"].ID,run:()=>this._commandService.executeCommand(le["ShowPreviousInlineSuggestionAction"].ID)});i.addAction({label:z["localize"]("vs/editor/contrib/inlineCompletions/inlineCompletionsHoverParticipant","acceptInlineSuggestion","Accept"),commandId:le["commitInlineSuggestionAction"].id,run:()=>this._commandService.executeCommand(le["commitInlineSuggestionAction"].id)});const c=[a,l];for(const o of c)o.setEnabled(!1);r.hasMultipleSuggestions().then(e=>{for(const t of c)t.setEnabled(e)});for(const[o,d]of s.getActions())for(const e of d)e instanceof de["c"]&&i.addAction({label:e.label,commandId:e.item.id,run:()=>this._commandService.executeCommand(e.item.id)});return n}renderScreenReaderText(e,t,i){var n,o;const r=d["a"],s=r("div.hover-row.markdown-hover"),a=d["q"](s,r("div.hover-contents")),l=i.add(new T["a"]({editor:this._editor},this._modeService,this._openerService)),c=e=>{i.add(l.onDidRenderAsync(()=>{a.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const t=z["localize"]("vs/editor/contrib/inlineCompletions/inlineCompletionsHoverParticipant","inlineSuggestionFollows","Suggestion:"),n=i.add(l.render((new E["a"]).appendText(t).appendCodeblock("text",e)));a.replaceChildren(n.element)},h=null===(o=null===(n=e.controller.activeModel)||void 0===n?void 0:n.inlineCompletionsModel)||void 0===o?void 0:o.ghostText;if(h){const e=this._editor.getModel().getLineContent(h.lineNumber);c(h.renderForScreenReader(e))}t.appendChild(s)}};fe=ge([pe(2,he["b"]),pe(3,de["a"]),pe(4,ue["b"]),pe(5,l["a"]),pe(6,F["a"]),pe(7,ce["b"])],fe);var be=i("bf32"),ve=i("5365"),_e=i("042f"),Ce=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},we=function(e,t){return function(i,n){t(i,n,e)}},ye=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const Se=d["a"];let Le=class extends o["a"]{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=Se("div.hover-row.status-bar"),this.actionsElement=d["q"](this.hoverElement,Se("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(h["a"].render(this.actionsElement,e,i))}append(e){const t=d["q"](this.actionsElement,e);return this._hasContent=!0,t}};Le=Ce([we(0,ve["a"])],Le);class Oe{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(1!==t.type)return[];const i=e.getModel(),n=t.range.startLineNumber,o=i.getLineMaxColumn(n);return e.getLineDecorations(n).filter(e=>{if(e.options.isWholeLine)return!0;const i=e.range.startLineNumber===n?e.range.startColumn:1,r=e.range.endLineNumber===n?e.range.endColumn:o;return!(i>t.range.startColumn||t.range.endColumn>r)})}computeAsync(e){return ye(this,void 0,void 0,(function*(){const t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);const i=Oe._getLineDecorations(this._editor,t),n=yield Promise.all(this._participants.map(n=>this._computeAsync(n,i,t,e)));return Object(g["k"])(n)}))}_computeAsync(e,t,i,n){return ye(this,void 0,void 0,(function*(){return e.computeAsync?e.computeAsync(i,t,n):[]}))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=Oe._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return Object(g["e"])(t)}onResult(e,t){this._result=t?e.concat(this._result):this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor)for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}return this._result.slice(0)}}let xe=class e extends u["a"]{constructor(e,t,i,n,o){super(),this._hoverVisibleKey=t,this._keybindingService=n,this._contextKeyService=o,this.allowEditorOverflow=!0,this._participants=[i.createInstance(M,e,this),i.createInstance(q,e,this),i.createInstance(fe,e,this),i.createInstance(ae,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new h["b"]),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,e=>{e.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new Oe(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new N(this._computer,e=>this._withResult(e,!0),null,e=>this._withResult(e,!1),this._editor.getOption(52).delay),this._register(d["o"](this.getDomNode(),d["d"].FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(d["o"](this.getDomNode(),d["d"].BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(f["F"].onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return e.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(6===t)return!0;if(7===t){const t=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,i=e.target.detail;if(i&&!i.isAfterLines&&"number"===typeof i.horizontalDistanceToText&&i.horizontalDistanceToText<t)return!0}return!1}maybeShowAt(e){var t;const i=[];for(const n of this._participants)if("function"===typeof n.suggestHoverAnchor){const t=n.suggestHoverAnchor(e);t&&i.push(t)}if(this._shouldShowAt(e)&&e.target.range){const n=[...(null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]].find(e=>e.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1,o=n?new s["a"](e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;i.push(new R(0,o))}return 0!==i.length&&(i.sort((e,t)=>t.priority-e.priority),this._startShowingAt(i[0],0,!1),!0)}_showAt(e,t,i){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=i,i&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(_e["b"].Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){const e=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));e.forEach(e=>this._editor.applyFontInfo(e))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:i}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=t+"px",this._hover.contentsDomNode.style.lineHeight=""+i/t,this._hover.contentsDomNode.style.maxHeight=e+"px",this._hover.contentsDomNode.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px"}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,i){this._startShowingAt(new R(0,e),t,i)}_startShowingAt(e,t,i){if(!this._lastAnchor||!this._lastAnchor.equals(e)){if(this._hoverOperation.cancel(),this._isVisible)if(this._showAtPosition&&this._lastAnchor&&e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition)){const t=this._messages.filter(t=>t.isValidForHoverAnchor(e));if(0===t.length)this.hide();else{if(t.length===this._messages.length)return;this._renderMessages(e,t)}}else this.hide();this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=i,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(t,i){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,r=i[0].range,a=null,l=document.createDocumentFragment();const c=new o["b"],d=new Map;for(const e of i){n=Math.min(n,e.range.startColumn),r=s["a"].plusRange(r,e.range),e.forceShowAtRange&&(a=e.range),d.has(e.owner)||d.set(e.owner,[]);const t=d.get(e.owner);t.push(e)}const h=c.add(new Le(this._keybindingService));for(const[e,o]of d)c.add(e.renderHoverParts(o,l,h));h.hasContent&&l.appendChild(h.hoverElement),this._renderDisposable=c,l.hasChildNodes()&&(a?this._showAt(a.getStartPosition(),a,this._shouldFocus):this._showAt(new p["a"](t.range.startLineNumber,n),r,this._shouldFocus),this._updateContents(l)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,r?[{range:r,options:e._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};xe.ID="editor.contrib.modesContentHoverWidget",xe._DECORATION_OPTIONS=m["b"].register({description:"content-hover-highlight",className:"hoverHighlight"}),xe=Ce([we(2,be["a"]),we(3,ve["a"]),we(4,ue["b"])],xe);const ke=d["a"];class Me{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=e=>({value:e}),t=this._editor.getLineDecorations(this._lineNumber),i=[];if(!t)return i;for(const n of t){if(!n.options.glyphMarginClassName)continue;const t=n.options.glyphMarginHoverMessage;t&&!Object(E["b"])(t)&&i.push(...Object(g["c"])(t).map(e))}return i}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class De extends u["a"]{constructor(e,t,i=F["b"]){super(),this._renderDisposeables=this._register(new o["b"]),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new h["b"]),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new T["a"]({editor:this._editor},t,i)),this._computer=new Me(this._editor),this._hoverOperation=new N(this._computer,e=>this._withResult(e),void 0,e=>this._withResult(e),300),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return De.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),n=this._editor.getScrollTop(),o=this._editor.getOption(58),r=this._hover.containerDomNode.clientHeight,s=i-n-(r-o)/2;this._hover.containerDomNode.style.left=t.glyphMarginLeft+t.glyphMarginWidth+"px",this._hover.containerDomNode.style.top=Math.max(Math.round(s),0)+"px"}_updateFont(){const e=Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code"));e.forEach(e=>this._editor.applyFontInfo(e))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const n of t){const e=ke("div.hover-row.markdown-hover"),t=d["q"](e,ke("div.hover-contents")),o=this._renderDisposeables.add(this._markdownRenderer.render(n.value));t.appendChild(o.element),i.appendChild(e)}this._updateContents(i),this._showAt(e)}}De.ID="editor.contrib.modesGlyphHoverWidget";var Ie=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ne=function(e,t){return function(i,n){t(i,n,e)}};let Re=class e{constructor(e,t,i,n,r){this._editor=e,this._instantiationService=t,this._openerService=i,this._modeService=n,this._toUnhook=new o["b"],this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(e=>{e.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=a["a"].hoverVisible.bindTo(r)}static get(t){return t.getContribution(e.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._toUnhook.add(this._editor.onMouseUp(e=>this._onEditorMouseUp(e))),this._toUnhook.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._toUnhook.add(this._editor.onKeyDown(e=>this._onKeyDown(e))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(e=>this._onEditorMouseMove(e))),this._toUnhook.add(this._editor.onKeyDown(e=>this._onKeyDown(e)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(e=>this._onEditorScrollChanged(e)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;null===(e=this._contentWidget)||void 0===e||e.onModelDecorationsChanged(),null===(t=this._glyphWidget)||void 0===t||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;9!==t||e.target.detail!==xe.ID?12===t&&e.target.detail===De.ID||(12!==t&&e.target.detail!==De.ID&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,i,n,o,r;let s=e.target.type;if(this._isMouseDown&&this._hoverClicked)return;if(this._isHoverSticky&&9===s&&e.target.detail===xe.ID)return;if(this._isHoverSticky&&!(null===(i=null===(t=e.event.browserEvent.view)||void 0===t?void 0:t.getSelection())||void 0===i?void 0:i.isCollapsed))return;if(!this._isHoverSticky&&9===s&&e.target.detail===xe.ID&&(null===(n=this._contentWidget)||void 0===n?void 0:n.isColorPickerVisible()))return;if(this._isHoverSticky&&12===s&&e.target.detail===De.ID)return;if(!this._isHoverEnabled)return void this._hideWidgets();const a=this._getOrCreateContentWidget();if(!a.maybeShowAt(e))return 2===s&&e.target.position?(null===(r=this._contentWidget)||void 0===r||r.hide(),this._glyphWidget||(this._glyphWidget=new De(this._editor,this._modeService,this._openerService)),void this._glyphWidget.startShowingAt(e.target.position.lineNumber)):void this._hideWidgets();null===(o=this._glyphWidget)||void 0===o||o.hide()}_onKeyDown(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}_hideWidgets(){var e,t,i;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(i=this._contentWidget)||void 0===i||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(xe,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,i){this._getOrCreateContentWidget().startShowingAtRange(e,t,i)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}};Re.ID="editor.contrib.hover",Re=Ie([Ne(1,be["a"]),Ne(2,F["a"]),Ne(3,l["a"]),Ne(4,ue["b"])],Re);class Pe extends r["b"]{constructor(){super({id:"editor.action.showHover",label:z["localize"]("vs/editor/contrib/hover/hover",{key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:a["a"].editorTextFocus,primary:Object(n["c"])(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let i=Re.get(t);if(!i)return;const n=t.getPosition(),o=new s["a"](n.lineNumber,n.column,n.lineNumber,n.column),r=2===t.getOption(2);i.showContentHover(o,1,r)}}class Ee extends r["b"]{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:z["localize"]("vs/editor/contrib/hover/hover",{key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let i=Re.get(t);if(!i)return;const n=t.getPosition();if(!n)return;const o=new s["a"](n.lineNumber,n.column,n.lineNumber,n.column),r=c["GotoDefinitionAtPositionEditorContribution"].get(t),a=r.startFindDefinitionFromCursor(n);a.then(()=>{i.showContentHover(o,1,!0)})}}Object(r["l"])(Re.ID,Re),Object(r["j"])(Pe),Object(r["j"])(Ee),Object(S["f"])((e,t)=>{const i=e.getColor(te["H"]);i&&t.addRule(`.monaco-editor .hoverHighlight { background-color: ${i}; }`);const n=e.getColor(te["E"]);n&&t.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const o=e.getColor(te["F"]);o&&(t.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${o}; }`),t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${o.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${o.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${o.transparent(.5)}; }`));const r=e.getColor(te["Pc"]);r&&t.addRule(`.monaco-editor .monaco-hover a { color: ${r}; }`);const s=e.getColor(te["Oc"]);s&&t.addRule(`.monaco-editor .monaco-hover a:hover { color: ${s}; }`);const a=e.getColor(te["G"]);a&&t.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=e.getColor(te["I"]);l&&t.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const c=e.getColor(te["Nc"]);c&&t.addRule(`.monaco-editor .monaco-hover code { background-color: ${c}; }`)})},"40da":function(e,t,i){"use strict";i.r(t),i.d(t,"GhostTextController",(function(){return ze})),i.d(t,"ActiveGhostTextController",(function(){return Fe})),i.d(t,"commitInlineSuggestionAction",(function(){return Ve})),i.d(t,"ShowNextInlineSuggestionAction",(function(){return He})),i.d(t,"ShowPreviousInlineSuggestionAction",(function(){return Ke})),i.d(t,"TriggerInlineSuggestionAction",(function(){return Be}));var n=i("92db"),o=i("1537"),r=i("ae58"),s=i("51cd"),a=i("7c05");const l="editor.action.inlineSuggest.commit";var c=i("f295"),d=i("e0ab"),h=i("d778"),u=i("4b4a"),g=i("4163"),p=i("f123"),m=i("09c9"),f=i("ae41"),b=i("d8b0");class v{constructor(e,t,i=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=i}renderForScreenReader(e){if(0===this.parts.length)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1),n=C(i,this.parts.map(e=>({range:{startLineNumber:1,endLineNumber:1,startColumn:e.column,endColumn:e.column},text:e.lines.join("\n")})));return n.substring(this.parts[0].column-1)}}class _{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)"\n"===e.charAt(t)&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function C(e,t){const i=new _(e),n=t.map(e=>{const t=b["a"].lift(e.range);return{startOffset:i.getOffset(t.getStartPosition()),endOffset:i.getOffset(t.getEndPosition()),text:e.text}});n.sort((e,t)=>t.startOffset-e.startOffset);for(const o of n)e=e.substring(0,o.startOffset)+o.text+e.substring(o.endOffset);return e}class w{constructor(e,t,i){this.column=e,this.lines=t,this.preview=i}}class y extends n["a"]{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new c["b"],this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(e=>{e.hasChanged(105)&&void 0===this._expanded&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}var S=i("d5b7"),L=i("ea26");function O(e,t){return e===t||!(!e||!t)&&(e.range.equalsRange(t.range)&&e.text===t.text&&e.command===t.command)}function x(e,t,i,n,r=0){if(e.range.startLineNumber!==e.range.endLineNumber)return;const s=t.getLineContent(e.range.startLineNumber),a=o["x"](s).length,l=e.range.startColumn-1<=a;if(l){const t=o["x"](e.text).length,i=s.substring(e.range.startColumn-1,a),n=b["a"].fromPositions(e.range.getStartPosition().delta(0,i.length),e.range.getEndPosition()),r=e.text.startsWith(i)?e.text.substring(i.length):e.text.substring(t);e={range:n,text:r,command:e.command}}const c=t.getValueInRange(e.range),d=M(c,e.text);if(!d)return;const h=e.range.startLineNumber,u=new Array;if("prefix"===i){const e=d.filter(e=>0===e.originalLength);if(e.length>1||1===e.length&&e[0].originalStart!==c.length)return}const g=e.text.length-r;for(const p of d){const t=e.range.startColumn+p.originalStart+p.originalLength;if("subwordSmart"===i&&n&&n.lineNumber===e.range.startLineNumber&&t<n.column)return;if(p.originalLength>0)return;if(0===p.modifiedLength)continue;const r=p.modifiedStart+p.modifiedLength,s=Math.max(p.modifiedStart,Math.min(r,g)),a=e.text.substring(p.modifiedStart,s),l=e.text.substring(s,Math.max(p.modifiedStart,r));if(a.length>0){const e=o["Q"](a);u.push(new w(t,e,!1))}if(l.length>0){const e=o["Q"](l);u.push(new w(t,e,!0))}}return new v(h,u,0)}let k=void 0;function M(e,t){if((null===k||void 0===k?void 0:k.originalValue)===e&&(null===k||void 0===k?void 0:k.newValue)===t)return null===k||void 0===k?void 0:k.changes;{const i=D(e,t);return k={originalValue:e,newValue:t,changes:i},i}}function D(e,t){if(e.length>5e3||t.length>5e3)return;function i(e){let t=0;for(let i=0,n=e.length;i<n;i++){const n=e.charCodeAt(i);n>t&&(t=n)}return t}const n=Math.max(i(e),i(t));function o(e){if(e<0)throw new Error("unexpected");return n+e+1}function r(e){let t=0,i=0;const n=new Int32Array(e.length);for(let r=0,s=e.length;r<s;r++){const s=100*i+t;"("===e[r]?(n[r]=o(2*s),t++):")"===e[r]?(n[r]=o(2*s+1),1===t&&i++,t=Math.max(t-1,0)):n[r]=e.charCodeAt(r)}return n}const s=r(e),a=r(t);return new L["a"]({getElements:()=>s},{getElements:()=>a}).ComputeDiff(!1).changes}var I=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},N=function(e,t){return function(i,n){t(i,n,e)}},R=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let P=class extends n["a"]{constructor(e,t,i){super(),this.editor=e,this.cache=t,this.commandService=i,this.onDidChangeEmitter=new c["b"],this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new n["d"]),this.active=!1,this.disposed=!1,this._register(i.onDidExecuteCommand(t=>{const i=new Set([r["i"].id,r["g"].id,m["CoreEditingCommands"].Tab.id,m["CoreEditingCommands"].DeleteLeft.id,m["CoreEditingCommands"].DeleteRight.id,l,"acceptSelectedSuggestion"]);i.has(t.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(e=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(e=>{this.session&&!this.session.isValid&&this.hide()})),this._register(Object(n["i"])(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return null===(e=this.session)||void 0===e?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;null===(t=this.session)||void 0===t||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&(null===(t=this.session)||void 0===t||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){const e=this.editor.getOption(54);e.enabled&&(this.session&&this.session.isValid||this.trigger(h["t"].Automatic))}trigger(e){this.completionSession.value?e===h["t"].Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext():(this.completionSession.value=new E(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()})))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;null===(e=this.session)||void 0===e||e.commitCurrentCompletion()}showNext(){var e;null===(e=this.session)||void 0===e||e.showNextInlineCompletion()}showPrevious(){var e;null===(e=this.session)||void 0===e||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return R(this,void 0,void 0,(function*(){const t=yield null===(e=this.session)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==t&&t}))}};P=I([N(2,S["b"])],P);class E extends y{constructor(e,t,i,o,r,s){super(e),this.triggerPosition=t,this.shouldUpdate=i,this.commandService=o,this.cache=r,this.initialTriggerKind=s,this.minReservedLineCount=0,this.updateOperation=this._register(new n["d"]),this.updateSoon=this._register(new u["e"](()=>{let e=this.initialTriggerKind;return this.initialTriggerKind=h["t"].Automatic,this.update(e)},50)),this.currentlySelectedCompletionId=void 0;let a=void 0;this._register(this.onDidChange(()=>{const e=this.currentCompletion;if(e&&e.sourceInlineCompletion!==a){a=e.sourceInlineCompletion;const t=e.sourceProvider;t.handleItemDidShow&&t.handleItemDidShow(e.sourceInlineCompletions,a)}})),this._register(Object(n["i"])(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(e=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(e=>{this.scheduleAutomaticUpdate()})),this._register(h["u"].onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value)return 0;if(0===this.cache.value.completions.length)return 0;const e=this.cache.value.completions.findIndex(e=>e.semanticId===this.currentlySelectedCompletionId);return-1===e?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return R(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const t=(null===(e=this.cache.value)||void 0===e?void 0:e.completions)||[];if(t.length>0){const e=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[e].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}showPreviousInlineCompletion(){var e;return R(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const t=(null===(e=this.cache.value)||void 0===e?void 0:e.completions)||[];if(t.length>0){const e=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[e].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}ensureUpdateWithExplicitContext(){var e;return R(this,void 0,void 0,(function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===h["t"].Explicit?yield this.updateOperation.value.promise:yield this.update(h["t"].Explicit):(null===(e=this.cache.value)||void 0===e?void 0:e.triggerKind)!==h["t"].Explicit&&(yield this.update(h["t"].Explicit))}))}hasMultipleInlineCompletions(){var e;return R(this,void 0,void 0,(function*(){return yield this.ensureUpdateWithExplicitContext(),((null===(e=this.cache.value)||void 0===e?void 0:e.completions.length)||0)>1}))}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?x(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return R(this,void 0,void 0,(function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),i=Object(u["h"])(i=>R(this,void 0,void 0,(function*(){let n;try{n=yield W(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},i)}catch(o){return void Object(p["f"])(o)}i.isCancellationRequested||(this.cache.setValue(this.editor,n,e),this.onDidChangeEmitter.fire())}))),n=new T(i,e);this.updateOperation.value=n,yield i,this.updateOperation.value===n&&this.updateOperation.clear()}))}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[f["a"].replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{null===t||void 0===t||t.dispose()}).then(void 0,p["g"]):null===t||void 0===t||t.dispose(),this.onDidChangeEmitter.fire()}}class T{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class A extends n["a"]{constructor(e,t,i,o){super(),this.triggerKind=o;const r=e.deltaDecorations([],t.items.map(e=>({range:e.range,options:{description:"inline-completion-tracking-range"}})));this._register(Object(n["i"])(()=>{e.deltaDecorations(r,[])})),this.completions=t.items.map((e,t)=>new j(e,r[t])),this._register(e.onDidChangeModelContent(()=>{let t=!1;const n=e.getModel();for(const e of this.completions){const i=n.getDecorationRange(e.decorationId);i?e.synchronizedRange.equalsRange(i)||(t=!0,e.synchronizedRange=i):Object(p["f"])(new Error("Decoration has no range"))}t&&i()})),this._register(t)}}class j{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function z(e,t){const i=t.getWordAtPosition(e),n=t.getLineMaxColumn(e.lineNumber);return i?new b["a"](e.lineNumber,i.startColumn,e.lineNumber,n):b["a"].fromPositions(e,e.with(void 0,n))}function W(e,t,i,n=g["a"].None){return R(this,void 0,void 0,(function*(){const o=z(e,t),r=h["u"].all(t),s=yield Promise.all(r.map(o=>R(this,void 0,void 0,(function*(){const r=yield o.provideInlineCompletions(t,e,i,n);return{completions:r,provider:o,dispose:()=>{r&&o.freeInlineCompletions(r)}}})))),a=new Map;for(const e of s){const t=e.completions;if(t)for(const i of t.items.map(i=>({text:i.text,range:i.range?b["a"].lift(i.range):o,command:i.command,sourceProvider:e.provider,sourceInlineCompletions:t,sourceInlineCompletion:i})))i.range.startLineNumber===i.range.endLineNumber&&a.set(JSON.stringify({text:i.text,range:i.range}),i)}return{items:[...a.values()],dispose:()=>{for(const e of s)e.dispose()}}}))}function F(e,t){if(!t)return t;const i=e.getValueInRange(t.range),n=Object(o["d"])(i,t.text),r=e.getOffsetAt(t.range.getStartPosition())+n,s=e.getPositionAt(r),a=i.substr(n),l=Object(o["e"])(a,t.text),c=e.getPositionAt(Math.max(r,e.getOffsetAt(t.range.getEndPosition())-l));return{range:b["a"].fromPositions(s,c),text:t.text.substr(n,t.text.length-n-l)}}var U=i("1447"),V=i("ad22"),H=i("defa");function K(e,t){return{object:e,dispose:()=>null===t||void 0===t?void 0:t.dispose()}}function B(e,t){return(i,n)=>t(e(i),e(n))}function q(){return(e,t)=>e-t}function $(e,t){let i=void 0;for(const n of e)(void 0===i||t(n,i)>0)&&(i=n);return i}class G extends n["a"]{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentInlineCompletion=void 0,this.onDidChangeEmitter=new c["b"],this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new u["e"](()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const i=H["SuggestController"].get(this.editor);if(i){this._register(i.registerSelector({priority:100,select:(e,t,n)=>{const o=this.editor.getModel(),r=F(o,this.suggestControllerPreselector());if(!r)return-1;const s=d["a"].lift(t),a=n.map((e,t)=>{const n=J(i,s,e,this.isShiftKeyPressed),a=F(o,n);if(!a)return;const l=Z(r.range,a.range)&&r.text.startsWith(a.text);return{index:t,valid:l,prefixLength:a.text.length,suggestItem:e}}).filter(e=>e&&e.valid),l=$(a,B(e=>e.prefixLength,q()));return l?l.index:-1}}));let e=!1;const t=()=>{e||(e=!0,this._register(i.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(i.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(i.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(c["c"].once(i.model.onDidTrigger)(e=>{t()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItemAsInlineCompletion:this._currentInlineCompletion}}update(e){const t=this.getInlineCompletion();let i=!1;O(this._currentInlineCompletion,t)||(this._currentInlineCompletion=t,i=!0),this._isActive!==e&&(this._isActive=e,i=!0),i&&this.onDidChangeEmitter.fire()}getInlineCompletion(){const e=H["SuggestController"].get(this.editor);if(!e)return;if(!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();return t?J(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed):void 0}stopForceRenderingAbove(){const e=H["SuggestController"].get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=H["SuggestController"].get(this.editor);e&&e.forceRenderingAbove()}}function Z(e,t){return e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&(e.endLineNumber<t.endLineNumber||e.endLineNumber===t.endLineNumber&&e.endColumn<=t.endColumn)}function J(e,t,i,n){if(Array.isArray(i.completion.additionalTextEdits)&&i.completion.additionalTextEdits.length>0)return{text:"",range:b["a"].fromPositions(t,t)};let{insertText:o}=i.completion;if(4&i.completion.insertTextRules){const i=(new U["c"]).parse(o),n=e.editor.getModel();if(i.children.length>100)return;V["a"].adjustWhitespace(n,t,i,!0,!0),o=i.toString()}const r=e.getOverwriteInfo(i,n);return{text:o,range:b["a"].fromPositions(t.delta(0,-r.overwriteBefore),t.delta(0,Math.max(r.overwriteAfter,0)))}}var Q=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class X extends y{constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new G(this.editor,()=>{var e,t;return null===(t=null===(e=this.cache.value)||void 0===e?void 0:e.completions[0])||void 0===t?void 0:t.toLiveInlineCompletion()})),this.updateOperation=this._register(new n["d"]),this.updateCacheSoon=this._register(new u["e"](()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule();const e=this.suggestionInlineCompletionSource.state;e||(this.minReservedLineCount=0);const t=this.ghostText;t&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,Y(t.parts.map(e=>e.lines.length-1)))),this.minReservedLineCount>=1&&this.isSuggestionPreviewEnabled()?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(e=>{this.isSuggestionPreviewEnabled()&&(this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire())})),this._register(Object(n["i"])(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return void 0!==this.suggestionInlineCompletionSource.state}isSuggestionPreviewEnabled(){const e=this.editor.getOption(105);return e.preview}updateCache(){return Q(this,void 0,void 0,(function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItemAsInlineCompletion)return;const t={text:e.selectedItemAsInlineCompletion.text,range:e.selectedItemAsInlineCompletion.range},i=this.editor.getPosition(),n=Object(u["h"])(e=>Q(this,void 0,void 0,(function*(){let n;try{n=yield W(i,this.editor.getModel(),{triggerKind:h["t"].Automatic,selectedSuggestionInfo:t},e)}catch(o){return void Object(p["f"])(o)}e.isCancellationRequested||(this.cache.setValue(this.editor,n,h["t"].Automatic),this.onDidChangeEmitter.fire())}))),o=new T(n,h["t"].Automatic);this.updateOperation.value=o,yield n,this.updateOperation.value===o&&this.updateOperation.clear()}))}get ghostText(){var e,t;if(!this.isSuggestionPreviewEnabled())return;const i=this.suggestionInlineCompletionSource.state,n=F(this.editor.getModel(),null===i||void 0===i?void 0:i.selectedItemAsInlineCompletion),o=F(this.editor.getModel(),null===(t=null===(e=this.cache.value)||void 0===e?void 0:e.completions[0])||void 0===t?void 0:t.toLiveInlineCompletion()),r=o&&n&&o.text.startsWith(n.text)&&o.range.equalsRange(n.range)?o:n||o,s=n?((null===r||void 0===r?void 0:r.text.length)||0)-n.text.length:0,a=e=>{const t=this.editor.getOptions().get(105).previewMode;return e?x(e,this.editor.getModel(),t,this.editor.getPosition(),s)||new v(e.range.endLineNumber,[],this.minReservedLineCount):void 0},l=a(r);return l}}function Y(e){return e.reduce((e,t)=>e+t,0)}var ee=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},te=function(e,t){return function(i,n){t(i,n,e)}},ie=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class ne extends n["a"]{constructor(){super(...arguments),this.onDidChangeEmitter=new c["b"],this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new n["d"])}get targetModel(){var e;return null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object}setTargetModel(e){var t;(null===(t=this.currentModelRef.value)||void 0===t?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?K(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=null===(t=null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object)||void 0===t?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;null===(t=this.targetModel)||void 0===t||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let oe=class extends ne{constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new re),this.suggestWidgetAdapterModel=this._register(new X(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new P(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const i=null===(t=this.activeInlineCompletionsModel)||void 0===t?void 0:t.ghostText;return!!i&&i.parts.some(t=>e.containsPosition(new d["a"](i.lineNumber,t.column)))}triggerInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.trigger(h["t"].Explicit)}commitInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.hide()}showNextInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showNext()}showPreviousInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showPrevious()}hasMultipleInlineCompletions(){var e;return ie(this,void 0,void 0,(function*(){const t=yield null===(e=this.activeInlineCompletionsModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==t&&t}))}};oe=ee([te(1,S["b"])],oe);class re extends n["a"]{constructor(){super(...arguments),this.onDidChangeEmitter=new c["b"],this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new n["d"])}get value(){return this.cache.value}setValue(e,t,i){this.cache.value=new A(e,t,()=>this.onDidChangeEmitter.fire(),i)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var se,ae=i("d208"),le=i("98ef"),ce=(i("71bf"),i("a3d3")),de=i("47f8"),he=i("7be4"),ue=i("966d"),ge=i("b521"),pe=i("0535"),me=i("12fe"),fe=i("59e4"),be=i("7a2d"),ve=i("e2ac"),_e=i("6ad4"),Ce=i("bf32"),we=i("d1e2"),ye=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Se=function(e,t){return function(i,n){t(i,n,e)}};const Le=null===(se=window.trustedTypes)||void 0===se?void 0:se.createPolicy("editorGhostText",{createHTML:e=>e});let Oe=class extends n["a"]{constructor(e,t,i,o){super(),this.editor=e,this.model=t,this.instantiationService=i,this.modeService=o,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(xe,this.editor)),this.additionalLinesWidget=this._register(new Me(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(e=>{(e.hasChanged(29)||e.hasChanged(104)||e.hasChanged(87)||e.hasChanged(82)||e.hasChanged(44)||e.hasChanged(43)||e.hasChanged(58))&&this.update()})),this._register(Object(n["i"])(()=>{var e;this.disposed=!0,this.update(),null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed)return this.partsWidget.clear(),void this.additionalLinesWidget.clear();const i=new Array,n=new Array;function o(e,t){if(n.length>0){const i=n[n.length-1];t&&i.decorations.push(new be["a"](i.content.length+1,i.content.length+1+e[0].length,t,0)),i.content+=e[0],e=e.slice(1)}for(const i of e)n.push({content:i,decorations:t?[new be["a"](1,i.length+1,t,0)]:[]})}const r=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let s=void 0,a=0;for(const l of t.parts){let e=l.lines;void 0===s?(i.push({column:l.column,text:e[0],preview:l.preview}),e=e.slice(1)):o([r.substring(a,l.column-1)],void 0),e.length>0&&(o(e,"ghost-text"),void 0===s&&l.column<=r.length&&(s=l.column)),a=l.column-1}void 0!==s&&o([r.substring(a)],void 0),this.partsWidget.setParts(t.lineNumber,i,void 0!==s?{column:s,length:r.length+1-s}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,n,t.additionalReservedLineCount),t.parts.some(e=>e.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new d["a"](t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):(null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,i){const o=this.editor.getOption(43),r=document.createElement("div");r.className="suggest-preview-additional-widget",ce["a"].applyFontInfoSlow(r,o);const s=document.createElement("span");s.className="content-spacer",s.append(t),r.append(s);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("⏎  "),r.append(a);const l=new n["b"],c=document.createElement("div");return c.className="button suggest-preview-text",c.append(`+${i} lines…`),l.add(ae["o"](c,"mousedown",e=>{var t;null===(t=this.model)||void 0===t||t.setExpanded(!0),e.preventDefault(),this.editor.focus()})),r.append(c),new Re(this.editor,e,r,l)}};Oe=ye([Se(2,Ce["a"]),Se(3,me["a"])],Oe);let xe=class{constructor(e,t,i,o){this.editor=e,this.codeEditorService=t,this.themeService=i,this.contextKeyService=o,this.decorationIds=[],this.disposableStore=new n["b"]}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,i){this.disposableStore.clear();const n=this.themeService.getColorTheme(),o=n.getColor(fe["K"]);let r=void 0,s=void 0;o&&(r=String(o.rgba.a),s=le["a"].Format.CSS.format(ke(o)));const a=n.getColor(fe["J"]);let l=void 0;a&&(l="2px dashed "+a);const c=this.editor.getModel();if(!c)return;const{tabSize:h}=c.getOptions(),u=c.getLineContent(e)||"";let g=0,p="";const m=new Array;i&&m.push({range:b["a"].fromPositions(new d["a"](e,i.column),new d["a"](e,i.column+i.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});const f=this.contextKeyService.getContextKeyValue("config.editor.useInjectedText"),v=void 0===f||!!f;this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(t=>{p+=u.substring(g,t.column-1),g=t.column-1;const i=v?t.text:this.renderSingleLineText(t.text,p,h,!1),n=this.disposableStore.add(Ne(this.codeEditorService,"ghost-text","0-ghost-text-",{after:{contentText:i,opacity:r,color:s,border:l,fontWeight:t.preview?"bold":"normal"}}));return{range:b["a"].fromPositions(new d["a"](e,t.column)),options:v?{description:"ghost-text",after:{content:i,inlineClassName:t.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}:Object.assign({},n.resolve())}}).concat(m))}renderSingleLineText(e,t,i,n){const o=t+e,r=ue["a"].visibleColumnsByColumns(o,i);let s="",a=t.length+1;for(const l of e){if("\t"===l){const e=r[a+1]-r[a];if(n){s+="→";for(let t=1;t<e;t++)s+=" "}else for(let t=0;t<e;t++)s+=" "}else s+=" "===l?n?"·":" ":l;a+=1}return s}};function ke(e){const{r:t,b:i,g:n}=e.rgba;return new le["a"](new le["c"](t,n,i,255))}xe=ye([Se(1,de["a"]),Se(2,we["b"]),Se(3,_e["b"])],xe);class Me{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){const n=this.editor.getModel();if(!n)return;const{tabSize:o}=n.getOptions();this.editor.changeViewZones(n=>{this._viewZoneId&&(n.removeZone(this._viewZoneId),this._viewZoneId=void 0);const r=Math.max(t.length,i);if(r>0){const i=document.createElement("div");De(i,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=n.addZone({afterLineNumber:e,heightInLines:r,domNode:i})}})}}function De(e,t,i,n,r){const s=n.get(29),a=n.get(104),l="none",c=n.get(82),d=n.get(44),h=n.get(43),u=n.get(58),g=Object(pe["a"])(1e4);g.appendASCIIString('<div class="suggest-preview-text">');for(let f=0,b=i.length;f<b;f++){const e=i[f],n=e.content;g.appendASCIIString('<div class="view-line'),g.appendASCIIString('" style="top:'),g.appendASCIIString(String(f*u)),g.appendASCIIString('px;width:1000000px;">');const p=o["A"](n),m=o["m"](n),b=ge["a"].createEmpty(n,r);Object(ve["d"])(new ve["c"](h.isMonospace&&!s,h.canUseHalfwidthRightwardsArrow,n,!1,p,m,0,b,e.decorations,t,0,h.spaceWidth,h.middotWidth,h.wsmiddotWidth,a,l,c,d!==he["e"].OFF,null),g),g.appendASCIIString("</div>")}g.appendASCIIString("</div>"),ce["a"].applyFontInfoSlow(e,h);const p=g.build(),m=Le?Le.createHTML(p):p;e.innerHTML=m}let Ie=0;function Ne(e,t,i,n){const o=i+Ie++;return e.registerDecorationType(t,o,n),{dispose(){e.removeDecorationType(o)},resolve(){return e.resolveDecorationOptions(o,!0)}}}class Re extends n["a"]{constructor(e,t,i,o){super(),this.editor=e,this.position=t,this.domNode=i,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(o),this._register(Object(n["i"])(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}Object(we["f"])((e,t)=>{const i=e.getColor(fe["K"]);if(i){const e=String(i.rgba.a),n=le["a"].Format.CSS.format(ke(i));t.addRule(`.monaco-editor .ghost-text-decoration { opacity: ${e} !important; color: ${n} !important; }`),t.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${i.toString()} !important; }`),t.addRule(`.monaco-editor .suggest-preview-text .ghost-text { opacity: ${e} !important; color: ${n} !important; }`)}const n=e.getColor(fe["J"]);n&&(t.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${n}; }`),t.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${n}; }`),t.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${n}; }`))});var Pe=i("c602"),Ee=i("f3a5"),Te=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ae=function(e,t){return function(i,n){t(i,n,e)}},je=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let ze=class e extends n["a"]{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new n["d"]),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(e=>{e.hasChanged(105)&&this.updateModelController(),e.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(t){return t.getContribution(e.ID)}get activeModel(){var e;return null===(e=this.activeController.value)||void 0===e?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(Fe,this.editor):void 0}shouldShowHoverAt(e){var t;return(null===(t=this.activeModel)||void 0===t?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,i;return(null===(i=null===(t=this.activeController.value)||void 0===t?void 0:t.widget)||void 0===i?void 0:i.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),null===(e=this.activeModel)||void 0===e||e.triggerInlineCompletion()}commit(){var e;null===(e=this.activeModel)||void 0===e||e.commitInlineCompletion()}hide(){var e;null===(e=this.activeModel)||void 0===e||e.hideInlineCompletion()}showNextInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return je(this,void 0,void 0,(function*(){const t=yield null===(e=this.activeModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==t&&t}))}};ze.inlineSuggestionVisible=new _e["c"]("inlineSuggestionVisible",!1,Pe["localize"]("vs/editor/contrib/inlineCompletions/ghostTextController","inlineSuggestionVisible","Whether an inline suggestion is visible")),ze.inlineSuggestionHasIndentation=new _e["c"]("inlineSuggestionHasIndentation",!1,Pe["localize"]("vs/editor/contrib/inlineCompletions/ghostTextController","inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),ze.inlineSuggestionHasIndentationLessThanTabSize=new _e["c"]("inlineSuggestionHasIndentationLessThanTabSize",!0,Pe["localize"]("vs/editor/contrib/inlineCompletions/ghostTextController","inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),ze.ID="editor.contrib.ghostTextController",ze=Te([Ae(1,Ce["a"])],ze);class We{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=ze.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=ze.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=ze.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let Fe=class extends n["a"]{constructor(e,t,i){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.contextKeys=new We(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(oe,this.editor)),this.widget=this._register(this.instantiationService.createInstance(Oe,this.editor,this.model)),this._register(Object(n["i"])(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(void 0!==(null===(e=this.model.activeInlineCompletionsModel)||void 0===e?void 0:e.ghostText));let t=!1,i=!0;const n=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&n&&n.parts.length>0){const{column:e,lines:r}=n.parts[0],a=r[0],l=this.editor.getModel().getLineIndentColumn(n.lineNumber),c=e<=l;if(c){let e=Object(o["u"])(a);-1===e&&(e=a.length-1),t=e>0;const n=this.editor.getModel().getOptions().tabSize,r=s["a"].visibleColumnFromColumn(a,e+1,n);i=r<n}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(i)}};Fe=Te([Ae(1,Ce["a"]),Ae(2,_e["b"])],Fe);const Ue=r["c"].bindToContribution(ze.get),Ve=new Ue({id:l,precondition:ze.inlineSuggestionVisible,handler(e){e.commit(),e.editor.focus()}});Object(r["k"])(Ve),Ee["a"].registerKeybindingRule({primary:2,weight:200,id:Ve.id,when:_e["a"].and(Ve.precondition,a["a"].tabMovesFocus.toNegated(),ze.inlineSuggestionHasIndentationLessThanTabSize)}),Object(r["k"])(new Ue({id:"editor.action.inlineSuggest.hide",precondition:ze.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(e){e.hide()}}));class He extends r["b"]{constructor(){super({id:He.ID,label:Pe["localize"]("vs/editor/contrib/inlineCompletions/ghostTextController","action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:_e["a"].and(a["a"].writable,ze.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return je(this,void 0,void 0,(function*(){const e=ze.get(t);e&&(e.showNextInlineCompletion(),t.focus())}))}}He.ID="editor.action.inlineSuggest.showNext";class Ke extends r["b"]{constructor(){super({id:Ke.ID,label:Pe["localize"]("vs/editor/contrib/inlineCompletions/ghostTextController","action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:_e["a"].and(a["a"].writable,ze.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return je(this,void 0,void 0,(function*(){const e=ze.get(t);e&&(e.showPreviousInlineCompletion(),t.focus())}))}}Ke.ID="editor.action.inlineSuggest.showPrevious";class Be extends r["b"]{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:Pe["localize"]("vs/editor/contrib/inlineCompletions/ghostTextController","action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:a["a"].writable})}run(e,t){return je(this,void 0,void 0,(function*(){const e=ze.get(t);e&&e.trigger()}))}}Object(r["l"])(ze.ID,ze),Object(r["j"])(Be),Object(r["j"])(He),Object(r["j"])(Ke)},"470c":function(e,t,i){"use strict";i.r(t),i.d(t,"LinkDetector",(function(){return A}));var n=i("4b4a"),o=i("4163"),r=i("f123"),s=i("6b5e"),a=i("92db"),l=i("dbd6"),c=i("cb4a"),d=i("1ff1"),h=i("c189"),u=(i("7c96"),i("ae58")),g=i("2f07"),p=i("d778"),m=i("9c55"),f=i("945a"),b=i("4d73"),v=i("d8b0"),_=i("1edf"),C=i("d5b7"),w=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class y{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return w(this,void 0,void 0,(function*(){return this._link.url?this._link.url:"function"===typeof this._provider.resolveLink?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}))}}class S{constructor(e){this._disposables=new a["b"];let t=[];for(const[i,n]of e){const e=i.links.map(e=>new y(e,n));t=S._union(t,e),Object(a["g"])(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let i,n,o,r,s=[];for(i=0,o=0,n=e.length,r=t.length;i<n&&o<r;){const n=e[i],r=t[o];if(v["a"].areIntersectingOrTouching(n.range,r.range)){i++;continue}const a=v["a"].compareRangesUsingStarts(n.range,r.range);a<0?(s.push(n),i++):(s.push(r),o++)}for(;i<n;i++)s.push(e[i]);for(;o<r;o++)s.push(t[o]);return s}}function L(e,t){const i=[],n=p["v"].ordered(e).reverse().map((n,o)=>Promise.resolve(n.provideLinks(e,t)).then(e=>{e&&(i[o]=[e,n])},r["g"]));return Promise.all(n).then(()=>{const e=new S(Object(f["e"])(i));return t.isCancellationRequested?(e.dispose(),new S([])):e})}C["a"].registerCommand("_executeLinkProvider",(e,...t)=>w(void 0,void 0,void 0,(function*(){let[i,n]=t;Object(b["c"])(i instanceof h["a"]),"number"!==typeof n&&(n=0);const r=e.get(_["a"]).getModel(i);if(!r)return[];const s=yield L(r,o["a"].None);if(!s)return[];for(let e=0;e<Math.min(n,s.links.length);e++)yield s.links[e].resolve(o["a"].None);const a=s.links.slice(0);return s.dispose(),a})));var O=i("c602"),x=i("eb8f"),k=i("0aba"),M=i("f7fb"),D=i("d1e2"),I=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},N=function(e,t){return function(i,n){t(i,n,e)}},R=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function P(e,t){const i=e.url&&/^command:/i.test(e.url.toString()),n=e.tooltip?e.tooltip:i?O["localize"]("vs/editor/contrib/links/links","links.navigate.executeCmd","Execute command"):O["localize"]("vs/editor/contrib/links/links","links.navigate.follow","Follow link"),o=t?c["f"]?O["localize"]("vs/editor/contrib/links/links","links.navigate.kb.meta.mac","cmd + click"):O["localize"]("vs/editor/contrib/links/links","links.navigate.kb.meta","ctrl + click"):c["f"]?O["localize"]("vs/editor/contrib/links/links","links.navigate.kb.alt.mac","option + click"):O["localize"]("vs/editor/contrib/links/links","links.navigate.kb.alt","alt + click");if(e.url){let t="";if(/^command:/i.test(e.url.toString())){const i=e.url.toString().match(/^command:([^?#]+)/);if(i){const e=i[1],n=O["localize"]("vs/editor/contrib/links/links","tooltip.explanation","Execute command {0}",e);t=` "${n}"`}}const i=new s["a"]("",!0).appendMarkdown(`[${n}](${e.url.toString(!0).replace(/ /g,"%20")}${t}) (${o})`);return i}return(new s["a"]).appendText(`${n} (${o})`)}const E={general:g["b"].register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:g["b"].register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class T{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:T._getOptions(e,t,!1)}}static _getOptions(e,t,i){const n=Object.assign({},i?E.active:E.general);return n.hoverMessage=P(e,t),n}activate(e,t){e.changeDecorationOptions(this.decorationId,T._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,T._getOptions(this.link,t,!1))}}let A=class e{constructor(e,t,i){this.listenersToRemove=new a["b"],this.editor=e,this.openerService=t,this.notificationService=i;let o=new m["a"](e);this.listenersToRemove.add(o),this.listenersToRemove.add(o.onMouseMoveOrRelevantKeyDown(([e,t])=>{this._onEditorMouseMove(e,t)})),this.listenersToRemove.add(o.onExecute(e=>{this.onEditorMouseUp(e)})),this.listenersToRemove.add(o.onCancel(e=>{this.cleanUpActiveLinkDecoration()})),this.enabled=e.getOption(62),this.listenersToRemove.add(e.onDidChangeConfiguration(t=>{const i=e.getOption(62);this.enabled!==i&&(this.enabled=i,this.updateDecorations([]),this.stop(),this.beginCompute())})),this.listenersToRemove.add(e.onDidChangeModelContent(e=>this.onChange())),this.listenersToRemove.add(e.onDidChangeModel(e=>this.onModelChanged())),this.listenersToRemove.add(e.onDidChangeModelLanguage(e=>this.onModelModeChanged())),this.listenersToRemove.add(p["v"].onDidChange(e=>this.onModelModeChanged())),this.timeout=new n["g"],this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}static get(t){return t.getContribution(e.ID)}onModelChanged(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}onModelModeChanged(){this.stop(),this.beginCompute()}onChange(){this.timeout.setIfNotSet(()=>this.beginCompute(),e.RECOMPUTE_TIME)}beginCompute(){return R(this,void 0,void 0,(function*(){if(!this.editor.hasModel()||!this.enabled)return;const e=this.editor.getModel();if(p["v"].has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=n["h"](t=>L(e,t));try{this.activeLinksList=yield this.computePromise,this.updateDecorations(this.activeLinksList.links)}catch(t){Object(r["f"])(t)}finally{this.computePromise=null}}}))}updateDecorations(e){const t="altKey"===this.editor.getOption(69);let i=[],n=Object.keys(this.currentOccurrences);for(let s=0,a=n.length;s<a;s++){let e=n[s],t=this.currentOccurrences[e];i.push(t.decorationId)}let o=[];if(e)for(const s of e)o.push(T.decoration(s,t));let r=this.editor.deltaDecorations(i,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let s=0,a=r.length;s<a;s++){let t=new T(e[s],r[s]);this.currentOccurrences[t.decorationId]=t}}_onEditorMouseMove(e,t){const i="altKey"===this.editor.getOption(69);if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const t=this.getLinkOccurrence(e.target.position);t&&this.editor.changeDecorations(e=>{t.activate(e,i),this.activeLinkDecorationId=t.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e="altKey"===this.editor.getOption(69);if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:n}=e;n.resolve(o["a"].None).then(e=>{if("string"===typeof e&&this.editor.hasModel()){const t=this.editor.getModel().uri;if(t.scheme===l["c"].file&&e.startsWith(l["c"].file+":")){const i=h["a"].parse(e);if(i.scheme===l["c"].file){const n=d["i"](i);let o=null;n.startsWith("/./")?o="."+n.substr(1):n.startsWith("//./")&&(o="."+n.substr(2)),o&&(e=d["g"](t,o))}}}return this.openerService.open(e,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0})},e=>{const t=e instanceof Error?e.message:e;"invalid"===t?this.notificationService.warn(O["localize"]("vs/editor/contrib/links/links","invalid.url","Failed to open this link because it is not well-formed: {0}",n.url.toString())):"missing"===t?this.notificationService.warn(O["localize"]("vs/editor/contrib/links/links","missing.url","Failed to open this link because its target is missing.")):Object(r["f"])(e)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const i of t){const e=this.currentOccurrences[i.id];if(e)return e}return null}isEnabled(e,t){return Boolean(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.timeout.cancel(),this.activeLinksList&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}};A.ID="editor.linkDetector",A.RECOMPUTE_TIME=1e3,A=I([N(1,k["a"]),N(2,x["a"])],A);class j extends u["b"]{constructor(){super({id:"editor.action.openLink",label:O["localize"]("vs/editor/contrib/links/links","label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let i=A.get(t);if(!i)return;if(!t.hasModel())return;let n=t.getSelections();for(let o of n){let e=i.getLinkOccurrence(o.getEndPosition());e&&i.openLinkOccurrence(e,!1)}}}Object(u["l"])(A.ID,A),Object(u["j"])(j),Object(D["f"])((e,t)=>{const i=e.getColor(M["q"]);i&&t.addRule(`.monaco-editor .detected-link-active { color: ${i} !important; }`)})},4826:function(e,t,i){},"4c77":function(e,t,i){"use strict";i.d(t,"a",(function(){return he}));var n=i("4b4a"),o=i("f123"),r=i("d3a2"),s=i("92db"),a=i("47f8"),l=i("e0ab"),c=i("d8b0"),d=i("8ec0"),h=i("c602"),u=i("d5b7"),g=i("672a"),p=i("6ad4"),m=i("bf32"),f=i("f3a5"),b=i("bbd3"),v=i("eb8f"),_=i("0100"),C=i("9cc3"),w=i("d208"),y=i("78a9"),S=i("98ef"),L=i("f295"),O=i("dbd6"),x=i("1ff1"),k=(i("02b3"),i("22a8")),M=i("2f07"),D=i("6b8c"),I=i("12fe"),N=i("d00e"),R=i("c815"),P=i("5474"),E=i("1af1"),T=i("d535"),A=i("f55d"),j=i("5365"),z=i("3c41"),W=i("9bef"),F=i("d1e2"),U=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},V=function(e,t){return function(i,n){t(i,n,e)}};let H=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof C["c"]||e instanceof C["a"]}getChildren(e){if(e instanceof C["c"])return e.groups;if(e instanceof C["a"])return e.resolve(this._resolverService).then(e=>e.children);throw new Error("bad tree")}};H=U([V(0,N["a"])],H);class K{getHeight(){return 23}getTemplateId(e){return e instanceof C["a"]?G.id:J.id}}let B=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof C["b"]){const i=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(i)return i.value}return Object(x["b"])(e.uri)}};B=U([V(0,j["a"])],B);class q{getId(e){return e instanceof C["b"]?e.id:e.uri}}let $=class extends s["a"]{constructor(e,t,i){super(),this._uriLabel=t;const n=document.createElement("div");n.classList.add("reference-file"),this.file=this._register(new E["a"](n,{supportHighlights:!0})),this.badge=new R["a"](w["q"](n,w["a"](".count"))),this._register(Object(W["a"])(this.badge,i)),e.appendChild(n)}set(e,t){let i=Object(x["d"])(e.uri);this.file.setLabel(Object(A["a"])(e.uri),this._uriLabel.getUriLabel(i,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat(Object(h["localize"])("vs/editor/contrib/gotoSymbol/peek/referencesTree","referencesCount","{0} references",n)):this.badge.setTitleFormat(Object(h["localize"])("vs/editor/contrib/gotoSymbol/peek/referencesTree","referenceCount","{0} reference",n))}};$=U([V(1,z["a"]),V(2,F["b"])],$);let G=class e{constructor(t){this._instantiationService=t,this.templateId=e.id}renderTemplate(e){return this._instantiationService.createInstance($,e)}renderElement(e,t,i){i.set(e.element,Object(T["c"])(e.filterData))}disposeTemplate(e){e.dispose()}};G.id="FileReferencesRenderer",G=U([V(0,m["a"])],G);class Z{constructor(e){this.label=new P["a"](e,!1)}set(e,t){var i;const n=null===(i=e.parent.getPreview(e))||void 0===i?void 0:i.preview(e.range);if(n&&n.value){const{value:e,highlight:i}=n;t&&!T["a"].isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,Object(T["c"])(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[i]))}else this.label.set(`${Object(x["b"])(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`)}}class J{constructor(){this.templateId=J.id}renderTemplate(e){return new Z(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}}J.id="OneReferenceRenderer";class Q{getWidgetAriaLabel(){return Object(h["localize"])("vs/editor/contrib/gotoSymbol/peek/referencesTree","treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var X=i("f7fb"),Y=i("14f2"),ee=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},te=function(e,t){return function(i,n){t(i,n,e)}},ie=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class ne{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new s["b"],this._callOnModelChange=new s["b"],this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(let t of this._model.references)if(t.uri.toString()===e.uri.toString())return void this._addDecorations(t.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let o=0,r=e.children.length;o<r;o++){let n=e.children[o];this._decorationIgnoreSet.has(n.id)||n.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:n.range,options:ne.DecorationOptions}),i.push(o))}const n=this._editor.deltaDecorations([],t);for(let o=0;o<n.length;o++)this._decorations.set(n[o],e.children[i[o]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[i,n]of this._decorations){const o=t.getDecorationRange(i);if(!o)continue;let r=!1;if(!c["a"].equalsRange(o,n.range)){if(c["a"].spansMultipleLines(o))r=!0;else{const e=n.range.endColumn-n.range.startColumn,t=o.endColumn-o.startColumn;e!==t&&(r=!0)}r?(this._decorationIgnoreSet.add(n.id),e.push(i)):n.range=o}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}ne.DecorationOptions=M["b"].register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class oe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const n=JSON.parse(e);t=n.ratio,i=n.heightInLines}catch(n){}return{ratio:t||.7,heightInLines:i||18}}}class re extends b["c"]{}let se=class extends d["c"]{constructor(e,t,i,n,o,r,a,l,c,d,h,u){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=d,this._modeService=h,this._languageConfigurationService=u,this._disposeOnNewModel=new s["b"],this._callOnDispose=new s["b"],this._onDidSelectReference=new L["b"],this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new w["b"](0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Object(s["f"])(this._preview),Object(s["f"])(this._previewNotAvailableMessage),Object(s["f"])(this._tree),Object(s["f"])(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(d["e"])||S["a"].transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(d["p"])||S["a"].transparent,primaryHeadingColor:e.getColor(d["q"]),secondaryHeadingColor:e.getColor(d["r"])})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=w["q"](e,w["a"]("div.messages")),w["K"](this._messageContainer),this._splitView=new y["b"](e,{orientation:1}),this._previewContainer=w["q"](e,w["a"]("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(k["a"],this._previewContainer,t,this.editor),w["K"](this._previewContainer),this._previewNotAvailableMessage=new M["c"](h["localize"]("vs/editor/contrib/gotoSymbol/peek/referencesWidget","missingPreviewMessage","no preview available"),M["c"].DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=w["q"](e,w["a"]("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Q,keyboardNavigationLabelProvider:this._instantiationService.createInstance(B),identityProvider:new q,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:d["j"]}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(w["o"](this._treeContainer,"keydown",e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(re,"ReferencesWidget",this._treeContainer,new K,[this._instantiationService.createInstance(G),this._instantiationService.createInstance(J)],this._instantiationService.createInstance(H),i),this._splitView.addView({onDidChange:L["c"].None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},y["a"].Distribute),this._splitView.addView({onDidChange:L["c"].None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=this._dim.height+"px",this._treeContainer.style.width=e+"px",this._tree.layout(this._dim.height,e)}},y["a"].Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let n=(e,t)=>{e instanceof C["b"]&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen(e=>{e.sideBySide?n(e.element,"side"):e.editorOptions.pinned?n(e.element,"goto"):n(e.element,"show")}),w["K"](this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new w["b"](t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=h["localize"]("vs/editor/contrib/gotoSymbol/peek/referencesWidget","noResults","No results"),w["W"](this._messageContainer),Promise.resolve(void 0)):(w["K"](this._messageContainer),this._decorationsManager=new ne(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const n=this._getFocusedReference();n&&this._onDidSelectReference.fire({element:{uri:n.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),w["W"](this._treeContainer),w["W"](this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof C["b"]?e:e instanceof C["a"]&&e.children.length>0?e.children[0]:void 0}revealReference(e){return ie(this,void 0,void 0,(function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}))}_revealReference(e,t){return ie(this,void 0,void 0,(function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==O["c"].inMemory?this.setTitle(Object(x["c"])(e.uri),this._uriLabel.getUriLabel(Object(x["d"])(e.uri))):this.setTitle(h["localize"]("vs/editor/contrib/gotoSymbol/peek/referencesWidget","peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent)),this._tree.reveal(e);const n=yield i;if(!this._model)return void n.dispose();Object(s["f"])(this._previewModelReference);const o=n.object;if(o){const t=this._preview.getModel()===o.textEditorModel?0:1,i=c["a"].lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(o.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()}))}};se=ee([te(3,F["b"]),te(4,N["a"]),te(5,m["a"]),te(6,d["a"]),te(7,z["a"]),te(8,Y["a"]),te(9,j["a"]),te(10,I["a"]),te(11,D["a"])],se),Object(F["f"])((e,t)=>{const i=e.getColor(d["m"]);i&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${i}; }`);const n=e.getColor(d["h"]);n&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${n}; }`);const o=e.getColor(d["i"]);o&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${o}; box-sizing: border-box; }`);const r=e.getColor(X["b"]);r&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${r}; box-sizing: border-box; }`);const s=e.getColor(d["j"]);s&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${s}; }`);const a=e.getColor(d["l"]);a&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);const l=e.getColor(d["k"]);l&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${l}; }`);const c=e.getColor(d["n"]);c&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${c}; }`);const h=e.getColor(d["o"]);h&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${h} !important; }`);const u=e.getColor(d["f"]);u&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\tbackground-color: ${u};}`);const g=e.getColor(d["g"]);g&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\tbackground-color: ${g};}`)});var ae=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},le=function(e,t){return function(i,n){t(i,n,e)}},ce=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const de=new p["c"]("referenceSearchVisible",!1,h["localize"]("vs/editor/contrib/gotoSymbol/peek/referencesController","referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let he=class e{constructor(e,t,i,n,o,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=n,this._notificationService=o,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new s["b"],this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=de.bindTo(i)}static get(t){return t.getContribution(e.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",r=oe.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(se,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(h["localize"]("vs/editor/contrib/gotoSymbol/peek/referencesController","labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(e=>{let{element:t,kind:n}=e;if(t)switch(n){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(t,!1,!1);break;case"side":this.openReference(t,!0,!1);break;case"goto":i?this._gotoReference(t):this.openReference(t,!1,!0);break}}));const s=++this._requestIdPool;t.then(t=>{var i;if(s===this._requestIdPool&&this._widget)return null===(i=this._model)||void 0===i||i.dispose(),this._model=t,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(h["localize"]("vs/editor/contrib/gotoSymbol/peek/referencesController","metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let t=this._editor.getModel().uri,i=new l["a"](e.startLineNumber,e.startColumn),n=this._model.nearestReference(t,i);if(n)return this._widget.setSelection(n).then(()=>{this._widget&&"editor"===this._editor.getOption(76)&&this._widget.focusOnPreviewEditor()})}});t.dispose()},e=>{this._notificationService.error(e)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return ce(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const n=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(n),yield this._gotoReference(n),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}))}revealReference(e){return ce(this,void 0,void 0,(function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(e))}))}closeWidget(e=!0){var t,i;null===(t=this._widget)||void 0===t||t.dispose(),null===(i=this._model)||void 0===i||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(t){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const i=c["a"].lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:i}},this._editor).then(t=>{var o;if(this._ignoreModelChangeEvent=!1,t&&this._widget)if(this._editor===t)this._widget.show(i),this._widget.focusOnReferenceTree();else{const r=e.get(t),s=this._model.clone();this.closeWidget(),t.focus(),r.toggleWidget(i,Object(n["h"])(e=>Promise.resolve(s)),null!==(o=this._peekMode)&&void 0!==o&&o)}else this.closeWidget()},e=>{this._ignoreModelChangeEvent=!1,Object(o["f"])(e)})}openReference(e,t,i){t||this.closeWidget();const{uri:n,range:o}=e;this._editorService.openCodeEditor({resource:n,options:{selection:o,pinned:i}},this._editor,t)}};function ue(e,t){const i=Object(d["d"])(e);if(!i)return;let n=he.get(i);n&&t(n)}he.ID="editor.contrib.referencesController",he=ae([le(2,p["b"]),le(3,a["a"]),le(4,v["a"]),le(5,m["a"]),le(6,_["a"]),le(7,g["a"])],he),f["a"].registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Object(r["c"])(2089,60),when:p["a"].or(de,d["b"].inPeekEditor),handler(e){ue(e,e=>{e.changeFocusBetweenPreviewAndReferences()})}}),f["a"].registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:p["a"].or(de,d["b"].inPeekEditor),handler(e){ue(e,e=>{e.goToNextOrPreviousReference(!0)})}}),f["a"].registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:p["a"].or(de,d["b"].inPeekEditor),handler(e){ue(e,e=>{e.goToNextOrPreviousReference(!1)})}}),u["a"].registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),u["a"].registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),u["a"].registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),u["a"].registerCommand("closeReferenceSearch",e=>ue(e,e=>e.closeWidget())),f["a"].registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:p["a"].and(d["b"].inPeekEditor,p["a"].not("config.editor.stablePeek"))}),f["a"].registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:p["a"].and(de,p["a"].not("config.editor.stablePeek"))}),f["a"].registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:p["a"].and(de,b["e"]),handler(e){var t;const i=e.get(b["a"]),n=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof C["b"]&&ue(e,e=>e.revealReference(n[0]))}}),f["a"].registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:p["a"].and(de,b["e"]),handler(e){var t;const i=e.get(b["a"]),n=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof C["b"]&&ue(e,e=>e.openReference(n[0],!0,!0))}}),u["a"].registerCommand("openReference",e=>{var t;const i=e.get(b["a"]),n=null===(t=i.lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof C["b"]&&ue(e,e=>e.openReference(n[0],!1,!0))})},"630c":function(e,t,i){},"644f":function(e,t,i){"use strict";i.r(t),i.d(t,"getReindentEditOperations",(function(){return b})),i.d(t,"IndentationToSpacesAction",(function(){return v})),i.d(t,"IndentationToTabsAction",(function(){return _})),i.d(t,"ChangeIndentationSizeAction",(function(){return C})),i.d(t,"IndentUsingTabs",(function(){return w})),i.d(t,"IndentUsingSpaces",(function(){return y})),i.d(t,"DetectIndentation",(function(){return S})),i.d(t,"ReindentLinesAction",(function(){return L})),i.d(t,"ReindentSelectedLinesAction",(function(){return O})),i.d(t,"AutoIndentOnPasteCommand",(function(){return x})),i.d(t,"AutoIndentOnPaste",(function(){return k})),i.d(t,"IndentationToSpacesCommand",(function(){return D})),i.d(t,"IndentationToTabsCommand",(function(){return I}));var n=i("92db"),o=i("1537"),r=i("ae58"),s=i("8e1a"),a=i("ae41"),l=i("d8b0"),c=i("17e0"),d=i("7c05"),h=i("2f07"),u=i("6b8c"),g=i("1edf"),p=i("a7ad"),m=i("c602"),f=i("60a0");function b(e,t,i,n){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];const r=u["b"].getIndentationRules(e.getLanguageId());if(!r)return[];i=Math.min(i,e.getLineCount());while(t<=i){if(!r.unIndentedLinePattern)break;let i=e.getLineContent(t);if(!r.unIndentedLinePattern.test(i))break;t++}if(t>i-1)return[];const{tabSize:l,indentSize:d,insertSpaces:g}=e.getOptions(),p=(e,t)=>(t=t||1,s["a"].shiftIndent(e,e.length+t,l,d,g)),m=(e,t)=>(t=t||1,s["a"].unshiftIndent(e,e.length+t,l,d,g));let f,b=[],v=e.getLineContent(t),_=v;if(void 0!==n&&null!==n){f=n;let e=o["x"](v);_=f+v.substring(e.length),r.decreaseIndentPattern&&r.decreaseIndentPattern.test(_)&&(f=m(f),_=f+v.substring(e.length)),v!==_&&b.push(a["a"].replaceMove(new c["a"](t,1,t,e.length+1),h["c"].normalizeIndentation(f,d,g)))}else f=o["x"](v);let C=f;r.increaseIndentPattern&&r.increaseIndentPattern.test(_)?(C=p(C),f=p(f)):r.indentNextLinePattern&&r.indentNextLinePattern.test(_)&&(C=p(C)),t++;for(let s=t;s<=i;s++){let t=e.getLineContent(s),i=o["x"](t),n=C+t.substring(i.length);r.decreaseIndentPattern&&r.decreaseIndentPattern.test(n)&&(C=m(C),f=m(f)),i!==C&&b.push(a["a"].replaceMove(new c["a"](s,1,s,i.length+1),h["c"].normalizeIndentation(C,d,g))),r.unIndentedLinePattern&&r.unIndentedLinePattern.test(t)||(r.increaseIndentPattern&&r.increaseIndentPattern.test(n)?(f=p(f),C=f):C=r.indentNextLinePattern&&r.indentNextLinePattern.test(n)?p(C):f)}return b}class v extends r["b"]{constructor(){super({id:v.ID,label:m["localize"]("vs/editor/contrib/indentation/indentation","indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:d["a"].writable})}run(e,t){let i=t.getModel();if(!i)return;let n=i.getOptions(),o=t.getSelection();if(!o)return;const r=new D(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}}v.ID="editor.action.indentationToSpaces";class _ extends r["b"]{constructor(){super({id:_.ID,label:m["localize"]("vs/editor/contrib/indentation/indentation","indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:d["a"].writable})}run(e,t){let i=t.getModel();if(!i)return;let n=i.getOptions(),o=t.getSelection();if(!o)return;const r=new I(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}}_.ID="editor.action.indentationToTabs";class C extends r["b"]{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const i=e.get(f["a"]),n=e.get(g["a"]);let o=t.getModel();if(!o)return;const r=n.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),s=[1,2,3,4,5,6,7,8].map(e=>({id:e.toString(),label:e.toString(),description:e===r.tabSize?m["localize"]("vs/editor/contrib/indentation/indentation","configuredTabSize","Configured Tab Size"):void 0})),a=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(s,{placeHolder:m["localize"]("vs/editor/contrib/indentation/indentation",{key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:s[a]}).then(e=>{e&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(e.label,10),insertSpaces:this.insertSpaces})})},50)}}class w extends C{constructor(){super(!1,{id:w.ID,label:m["localize"]("vs/editor/contrib/indentation/indentation","indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}w.ID="editor.action.indentUsingTabs";class y extends C{constructor(){super(!0,{id:y.ID,label:m["localize"]("vs/editor/contrib/indentation/indentation","indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}y.ID="editor.action.indentUsingSpaces";class S extends r["b"]{constructor(){super({id:S.ID,label:m["localize"]("vs/editor/contrib/indentation/indentation","detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const i=e.get(g["a"]);let n=t.getModel();if(!n)return;const o=i.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget);n.detectIndentation(o.insertSpaces,o.tabSize)}}S.ID="editor.action.detectIndentation";class L extends r["b"]{constructor(){super({id:"editor.action.reindentlines",label:m["localize"]("vs/editor/contrib/indentation/indentation","editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:d["a"].writable})}run(e,t){let i=t.getModel();if(!i)return;let n=b(i,1,i.getLineCount());n.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,n),t.pushUndoStop())}}class O extends r["b"]{constructor(){super({id:"editor.action.reindentselectedlines",label:m["localize"]("vs/editor/contrib/indentation/indentation","editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:d["a"].writable})}run(e,t){let i=t.getModel();if(!i)return;let n=t.getSelections();if(null===n)return;let o=[];for(let r of n){let e=r.startLineNumber,t=r.endLineNumber;if(e!==t&&1===r.endColumn&&t--,1===e){if(e===t)continue}else e--;let n=b(i,e,t);o.push(...n)}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class x{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let i of e)i.range&&"string"===typeof i.text&&this._edits.push(i)}getEditOperations(e,t){for(let n of this._edits)t.addEditOperation(l["a"].lift(n.range),n.text);let i=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class k{constructor(e){this.callOnDispose=new n["b"],this.callOnModel=new n["b"],this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),this.editor.getOption(9)<4||this.editor.getOption(47)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){let t=this.editor.getSelections();if(null===t||t.length>1)return;const i=this.editor.getModel();if(!i)return;if(!i.isCheapToTokenize(e.getStartPosition().lineNumber))return;const n=this.editor.getOption(9),{tabSize:r,indentSize:a,insertSpaces:c}=i.getOptions();let d=[],h={shiftIndent:e=>s["a"].shiftIndent(e,e.length+1,r,a,c),unshiftIndent:e=>s["a"].unshiftIndent(e,e.length+1,r,a,c)},g=e.startLineNumber;while(g<=e.endLineNumber){if(!this.shouldIgnoreLine(i,g))break;g++}if(g>e.endLineNumber)return;let m=i.getLineContent(g);if(!/\S/.test(m.substring(0,e.startColumn-1))){const e=u["b"].getGoodIndentForLine(n,i,i.getLanguageId(),g,h);if(null!==e){let t=o["x"](m),n=p["b"](e,r),s=p["b"](t,r);if(n!==s){let e=p["a"](n,r,c);d.push({range:new l["a"](g,1,g,t.length+1),text:e}),m=e+m.substr(t.length)}else{let e=u["b"].getIndentMetadata(i,g);if(0===e||8===e)return}}}const f=g;while(g<e.endLineNumber){if(/\S/.test(i.getLineContent(g+1)))break;g++}if(g!==e.endLineNumber){let t={getLineTokens:e=>i.getLineTokens(e),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(e,t)=>i.getLanguageIdAtPosition(e,t),getLineContent:e=>e===f?m:i.getLineContent(e)},s=u["b"].getGoodIndentForLine(n,t,i.getLanguageId(),g+1,h);if(null!==s){let t=p["b"](s,r),n=p["b"](o["x"](i.getLineContent(g+1)),r);if(t!==n){let s=t-n;for(let t=g+1;t<=e.endLineNumber;t++){let e=i.getLineContent(t),n=o["x"](e),a=p["b"](n,r),h=a+s,u=p["a"](h,r,c);u!==n&&d.push({range:new l["a"](t,1,t,n.length+1),text:u})}}}}if(d.length>0){this.editor.pushUndoStop();let e=new x(d,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",e),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.forceTokenization(t);let i=e.getLineFirstNonWhitespaceColumn(t);if(0===i)return!0;let n=e.getLineTokens(t);if(n.getCount()>0){let e=n.findTokenIndexAtOffset(i);if(e>=0&&1===n.getStandardTokenType(e))return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}function M(e,t,i,n){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return;let o="";for(let s=0;s<i;s++)o+=" ";let r=new RegExp(o,"gi");for(let s=1,a=e.getLineCount();s<=a;s++){let i=e.getLineFirstNonWhitespaceColumn(s);if(0===i&&(i=e.getLineMaxColumn(s)),1===i)continue;const a=new l["a"](s,1,s,i),c=e.getValueInRange(a),d=n?c.replace(/\t/gi,o):c.replace(r,"\t");t.addEditOperation(a,d)}}k.ID="editor.contrib.autoIndentOnPaste";class D{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),M(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class I{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),M(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}Object(r["l"])(k.ID,k),Object(r["j"])(v),Object(r["j"])(_),Object(r["j"])(w),Object(r["j"])(y),Object(r["j"])(S),Object(r["j"])(L),Object(r["j"])(O)},"71bf":function(e,t,i){},"71d9":function(e,t,i){"use strict";i.r(t);var n=i("4b4a"),o=i("f123"),r=i("5e2a"),s=i("ae58"),a=i("d8b0"),l=i("17e0"),c=i("7c05"),d=i("2f07"),h=i("6fc9"),u=i("59e4"),g=i("c602"),p=i("d1e2");class m{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations(),n=i[0].range;return this._originalSelection.isEmpty()?new l["a"](n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new l["a"](n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}}var f=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},b=function(e,t){return function(i,n){t(i,n,e)}};let v=class e{constructor(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}static get(t){return t.getContribution(e.ID)}dispose(){}run(t,i){this.currentRequest&&this.currentRequest.cancel();const s=this.editor.getSelection(),c=this.editor.getModel();if(!c||!s)return;let d=s;if(d.startLineNumber!==d.endLineNumber)return;const h=new r["a"](this.editor,5),u=c.uri;return this.editorWorkerService.canNavigateValueSet(u)?(this.currentRequest=Object(n["h"])(e=>this.editorWorkerService.navigateValueSet(u,d,i)),this.currentRequest.then(i=>{if(!i||!i.range||!i.value)return;if(!h.validate(this.editor))return;let r=a["a"].lift(i.range),s=i.range,c=i.value.length-(d.endColumn-d.startColumn);s={startLineNumber:s.startLineNumber,startColumn:s.startColumn,endLineNumber:s.endLineNumber,endColumn:s.startColumn+i.value.length},c>1&&(d=new l["a"](d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn+c-1));const u=new m(r,d,i.value);this.editor.pushUndoStop(),this.editor.executeCommand(t,u),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:s,options:e.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=Object(n["n"])(350),this.decorationRemover.then(()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[])).catch(o["f"])}).catch(o["f"])):Promise.resolve(void 0)}};v.ID="editor.contrib.inPlaceReplaceController",v.DECORATION=d["b"].register({description:"in-place-replace",className:"valueSetReplacement"}),v=f([b(1,h["a"])],v);class _ extends s["b"]{constructor(){super({id:"editor.action.inPlaceReplace.up",label:g["localize"]("vs/editor/contrib/inPlaceReplace/inPlaceReplace","InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:c["a"].writable,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:3154,weight:100}})}run(e,t){const i=v.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}class C extends s["b"]{constructor(){super({id:"editor.action.inPlaceReplace.down",label:g["localize"]("vs/editor/contrib/inPlaceReplace/inPlaceReplace","InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:c["a"].writable,kbOpts:{kbExpr:c["a"].editorTextFocus,primary:3156,weight:100}})}run(e,t){const i=v.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}Object(s["l"])(v.ID,v),Object(s["j"])(_),Object(s["j"])(C),Object(p["f"])((e,t)=>{const i=e.getColor(u["k"]);i&&t.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${i}; }`)})},7863:function(e,t,i){"use strict";i.r(t),i.d(t,"GotoDefinitionAtPositionEditorContribution",(function(){return O}));var n=i("4b4a"),o=i("f123"),r=i("6b5e"),s=i("92db"),a=i("4d73"),l=(i("4826"),i("5e2a")),c=i("ae58"),d=i("e0ab"),h=i("d8b0"),u=i("d778"),g=i("12fe"),p=i("d00e"),m=i("9c55"),f=i("8ec0"),b=i("c602"),v=i("6ad4"),_=i("f7fb"),C=i("d1e2"),w=i("f61d"),y=i("a974"),S=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},L=function(e,t){return function(i,n){t(i,n,e)}};let O=class e{constructor(e,t,i){this.textModelResolverService=t,this.modeService=i,this.toUnhook=new s["b"],this.toUnhookForKeyboard=new s["b"],this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let n=new m["a"](e);this.toUnhook.add(n),this.toUnhook.add(n.onMouseMoveOrRelevantKeyDown(([e,t])=>{this.startFindDefinitionFromMouse(e,Object(a["p"])(t))})),this.toUnhook.add(n.onExecute(e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},e=>{this.removeLinkDecorations(),Object(o["f"])(e)})})),this.toUnhook.add(n.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(t){return t.getContribution(e.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;let s=new l["a"](this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Object(n["h"])(t=>this.findDefinition(e,t)),this.previousPromise.then(t=>{if(t&&t.length&&s.validate(this.editor))if(t.length>1)this.addDecoration(new h["a"](e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),(new r["a"]).appendText(b["localize"]("vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition","multipleResults","Click to show {0} definitions.",t.length)));else{let n=t[0];if(!n.uri)return;this.textModelResolverService.createModelReference(n.uri).then(t=>{if(!t.object||!t.object.textEditorModel)return void t.dispose();const{object:{textEditorModel:o}}=t,{startLineNumber:s}=n.range;if(s<1||s>o.getLineCount())return void t.dispose();const a=this.getPreviewValue(o,s,n);let l;l=n.originSelectionRange?h["a"].lift(n.originSelectionRange):new h["a"](e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);const c=this.modeService.getModeIdByFilepathOrFirstLine(o.uri);this.addDecoration(l,(new r["a"]).appendCodeblock(c||"",a)),t.dispose()})}else this.removeLinkDecorations()}).then(void 0,o["f"])}getPreviewValue(t,i,n){let o=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(t,i);const r=o.endLineNumber-o.startLineNumber;r>=e.MAX_SOURCE_PREVIEW_LINES&&(o=this.getPreviewRangeBasedOnIndentation(t,i));const s=this.stripIndentationFromPreviewRange(t,i,o);return s}stripIndentationFromPreviewRange(e,t,i){const n=e.getLineFirstNonWhitespaceColumn(t);let o=n;for(let s=t+1;s<i.endLineNumber;s++){const t=e.getLineFirstNonWhitespaceColumn(s);o=Math.min(o,t)}const r=e.getValueInRange(i).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim();return r}getPreviewRangeBasedOnIndentation(t,i){const n=t.getLineFirstNonWhitespaceColumn(i),o=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES);let r=i+1;for(;r<o;r++){let e=t.getLineFirstNonWhitespaceColumn(r);if(n===e)break}return new h["a"](i,1,r+1,1)}getPreviewRangeBasedOnBrackets(t,i){const n=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES),o=[];let r=!0,s=t.findNextBracket(new d["a"](i,1));while(null!==s){if(0===o.length)o.push(s);else{const e=o[o.length-1];if(e.open[0]===s.open[0]&&e.isOpen&&!s.isOpen?o.pop():o.push(s),0===o.length){if(!r)return new h["a"](i,1,s.range.endLineNumber+1,1);r=!1}}const e=t.getLineMaxColumn(i);let a=s.range.endLineNumber,l=s.range.endColumn;if(e===s.range.endColumn&&(a++,l=1),a>n)return new h["a"](i,1,n+1,1);s=t.findNextBracket(new d["a"](a,l))}return new h["a"](i,1,n+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[i])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&u["f"].has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?Object(y["b"])(i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(e=>{const i=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(e),n=new w["DefinitionAction"]({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0});return n.run(e,this.editor)})}isInPeekEditor(e){const t=e.get(v["b"]);return f["b"].inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};O.ID="editor.contrib.gotodefinitionatposition",O.MAX_SOURCE_PREVIEW_LINES=8,O=S([L(1,p["a"]),L(2,g["a"])],O),Object(c["l"])(O.ID,O),Object(C["f"])((e,t)=>{const i=e.getColor(_["q"]);i&&t.addRule(`.monaco-editor .goto-definition-link { color: ${i} !important; }`)})},"7c96":function(e,t,i){},8008:function(e,t,i){"use strict";i.r(t),i.d(t,"CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE",(function(){return x})),i.d(t,"LinkedEditingContribution",(function(){return M})),i.d(t,"LinkedEditingAction",(function(){return D})),i.d(t,"editorLinkedEditingBackground",(function(){return R}));var n=i("945a"),o=i("4b4a"),r=i("4163"),s=i("98ef"),a=i("f123"),l=i("92db"),c=i("1537"),d=i("c189"),h=i("ae58"),u=i("47f8"),g=i("e0ab"),p=i("d8b0"),m=i("7c05"),f=i("2f07"),b=i("d778"),v=i("6b8c"),_=i("c602"),C=i("6ad4"),w=i("f7fb"),y=i("d1e2"),S=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},L=function(e,t){return function(i,n){t(i,n,e)}},O=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const x=new C["c"]("LinkedEditingInputVisible",!1),k="linked-editing-decoration";let M=class e extends l["a"]{constructor(e,t){super(),this._debounceDuration=200,this._localToDispose=this._register(new l["b"]),this._editor=e,this._enabled=!1,this._visibleContextKey=x.bindTo(t),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new l["b"]),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(e=>{(e.hasChanged(61)||e.hasChanged(81))&&this.reinitialize(!1)})),this._register(b["w"].onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(t){return t.getContribution(e.ID)}reinitialize(e){const t=this._editor.getModel(),i=null!==t&&(this._editor.getOption(61)||this._editor.getOption(81))&&b["w"].has(t);if(i===this._enabled&&!e)return;if(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||null===t)return;this._languageWordPattern=v["b"].getWordDefinition(t.getLanguageId()),this._localToDispose.add(t.onDidChangeLanguageConfiguration(()=>{this._languageWordPattern=v["b"].getWordDefinition(t.getLanguageId())}));const n=new o["a"](this._debounceDuration),r=()=>{this._rangeUpdateTriggerPromise=n.trigger(()=>this.updateRanges(),this._debounceDuration)},s=new o["a"](0),a=e=>{this._rangeSyncTriggerPromise=s.trigger(()=>this._syncRanges(e))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{r()})),this._localToDispose.add(this._editor.onDidChangeModelContent(e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const i=t.getDecorationRange(this._currentDecorations[0]);if(i&&e.changes.every(e=>i.intersectRanges(e.range)))return void a(this._currentDecorations)}r()})),this._localToDispose.add({dispose:()=>{n.cancel(),s.cancel()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||0===e.length)return;const t=this._editor.getModel(),i=t.getDecorationRange(e[0]);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const n=t.getValueInRange(i);if(this._currentWordPattern){const e=n.match(this._currentWordPattern),t=e?e[0].length:0;if(t!==n.length)return this.clearRanges()}let o=[];for(let r=1,s=e.length;r<s;r++){const i=t.getDecorationRange(e[r]);if(i)if(i.startLineNumber!==i.endLineNumber)o.push({range:i,text:n});else{let e=t.getValueInRange(i),r=n,s=i.startColumn,a=i.endColumn;const l=c["d"](e,r);s+=l,e=e.substr(l),r=r.substr(l);const d=c["e"](e,r);a-=d,e=e.substr(0,e.length-d),r=r.substr(0,r.length-d),s===a&&0===r.length||o.push({range:new p["a"](i.startLineNumber,s,i.endLineNumber,a),text:r})}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(t=!1){return O(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return void this.clearRanges();const i=this._editor.getPosition();if(!this._enabled&&!t||this._editor.getSelections().length>1)return void this.clearRanges();const n=this._editor.getModel(),r=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===r){if(i.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const e=n.getDecorationRange(this._currentDecorations[0]);if(e&&e.containsPosition(i))return}}this._currentRequestPosition=i,this._currentRequestModelVersion=r;const s=Object(o["h"])(t=>O(this,void 0,void 0,(function*(){try{const o=yield N(n,i,t);if(s!==this._currentRequest)return;if(this._currentRequest=null,r!==n.getVersionId())return;let a=[];(null===o||void 0===o?void 0:o.ranges)&&(a=o.ranges),this._currentWordPattern=(null===o||void 0===o?void 0:o.wordPattern)||this._languageWordPattern;let l=!1;for(let e=0,t=a.length;e<t;e++)if(p["a"].containsPosition(a[e],i)){if(l=!0,0!==e){const t=a[e];a.splice(e,1),a.unshift(t)}break}if(!l)return void this.clearRanges();const c=a.map(t=>({range:t,options:e.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,c)}catch(o){Object(a["e"])(o)||Object(a["f"])(o),this._currentRequest!==s&&this._currentRequest||this.clearRanges()}})));return this._currentRequest=s,s}))}};M.ID="editor.contrib.linkedEditing",M.DECORATION=f["b"].register({description:"linked-editing",stickiness:0,className:k}),M=S([L(1,C["b"])],M);class D extends h["b"]{constructor(){super({id:"editor.action.linkedEditing",label:_["localize"]("vs/editor/contrib/linkedEditing/linkedEditing","linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:C["a"].and(m["a"].writable,m["a"].hasRenameProvider),kbOpts:{kbExpr:m["a"].editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(u["a"]),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return d["a"].isUri(n)&&g["a"].isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(e=>{e&&(e.setPosition(o),e.invokeWithinContext(t=>(this.reportTelemetry(t,e),this.run(t,e))))},a["f"]):super.runCommand(e,t)}run(e,t){const i=M.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const I=h["c"].bindToContribution(M.get);function N(e,t,i){const r=b["w"].ordered(e);return Object(o["j"])(r.map(n=>()=>O(this,void 0,void 0,(function*(){try{return yield n.provideLinkedEditingRanges(e,t,i)}catch(o){return void Object(a["g"])(o)}}))),e=>!!e&&n["n"](null===e||void 0===e?void 0:e.ranges))}Object(h["k"])(new I({id:"cancelLinkedEditingInput",precondition:x,handler:e=>e.clearRanges(),kbOpts:{kbExpr:m["a"].editorTextFocus,weight:199,primary:9,secondary:[1033]}}));const R=Object(w["Cc"])("editor.linkedEditingBackground",{dark:s["a"].fromHex("#f00").transparent(.3),light:s["a"].fromHex("#f00").transparent(.3),hc:s["a"].fromHex("#f00").transparent(.3)},_["localize"]("vs/editor/contrib/linkedEditing/linkedEditing","editorLinkedEditingBackground","Background color when the editor auto renames on type."));Object(y["f"])((e,t)=>{const i=e.getColor(R);i&&t.addRule(`.monaco-editor .${k} { background: ${i}; border-left-color: ${i}; }`)}),Object(h["n"])("_executeLinkedEditingProvider",(e,t)=>N(e,t,r["a"].None)),Object(h["l"])(M.ID,M),Object(h["j"])(D)},8544:function(e,t,i){"use strict";i.r(t);var n=i("945a"),o=i("4163"),r=i("f123"),s=i("d3a2"),a=i("92db"),l=i("ae58"),c=i("47f8"),d=i("37e9"),h=i("d8b0"),u=i("7c05"),g=i("d778"),p=i("6fc9"),m=i("9d20"),f=i("fcfd"),b=i("c602"),v=i("d5b7"),_=i("6ad4"),C=i("bf32"),w=i("b5f6"),y=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},S=function(e,t){return function(i,n){t(i,n,e)}},L=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let O=class{constructor(e,t){this._workerService=t,this._callOnDispose=new a["b"],this._callOnModel=new a["b"],this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(g["x"].onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(48))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=g["x"].ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let i=new d["b"];for(let n of t.autoFormatTriggerCharacters)i.add(n.charCodeAt(0));this._callOnModel.add(this._editor.onDidType(e=>{let t=e.charCodeAt(e.length-1);i.has(t)&&this._trigger(String.fromCharCode(t))}))}_trigger(e){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition();let o=!1;const r=this._editor.onDidChangeModelContent(e=>{if(e.isFlush)return o=!0,void r.dispose();for(let t=0,n=e.changes.length;t<n;t++){const n=e.changes[t];if(n.range.endLineNumber<=i.lineNumber)return o=!0,void r.dispose()}});Object(m["e"])(this._workerService,t,i,e,t.getFormattingOptions()).then(e=>{r.dispose(),o||Object(n["n"])(e)&&(f["a"].execute(this._editor,e,!0),Object(m["b"])(e))},e=>{throw r.dispose(),e})}};O.ID="editor.contrib.autoFormat",O=y([S(1,p["a"])],O);let x=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new a["b"],this._callOnModel=new a["b"],this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(g["j"].onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(47)&&this.editor.hasModel()&&g["j"].has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(m["c"],this.editor,e,2,w["b"].None,o["a"].None).catch(r["f"]))}};x.ID="editor.contrib.formatOnPaste",x=y([S(1,C["a"])],x);class k extends l["b"]{constructor(){super({id:"editor.action.formatDocument",label:b["localize"]("vs/editor/contrib/format/formatActions","formatDocument.label","Format Document"),alias:"Format Document",precondition:_["a"].and(u["a"].notInCompositeEditor,u["a"].writable,u["a"].hasDocumentFormattingProvider),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return L(this,void 0,void 0,(function*(){if(t.hasModel()){const i=e.get(C["a"]),n=e.get(w["a"]);yield n.showWhile(i.invokeFunction(m["d"],t,1,w["b"].None,o["a"].None),250)}}))}}class M extends l["b"]{constructor(){super({id:"editor.action.formatSelection",label:b["localize"]("vs/editor/contrib/format/formatActions","formatSelection.label","Format Selection"),alias:"Format Selection",precondition:_["a"].and(u["a"].writable,u["a"].hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:u["a"].editorTextFocus,primary:Object(s["c"])(2089,2084),weight:100},contextMenuOpts:{when:u["a"].hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return L(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(C["a"]),n=t.getModel(),r=t.getSelections().map(e=>e.isEmpty()?new h["a"](e.startLineNumber,1,e.startLineNumber,n.getLineMaxColumn(e.startLineNumber)):e),s=e.get(w["a"]);yield s.showWhile(i.invokeFunction(m["c"],t,r,1,w["b"].None,o["a"].None),250)}))}}Object(l["l"])(O.ID,O),Object(l["l"])(x.ID,x),Object(l["j"])(k),Object(l["j"])(M),v["a"].registerCommand("editor.action.format",e=>L(void 0,void 0,void 0,(function*(){const t=e.get(c["a"]).getFocusedCodeEditor();if(!t||!t.hasModel())return;const i=e.get(v["b"]);t.getSelection().isEmpty()?yield i.executeCommand("editor.action.formatDocument"):yield i.executeCommand("editor.action.formatSelection")})))},"9c55":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("f295"),o=i("92db"),r=i("cb4a");function s(e,t){return!!e[t]}class a{constructor(e,t){this.target=e.target,this.hasTriggerModifier=s(e.event,t.triggerModifier),this.hasSideBySideModifier=s(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class l{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=s(e,t.triggerModifier)}}class c{constructor(e,t,i,n){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=n}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function d(e){return"altKey"===e?r["f"]?new c(57,"metaKey",6,"altKey"):new c(5,"ctrlKey",6,"altKey"):r["f"]?new c(6,"altKey",57,"metaKey"):new c(6,"altKey",5,"ctrlKey")}class h extends o["a"]{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new n["b"]),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new n["b"]),this.onExecute=this._onExecute.event,this._onCancel=this._register(new n["b"]),this.onCancel=this._onCancel.event,this._editor=e,this._opts=d(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(e=>{if(e.hasChanged(69)){const e=d(this._editor.getOption(69));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(e=>this._onEditorMouseMove(new a(e,this._opts)))),this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(new a(e,this._opts)))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(new a(e,this._opts)))),this._register(this._editor.onKeyDown(e=>this._onEditorKeyDown(new l(e,this._opts)))),this._register(this._editor.onKeyUp(e=>this._onEditorKeyUp(new l(e,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(e=>this._onDidChangeCursorSelection(e))),this._register(this._editor.onDidChangeModel(e=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},"9cc3":function(e,t,i){"use strict";i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return m})),i.d(t,"c",(function(){return f}));var n=i("f123"),o=i("f295"),r=i("8ed8"),s=i("92db"),a=i("1a26"),l=i("1ff1"),c=i("1537"),d=i("d8b0"),h=i("c602"),u=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class g{constructor(e,t,i,n){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=n,this.id=r["b"].nextId()}get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?Object(h["localize"])("vs/editor/contrib/gotoSymbol/referencesModel",{key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",Object(l["b"])(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):Object(h["localize"])("vs/editor/contrib/gotoSymbol/referencesModel","aria.oneReference","symbol in {0} on line {1} at column {2}",Object(l["b"])(this.uri),this.range.startLineNumber,this.range.startColumn)}}class p{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:n,startColumn:o,endLineNumber:r,endColumn:s}=e,a=i.getWordUntilPosition({lineNumber:n,column:o-t}),l=new d["a"](n,a.startColumn,n,o),c=new d["a"](r,s,r,1073741824),h=i.getValueInRange(l).replace(/^\s+/,""),u=i.getValueInRange(e),g=i.getValueInRange(c).replace(/\s+$/,"");return{value:h+u+g,highlight:{start:h.length,end:h.length+u.length}}}}class m{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new a["b"]}dispose(){Object(s["f"])(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?Object(h["localize"])("vs/editor/contrib/gotoSymbol/referencesModel","aria.fileReferences.1","1 symbol in {0}, full path {1}",Object(l["b"])(this.uri),this.uri.fsPath):Object(h["localize"])("vs/editor/contrib/gotoSymbol/referencesModel","aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Object(l["b"])(this.uri),this.uri.fsPath)}resolve(e){return u(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(let i of this.children)if(!this._previews.has(i.uri))try{const t=yield e.createModelReference(i.uri);this._previews.set(i.uri,new p(t))}catch(t){Object(n["f"])(t)}return this}))}}class f{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new o["b"],this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;let n;e.sort(f._compareReferences);for(let o of e)if(n&&l["e"].isEqual(n.uri,o.uri,!0)||(n=new m(this,o.uri),this.groups.push(n)),0===n.children.length||0!==f._compareReferences(o,n.children[n.children.length-1])){const e=new g(i===o,n,o,e=>this._onDidChangeReferenceRange.fire(e));this.references.push(e),n.children.push(e)}}dispose(){Object(s["f"])(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new f(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?Object(h["localize"])("vs/editor/contrib/gotoSymbol/referencesModel","aria.result.0","No results found"):1===this.references.length?Object(h["localize"])("vs/editor/contrib/gotoSymbol/referencesModel","aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?Object(h["localize"])("vs/editor/contrib/gotoSymbol/referencesModel","aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):Object(h["localize"])("vs/editor/contrib/gotoSymbol/referencesModel","aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:i}=e,n=i.children.indexOf(e),o=i.children.length,r=i.parent.groups.length;return 1===r||t&&n+1<o||!t&&n>0?(n=t?(n+1)%o:(n+o-1)%o,i.children[n]):(n=i.parent.groups.indexOf(i),t?(n=(n+1)%r,i.parent.groups[n].children[0]):(n=(n+r-1)%r,i.parent.groups[n].children[i.parent.groups[n].children.length-1]))}nearestReference(e,t){const i=this.references.map((i,n)=>({idx:n,prefixLen:c["d"](i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)})).sort((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&d["a"].containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return l["e"].compare(e.uri,t.uri)||d["a"].compareRangesUsingStarts(e.range,t.range)}}},"9d20":function(e,t,i){"use strict";i.d(t,"b",(function(){return O})),i.d(t,"a",(function(){return k})),i.d(t,"c",(function(){return M})),i.d(t,"d",(function(){return I})),i.d(t,"e",(function(){return E}));var n=i("4d3c"),o=i("945a"),r=i("4163"),s=i("f123"),a=i("bd20"),l=i("bbbb"),c=i("4d73"),d=i("c189"),h=i("5e2a"),u=i("80f8"),g=i("e0ab"),p=i("d8b0"),m=i("17e0"),f=i("d778"),b=i("6fc9"),v=i("d00e"),_=i("fcfd"),C=i("c602"),w=i("d5b7"),y=i("3507"),S=i("bf32"),L=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function O(e){if(e=e.filter(e=>e.range),!e.length)return;let{range:t}=e[0];for(let n=1;n<e.length;n++)t=p["a"].plusRange(t,e[n].range);const{startLineNumber:i,endLineNumber:o}=t;i===o?1===e.length?Object(n["a"])(C["localize"]("vs/editor/contrib/format/format","hint11","Made 1 formatting edit on line {0}",i)):Object(n["a"])(C["localize"]("vs/editor/contrib/format/format","hintn1","Made {0} formatting edits on line {1}",e.length,i)):1===e.length?Object(n["a"])(C["localize"]("vs/editor/contrib/format/format","hint1n","Made 1 formatting edit between lines {0} and {1}",i,o)):Object(n["a"])(C["localize"]("vs/editor/contrib/format/format","hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,i,o))}function x(e){const t=[],i=new Set,n=f["g"].ordered(e);for(const r of n)t.push(r),r.extensionId&&i.add(y["a"].toKey(r.extensionId));const o=f["j"].ordered(e);for(const r of o){if(r.extensionId){if(i.has(y["a"].toKey(r.extensionId)))continue;i.add(y["a"].toKey(r.extensionId))}t.push({displayName:r.displayName,extensionId:r.extensionId,provideDocumentFormattingEdits(e,t,i){return r.provideDocumentRangeFormattingEdits(e,e.getFullModelRange(),t,i)}})}return t}class k{static setFormatterSelector(e){const t=k._selectors.unshift(e);return{dispose:t}}static select(e,t,i){return L(this,void 0,void 0,(function*(){if(0===e.length)return;const n=a["a"].first(k._selectors);return n?yield n(e,t,i):void 0}))}}function M(e,t,i,n,o,r){return L(this,void 0,void 0,(function*(){const s=e.get(S["a"]),a=Object(u["b"])(t)?t.getModel():t,l=f["j"].ordered(a),c=yield k.select(l,a,n);c&&(o.report(c),yield s.invokeFunction(D,c,t,i,r))}))}function D(e,t,i,n,r){return L(this,void 0,void 0,(function*(){const s=e.get(b["a"]);let a,l;Object(u["b"])(i)?(a=i.getModel(),l=new h["b"](i,5,void 0,r)):(a=i,l=new h["d"](i,r));let c=[],d=0;for(let e of Object(o["c"])(n).sort(p["a"].compareRangesUsingStarts))d>0&&p["a"].areIntersectingOrTouching(c[d-1],e)?c[d-1]=p["a"].fromPositions(c[d-1].getStartPosition(),e.getEndPosition()):d=c.push(e);const g=e=>L(this,void 0,void 0,(function*(){return(yield t.provideDocumentRangeFormattingEdits(a,e,a.getFormattingOptions(),l.token))||[]})),f=(e,t)=>{if(!e.length||!t.length)return!1;const i=e.reduce((e,t)=>p["a"].plusRange(e,t.range),e[0].range);if(!t.some(e=>p["a"].intersectRanges(i,e.range)))return!1;for(let n of e)for(let e of t)if(p["a"].intersectRanges(n.range,e.range))return!0;return!1},v=[],C=[];try{for(let e of c){if(l.token.isCancellationRequested)return!0;C.push(yield g(e))}for(let e=0;e<c.length;++e)for(let t=e+1;t<c.length;++t){if(l.token.isCancellationRequested)return!0;if(f(C[e],C[t])){const i=p["a"].plusRange(c[e],c[t]),n=yield g(i);c.splice(t,1),c.splice(e,1),c.push(i),C.splice(t,1),C.splice(e,1),C.push(n),e=0,t=0}}for(let e of C){if(l.token.isCancellationRequested)return!0;const t=yield s.computeMoreMinimalEdits(a.uri,e);t&&v.push(...t)}}finally{l.dispose()}if(0===v.length)return!1;if(Object(u["b"])(i))_["a"].execute(i,v,!0),O(v),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{const[{range:e}]=v,t=new m["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);a.pushEditOperations([t],v.map(e=>({text:e.text,range:p["a"].lift(e.range),forceMoveMarkers:!0})),e=>{for(const{range:i}of e)if(p["a"].areIntersectingOrTouching(i,t))return[new m["a"](i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null})}return!0}))}function I(e,t,i,n,o){return L(this,void 0,void 0,(function*(){const r=e.get(S["a"]),s=Object(u["b"])(t)?t.getModel():t,a=x(s),l=yield k.select(a,s,i);l&&(n.report(l),yield r.invokeFunction(N,l,t,i,o))}))}function N(e,t,i,n,o){return L(this,void 0,void 0,(function*(){const r=e.get(b["a"]);let s,a,l;Object(u["b"])(i)?(s=i.getModel(),a=new h["b"](i,5,void 0,o)):(s=i,a=new h["d"](i,o));try{const e=yield t.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token);if(l=yield r.computeMoreMinimalEdits(s.uri,e),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||0===l.length)return!1;if(Object(u["b"])(i))_["a"].execute(i,l,2!==n),2!==n&&(O(l),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1));else{const[{range:e}]=l,t=new m["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);s.pushEditOperations([t],l.map(e=>({text:e.text,range:p["a"].lift(e.range),forceMoveMarkers:!0})),e=>{for(const{range:i}of e)if(p["a"].areIntersectingOrTouching(i,t))return[new m["a"](i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null})}return!0}))}function R(e,t,i,n,r){return L(this,void 0,void 0,(function*(){const a=f["j"].ordered(t);for(const l of a){let a=yield Promise.resolve(l.provideDocumentRangeFormattingEdits(t,i,n,r)).catch(s["g"]);if(Object(o["n"])(a))return yield e.computeMoreMinimalEdits(t.uri,a)}}))}function P(e,t,i,n){return L(this,void 0,void 0,(function*(){const r=x(t);for(const a of r){let r=yield Promise.resolve(a.provideDocumentFormattingEdits(t,i,n)).catch(s["g"]);if(Object(o["n"])(r))return yield e.computeMoreMinimalEdits(t.uri,r)}}))}function E(e,t,i,n,o){const a=f["x"].ordered(t);return 0===a.length||a[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,n,o,r["a"].None)).catch(s["g"]).then(i=>e.computeMoreMinimalEdits(t.uri,i))}k._selectors=new l["a"],w["a"].registerCommand("_executeFormatRangeProvider",(function(e,...t){return L(this,void 0,void 0,(function*(){const[i,n,o]=t;Object(c["c"])(d["a"].isUri(i)),Object(c["c"])(p["a"].isIRange(n));const s=e.get(v["a"]),a=e.get(b["a"]),l=yield s.createModelReference(i);try{return R(a,l.object.textEditorModel,p["a"].lift(n),o,r["a"].None)}finally{l.dispose()}}))})),w["a"].registerCommand("_executeFormatDocumentProvider",(function(e,...t){return L(this,void 0,void 0,(function*(){const[i,n]=t;Object(c["c"])(d["a"].isUri(i));const o=e.get(v["a"]),s=e.get(b["a"]),a=yield o.createModelReference(i);try{return P(s,a.object.textEditorModel,n,r["a"].None)}finally{a.dispose()}}))})),w["a"].registerCommand("_executeFormatOnTypeProvider",(function(e,...t){return L(this,void 0,void 0,(function*(){const[i,n,o,r]=t;Object(c["c"])(d["a"].isUri(i)),Object(c["c"])(g["a"].isIPosition(n)),Object(c["c"])("string"===typeof o);const s=e.get(v["a"]),a=e.get(b["a"]),l=yield s.createModelReference(i);try{return E(a,l.object.textEditorModel,g["a"].lift(n),o,r)}finally{l.dispose()}}))}))},a7ad:function(e,t,i){"use strict";function n(e,t){let i=0;for(let n=0;n<e.length;n++)"\t"===e.charAt(n)?i+=t:i++;return i}function o(e,t,i){e=e<0?0:e;let n="";if(!i){let i=Math.floor(e/t);e%=t;for(let e=0;e<i;e++)n+="\t"}for(let o=0;o<e;o++)n+=" ";return n}i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return o}))},a974:function(e,t,i){"use strict";i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return h})),i.d(t,"c",(function(){return u})),i.d(t,"e",(function(){return g})),i.d(t,"d",(function(){return p}));var n=i("4163"),o=i("f123"),r=i("ae58"),s=i("d778"),a=i("9cc3"),l=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function c(e,t,i,n){const r=i.ordered(e),s=r.map(i=>Promise.resolve(n(i,e,t)).then(void 0,e=>{Object(o["g"])(e)}));return Promise.all(s).then(e=>{const t=[];for(let i of e)Array.isArray(i)?t.push(...i):i&&t.push(i);return t})}function d(e,t,i){return c(e,t,s["f"],(e,t,n)=>e.provideDefinition(t,n,i))}function h(e,t,i){return c(e,t,s["e"],(e,t,n)=>e.provideDeclaration(t,n,i))}function u(e,t,i){return c(e,t,s["q"],(e,t,n)=>e.provideImplementation(t,n,i))}function g(e,t,i){return c(e,t,s["G"],(e,t,n)=>e.provideTypeDefinition(t,n,i))}function p(e,t,i,n){return c(e,t,s["y"],(e,t,o)=>l(this,void 0,void 0,(function*(){const r=yield e.provideReferences(t,o,{includeDeclaration:!0},n);if(!i||!r||2!==r.length)return r;const s=yield e.provideReferences(t,o,{includeDeclaration:!1},n);return s&&1===s.length?s:r})))}function m(e){return l(this,void 0,void 0,(function*(){const t=yield e(),i=new a["c"](t,""),n=i.references.map(e=>e.link);return i.dispose(),n}))}Object(r["n"])("_executeDefinitionProvider",(e,t)=>m(()=>d(e,t,n["a"].None))),Object(r["n"])("_executeDeclarationProvider",(e,t)=>m(()=>h(e,t,n["a"].None))),Object(r["n"])("_executeImplementationProvider",(e,t)=>m(()=>u(e,t,n["a"].None))),Object(r["n"])("_executeTypeDefinitionProvider",(e,t)=>m(()=>g(e,t,n["a"].None))),Object(r["n"])("_executeReferenceProvider",(e,t)=>m(()=>p(e,t,!1,n["a"].None)))},b309:function(e,t,i){"use strict";i.r(t),i.d(t,"getInlayHints",(function(){return k})),i.d(t,"InlayHintsController",(function(){return D}));var n=i("4b4a"),o=i("4163"),r=i("f123"),s=i("f28f"),a=i("92db"),l=i("1a26"),c=i("4d73"),d=i("c189"),h=i("ae58"),u=i("47f8"),g=i("7be4"),p=i("e0ab"),m=i("d8b0"),f=i("d778"),b=i("0650"),v=i("d00e"),_=i("d5b7"),C=i("f7fb"),w=i("d1e2"),y=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},S=function(e,t){return function(i,n){t(i,n,e)}},L=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const O=1500;class x{constructor(){this._data=new l["b"]}push(e,t){const i=this._data.get(e.uri);void 0===i?this._data.set(e.uri,new Set([t])):i.add(t)}pop(e,t){const i=this._data.get(e.uri);i&&(i.delete(t),0===i.size&&this._data.delete(e.uri))}has(e,t){var i;return Boolean(null===(i=this._data.get(e.uri))||void 0===i?void 0:i.has(t))}}function k(e,t,i,n){return L(this,void 0,void 0,(function*(){const o=[],s=f["s"].ordered(e).reverse(),a=s.map(s=>t.map(t=>L(this,void 0,void 0,(function*(){try{i.push(e,s);const r=yield s.provideInlayHints(e,t,n);(null===r||void 0===r?void 0:r.length)&&o.push(r.filter(e=>t.containsPosition(e.position)))}catch(a){Object(r["g"])(a)}finally{i.pop(e,s)}}))));return yield Promise.all(a.flat()),o.flat().sort((e,t)=>p["a"].compare(e.position,t.position))}))}class M{constructor(){this._entries=new l["a"](50)}get(e){const t=M._key(e);return this._entries.get(t)}set(e,t){const i=M._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}let D=class e{constructor(t,i){this._editor=t,this._codeEditorService=i,this._decorationOwnerId=++e._decorationOwnerIdPool,this._disposables=new a["b"],this._sessionDisposables=new a["b"],this._getInlayHintsDelays=new b["b"](f["s"],25,500),this._cache=new M,this._decorations=new Map,this._disposables.add(f["s"].onDidChange(()=>this._update())),this._disposables.add(t.onDidChangeModel(()=>this._update())),this._disposables.add(t.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(t.onDidChangeConfiguration(e=>{e.hasChanged(125)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(125).enabled)return;const e=this._editor.getModel();if(!e||!f["s"].has(e))return;const t=this._cache.get(e);t&&this._updateHintsDecorators([e.getFullModelRange()],t);const i=new x,r=new n["e"](()=>L(this,void 0,void 0,(function*(){const t=Date.now(),n=new o["b"];this._sessionDisposables.add(Object(a["i"])(()=>n.dispose(!0)));const s=this._getHintsRanges(),l=yield k(e,s,i,n.token);r.delay=this._getInlayHintsDelays.update(e,Date.now()-t),n.token.isCancellationRequested||(this._updateHintsDecorators(s,l),this._cache.set(e,Array.from(this._decorations.values()).map(e=>e.hint)))})),this._getInlayHintsDelays.get(e));this._sessionDisposables.add(r),this._sessionDisposables.add(this._editor.onDidChangeModelContent(()=>r.schedule())),this._disposables.add(this._editor.onDidScrollChange(()=>r.schedule())),r.schedule();const s=new a["b"];this._sessionDisposables.add(s);for(const n of f["s"].all(e))"function"===typeof n.onDidChangeInlayHints&&s.add(n.onDidChangeInlayHints(()=>{i.has(e,n)||r.schedule()}))}_getHintsRanges(){const e=30,t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),n=[];for(const o of i.sort(m["a"].compareRangesUsingStarts)){const i=t.validateRange(new m["a"](o.startLineNumber-e,o.startColumn,o.endLineNumber+e,o.endColumn));0!==n.length&&m["a"].areIntersectingOrTouching(n[n.length-1],i)?n[n.length-1]=m["a"].plusRange(n[n.length-1],i):n.push(i)}return n}_updateHintsDecorators(e,t){const{fontSize:i,fontFamily:n}=this._getLayoutInfo(),o=this._editor.getModel(),r=[],a=[],l="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(l,n);for(const h of t){const{text:e,position:t,whitespaceBefore:n,whitespaceAfter:c}=h,d=n?i/3|0:0,u=c?i/3|0:0,p={contentText:N(e),fontSize:i+"px",margin:`0px ${u}px 0px ${d}px`,fontFamily:`var(${l}), ${g["c"].fontFamily}`,padding:`1px ${0|Math.max(1,i/4)}px`,borderRadius:(i/4|0)+"px",verticalAlign:"middle",backgroundColor:Object(w["g"])(C["N"]),color:Object(w["g"])(C["O"])};h.kind===f["r"].Parameter?(p.backgroundColor=Object(w["g"])(C["P"]),p.color=Object(w["g"])(C["Q"])):h.kind===f["r"].Type&&(p.backgroundColor=Object(w["g"])(C["R"]),p.color=Object(w["g"])(C["S"]));let b={beforeInjectedText:Object.assign(Object.assign({},p),{affectsLetterSpacing:!0})},v=m["a"].fromPositions(t),_=o.getWordAtPosition(t),y=!1;_&&(_.endColumn===t.column?(b.afterInjectedText=b.beforeInjectedText,b.beforeInjectedText=void 0,y=!0,v=I(_,t.lineNumber)):_.startColumn===t.column&&(y=!0,v=I(_,t.lineNumber)));const S="inlayHints-"+Object(s["c"])(b).toString(16);this._codeEditorService.registerDecorationType("inlay-hints-controller",S,b,void 0,this._editor),r.push(S);const L=a.push({range:v,options:Object.assign(Object.assign({},this._codeEditorService.resolveDecorationOptions(S,!0)),{showIfCollapsed:!y,stickiness:0})});if(L>O)break}const c=[];for(const s of e)for(const{id:e}of o.getDecorationsInRange(s,this._decorationOwnerId,!0)){const t=this._decorations.get(e);t&&(c.push(e),this._codeEditorService.removeDecorationType(t.decorationTypeId),this._decorations.delete(e))}const d=o.deltaDecorations(c,a,this._decorationOwnerId);for(let s=0;s<d.length;s++)this._decorations.set(d[s],{hint:t[s],decorationTypeId:r[s]})}_getLayoutInfo(){const e=this._editor.getOption(125),t=this._editor.getOption(45);let i=e.fontSize;(!i||i<5||i>t)&&(i=.9*t|0);const n=e.fontFamily||this._editor.getOption(42);return{fontSize:i,fontFamily:n}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorations.keys()),[]);for(let e of this._decorations.values())this._codeEditorService.removeDecorationType(e.decorationTypeId);this._decorations.clear()}};function I(e,t){return new m["a"](t,e.startColumn,t,e.endColumn)}function N(e){const t=" ";return e.replace(/[ \t]/g,t)}D.ID="editor.contrib.InlayHints",D._decorationOwnerIdPool=0,D=y([S(1,u["a"])],D),Object(h["l"])(D.ID,D),_["a"].registerCommand("_executeInlayHintProvider",(e,...t)=>L(void 0,void 0,void 0,(function*(){const[i,n]=t;Object(c["c"])(d["a"].isUri(i)),Object(c["c"])(m["a"].isIRange(n));const r=yield e.get(v["a"]).createModelReference(i);try{const e=yield k(r.object.textEditorModel,[m["a"].lift(n)],new x,o["a"].None);return e}finally{r.dispose()}})))},bec3:function(e,t,i){"use strict";i.r(t),i.d(t,"MarkerController",(function(){return ne})),i.d(t,"NextMarkerAction",(function(){return re}));var n=i("47a8"),o=i("92db"),r=i("ae58"),s=i("47f8"),a=i("e0ab"),l=i("d8b0"),c=i("7c05"),d=i("945a"),h=i("f295"),u=i("bbbb"),g=i("1537"),p=i("c189"),m=i("3f3e"),f=i("bf32"),b=i("0c01"),v=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},_=function(e,t){return function(i,n){t(i,n,e)}};class C{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let w=class e{constructor(t,i){this._markerService=i,this._onDidChange=new h["b"],this.onDidChange=this._onDidChange.event,this._dispoables=new o["b"],this._markers=[],this._nextIdx=-1,p["a"].isUri(t)?this._resourceFilter=e=>e.toString()===t.toString():t&&(this._resourceFilter=t);const n=()=>{this._markers=this._markerService.read({resource:p["a"].isUri(t)?t:void 0,severities:b["c"].Error|b["c"].Warning|b["c"].Info}),"function"===typeof t&&(this._markers=this._markers.filter(e=>this._resourceFilter(e.resource))),this._markers.sort(e._compareMarker)};n(),this._dispoables.add(i.onMarkerChanged(e=>{this._resourceFilter&&!e.some(e=>this._resourceFilter(e))||(n(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new C(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let n=!1,o=this._markers.findIndex(t=>t.resource.toString()===e.uri.toString());o<0&&(o=Object(d["d"])(this._markers,{resource:e.uri},(e,t)=>Object(g["f"])(e.resource.toString(),t.resource.toString())),o<0&&(o=~o));for(let r=o;r<this._markers.length;r++){let i=l["a"].lift(this._markers[r]);if(i.isEmpty()){const t=e.getWordAtPosition(i.getStartPosition());t&&(i=new l["a"](i.startLineNumber,t.startColumn,i.startLineNumber,t.endColumn))}if(t&&(i.containsPosition(t)||t.isBeforeOrEqual(i.getStartPosition()))){this._nextIdx=r,n=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}n||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(0===this._markers.length)return!1;let n=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(e,t){let i=this._markers.findIndex(t=>t.resource.toString()===e.toString());if(!(i<0))for(;i<this._markers.length;i++)if(l["a"].containsPosition(this._markers[i],t))return new C(this._markers[i],i+1,this._markers.length)}static _compareMarker(e,t){let i=Object(g["f"])(e.resource.toString(),t.resource.toString());return 0===i&&(i=b["c"].compare(e.severity,t.severity)),0===i&&(i=l["a"].compareRangesUsingStarts(e,t)),i}};w=v([_(1,b["b"])],w);const y=Object(f["c"])("IMarkerNavigationService");let S=class{constructor(e){this._markerService=e,this._provider=new u["a"]}getMarkerList(e){for(let t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new w(e,this._markerService)}};S=v([_(0,b["b"])],S),Object(m["b"])(y,S,!0);var L=i("c602"),O=i("cd62"),x=i("6ad4"),k=i("6276"),M=i("d208"),D=i("adab"),I=i("98ef"),N=i("f55d"),R=i("1ff1"),P=(i("630c"),i("8ec0")),E=i("5b7f"),T=i("3c41"),A=i("0aba"),j=i("cd76"),z=i("f7fb"),W=i("d1e2"),F=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},U=function(e,t){return function(i,n){t(i,n,e)}};class V{constructor(e,t,i,n,r){this._openerService=n,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new o["b"],this._editor=t;const s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(M["o"](this._relatedBlock,"click",e=>{e.preventDefault();const t=this._relatedDiagnostics.get(e.target);t&&i(t)})),this._scrollable=new D["b"](s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(e=>{s.style.left=`-${e.scrollLeft}px`,s.style.top=`-${e.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){Object(o["f"])(this._disposables)}update(e){const{source:t,message:i,relatedInformation:n,code:o}=e;let r=((null===t||void 0===t?void 0:t.length)||0)+"()".length;o&&(r+="string"===typeof o?o.length:o.value.length);const s=Object(g["Q"])(i);this._lines=s.length,this._longestLineLength=0;for(const d of s)this._longestLineLength=Math.max(d.length+r,this._longestLineLength);M["t"](this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let a=this._messageBlock;for(const d of s)a=document.createElement("div"),a.innerText=d,""===d&&(a.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(a);if(t||o){const e=document.createElement("span");if(e.classList.add("details"),a.appendChild(e),t){const i=document.createElement("span");i.innerText=t,i.classList.add("source"),e.appendChild(i)}if(o)if("string"===typeof o){const t=document.createElement("span");t.innerText=`(${o})`,t.classList.add("code"),e.appendChild(t)}else{this._codeLink=M["a"]("a.code-link"),this._codeLink.setAttribute("href",""+o.target.toString()),this._codeLink.onclick=e=>{this._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};const t=M["q"](this._codeLink,M["a"]("span"));t.innerText=o.value,e.appendChild(this._codeLink)}}if(M["t"](this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Object(d["n"])(n)){const e=this._relatedBlock.appendChild(document.createElement("div"));e.style.paddingTop=Math.floor(.66*this._editor.getOption(58))+"px",this._lines+=1;for(const t of n){let i=document.createElement("div"),n=document.createElement("a");n.classList.add("filename"),n.innerText=`${Object(N["a"])(t.resource)}(${t.startLineNumber}, ${t.startColumn}): `,n.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(n,t);let o=document.createElement("span");o.innerText=t.message,i.appendChild(n),i.appendChild(o),this._lines+=1,e.appendChild(i)}}const l=this._editor.getOption(43),c=Math.ceil(l.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=l.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:c,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=e+"px",this._scrollable.getDomNode().style.width=t+"px",this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case b["c"].Error:t=L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","Error","Error");break;case b["c"].Warning:t=L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","Warning","Warning");break;case b["c"].Info:t=L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","Info","Info");break;case b["c"].Hint:t=L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","Hint","Hint");break}let i=L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const n=this._editor.getModel();if(n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1){const t=n.getLineContent(e.startLineNumber);i=`${t}, ${i}`}return i}}let H=class e extends P["c"]{constructor(e,t,i,n,r,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},r),this._themeService=t,this._openerService=i,this._menuService=n,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new o["b"],this._onDidSelectRelatedInformation=new h["b"],this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=b["c"].Warning,this._backgroundColor=I["a"].white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(Y);let t=$,i=G;this._severity===b["c"].Warning?(t=Z,i=J):this._severity===b["c"].Info&&(t=Q,i=X);const n=e.getColor(t),o=e.getColor(i);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:o,primaryHeadingColor:e.getColor(P["q"]),secondaryHeadingColor:e.getColor(P["r"])})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(t){super._fillHead(t),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(e=>this.editor.focus()));const i=[],n=this._menuService.createMenu(e.TitleMenu,this._contextKeyService);Object(E["c"])(n,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=M["q"](e,M["a"](""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new V(this._container,this.editor,e=>this._onDidSelectRelatedInformation.fire(e),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let n=l["a"].lift(e);const o=this.editor.getPosition();let r=o&&n.containsPosition(o)?o:n.getStartPosition();super.show(r,this.computeRequiredHeight());const s=this.editor.getModel();if(s){const e=i>1?L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","problems","{0} of {1} problems",t,i):L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","change","{0} of {1} problem",t,i);this.setTitle(Object(R["b"])(s.uri),e)}this._icon.className="codicon "+j["a"].className(b["c"].toSeverity(this._severity)),this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=e+"px"}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};H.TitleMenu=new O["b"]("gotoErrorTitleMenu"),H=F([U(1,W["b"]),U(2,A["a"]),U(3,O["a"]),U(4,f["a"]),U(5,x["b"]),U(6,T["a"])],H);let K=Object(z["nc"])(z["u"],z["t"]),B=Object(z["nc"])(z["bb"],z["ab"]),q=Object(z["nc"])(z["M"],z["L"]);const $=Object(z["Cc"])("editorMarkerNavigationError.background",{dark:K,light:K,hc:z["h"]},L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","editorMarkerNavigationError","Editor marker navigation widget error color.")),G=Object(z["Cc"])("editorMarkerNavigationError.headerBackground",{dark:Object(z["Rc"])($,.1),light:Object(z["Rc"])($,.1),hc:null},L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Z=Object(z["Cc"])("editorMarkerNavigationWarning.background",{dark:B,light:B,hc:z["h"]},L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),J=Object(z["Cc"])("editorMarkerNavigationWarning.headerBackground",{dark:Object(z["Rc"])(Z,.1),light:Object(z["Rc"])(Z,.1),hc:"#0C141F"},L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),Q=Object(z["Cc"])("editorMarkerNavigationInfo.background",{dark:q,light:q,hc:z["h"]},L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","editorMarkerNavigationInfo","Editor marker navigation widget info color.")),X=Object(z["Cc"])("editorMarkerNavigationInfo.headerBackground",{dark:Object(z["Rc"])(Q,.1),light:Object(z["Rc"])(Q,.1),hc:null},L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),Y=Object(z["Cc"])("editorMarkerNavigation.background",{dark:z["r"],light:z["r"],hc:z["r"]},L["localize"]("vs/editor/contrib/gotoError/gotoErrorWidget","editorMarkerNavigationBackground","Editor marker navigation widget background."));Object(W["f"])((e,t)=>{const i=e.getColor(z["Pc"]);i&&t.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${i}; }`);const n=e.getColor(z["Oc"]);n&&t.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${n}; }`)});var ee=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},te=function(e,t){return function(i,n){t(i,n,e)}},ie=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let ne=class e{constructor(e,t,i,n,r){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=n,this._instantiationService=r,this._sessionDispoables=new o["b"],this._editor=e,this._widgetVisible=ce.bindTo(this._contextKeyService)}static get(t){return t.getContribution(e.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(H,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e=>{var t,i,n;(null===(t=this._model)||void 0===t?void 0:t.selected)&&l["a"].containsPosition(null===(i=this._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(n=this._model)||void 0===n||n.resetIndex()})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:l["a"].lift(e).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new a["a"](e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(t,i){return ie(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(i?void 0:this._editor.getModel().uri);if(n.move(t,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const o=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);o&&(e.get(o).close(),e.get(o).nagivate(t,i))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}}))}};ne.ID="editor.contrib.markerController",ne=ee([te(1,y),te(2,x["b"]),te(3,s["a"]),te(4,f["a"])],ne);class oe extends r["b"]{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}run(e,t){return ie(this,void 0,void 0,(function*(){t.hasModel()&&ne.get(t).nagivate(this._next,this._multiFile)}))}}class re extends oe{constructor(){super(!0,!1,{id:re.ID,label:re.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c["a"].focus,primary:578,weight:100},menuOpts:{menuId:H.TitleMenu,title:re.LABEL,icon:Object(k["b"])("marker-navigation-next",n["b"].arrowDown,L["localize"]("vs/editor/contrib/gotoError/gotoError","nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}re.ID="editor.action.marker.next",re.LABEL=L["localize"]("vs/editor/contrib/gotoError/gotoError","markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class se extends oe{constructor(){super(!1,!1,{id:se.ID,label:se.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c["a"].focus,primary:1602,weight:100},menuOpts:{menuId:H.TitleMenu,title:re.LABEL,icon:Object(k["b"])("marker-navigation-previous",n["b"].arrowUp,L["localize"]("vs/editor/contrib/gotoError/gotoError","previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}se.ID="editor.action.marker.prev",se.LABEL=L["localize"]("vs/editor/contrib/gotoError/gotoError","markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class ae extends oe{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:L["localize"]("vs/editor/contrib/gotoError/gotoError","markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c["a"].focus,primary:66,weight:100},menuOpts:{menuId:O["b"].MenubarGoMenu,title:L["localize"]("vs/editor/contrib/gotoError/gotoError",{key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class le extends oe{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:L["localize"]("vs/editor/contrib/gotoError/gotoError","markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c["a"].focus,primary:1090,weight:100},menuOpts:{menuId:O["b"].MenubarGoMenu,title:L["localize"]("vs/editor/contrib/gotoError/gotoError",{key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Object(r["l"])(ne.ID,ne),Object(r["j"])(re),Object(r["j"])(se),Object(r["j"])(ae),Object(r["j"])(le);const ce=new x["c"]("markersNavigationVisible",!1),de=r["c"].bindToContribution(ne.get);Object(r["k"])(new de({id:"closeMarkersNavigation",precondition:ce,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:c["a"].focus,primary:9,secondary:[1033]}}))},f110:function(e,t,i){"use strict";i.r(t),i.d(t,"DuplicateSelectionAction",(function(){return D})),i.d(t,"AbstractSortLinesAction",(function(){return P})),i.d(t,"SortLinesAscendingAction",(function(){return E})),i.d(t,"SortLinesDescendingAction",(function(){return T})),i.d(t,"DeleteDuplicateLinesAction",(function(){return A})),i.d(t,"TrimTrailingWhitespaceAction",(function(){return j})),i.d(t,"DeleteLinesAction",(function(){return z})),i.d(t,"IndentLinesAction",(function(){return W})),i.d(t,"InsertLineBeforeAction",(function(){return U})),i.d(t,"InsertLineAfterAction",(function(){return V})),i.d(t,"AbstractDeleteAllToBoundaryAction",(function(){return H})),i.d(t,"DeleteAllLeftAction",(function(){return K})),i.d(t,"DeleteAllRightAction",(function(){return B})),i.d(t,"JoinLinesAction",(function(){return q})),i.d(t,"TransposeAction",(function(){return $})),i.d(t,"AbstractCaseAction",(function(){return G})),i.d(t,"UpperCaseAction",(function(){return Z})),i.d(t,"LowerCaseAction",(function(){return J})),i.d(t,"TitleCaseAction",(function(){return X})),i.d(t,"SnakeCaseAction",(function(){return Y}));var n=i("d3a2"),o=i("09c9"),r=i("ae58"),s=i("0fff"),a=i("c785"),l=i("b4a6"),c=i("ae41"),d=i("e0ab"),h=i("d8b0"),u=i("17e0"),g=i("7c05");class p{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));let n=[];for(let r=i.startLineNumber;r<=i.endLineNumber;r++)n.push(e.getLineContent(r));const o=n.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new h["a"](i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new h["a"](i.startLineNumber,1,i.startLineNumber,1),o+"\n"):t.addEditOperation(new h["a"](i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){let e=i.startLineNumber,t=i.startColumn,n=i.endLineNumber,o=i.endColumn;0!==this._startLineNumberDelta&&(e+=this._startLineNumberDelta,t=1),0!==this._endLineNumberDelta&&(n+=this._endLineNumberDelta,o=1),i=u["a"].createWithDirection(e,t,n,o,this._selectionDirection)}return i}}var m=i("1537"),f=i("8e1a"),b=i("1f8e"),v=i("6b8c"),_=i("a7ad");class C{constructor(e,t,i){this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i)return void(this._selectionId=t.trackSelection(this._selection));if(!this._isMovingDown&&1===this._selection.startLineNumber)return void(this._selectionId=t.trackSelection(this._selection));this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const{tabSize:o,indentSize:r,insertSpaces:s}=e.getOptions();let a=this.buildIndentConverter(o,r,s),l={getLineTokens:t=>e.getLineTokens(t),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(t,i)=>e.getLanguageIdAtPosition(t,i),getLineContent:null};if(n.startLineNumber===n.endLineNumber&&1===e.getLineMaxColumn(n.startLineNumber)){let i=n.startLineNumber,o=this._isMovingDown?i+1:i-1;1===e.getLineMaxColumn(o)?t.addEditOperation(new h["a"](1,1,1,1),null):(t.addEditOperation(new h["a"](i,1,i,1),e.getLineContent(o)),t.addEditOperation(new h["a"](o,1,o,e.getLineMaxColumn(o)),null)),n=new u["a"](o,1,o,1)}else{let i,r;if(this._isMovingDown){i=n.endLineNumber+1,r=e.getLineContent(i),t.addEditOperation(new h["a"](i-1,e.getLineMaxColumn(i-1),i,e.getLineMaxColumn(i)),null);let c=r;if(this.shouldAutoIndent(e,n)){let d=this.matchEnterRule(e,a,o,i,n.startLineNumber-1);if(null!==d){let t=m["x"](e.getLineContent(i)),n=d+_["b"](t,o),a=_["a"](n,o,s);c=a+this.trimLeft(r)}else{l.getLineContent=t=>t===n.startLineNumber?e.getLineContent(i):e.getLineContent(t);let t=v["b"].getGoodIndentForLine(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber,a);if(null!==t){let n=m["x"](e.getLineContent(i)),a=_["b"](t,o),l=_["b"](n,o);if(a!==l){let e=_["a"](a,o,s);c=e+this.trimLeft(r)}}}t.addEditOperation(new h["a"](n.startLineNumber,1,n.startLineNumber,1),c+"\n");let u=this.matchEnterRuleMovingDown(e,a,o,n.startLineNumber,i,c);if(null!==u)0!==u&&this.getIndentEditsOfMovingBlock(e,t,n,o,s,u);else{l.getLineContent=t=>t===n.startLineNumber?c:t>=n.startLineNumber+1&&t<=n.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t);let r=v["b"].getGoodIndentForLine(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber+1,a);if(null!==r){const i=m["x"](e.getLineContent(n.startLineNumber)),a=_["b"](r,o),l=_["b"](i,o);if(a!==l){const i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,s,i)}}}}else t.addEditOperation(new h["a"](n.startLineNumber,1,n.startLineNumber,1),c+"\n")}else if(i=n.startLineNumber-1,r=e.getLineContent(i),t.addEditOperation(new h["a"](i,1,i+1,1),null),t.addEditOperation(new h["a"](n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+r),this.shouldAutoIndent(e,n)){l.getLineContent=t=>t===i?e.getLineContent(n.startLineNumber):e.getLineContent(t);let r=this.matchEnterRule(e,a,o,n.startLineNumber,n.startLineNumber-2);if(null!==r)0!==r&&this.getIndentEditsOfMovingBlock(e,t,n,o,s,r);else{let r=v["b"].getGoodIndentForLine(this._autoIndent,l,e.getLanguageIdAtPosition(n.startLineNumber,1),i,a);if(null!==r){let i=m["x"](e.getLineContent(n.startLineNumber)),a=_["b"](r,o),l=_["b"](i,o);if(a!==l){let i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,s,i)}}}}}this._selectionId=t.trackSelection(n)}buildIndentConverter(e,t,i){return{shiftIndent:n=>f["a"].shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>f["a"].unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,o){if(o){let r=o.indentation;o.indentAction===b["b"].None||o.indentAction===b["b"].Indent?r=o.indentation+o.appendText:o.indentAction===b["b"].IndentOutdent?r=o.indentation:o.indentAction===b["b"].Outdent&&(r=t.unshiftIndent(o.indentation)+o.appendText);let s=e.getLineContent(n);if(this.trimLeft(s).indexOf(this.trimLeft(r))>=0){let o=m["x"](e.getLineContent(n)),s=m["x"](r),a=v["b"].getIndentMetadata(e,n);null!==a&&2&a&&(s=t.unshiftIndent(s));let l=_["b"](s,i),c=_["b"](o,i);return l-c}}return null}matchEnterRuleMovingDown(e,t,i,n,o,r){if(m["I"](r)>=0){let r=e.getLineMaxColumn(o),s=v["b"].getEnterAction(this._autoIndent,e,new h["a"](o,r,o,r));return this.parseEnterResult(e,t,i,n,s)}{let o=n-1;while(o>=1){let t=e.getLineContent(o),i=m["I"](t);if(i>=0)break;o--}if(o<1||n>e.getLineCount())return null;let r=e.getLineMaxColumn(o),s=v["b"].getEnterAction(this._autoIndent,e,new h["a"](o,r,o,r));return this.parseEnterResult(e,t,i,n,s)}}matchEnterRule(e,t,i,n,o,r){let s=o;while(s>=1){let t;t=s===o&&void 0!==r?r:e.getLineContent(s);let i=m["I"](t);if(i>=0)break;s--}if(s<1||n>e.getLineCount())return null;let a=e.getLineMaxColumn(s),l=v["b"].getEnterAction(this._autoIndent,e,new h["a"](s,a,s,a));return this.parseEnterResult(e,t,i,n,l)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4)return!1;if(!e.isCheapToTokenize(t.startLineNumber))return!1;let i=e.getLanguageIdAtPosition(t.startLineNumber,1),n=e.getLanguageIdAtPosition(t.endLineNumber,1);return i===n&&null!==v["b"].getIndentRulesSupport(i)}getIndentEditsOfMovingBlock(e,t,i,n,o,r){for(let s=i.startLineNumber;s<=i.endLineNumber;s++){let a=e.getLineContent(s),l=m["x"](a),c=_["b"](l,n),d=c+r,u=_["a"](d,n,o);u!==l&&(t.addEditOperation(new h["a"](s,1,s,l.length+1),u),s===i.endLineNumber&&i.endColumn<=l.length+1&&""===u&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}}class w{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return w._COLLATOR||(w._COLLATOR=new Intl.Collator),w._COLLATOR}getEditOperations(e,t){let i=S(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(null===e)return!1;let n=y(e,t,i);if(!n)return!1;for(let o=0,r=n.before.length;o<r;o++)if(n.before[o]!==n.after[o])return!0;return!1}}function y(e,t,i){let n=t.startLineNumber,o=t.endLineNumber;if(1===t.endColumn&&o--,n>=o)return null;let r=[];for(let a=n;a<=o;a++)r.push(e.getLineContent(a));let s=r.slice(0);return s.sort(w.getCollator().compare),!0===i&&(s=s.reverse()),{startLineNumber:n,endLineNumber:o,before:r,after:s}}function S(e,t,i){let n=y(e,t,i);return n?c["a"].replace(new h["a"](n.startLineNumber,1,n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),n.after.join("\n")):null}w._COLLATOR=null;var L=i("c602"),O=i("cd62");class x extends r["b"]{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map((e,t)=>({selection:e,index:t,ignore:!1}));i.sort((e,t)=>h["a"].compareRangesUsingStarts(e.selection,t.selection));let n=i[0];for(let r=1;r<i.length;r++){const e=i[r];n.selection.endLineNumber===e.selection.startLineNumber&&(n.index<e.index?e.ignore=!0:(n.ignore=!0,n=e))}const o=[];for(const r of i)o.push(new p(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class k extends x{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:O["b"].MenubarSelectionMenu,group:"2_line",title:L["localize"]("vs/editor/contrib/linesOperations/linesOperations",{key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class M extends x{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:O["b"].MenubarSelectionMenu,group:"2_line",title:L["localize"]("vs/editor/contrib/linesOperations/linesOperations",{key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class D extends r["b"]{constructor(){super({id:"editor.action.duplicateSelection",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:g["a"].writable,menuOpts:{menuId:O["b"].MenubarSelectionMenu,group:"2_line",title:L["localize"]("vs/editor/contrib/linesOperations/linesOperations",{key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const n=[],o=t.getSelections(),r=t.getModel();for(const a of o)if(a.isEmpty())n.push(new p(a,!0));else{const e=new u["a"](a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);n.push(new s["c"](e,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class I extends r["b"]{constructor(e,t){super(t),this.down=e}run(e,t){let i=[],n=t.getSelections()||[];const o=t.getOption(9);for(const r of n)i.push(new C(r,this.down,o));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class N extends I{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:O["b"].MenubarSelectionMenu,group:"2_line",title:L["localize"]("vs/editor/contrib/linesOperations/linesOperations",{key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class R extends I{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:O["b"].MenubarSelectionMenu,group:"2_line",title:L["localize"]("vs/editor/contrib/linesOperations/linesOperations",{key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class P extends r["b"]{constructor(e,t){super(t),this.descending=e}run(e,t){const i=t.getSelections()||[];for(const o of i)if(!w.canRun(t.getModel(),o,this.descending))return;let n=[];for(let o=0,r=i.length;o<r;o++)n[o]=new w(i[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class E extends P{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:g["a"].writable})}}class T extends P{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:g["a"].writable})}}class A extends r["b"]{constructor(){super({id:"editor.action.removeDuplicateLines",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:g["a"].writable})}run(e,t){if(!t.hasModel())return;let i=t.getModel();if(1===i.getLineCount()&&1===i.getLineMaxColumn(1))return;let n=[],o=[],r=0;for(let s of t.getSelections()){let e=new Set,t=[];for(let n=s.startLineNumber;n<=s.endLineNumber;n++){let o=i.getLineContent(n);e.has(o)||(t.push(o),e.add(o))}let a=new u["a"](s.startLineNumber,1,s.endLineNumber,i.getLineMaxColumn(s.endLineNumber)),l=s.startLineNumber-r,d=new u["a"](l,1,l+t.length-1,t[t.length-1].length);n.push(c["a"].replace(a,t.join("\n"))),o.push(d),r+=s.endLineNumber-s.startLineNumber+1-t.length}t.pushUndoStop(),t.executeEdits(this.id,n,o),t.pushUndoStop()}}class j extends r["b"]{constructor(){super({id:j.ID,label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].editorTextFocus,primary:Object(n["c"])(2089,2102),weight:100}})}run(e,t,i){let n=[];"auto-save"===i.reason&&(n=(t.getSelections()||[]).map(e=>new d["a"](e.positionLineNumber,e.positionColumn)));let o=t.getSelection();if(null===o)return;let r=new a["a"](o,n);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop()}}j.ID="editor.action.trimTrailingWhitespace";class z extends r["b"]{constructor(){super({id:"editor.action.deleteLines",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.delete","Delete Line"),alias:"Delete Line",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let i=this._getLinesToRemove(t),n=t.getModel();if(1===n.getLineCount()&&1===n.getLineMaxColumn(1))return;let o=0,r=[],s=[];for(let a=0,l=i.length;a<l;a++){const e=i[a];let t=e.startLineNumber,l=e.endLineNumber,d=1,h=n.getLineMaxColumn(l);l<n.getLineCount()?(l+=1,h=1):t>1&&(t-=1,d=n.getLineMaxColumn(t)),r.push(c["a"].replace(new u["a"](t,d,l,h),"")),s.push(new u["a"](t-o,e.positionColumn,t-o,e.positionColumn)),o+=e.endLineNumber-e.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,s),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(e=>{let t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}});t.sort((e,t)=>e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber);let i=[],n=t[0];for(let o=1;o<t.length;o++)n.endLineNumber+1>=t[o].startLineNumber?n.endLineNumber=t[o].endLineNumber:(i.push(n),n=t[o]);return i.push(n),i}}class W extends r["b"]{constructor(){super({id:"editor.action.indentLines",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.indent","Indent Line"),alias:"Indent Line",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].editorTextFocus,primary:2137,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l["a"].indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class F extends r["b"]{constructor(){super({id:"editor.action.outdentLines",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].editorTextFocus,primary:2135,weight:100}})}run(e,t){o["CoreEditingCommands"].Outdent.runEditorCommand(e,t,null)}}class U extends r["b"]{constructor(){super({id:"editor.action.insertLineBefore",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l["a"].lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class V extends r["b"]{constructor(){super({id:"editor.action.insertLineAfter",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l["a"].lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class H extends r["b"]{run(e,t){if(!t.hasModel())return;const i=t.getSelection();let n=this._getRangesToDelete(t),o=[];for(let a=0,l=n.length-1;a<l;a++){let e=n[a],t=n[a+1];null===h["a"].intersectRanges(e,t)?o.push(e):n[a+1]=h["a"].plusRange(e,t)}o.push(n[n.length-1]);let r=this._getEndCursorState(i,o),s=o.map(e=>c["a"].replace(e,""));t.pushUndoStop(),t.executeEdits(this.id,s,r),t.pushUndoStop()}}class K extends H{constructor(){super({id:"deleteAllLeft",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null,n=[],o=0;return t.forEach(t=>{let r;if(1===t.endColumn&&o>0){let e=t.startLineNumber-o;r=new u["a"](e,t.startColumn,e,t.startColumn)}else r=new u["a"](t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);o+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?i=r:n.push(r)}),i&&n.unshift(i),n}_getRangesToDelete(e){let t=e.getSelections();if(null===t)return[];let i=t,n=e.getModel();return null===n?[]:(i.sort(h["a"].compareRangesUsingStarts),i=i.map(e=>{if(e.isEmpty()){if(1===e.startColumn){let t=Math.max(1,e.startLineNumber-1),i=1===e.startLineNumber?1:n.getLineContent(t).length+1;return new h["a"](t,i,e.startLineNumber,1)}return new h["a"](e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new h["a"](e.startLineNumber,1,e.endLineNumber,e.endColumn)}),i)}}class B extends H{constructor(){super({id:"deleteAllRight",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null,n=[];for(let o=0,r=t.length,s=0;o<r;o++){let r=t[o],a=new u["a"](r.startLineNumber-s,r.startColumn,r.startLineNumber-s,r.startColumn);r.intersectRanges(e)?i=a:n.push(a)}return i&&n.unshift(i),n}_getRangesToDelete(e){let t=e.getModel();if(null===t)return[];let i=e.getSelections();if(null===i)return[];let n=i.map(e=>{if(e.isEmpty()){const i=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===i?new h["a"](e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new h["a"](e.startLineNumber,e.startColumn,e.startLineNumber,i)}return e});return n.sort(h["a"].compareRangesUsingStarts),n}}class q extends r["b"]{constructor(){super({id:"editor.action.joinLines",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","lines.joinLines","Join Lines"),alias:"Join Lines",precondition:g["a"].writable,kbOpts:{kbExpr:g["a"].editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let i=t.getSelections();if(null===i)return;let n=t.getSelection();if(null===n)return;i.sort(h["a"].compareRangesUsingStarts);let o=[],r=i.reduce((e,t)=>e.isEmpty()?e.endLineNumber===t.startLineNumber?(n.equalsSelection(e)&&(n=t),t):t.startLineNumber>e.endLineNumber+1?(o.push(e),t):new u["a"](e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(o.push(e),t):new u["a"](e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn));o.push(r);let s=t.getModel();if(null===s)return;let a=[],l=[],d=n,g=0;for(let p=0,m=o.length;p<m;p++){let e,t,i=o[p],r=i.startLineNumber,m=1,f=0,b=s.getLineContent(i.endLineNumber).length-i.endColumn;if(i.isEmpty()||i.startLineNumber===i.endLineNumber){let n=i.getStartPosition();n.lineNumber<s.getLineCount()?(e=r+1,t=s.getLineMaxColumn(e)):(e=n.lineNumber,t=s.getLineMaxColumn(n.lineNumber))}else e=i.endLineNumber,t=s.getLineMaxColumn(e);let v=s.getLineContent(r);for(let n=r+1;n<=e;n++){let e=s.getLineContent(n),t=s.getLineFirstNonWhitespaceColumn(n);if(t>=1){let i=!0;""===v&&(i=!1),!i||" "!==v.charAt(v.length-1)&&"\t"!==v.charAt(v.length-1)||(i=!1,v=v.replace(/[\s\uFEFF\xA0]+$/g," "));let n=e.substr(t-1);v+=(i?" ":"")+n,f=i?n.length+1:n.length}else f=0}let _=new h["a"](r,m,e,t);if(!_.isEmpty()){let e;i.isEmpty()?(a.push(c["a"].replace(_,v)),e=new u["a"](_.startLineNumber-g,v.length-f+1,r-g,v.length-f+1)):i.startLineNumber===i.endLineNumber?(a.push(c["a"].replace(_,v)),e=new u["a"](i.startLineNumber-g,i.startColumn,i.endLineNumber-g,i.endColumn)):(a.push(c["a"].replace(_,v)),e=new u["a"](i.startLineNumber-g,i.startColumn,i.startLineNumber-g,v.length-b)),null!==h["a"].intersectRanges(_,n)?d=e:l.push(e)}g+=_.endLineNumber-_.startLineNumber}l.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,a,l),t.pushUndoStop()}}class $ extends r["b"]{constructor(){super({id:"editor.action.transpose",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:g["a"].writable})}run(e,t){let i=t.getSelections();if(null===i)return;let n=t.getModel();if(null===n)return;let o=[];for(let r=0,a=i.length;r<a;r++){let e=i[r];if(!e.isEmpty())continue;let t=e.getStartPosition(),a=n.getLineMaxColumn(t.lineNumber);if(t.column>=a){if(t.lineNumber===n.getLineCount())continue;let e=new h["a"](t.lineNumber,Math.max(1,t.column-1),t.lineNumber+1,1),i=n.getValueInRange(e).split("").reverse().join("");o.push(new s["a"](new u["a"](t.lineNumber,Math.max(1,t.column-1),t.lineNumber+1,1),i))}else{let e=new h["a"](t.lineNumber,Math.max(1,t.column-1),t.lineNumber,t.column+1),i=n.getValueInRange(e).split("").reverse().join("");o.push(new s["b"](e,i,new u["a"](t.lineNumber,t.column+1,t.lineNumber,t.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class G extends r["b"]{run(e,t){const i=t.getSelections();if(null===i)return;const n=t.getModel();if(null===n)return;const o=t.getOption(115),r=[];for(const s of i)if(s.isEmpty()){const e=s.getStartPosition(),i=t.getConfiguredWordAtPosition(e);if(!i)continue;const a=new h["a"](e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),l=n.getValueInRange(a);r.push(c["a"].replace(a,this._modifyText(l,o)))}else{const e=n.getValueInRange(s);r.push(c["a"].replace(s,this._modifyText(e,o)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}class Z extends G{constructor(){super({id:"editor.action.transformToUppercase",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:g["a"].writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class J extends G{constructor(){super({id:"editor.action.transformToLowercase",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:g["a"].writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class Q{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}isSupported(){return null!==this.get()}}class X extends G{constructor(){super({id:"editor.action.transformToTitlecase",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:g["a"].writable})}_modifyText(e,t){const i=X.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,e=>e.toLocaleUpperCase()):e}}X.titleBoundary=new Q("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class Y extends G{constructor(){super({id:"editor.action.transformToSnakecase",label:L["localize"]("vs/editor/contrib/linesOperations/linesOperations","editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:g["a"].writable})}_modifyText(e,t){const i=Y.caseBoundary.get(),n=Y.singleLetters.get();return i&&n?e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase():e}}Y.caseBoundary=new Q("(\\p{Ll})(\\p{Lu})","gmu"),Y.singleLetters=new Q("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu"),Object(r["j"])(k),Object(r["j"])(M),Object(r["j"])(D),Object(r["j"])(N),Object(r["j"])(R),Object(r["j"])(E),Object(r["j"])(T),Object(r["j"])(A),Object(r["j"])(j),Object(r["j"])(z),Object(r["j"])(W),Object(r["j"])(F),Object(r["j"])(U),Object(r["j"])(V),Object(r["j"])(K),Object(r["j"])(B),Object(r["j"])(q),Object(r["j"])($),Object(r["j"])(Z),Object(r["j"])(J),Y.caseBoundary.isSupported()&&Y.singleLetters.isSupported()&&Object(r["j"])(Y),X.titleBoundary.isSupported()&&Object(r["j"])(X)},f61d:function(e,t,i){"use strict";i.r(t),i.d(t,"DefinitionAction",(function(){return te}));var n=i("28e9"),o=i("4d3c"),r=i("4b4a"),s=i("d3a2"),a=i("cb4a"),l=i("4d73"),c=i("c189"),d=i("5e2a"),h=i("80f8"),u=i("ae58"),g=i("47f8"),p=i("22a8"),m=i("e0ab"),f=i("d8b0"),b=i("7c05"),v=i("d778"),_=i("4c77"),C=i("9cc3"),w=i("f295"),y=i("92db"),S=i("1ff1"),L=i("c602"),O=i("6ad4"),x=i("3f3e"),k=i("bf32"),M=i("5365"),D=i("f3a5"),I=i("eb8f"),N=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},R=function(e,t){return function(i,n){t(i,n,e)}};const P=new O["c"]("hasSymbols",!1,Object(L["localize"])("vs/editor/contrib/gotoSymbol/symbolNavigation","hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),E=Object(k["c"])("ISymbolNavigationService");let T=class{constructor(e,t,i,n){this._editorService=t,this._notificationService=i,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=P.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1)return void this.reset();this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new A(this._editorService),n=i.onDidChange(e=>{if(this._ignoreEditorChange)return;const i=this._editorService.getActiveCodeEditor();if(!i)return;const n=i.getModel(),o=i.getPosition();if(!n||!o)return;let r=!1,s=!1;for(const a of t.references)if(Object(S["f"])(a.uri,n.uri))r=!0,s=s||f["a"].containsPosition(a.range,o);else if(r)break;r&&s||this.reset()});this._currentState=Object(y["e"])(i,n)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:f["a"].collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?Object(L["localize"])("vs/editor/contrib/gotoSymbol/symbolNavigation","location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):Object(L["localize"])("vs/editor/contrib/gotoSymbol/symbolNavigation","location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};T=N([R(0,O["b"]),R(1,g["a"]),R(2,I["a"]),R(3,M["a"])],T),Object(x["b"])(E,T,!0),Object(u["k"])(new class extends u["c"]{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:P,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(E).revealNext(t)}}),D["a"].registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:P,primary:9,handler(e){e.get(E).reset()}});let A=class{constructor(e){this._listener=new Map,this._disposables=new y["b"],this._onDidChange=new w["b"],this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),Object(y["f"])(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Object(y["e"])(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}};A=N([R(0,g["a"])],A);var j,z,W,F,U,V,H,K,B=i("90d4"),q=i("8ec0"),$=i("cd62"),G=i("d5b7"),Z=i("b5f6"),J=i("a974"),Q=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):o(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};$["d"].appendMenuItem($["b"].EditorContext,{submenu:$["b"].EditorContextPeek,title:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","peek.submenu","Peek"),group:"navigation",order:100});const X=new Set;function Y(e){const t=new e;return Object(u["m"])(t),X.add(t.id),t}class ee extends u["b"]{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const i=e.get(I["a"]),n=e.get(g["a"]),s=e.get(Z["a"]),a=e.get(E),l=t.getModel(),c=t.getPosition(),h=new d["b"](t,5),u=Object(r["l"])(this._getLocationModel(l,c,h.token),h.token).then(e=>Q(this,void 0,void 0,(function*(){if(!e||h.token.isCancellationRequested)return;let i;if(Object(o["a"])(e.ariaMessage),e.referenceAt(l.uri,c)){const e=this._getAlternativeCommand(t);e!==this.id&&X.has(e)&&(i=t.getAction(e))}const r=e.references.length;if(0===r){if(!this._configuration.muteMessage){const e=l.getWordAtPosition(c);B["a"].get(t).showMessage(this._getNoResultFoundMessage(e),c)}}else{if(1!==r||!i)return this._onResult(n,a,t,e);i.run()}})),e=>{i.error(e)}).finally(()=>{h.dispose()});return s.showWhile(u,250),u}_onResult(e,t,i,n){return Q(this,void 0,void 0,(function*(){const o=this._getGoToPreference(i);if(i instanceof p["a"]||!(this._configuration.openInPeek||"peek"===o&&n.references.length>1)){const r=n.firstReference(),s=n.references.length>1&&"gotoAndPeek"===o,a=yield this._openReference(i,e,r,this._configuration.openToSide,!s);s&&a?this._openInPeek(a,n):n.dispose(),"goto"===o&&t.put(r)}else this._openInPeek(i,n)}))}_openReference(e,t,i,n,o){return Q(this,void 0,void 0,(function*(){let r=void 0;if(Object(v["J"])(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const s=yield t.openCodeEditor({resource:i.uri,options:{selection:f["a"].collapseToStart(r),selectionRevealType:3}},e,n);if(s){if(o){const e=s.getModel(),t=s.deltaDecorations([],[{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{s.getModel()===e&&s.deltaDecorations(t,[])},350)}return s}}))}_openInPeek(e,t){let i=_["a"].get(e);i&&e.hasModel()?i.toggleWidget(e.getSelection(),Object(r["h"])(e=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class te extends ee{_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(J["b"])(e,t,i),L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","def.title","Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","noResultWord","No definition found for '{0}'",e.word):L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const ie=a["h"]&&!n["i"]?2118:70;Y((j=class e extends te{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:O["a"].and(b["a"].hasDefinitionProvider,b["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:b["a"].editorTextFocus,primary:ie,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),G["a"].registerCommandAlias("editor.action.goToDeclaration",e.id)}},j.id="editor.action.revealDefinition",j)),Y((z=class e extends te{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:e.id,label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:O["a"].and(b["a"].hasDefinitionProvider,b["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:b["a"].editorTextFocus,primary:Object(s["c"])(2089,ie),weight:100}}),G["a"].registerCommandAlias("editor.action.openDeclarationToTheSide",e.id)}},z.id="editor.action.revealDefinitionAside",z)),Y((W=class e extends te{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.id,label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:O["a"].and(b["a"].hasDefinitionProvider,q["b"].notInPeekEditor,b["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:b["a"].editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:$["b"].EditorContextPeek,group:"peek",order:2}}),G["a"].registerCommandAlias("editor.action.previewDeclaration",e.id)}},W.id="editor.action.peekDefinition",W));class ne extends ee{_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(J["a"])(e,t,i),L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","decl.title","Declarations"))}))}_getNoResultFoundMessage(e){return e&&e.word?L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","decl.noResultWord","No declaration found for '{0}'",e.word):L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}Y((F=class e extends ne{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:O["a"].and(b["a"].hasDeclarationProvider,b["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","decl.noResultWord","No declaration found for '{0}'",e.word):L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","decl.generic.noResults","No declaration found")}},F.id="editor.action.revealDeclaration",F)),Y(class extends ne{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:O["a"].and(b["a"].hasDeclarationProvider,q["b"].notInPeekEditor,b["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:$["b"].EditorContextPeek,group:"peek",order:3}})}});class oe extends ee{_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(J["e"])(e,t,i),L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","typedef.title","Type Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}Y((U=class e extends oe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:O["a"].and(b["a"].hasTypeDefinitionProvider,b["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:b["a"].editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},U.ID="editor.action.goToTypeDefinition",U)),Y((V=class e extends oe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:O["a"].and(b["a"].hasTypeDefinitionProvider,q["b"].notInPeekEditor,b["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:$["b"].EditorContextPeek,group:"peek",order:4}})}},V.ID="editor.action.peekTypeDefinition",V));class re extends ee{_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(J["c"])(e,t,i),L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","impl.title","Implementations"))}))}_getNoResultFoundMessage(e){return e&&e.word?L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","goToImplementation.noResultWord","No implementation found for '{0}'",e.word):L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}Y((H=class e extends re{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:O["a"].and(b["a"].hasImplementationProvider,b["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:b["a"].editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},H.ID="editor.action.goToImplementation",H)),Y((K=class e extends re{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:O["a"].and(b["a"].hasImplementationProvider,q["b"].notInPeekEditor,b["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:b["a"].editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:$["b"].EditorContextPeek,group:"peek",order:5}})}},K.ID="editor.action.peekImplementation",K));class se extends ee{_getNoResultFoundMessage(e){return e?L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","references.no","No references found for '{0}'",e.word):L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}Y(class extends se{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","goToReferences.label","Go to References"),alias:"Go to References",precondition:O["a"].and(b["a"].hasReferenceProvider,q["b"].notInPeekEditor,b["a"].isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:b["a"].editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(J["d"])(e,t,!0,i),L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","ref.title","References"))}))}}),Y(class extends se{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","references.action.label","Peek References"),alias:"Peek References",precondition:O["a"].and(b["a"].hasReferenceProvider,q["b"].notInPeekEditor,b["a"].isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:$["b"].EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](yield Object(J["d"])(e,t,!1,i),L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","ref.title","References"))}))}});class ae extends ee{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",label:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:O["a"].and(q["b"].notInPeekEditor,b["a"].isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}_getLocationModel(e,t,i){return Q(this,void 0,void 0,(function*(){return new C["c"](this._references,L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","generic.title","Locations"))}))}_getNoResultFoundMessage(e){return e&&L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}G["a"].registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:c["a"]},{name:"position",description:"The position at which to start",constraint:m["a"].isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(e,t,i,n,o,r,s)=>Q(void 0,void 0,void 0,(function*(){Object(l["c"])(c["a"].isUri(t)),Object(l["c"])(m["a"].isIPosition(i)),Object(l["c"])(Array.isArray(n)),Object(l["c"])("undefined"===typeof o||"string"===typeof o),Object(l["c"])("undefined"===typeof s||"boolean"===typeof s);const a=e.get(g["a"]),d=yield a.openCodeEditor({resource:t},a.getFocusedCodeEditor());if(Object(h["b"])(d))return d.setPosition(i),d.revealPositionInCenterIfOutsideViewport(i,0),d.invokeWithinContext(e=>{const t=new class extends ae{_getNoResultFoundMessage(e){return r||super._getNoResultFoundMessage(e)}}({muteMessage:!Boolean(r),openInPeek:Boolean(s),openToSide:!1},n,o);e.get(k["a"]).invokeFunction(t.run.bind(t),d)})}))}),G["a"].registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:c["a"]},{name:"position",description:"The position at which to start",constraint:m["a"].isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(e,t,i,n,o)=>Q(void 0,void 0,void 0,(function*(){e.get(G["b"]).executeCommand("editor.action.goToLocations",t,i,n,o,void 0,!0)}))}),G["a"].registerCommand({id:"editor.action.findReferences",handler:(e,t,i)=>{Object(l["c"])(c["a"].isUri(t)),Object(l["c"])(m["a"].isIPosition(i));const n=e.get(g["a"]);return n.openCodeEditor({resource:t},n.getFocusedCodeEditor()).then(e=>{if(!Object(h["b"])(e)||!e.hasModel())return;const t=_["a"].get(e);if(!t)return;const n=Object(r["h"])(t=>Object(J["d"])(e.getModel(),m["a"].lift(i),!1,t).then(e=>new C["c"](e,L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands","ref.title","References")))),o=new f["a"](i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(t.toggleWidget(o,n,!1))})}}),G["a"].registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),$["d"].appendMenuItems([{id:$["b"].MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands",{key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:$["b"].MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands",{key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:$["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands",{key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:$["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands",{key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:$["b"].MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:L["localize"]("vs/editor/contrib/gotoSymbol/goToCommands",{key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}])},fcfd:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ae41"),o=i("d8b0");class r{static _handleEolEdits(e,t){let i=void 0,n=[];for(let o of t)"number"===typeof o.eol&&(i=o.eol),o.range&&"string"===typeof o.text&&n.push(o);return"number"===typeof i&&e.hasModel()&&e.getModel().pushEOL(i),n}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),n=i.validateRange(t.range),o=i.getFullModelRange();return o.equalsRange(n)}static execute(e,t,i){i&&e.pushUndoStop();const s=r._handleEolEdits(e,t);1===s.length&&r._isFullModelReplaceEdit(e,s[0])?e.executeEdits("formatEditsCommand",s.map(e=>n["a"].replace(o["a"].lift(e.range),e.text))):e.executeEdits("formatEditsCommand",s.map(e=>n["a"].replaceMove(o["a"].lift(e.range),e.text))),i&&e.pushUndoStop()}}}}]);