/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2022-01-17 14:11:08
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors-dgiot-d45ecba9"],{"114a":function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var o=i("28e9"),n=i("d208"),s=i("5e5c"),r=i("a9b7"),a=i("98ef"),d=i("f295"),l=i("92db"),c=(i("7f07"),i("c602")),h=i("f7fb"),u=i("d1e2");const g=n["a"];class p extends l["a"]{constructor(e,t,i){super(),this.model=t,this.domNode=g(".colorpicker-header"),n["q"](e,this.domNode),this.pickedColorNode=n["q"](this.domNode,g(".picked-color"));const o=Object(c["localize"])("vs/editor/contrib/colorPicker/colorPickerWidget","clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",o);const s=n["q"](this.domNode,g(".original-color"));s.style.backgroundColor=a["a"].Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(h["E"])||a["a"].white,this._register(Object(u["f"])((e,t)=>{this.backgroundColor=e.getColor(h["E"])||a["a"].white})),this._register(n["i"](this.pickedColorNode,n["d"].CLICK,()=>this.model.selectNextColorPresentation())),this._register(n["i"](s,n["d"].CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=a["a"].Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter())}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=a["a"].Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(g(".codicon.codicon-color-mode"))}}class _ extends l["a"]{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this.domNode=g(".colorpicker-body"),n["q"](e,this.domNode),this.saturationBox=new m(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new b(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new v(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new a["a"](new a["b"](i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new a["a"](new a["b"](t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=360*(1-e);this.model.color=new a["a"](new a["b"](360===i?0:i,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class m extends l["a"]{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new d["b"],this.onDidChange=this._onDidChange.event,this._onColorFlushed=new d["b"],this.onColorFlushed=this._onColorFlushed.event,this.domNode=g(".saturation-wrap"),n["q"](e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",n["q"](this.domNode,this.canvas),this.selection=g(".saturation-selection"),n["q"](this.domNode,this.selection),this.layout(),this._register(n["g"](this.domNode,e=>this.onMouseDown(e))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new s["a"]);const t=n["D"](this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,s["b"],e=>this.onDidChangePosition(e.posx-t.left,e.posy-t.top),()=>null);const i=n["h"](document,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),o=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,o),this._onDidChange.fire({s:i,v:o})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new a["a"](new a["b"](e.h,1,1,1)),i=this.canvas.getContext("2d"),o=i.createLinearGradient(0,0,this.canvas.width,0);o.addColorStop(0,"rgba(255, 255, 255, 1)"),o.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),o.addColorStop(1,"rgba(255, 255, 255, 0)");const n=i.createLinearGradient(0,0,0,this.canvas.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this.canvas.width,this.canvas.height),i.fillStyle=a["a"].Format.CSS.format(t),i.fill(),i.fillStyle=o,i.fill(),i.fillStyle=n,i.fill()}paintSelection(e,t){this.selection.style.left=e*this.width+"px",this.selection.style.top=this.height-t*this.height+"px"}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class f extends l["a"]{constructor(e,t){super(),this.model=t,this._onDidChange=new d["b"],this.onDidChange=this._onDidChange.event,this._onColorFlushed=new d["b"],this.onColorFlushed=this._onColorFlushed.event,this.domNode=n["q"](e,g(".strip")),this.overlay=n["q"](this.domNode,g(".overlay")),this.slider=n["q"](this.domNode,g(".slider")),this.slider.style.top="0px",this._register(n["g"](this.domNode,e=>this.onMouseDown(e))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new s["a"]),i=n["D"](this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,s["b"],e=>this.onDidChangeTop(e.posy-i.top),()=>null);const o=n["h"](document,()=>{this._onColorFlushed.fire(),o.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=(1-e)*this.height+"px"}}class b extends f{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:i,b:o}=e.rgba,n=new a["a"](new a["c"](t,i,o,1)),s=new a["a"](new a["c"](t,i,o,0));this.overlay.style.background=`linear-gradient(to bottom, ${n} 0%, ${s} 100%)`}getValue(e){return e.hsva.a}}class v extends f{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class C extends r["a"]{constructor(e,t,i,n){super(),this.model=t,this.pixelRatio=i,this._register(Object(o["l"])(()=>this.layout()));const s=g(".colorpicker-widget");e.appendChild(s);const r=new p(s,this.model,n);this.body=new _(s,this.model,this.pixelRatio),this._register(r),this._register(this.body)}layout(){this.body.layout()}}},"194c":function(e,t,i){"use strict";i.r(t),i.d(t,"DragAndDropController",(function(){return u}));var o=i("92db"),n=i("cb4a"),s=(i("b94e"),i("ae58")),r=i("e0ab"),a=i("d8b0"),d=i("17e0"),l=i("2f07");class c{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){let i=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new a["a"](this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new d["a"](this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new d["a"](this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new d["a"](this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new d["a"](this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new d["a"](this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(e,t){return this.targetSelection}}function h(e){return n["f"]?e.altKey:e.ctrlKey}class u extends o["a"]{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(e=>this._onEditorMouseDown(e))),this._register(this._editor.onMouseUp(e=>this._onEditorMouseUp(e))),this._register(this._editor.onMouseDrag(e=>this._onEditorMouseDrag(e))),this._register(this._editor.onMouseDrop(e=>this._onEditorMouseDrop(e))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(e=>this.onEditorKeyDown(e))),this._register(this._editor.onKeyUp(e=>this.onEditorKeyUp(e))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){this._editor.getOption(31)&&!this._editor.getOption(18)&&(h(e)&&(this._modifierPressed=!0),this._mouseDown&&h(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){this._editor.getOption(31)&&!this._editor.getOption(18)&&(h(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===u.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(null===this._dragSelection){const e=this._editor.getSelections()||[];let i=e.filter(e=>t.position&&e.containsPosition(t.position));if(1!==i.length)return;this._dragSelection=i[0]}h(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new r["a"](e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){let i=null;if(e.event.shiftKey){let e=this._editor.getSelection();if(e){const{selectionStartLineNumber:o,selectionStartColumn:n}=e;i=[new d["a"](o,n,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(e=>e.containsPosition(t)?new d["a"](t.lineNumber,t.column,t.lineNumber,t.column):e);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(h(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(u.ID,new c(this._dragSelection,t,h(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new a["a"](e.lineNumber,e.column,e.lineNumber,e.column),options:u._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return 6===e.type||7===e.type}_hitMargin(e){return 2===e.type||3===e.type||4===e.type}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}u.ID="editor.contrib.dragAndDrop",u.TRIGGER_KEY_VALUE=n["f"]?6:5,u._DECORATION_OPTIONS=l["b"].register({description:"dnd-target",className:"dnd-target"}),Object(s["l"])(u.ID,u)},"21b9":function(e,t,i){"use strict";i.r(t),i.d(t,"BracketMatchingController",(function(){return S}));var o=i("4b4a"),n=i("92db"),s=(i("2924"),i("ae58")),r=i("e0ab"),a=i("d8b0"),d=i("17e0"),l=i("7c05"),c=i("3a12"),h=i("2f07"),u=i("59e4"),g=i("c602"),p=i("cd62"),_=i("f7fb"),m=i("d1e2");const f=Object(_["Cc"])("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},g["localize"]("vs/editor/contrib/bracketMatching/bracketMatching","overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class b extends s["b"]{constructor(){super({id:"editor.action.jumpToBracket",label:g["localize"]("vs/editor/contrib/bracketMatching/bracketMatching","smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:l["a"].editorTextFocus,primary:3160,weight:100}})}run(e,t){let i=S.get(t);i&&i.jumpToBracket()}}class v extends s["b"]{constructor(){super({id:"editor.action.selectToBracket",label:g["localize"]("vs/editor/contrib/bracketMatching/bracketMatching","smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){const o=S.get(t);if(!o)return;let n=!0;i&&!1===i.selectBrackets&&(n=!1),o.selectToBracket(n)}}class C{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}class S extends n["a"]{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new o["e"](()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(e=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(e=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(e=>{e.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(S.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(t=>{const i=t.getStartPosition(),o=e.matchBracket(i);let n=null;if(o)o[0].containsPosition(i)?n=o[1].getStartPosition():o[1].containsPosition(i)&&(n=o[0].getStartPosition());else{const t=e.findEnclosingBrackets(i);if(t)n=t[0].getStartPosition();else{const t=e.findNextBracket(i);t&&t.range&&(n=t.range.getStartPosition())}}return n?new d["a"](n.lineNumber,n.column,n.lineNumber,n.column):new d["a"](i.lineNumber,i.column,i.lineNumber,i.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(o=>{const n=o.getStartPosition();let s=t.matchBracket(n);if(!s&&(s=t.findEnclosingBrackets(n),!s)){const e=t.findNextBracket(n);e&&e.range&&(s=t.matchBracket(e.range.getStartPosition()))}let r=null,l=null;if(s){s.sort(a["a"].compareRangesUsingStarts);const[t,i]=s;if(r=e?t.getStartPosition():t.getEndPosition(),l=e?i.getEndPosition():i.getStartPosition(),i.containsPosition(n)){const e=r;r=l,l=e}}r&&l&&i.push(new d["a"](r.lineNumber,r.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();let e=[],t=0;for(const i of this._lastBracketsData){let o=i.brackets;o&&(e[t++]={range:o[0],options:i.options},e[t++]={range:o[1],options:i.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);const e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);const t=this._editor.getModel(),i=t.getVersionId();let o=[];this._lastVersionId===i&&(o=this._lastBracketsData);let n=[],s=0;for(let r=0,h=e.length;r<h;r++){let t=e[r];t.isEmpty()&&(n[s++]=t.getStartPosition())}n.length>1&&n.sort(r["a"].compare);let a=[],d=0,l=0,c=o.length;for(let r=0,h=n.length;r<h;r++){let e=n[r];while(l<c&&o[l].position.isBefore(e))l++;if(l<c&&o[l].position.equals(e))a[d++]=o[l];else{let i=t.matchBracket(e),o=S._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;i||"always"!==this._matchBrackets||(i=t.findEnclosingBrackets(e,20),o=S._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[d++]=new C(e,i,o)}}this._lastBracketsData=a,this._lastVersionId=i}}S.ID="editor.contrib.bracketMatchingController",S._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=h["b"].register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Object(m["g"])(f),position:c["g"].Center}}),S._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=h["b"].register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),Object(s["l"])(S.ID,S),Object(s["j"])(v),Object(s["j"])(b),Object(m["f"])((e,t)=>{const i=e.getColor(u["j"]);i&&t.addRule(`.monaco-editor .bracket-match { background-color: ${i}; }`);const o=e.getColor(u["k"]);o&&t.addRule(`.monaco-editor .bracket-match { border: 1px solid ${o}; }`)}),p["d"].appendMenuItem(p["b"].MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:g["localize"]("vs/editor/contrib/bracketMatching/bracketMatching",{key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},"272e":function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return h}));var o=i("4163"),n=i("f123"),s=i("c189"),r=i("d8b0"),a=i("d778"),d=i("1edf"),l=i("d5b7");function c(e,t){const i=[],o=a["c"].ordered(e).reverse(),n=o.map(o=>Promise.resolve(o.provideDocumentColors(e,t)).then(e=>{if(Array.isArray(e))for(let t of e)i.push({colorInfo:t,provider:o})}));return Promise.all(n).then(()=>i)}function h(e,t,i,o){return Promise.resolve(i.provideColorPresentations(e,t,o))}l["a"].registerCommand("_executeDocumentColorProvider",(function(e,...t){const[i]=t;if(!(i instanceof s["a"]))throw Object(n["c"])();const r=e.get(d["a"]).getModel(i);if(!r)throw Object(n["c"])();const l=[],c=a["c"].ordered(r).reverse(),h=c.map(e=>Promise.resolve(e.provideDocumentColors(r,o["a"].None)).then(e=>{if(Array.isArray(e))for(let t of e)l.push({range:t.range,color:[t.color.red,t.color.green,t.color.blue,t.color.alpha]})}));return Promise.all(h).then(()=>l)})),l["a"].registerCommand("_executeColorPresentationProvider",(function(e,...t){const[i,l]=t,{uri:c,range:h}=l;if(!(c instanceof s["a"])||!Array.isArray(i)||4!==i.length||!r["a"].isIRange(h))throw Object(n["c"])();const[u,g,p,_]=i,m=e.get(d["a"]).getModel(c);if(!m)throw Object(n["c"])();const f={range:h,color:{red:u,green:g,blue:p,alpha:_}},b=[],v=a["c"].ordered(m).reverse(),C=v.map(e=>Promise.resolve(e.provideColorPresentations(m,f,o["a"].None)).then(e=>{Array.isArray(e)&&b.push(...e)}));return Promise.all(C).then(()=>b)}))},2924:function(e,t,i){},"29d5":function(e,t,i){},"389a":function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a}));class o{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+o.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new o(this.value+o.sep+e)}}function n(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some(i=>r(t,i,e.include)))&&!(!e.includeSourceActions&&o.Source.contains(t)))}function s(e,t){const i=t.kind?new o(t.kind):void 0;return!!(!e.include||i&&e.include.contains(i))&&(!(e.excludes&&i&&e.excludes.some(t=>r(i,t,e.include)))&&(!(!e.includeSourceActions&&i&&o.Source.contains(i))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function r(e,t,i){return!!t.contains(e)&&(!i||!t.contains(i))}o.sep=".",o.None=new o("@@none@@"),o.Empty=new o(""),o.QuickFix=new o("quickfix"),o.Refactor=new o("refactor"),o.Source=new o("source"),o.SourceOrganizeImports=o.Source.append("organizeImports"),o.SourceFixAll=o.Source.append("fixAll");class a{constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}static fromUser(e,t){return e&&"object"===typeof e?new a(a.getKindFromUser(e,t.kind),a.getApplyFromUser(e,t.apply),a.getPreferredUser(e)):new a(t.kind,t.apply,!1)}static getApplyFromUser(e,t){switch("string"===typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return"string"===typeof e.kind?new o(e.kind):t}static getPreferredUser(e){return"boolean"===typeof e.preferred&&e.preferred}}},3944:function(e,t,i){"use strict";i.r(t),i.d(t,"ColorContribution",(function(){return a}));var o=i("92db"),n=i("ae58"),s=i("d8b0"),r=(i("675e"),i("0f43"));class a extends o["a"]{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(e=>this.onMouseDown(e)))}dispose(){super.dispose()}onMouseDown(e){var t;const i=e.target.type;if(6!==i)return;const o=[...(null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]].find(e=>e.startsWith("ced-colorBox"));if(!o)return;if(!e.target.range)return;const n=this._editor.getContribution(r["ModesHoverController"].ID);if(!n.isColorPickerVisible()){const t=new s["a"](e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1);n.showContentHover(t,0,!1)}}}a.ID="editor.contrib.colorContribution",Object(n["l"])(a.ID,a)},4495:function(e,t,i){"use strict";i.r(t),i.d(t,"ContextMenuController",(function(){return f}));var o=i("d208"),n=i("36a1"),s=i("8a8f"),r=i("92db"),a=i("cb4a"),d=i("ae58"),l=i("7c05"),c=i("c602"),h=i("cd62"),u=i("6ad4"),g=i("5e73"),p=i("5365"),_=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},m=function(e,t){return function(i,o){t(i,o,e)}};let f=class e{constructor(e,t,i,n,s,a){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=n,this._keybindingService=s,this._menuService=a,this._toDispose=new r["b"],this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(e=>this._onContextMenu(e))),this._toDispose.add(this._editor.onMouseWheel(e=>{if(this._contextMenuIsBeingShownCount>0){const t=this._contextViewService.getContextViewElement(),i=e.srcElement;i.shadowRoot&&o["F"](t)===i.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(e=>{58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())}))}static get(t){return t.getContribution(e.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12===e.target.type)return;if(e.event.preventDefault(),e.event.stopPropagation(),6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let t=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;1!==e.target.type&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20))return;if(!this._editor.hasModel())return;if(!this._contextMenuService)return void this._editor.focus();const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?h["b"].SimpleEditorContext:h["b"].EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],o=this._menuService.createMenu(t,this._contextKeyService),n=o.getActions({arg:e.uri});o.dispose();for(let r of n){const[,t]=r;let o=0;for(const n of t)if(n instanceof h["e"]){const t=this._getMenuActions(e,n.item.submenu);t.length>0&&(i.push(new s["e"](n.id,n.label,t)),o++)}else i.push(n),o++;o&&i.push(new s["d"])}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const i=this._editor.getOption(52);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),i=o["D"](this._editor.getDomNode()),n=i.left+e.left,s=i.top+e.top+e.height;t={x:n,y:s}}const s=this._editor.getOption(113)&&!a["c"];this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:s?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:e=>{const t=this._keybindingFor(e);if(t)return new n["a"](e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});const i=e;return"function"===typeof i.getActionViewItem?i.getActionViewItem():new n["a"](e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:i})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};f.ID="editor.contrib.contextmenu",f=_([m(1,g["a"]),m(2,g["b"]),m(3,u["b"]),m(4,p["a"]),m(5,h["a"])],f);class b extends d["b"]{constructor(){super({id:"editor.action.showContextMenu",label:c["localize"]("vs/editor/contrib/contextmenu/contextmenu","action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:l["a"].textInputFocus,primary:1092,weight:100}})}run(e,t){let i=f.get(t);i.showContextMenu()}}Object(d["l"])(f.ID,f),Object(d["j"])(b)},"49b3":function(e,t,i){"use strict";i.r(t);var o=i("d3a2"),n=i("ae58"),s=i("d8b0"),r=i("7c05"),a=i("ae41"),d=i("e0ab"),l=i("17e0"),c=i("6b8c");class h{constructor(e,t){this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const o=t.length,n=e.length;if(i+o>n)return!1;for(let s=0;s<o;s++){const o=e.charCodeAt(i+s),n=t.charCodeAt(s);if(o!==n&&(!(o>=65&&o<=90&&o+32===n)&&!(n>=65&&n<=90&&n+32===o)))return!1}return!0}_createOperationsForBlockComment(e,t,i,o,n,r){const a=e.startLineNumber,d=e.startColumn,l=e.endLineNumber,c=e.endColumn,u=n.getLineContent(a),g=n.getLineContent(l);let p,_=u.lastIndexOf(t,d-1+t.length),m=g.indexOf(i,c-1-i.length);if(-1!==_&&-1!==m)if(a===l){const e=u.substring(_+t.length,m);e.indexOf(i)>=0&&(_=-1,m=-1)}else{const e=u.substring(_+t.length),o=g.substring(0,m);(e.indexOf(i)>=0||o.indexOf(i)>=0)&&(_=-1,m=-1)}-1!==_&&-1!==m?(o&&_+t.length<u.length&&32===u.charCodeAt(_+t.length)&&(t+=" "),o&&m>0&&32===g.charCodeAt(m-1)&&(i=" "+i,m-=1),p=h._createRemoveBlockCommentOperations(new s["a"](a,_+t.length+1,l,m+1),t,i)):(p=h._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=1===p.length?i:null);for(const s of p)r.addTrackedEditOperation(s.range,s.text)}static _createRemoveBlockCommentOperations(e,t,i){let o=[];return s["a"].isEmpty(e)?o.push(a["a"].delete(new s["a"](e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(o.push(a["a"].delete(new s["a"](e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),o.push(a["a"].delete(new s["a"](e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),o}static _createAddBlockCommentOperations(e,t,i,o){let n=[];return s["a"].isEmpty(e)?n.push(a["a"].replace(new s["a"](e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(n.push(a["a"].insert(new d["a"](e.startLineNumber,e.startColumn),t+(o?" ":""))),n.push(a["a"].insert(new d["a"](e.endLineNumber,e.endColumn),(o?" ":"")+i))),n}getEditOperations(e,t){const i=this._selection.startLineNumber,o=this._selection.startColumn;e.tokenizeIfCheap(i);const n=e.getLanguageIdAtPosition(i,o),s=c["b"].getComments(n);s&&s.blockCommentStartToken&&s.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(2===i.length){const e=i[0],t=i[1];return new l["a"](e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{const e=i[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new l["a"](e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}}var u=i("1537");class g{constructor(e,t,i,o,n,s){this._selection=e,this._tabSize=t,this._type=i,this._insertSpace=o,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=n,this._ignoreFirstLine=s||!1}static _gatherPreflightCommentStrings(e,t,i){e.tokenizeIfCheap(t);const o=e.getLanguageIdAtPosition(t,1),n=c["b"].getComments(o),s=n?n.lineCommentToken:null;if(!s)return null;let r=[];for(let a=0,d=i-t+1;a<d;a++)r[a]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return r}static _analyzeLines(e,t,i,o,n,s,r){let a,d=!0;a=0===e||1!==e;for(let l=0,c=o.length;l<c;l++){const c=o[l],g=n+l;if(g===n&&r){c.ignore=!0;continue}const p=i.getLineContent(g),_=u["u"](p);if(-1!==_){if(d=!1,c.ignore=!1,c.commentStrOffset=_,a&&!h._haystackHasNeedleAtOffset(p,c.commentStr,_)&&(0===e?a=!1:1===e||(c.ignore=!0)),a&&t){const e=_+c.commentStrLength;e<p.length&&32===p.charCodeAt(e)&&(c.commentStrLength+=1)}}else c.ignore=s,c.commentStrOffset=p.length}if(0===e&&d){a=!1;for(let e=0,t=o.length;e<t;e++)o[e].ignore=!1}return{supported:!0,shouldRemoveComments:a,lines:o}}static _gatherPreflightData(e,t,i,o,n,s,r){const a=g._gatherPreflightCommentStrings(i,o,n);return null===a?{supported:!1}:g._analyzeLines(e,t,i,a,o,s,r)}_executeLineComments(e,t,i,o){let n;i.shouldRemoveComments?n=g._createRemoveLineCommentsOperations(i.lines,o.startLineNumber):(g._normalizeInsertionPoint(e,i.lines,o.startLineNumber,this._tabSize),n=this._createAddLineCommentsOperations(i.lines,o.startLineNumber));const r=new d["a"](o.positionLineNumber,o.positionColumn);for(let a=0,d=n.length;a<d;a++)if(t.addEditOperation(n[a].range,n[a].text),s["a"].isEmpty(n[a].range)&&s["a"].getStartPosition(n[a].range).equals(r)){const t=e.getLineContent(r.lineNumber);t.length+1===r.column&&(this._deltaColumn=(n[a].text||"").length)}this._selectionId=t.trackSelection(o)}_attemptRemoveBlockComment(e,t,i,o){let n=t.startLineNumber,r=t.endLineNumber,a=o.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),d=e.getLineContent(n).lastIndexOf(i,a-1),l=e.getLineContent(r).indexOf(o,t.endColumn-1-i.length);return-1!==d&&-1===l&&(l=e.getLineContent(n).indexOf(o,d+i.length),r=n),-1===d&&-1!==l&&(d=e.getLineContent(r).lastIndexOf(i,l),n=r),!t.isEmpty()||-1!==d&&-1!==l||(d=e.getLineContent(n).indexOf(i),-1!==d&&(l=e.getLineContent(n).indexOf(o,d+i.length))),-1!==d&&32===e.getLineContent(n).charCodeAt(d+i.length)&&(i+=" "),-1!==l&&32===e.getLineContent(r).charCodeAt(l-1)&&(o=" "+o,l-=1),-1!==d&&-1!==l?h._createRemoveBlockCommentOperations(new s["a"](n,d+i.length+1,r,l+1),i,o):null}_executeBlockComment(e,t,i){e.tokenizeIfCheap(i.startLineNumber);let o=e.getLanguageIdAtPosition(i.startLineNumber,1),n=c["b"].getComments(o);if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;const r=n.blockCommentStartToken,a=n.blockCommentEndToken;let d=this._attemptRemoveBlockComment(e,i,r,a);if(!d){if(i.isEmpty()){const t=e.getLineContent(i.startLineNumber);let o=u["u"](t);-1===o&&(o=t.length),d=h._createAddBlockCommentOperations(new s["a"](i.startLineNumber,o+1,i.startLineNumber,t.length+1),r,a,this._insertSpace)}else d=h._createAddBlockCommentOperations(new s["a"](i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,a,this._insertSpace);1===d.length&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(i);for(const s of d)t.addEditOperation(s.range,s.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine)return t.addEditOperation(new s["a"](i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=t.trackSelection(i));i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const o=g._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return o.supported?this._executeLineComments(e,t,o,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new l["a"](i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let i=[];for(let o=0,n=e.length;o<n;o++){const n=e[o];n.ignore||i.push(a["a"].delete(new s["a"](t+o,n.commentStrOffset+1,t+o,n.commentStrOffset+n.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){let i=[];const o=this._insertSpace?" ":"";for(let n=0,s=e.length;n<s;n++){const s=e[n];s.ignore||i.push(a["a"].insert(new d["a"](t+n,s.commentStrOffset+1),s.commentStr+o))}return i}static nextVisibleColumn(e,t,i,o){return i?e+(t-e%t):e+o}static _normalizeInsertionPoint(e,t,i,o){let n,s,r=1073741824;for(let a=0,d=t.length;a<d;a++){if(t[a].ignore)continue;const n=e.getLineContent(i+a);let s=0;for(let e=0,i=t[a].commentStrOffset;s<r&&e<i;e++)s=g.nextVisibleColumn(s,o,9===n.charCodeAt(e),1);s<r&&(r=s)}r=Math.floor(r/o)*o;for(let a=0,d=t.length;a<d;a++){if(t[a].ignore)continue;const d=e.getLineContent(i+a);let l=0;for(n=0,s=t[a].commentStrOffset;l<r&&n<s;n++)l=g.nextVisibleColumn(l,o,9===d.charCodeAt(n),1);t[a].commentStrOffset=l>r?n-1:n}}}var p=i("c602"),_=i("cd62");class m extends n["b"]{constructor(e,t){super(t),this._type=e}run(e,t){if(!t.hasModel())return;const i=t.getModel(),o=[],n=i.getOptions(),r=t.getOption(19),a=t.getSelections().map((e,t)=>({selection:e,index:t,ignoreFirstLine:!1}));a.sort((e,t)=>s["a"].compareRangesUsingStarts(e.selection,t.selection));let d=a[0];for(let s=1;s<a.length;s++){const e=a[s];d.selection.endLineNumber===e.selection.startLineNumber&&(d.index<e.index?e.ignoreFirstLine=!0:(d.ignoreFirstLine=!0,d=e))}for(const s of a)o.push(new g(s.selection,n.tabSize,this._type,r.insertSpace,r.ignoreEmptyLines,s.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class f extends m{constructor(){super(0,{id:"editor.action.commentLine",label:p["localize"]("vs/editor/contrib/comment/comment","comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:r["a"].writable,kbOpts:{kbExpr:r["a"].editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:_["b"].MenubarEditMenu,group:"5_insert",title:p["localize"]("vs/editor/contrib/comment/comment",{key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class b extends m{constructor(){super(1,{id:"editor.action.addCommentLine",label:p["localize"]("vs/editor/contrib/comment/comment","comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:r["a"].writable,kbOpts:{kbExpr:r["a"].editorTextFocus,primary:Object(o["c"])(2089,2081),weight:100}})}}class v extends m{constructor(){super(2,{id:"editor.action.removeCommentLine",label:p["localize"]("vs/editor/contrib/comment/comment","comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:r["a"].writable,kbOpts:{kbExpr:r["a"].editorTextFocus,primary:Object(o["c"])(2089,2099),weight:100}})}}class C extends n["b"]{constructor(){super({id:"editor.action.blockComment",label:p["localize"]("vs/editor/contrib/comment/comment","comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:r["a"].writable,kbOpts:{kbExpr:r["a"].editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:_["b"].MenubarEditMenu,group:"5_insert",title:p["localize"]("vs/editor/contrib/comment/comment",{key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){if(!t.hasModel())return;const i=t.getOption(19),o=[],n=t.getSelections();for(const s of n)o.push(new h(s,i.insertSpace));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}Object(n["j"])(f),Object(n["j"])(b),Object(n["j"])(v),Object(n["j"])(C)},"5a4d":function(e,t,i){},6353:function(e,t,i){"use strict";i.r(t);var o=i("ae58"),n=i("69e5"),s=i("c602");class r extends o["b"]{constructor(){super({id:"editor.action.fontZoomIn",label:s["localize"]("vs/editor/contrib/fontZoom/fontZoom","EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){n["a"].setZoomLevel(n["a"].getZoomLevel()+1)}}class a extends o["b"]{constructor(){super({id:"editor.action.fontZoomOut",label:s["localize"]("vs/editor/contrib/fontZoom/fontZoom","EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){n["a"].setZoomLevel(n["a"].getZoomLevel()-1)}}class d extends o["b"]{constructor(){super({id:"editor.action.fontZoomReset",label:s["localize"]("vs/editor/contrib/fontZoom/fontZoom","EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){n["a"].setZoomLevel(0)}}Object(o["j"])(r),Object(o["j"])(a),Object(o["j"])(d)},"675e":function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var o=i("4b4a"),n=i("98ef"),s=i("f123"),r=i("f28f"),a=i("92db"),d=i("ae58"),l=i("47f8"),c=i("d8b0"),h=i("2f07"),u=i("d778"),g=i("272e"),p=i("672a"),_=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},m=function(e,t){return function(i,o){t(i,o,e)}};const f=500;let b=class e extends a["a"]{constructor(e,t,i){super(),this._editor=e,this._codeEditorService=t,this._configurationService=i,this._localToDispose=this._register(new a["b"]),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=[],this._decorationsTypes=new Set,this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(u["c"].onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let e=this._isEnabled;this._isEnabled=this.isEnabled(),e!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&"object"===typeof i){const e=i["colorDecorators"];if(e&&void 0!==e["enable"]&&!e["enable"])return e["enable"]}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const t=this._editor.getModel();t&&u["c"].has(t)&&(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new o["g"],this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},e.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=Object(o["h"])(e=>{const t=this._editor.getModel();return t?Object(g["b"])(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},s["f"])}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:h["b"].EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((t,i)=>this._colorDatas.set(t,e[i]))}updateColorDecorators(e){let t=[],i={};for(let o=0;o<e.length&&t.length<f;o++){const{red:s,green:a,blue:d,alpha:l}=e[o].colorInfo.color,c=new n["c"](Math.round(255*s),Math.round(255*a),Math.round(255*d),l);let h=Object(r["c"])(`rgba(${c.r},${c.g},${c.b},${c.a})`).toString(16),u=`rgba(${c.r}, ${c.g}, ${c.b}, ${c.a})`,g="colorBox-"+h;this._decorationsTypes.has(g)||i[g]||this._codeEditorService.registerDecorationType("color-detector-color",g,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:u},dark:{before:{border:"solid 0.1em #eee"}}},void 0,this._editor),i[g]=!0,t.push({range:{startLineNumber:e[o].colorInfo.range.startLineNumber,startColumn:e[o].colorInfo.range.startColumn,endLineNumber:e[o].colorInfo.range.endLineNumber,endColumn:e[o].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(g,!0)})}this._decorationsTypes.forEach(e=>{i[e]||this._codeEditorService.removeDecorationType(e)}),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,t)}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach(e=>{this._codeEditorService.removeDecorationType(e)})}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(c["a"].fromPositions(e,e)).filter(e=>this._colorDatas.has(e.id));return 0===i.length?null:this._colorDatas.get(i[0].id)}};b.ID="editor.contrib.colorDetector",b.RECOMPUTE_TIME=1e3,b=_([m(1,l["a"]),m(2,p["a"])],b),Object(d["l"])(b.ID,b)},"7f07":function(e,t,i){},9678:function(e,t,i){"use strict";i.r(t),i.d(t,"getSelectionSearchString",(function(){return qe})),i.d(t,"CommonFindController",(function(){return Ke})),i.d(t,"FindController",(function(){return Ge})),i.d(t,"StartFindAction",(function(){return Xe})),i.d(t,"StartFindWithSelectionAction",(function(){return Ye})),i.d(t,"MatchFindAction",(function(){return Qe})),i.d(t,"NextMatchFindAction",(function(){return Je})),i.d(t,"PreviousMatchFindAction",(function(){return et})),i.d(t,"SelectionMatchFindAction",(function(){return tt})),i.d(t,"NextSelectionMatchFindAction",(function(){return it})),i.d(t,"PreviousSelectionMatchFindAction",(function(){return ot})),i.d(t,"StartFindReplaceAction",(function(){return nt}));var o=i("4b4a"),n=i("92db"),s=i("1537"),r=i("ae58"),a=i("7c05"),d=i("945a"),l=i("0fff"),c=i("e0ab"),h=i("d8b0"),u=i("17e0"),g=i("5961"),p=i("3a12"),_=i("2f07"),m=i("f7fb"),f=i("d1e2");class b{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(e=>this._editor.getModel().getDecorationRange(e)).filter(e=>!!e);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const e=i.options;if(e===b._FIND_MATCH_DECORATION||e===b._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let o=0,n=this._decorations.length;o<n;o++){let n=this._editor.getModel().getDecorationRange(this._decorations[o]);if(e.equalsRange(n)){t=this._decorations[o],i=o+1;break}}return null===this._highlightedDecorationId&&null===t||this._editor.changeDecorations(e=>{if(null!==this._highlightedDecorationId&&(e.changeDecorationOptions(this._highlightedDecorationId,b._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),null!==t&&(this._highlightedDecorationId=t,e.changeDecorationOptions(this._highlightedDecorationId,b._CURRENT_FIND_MATCH_DECORATION)),null!==this._rangeHighlightDecorationId&&(e.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),null!==t){let i=this._editor.getModel().getDecorationRange(t);if(i.startLineNumber!==i.endLineNumber&&1===i.endColumn){let e=i.endLineNumber-1,t=this._editor.getModel().getLineMaxColumn(e);i=new h["a"](i.startLineNumber,i.startColumn,e,t)}this._rangeHighlightDecorationId=e.addDecoration(i,b._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let o=b._FIND_MATCH_DECORATION,n=[];if(e.length>1e3){o=b._FIND_MATCH_NO_OVERVIEW_DECORATION;const t=this._editor.getModel().getLineCount(),i=this._editor.getLayoutInfo().height,s=i/t,r=Math.max(2,Math.ceil(3/s));let a=e[0].range.startLineNumber,d=e[0].range.endLineNumber;for(let o=1,l=e.length;o<l;o++){const t=e[o].range;d+r>=t.startLineNumber?t.endLineNumber>d&&(d=t.endLineNumber):(n.push({range:new h["a"](a,1,d,1),options:b._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),a=t.startLineNumber,d=t.endLineNumber)}n.push({range:new h["a"](a,1,d,1),options:b._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let s=new Array(e.length);for(let t=0,r=e.length;t<r;t++)s[t]={range:e[t].range,options:o};this._decorations=i.deltaDecorations(this._decorations,s),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,n),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(e=>i.removeDecoration(e)),this._findScopeDecorationIds=[]),(null===t||void 0===t?void 0:t.length)&&(this._findScopeDecorationIds=t.map(e=>i.addDecoration(e,b._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(0===this._decorations.length)return null;for(let t=this._decorations.length-1;t>=0;t--){let i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(o&&!(o.endLineNumber>e.lineNumber)){if(o.endLineNumber<e.lineNumber)return o;if(!(o.endColumn>e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(0===this._decorations.length)return null;for(let t=0,i=this._decorations.length;t<i;t++){let i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(o&&!(o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}b._CURRENT_FIND_MATCH_DECORATION=_["b"].register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Object(f["g"])(m["oc"]),position:p["g"].Center},minimap:{color:Object(f["g"])(m["fc"]),position:p["f"].Inline}}),b._FIND_MATCH_DECORATION=_["b"].register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Object(f["g"])(m["oc"]),position:p["g"].Center},minimap:{color:Object(f["g"])(m["fc"]),position:p["f"].Inline}}),b._FIND_MATCH_NO_OVERVIEW_DECORATION=_["b"].register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),b._FIND_MATCH_ONLY_OVERVIEW_DECORATION=_["b"].register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Object(f["g"])(m["oc"]),position:p["g"].Center}}),b._RANGE_HIGHLIGHT_DECORATION=_["b"].register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),b._FIND_SCOPE_DECORATION=_["b"].register({description:"find-scope",className:"findScope",isWholeLine:!0});class v{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let e=[];for(let t=0;t<this._ranges.length;t++)e.push({range:this._ranges[t],text:this._replaceStrings[t]});e.sort((e,t)=>h["a"].compareRangesUsingStarts(e.range,t.range));let i=[],o=e[0];for(let t=1;t<e.length;t++)o.range.endLineNumber===e[t].range.startLineNumber&&o.range.endColumn===e[t].range.startColumn?(o.range=o.range.plusRange(e[t].range),o.text=o.text+e[t].text):(i.push(o),o=e[t]);i.push(o);for(const n of i)t.addEditOperation(n.range,n.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}var C=i("c365");class S{constructor(e){this.staticValue=e,this.kind=0}}class y{constructor(e){this.pieces=e,this.kind=1}}class w{constructor(e){e&&0!==e.length?1===e.length&&null!==e[0].staticValue?this._state=new S(e[0].staticValue):this._state=new y(e):this._state=new S("")}static fromStaticValue(e){return new w([x.staticValue(e)])}get hasReplacementPatterns(){return 1===this._state.kind}buildReplaceString(e,t){if(0===this._state.kind)return t?Object(C["a"])(e,this._state.staticValue):this._state.staticValue;let i="";for(let o=0,n=this._state.pieces.length;o<n;o++){let t=this._state.pieces[o];if(null!==t.staticValue){i+=t.staticValue;continue}let n=w._substitute(t.matchIndex,e);if(null!==t.caseOps&&t.caseOps.length>0){let e=[],i=t.caseOps.length,o=0;for(let s=0,r=n.length;s<r;s++){if(o>=i){e.push(n.slice(s));break}switch(t.caseOps[o]){case"U":e.push(n[s].toUpperCase());break;case"u":e.push(n[s].toUpperCase()),o++;break;case"L":e.push(n[s].toLowerCase());break;case"l":e.push(n[s].toLowerCase()),o++;break;default:e.push(n[s])}}n=e.join("")}i+=n}return i}static _substitute(e,t){if(null===t)return"";if(0===e)return t[0];let i="";while(e>0){if(e<t.length){let o=t[e]||"";return o+i}i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class x{constructor(e,t,i){this.staticValue=e,this.matchIndex=t,i&&0!==i.length?this.caseOps=i.slice(0):this.caseOps=null}static staticValue(e){return new x(e,-1,null)}static caseOps(e,t){return new x(null,e,t)}}class N{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){0!==e.length&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=x.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=x.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=x.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new w(this._result)}}function L(e){if(!e||0===e.length)return new w(null);let t=[],i=new N(e);for(let o=0,n=e.length;o<n;o++){let s=e.charCodeAt(o);if(92!==s){if(36===s){if(o++,o>=n)break;let s=e.charCodeAt(o);if(36===s){i.emitUnchanged(o-1),i.emitStatic("$",o+1);continue}if(48===s||38===s){i.emitUnchanged(o-1),i.emitMatchIndex(0,o+1,t),t.length=0;continue}if(49<=s&&s<=57){let r=s-48;if(o+1<n){let n=e.charCodeAt(o+1);if(48<=n&&n<=57){o++,r=10*r+(n-48),i.emitUnchanged(o-2),i.emitMatchIndex(r,o+1,t),t.length=0;continue}}i.emitUnchanged(o-1),i.emitMatchIndex(r,o+1,t),t.length=0;continue}}}else{if(o++,o>=n)break;let s=e.charCodeAt(o);switch(s){case 92:i.emitUnchanged(o-1),i.emitStatic("\\",o+1);break;case 110:i.emitUnchanged(o-1),i.emitStatic("\n",o+1);break;case 116:i.emitUnchanged(o-1),i.emitStatic("\t",o+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(o-1),i.emitStatic("",o+1),t.push(String.fromCharCode(s));break}}}return i.finalize()}var I=i("6ad4");const O=new I["c"]("findWidgetVisible",!1),A=new I["c"]("findInputFocussed",!1),R=new I["c"]("replaceInputFocussed",!1),k={primary:545,mac:{primary:2593}},M={primary:565,mac:{primary:2613}},D={primary:560,mac:{primary:2608}},E={primary:554,mac:{primary:2602}},P={primary:558,mac:{primary:2606}},F={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},T=19999,j=240;class W{constructor(e,t){this._toDispose=new n["b"],this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new o["g"],this._decorations=new b(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new o["e"](()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(e=>{3!==e.reason&&5!==e.reason&&6!==e.reason||this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(e=>{this._ignoreModelContentChanged||(e.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,Object(n["f"])(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){if(!this._isDisposed&&this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)){let t=this._editor.getModel();t.isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},j)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;"undefined"!==typeof t?null!==t&&(i=Array.isArray(t)?t:[t]):i=this._decorations.getFindScopes(),null!==i&&(i=i.map(e=>{if(e.startLineNumber!==e.endLineNumber){let t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new h["a"](e.startLineNumber,1,t,this._editor.getModel().getLineMaxColumn(t))}return e}));let o=this._findMatches(i,!1,T);this._decorations.set(o,i);const n=this._editor.getSelection();let s=this._decorations.getCurrentMatchesPosition(n);if(0===s&&o.length>0){const e=Object(d["h"])(o.map(e=>e.range),e=>h["a"].compareRangesUsingStarts(e,n)>=0);s=e>0?e-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:o}=e,n=this._editor.getModel();return t||1===o?(1===i?i=n.getLineCount():i--,o=n.getLineMaxColumn(i)):o--,new c["a"](i,o)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const t=this._decorations.matchAfterPosition(e);return void(t&&this._setCurrentFindMatch(t))}if(this._decorations.getCount()<T){let t=this._decorations.matchBeforePosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),t=this._decorations.matchBeforePosition(e)),void(t&&this._setCurrentFindMatch(t))}if(this._cannotFind())return;let i=this._decorations.getFindScope(),o=W._getSearchRange(this._editor.getModel(),i);o.getEndPosition().isBefore(e)&&(e=o.getEndPosition()),e.isBefore(o.getStartPosition())&&(e=o.getEndPosition());let{lineNumber:n,column:s}=e,r=this._editor.getModel(),a=new c["a"](n,s),d=r.findPreviousMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1);return d&&d.range.isEmpty()&&d.range.getStartPosition().equals(a)&&(a=this._prevSearchPosition(a),d=r.findPreviousMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1)),d?t||o.containsRange(d.range)?void this._setCurrentFindMatch(d.range):this._moveToPrevMatch(d.range.getStartPosition(),!0):void 0}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:o}=e,n=this._editor.getModel();return t||o===n.getLineMaxColumn(i)?(i===n.getLineCount()?i=1:i++,o=1):o++,new c["a"](i,o)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const t=this._decorations.matchBeforePosition(e);return void(t&&this._setCurrentFindMatch(t))}if(this._decorations.getCount()<T){let t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,o=!1){if(this._cannotFind())return null;let n=this._decorations.getFindScope(),s=W._getSearchRange(this._editor.getModel(),n);s.getEndPosition().isBefore(e)&&(e=s.getStartPosition()),e.isBefore(s.getStartPosition())&&(e=s.getStartPosition());let{lineNumber:r,column:a}=e,d=this._editor.getModel(),l=new c["a"](r,a),h=d.findNextMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t);return i&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(l)&&(l=this._nextSearchPosition(l),h=d.findNextMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t)),h?o||s.containsRange(h.range)?h:this._getNextMatch(h.range.getEndPosition(),t,i,!0):null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?L(this._state.replaceString):w.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){let o=e.buildReplaceString(i.matches,this._state.preserveCase),n=new l["a"](t,o);this._executeEditorCommand("replace",n),this._decorations.setStartPosition(new c["a"](t.startLineNumber,t.startColumn+o.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const o=(e||[null]).map(e=>W._getSearchRange(this._editor.getModel(),e));return this._editor.getModel().findMatches(this._state.searchString,o,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=T?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const e=new g["a"](this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null),t=e.parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let e="mu";i.ignoreCase&&(e+="i"),i.global&&(e+="g"),i=new RegExp(i.source,e)}const o=this._editor.getModel(),n=o.getValue(1),s=o.getFullModelRange(),r=this._getReplacePattern();let a;const d=this._state.preserveCase;a=r.hasReplacementPatterns||d?n.replace(i,(function(){return r.buildReplaceString(arguments,d)})):n.replace(i,r.buildReplaceString(null,d));let c=new l["b"](s,a,this._editor.getSelection());this._executeEditorCommand("replaceAll",c)}_regularReplaceAll(e){const t=this._getReplacePattern();let i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),o=[];for(let s=0,r=i.length;s<r;s++)o[s]=t.buildReplaceString(i[s].matches,this._state.preserveCase);let n=new v(this._editor.getSelection(),i.map(e=>e.range),o);this._executeEditorCommand("replaceAll",n)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824),i=t.map(e=>new u["a"](e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)),o=this._editor.getSelection();for(let n=0,s=i.length;n<s;n++){let e=i[n];if(e.equalsRange(o)){i=[o].concat(i.slice(0,n)).concat(i.slice(n+1));break}}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}var B=i("d208"),V=i("895a"),z=i("a9b7");class H extends z["a"]{constructor(e,t,i,n){super(),this._hideSoon=this._register(new o["e"](()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s=n.getColorTheme().getColor(m["lb"]),r=n.getColorTheme().getColor(m["mb"]),a=n.getColorTheme().getColor(m["kb"]);this.caseSensitive=this._register(new V["a"]({appendTitle:this._keybindingLabelFor(F.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new V["c"]({appendTitle:this._keybindingLabelFor(F.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new V["b"]({appendTitle:this._keybindingLabelFor(F.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:s,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(e=>{let t=!1;e.isRegex&&(this.regex.checked=this._state.isRegex,t=!0),e.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,t=!0),e.matchCase&&(this.caseSensitive.checked=this._state.matchCase,t=!0),!this._state.isRevealed&&t&&this._revealTemporarily()})),this._register(B["j"](this._domNode,e=>this._onMouseOut())),this._register(B["i"](this._domNode,"mouseover",e=>this._onMouseOver())),this._applyTheme(n.getColorTheme()),this._register(n.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return H.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(m["lb"]),inputActiveOptionForeground:e.getColor(m["mb"]),inputActiveOptionBackground:e.getColor(m["kb"])};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}H.ID="editor.contrib.findOptionsWidget",Object(f["f"])((e,t)=>{const i=e.getColor(m["cb"]);i&&t.addRule(`.monaco-editor .findOptionsWidget { background-color: ${i}; }`);const o=e.getColor(m["eb"]);o&&t.addRule(`.monaco-editor .findOptionsWidget { color: ${o}; }`);const n=e.getColor(m["Tc"]);n&&t.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${n}; }`);const s=e.getColor(m["h"]);s&&t.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${s}; }`)});var U=i("f295");function Z(e,t){return 1===e||2!==e&&t}class $ extends n["a"]{constructor(){super(),this._onFindReplaceStateChange=this._register(new U["b"]),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return Z(this._isRegexOverride,this._isRegex)}get wholeWord(){return Z(this._wholeWordOverride,this._wholeWord)}get matchCase(){return Z(this._matchCaseOverride,this._matchCase)}get preserveCase(){return Z(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,i){let o={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},n=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,o.matchesPosition=!0,n=!0),this._matchesCount!==t&&(this._matchesCount=t,o.matchesCount=!0,n=!0),"undefined"!==typeof i&&(h["a"].equalsRange(this._currentMatch,i)||(this._currentMatch=i,o.currentMatch=!0,n=!0)),n&&this._onFindReplaceStateChange.fire(o)}change(e,t,i=!0){var o;let n={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},s=!1;const r=this.isRegex,a=this.wholeWord,d=this.matchCase,l=this.preserveCase;"undefined"!==typeof e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,n.searchString=!0,s=!0),"undefined"!==typeof e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,n.replaceString=!0,s=!0),"undefined"!==typeof e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,n.isRevealed=!0,s=!0),"undefined"!==typeof e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,n.isReplaceRevealed=!0,s=!0),"undefined"!==typeof e.isRegex&&(this._isRegex=e.isRegex),"undefined"!==typeof e.wholeWord&&(this._wholeWord=e.wholeWord),"undefined"!==typeof e.matchCase&&(this._matchCase=e.matchCase),"undefined"!==typeof e.preserveCase&&(this._preserveCase=e.preserveCase),"undefined"!==typeof e.searchScope&&((null===(o=e.searchScope)||void 0===o?void 0:o.every(e=>{var t;return null===(t=this._searchScope)||void 0===t?void 0:t.some(t=>!h["a"].equalsRange(t,e))}))||(this._searchScope=e.searchScope,n.searchScope=!0,s=!0)),"undefined"!==typeof e.loop&&this._loop!==e.loop&&(this._loop=e.loop,n.loop=!0,s=!0),this._isRegexOverride="undefined"!==typeof e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride="undefined"!==typeof e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride="undefined"!==typeof e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride="undefined"!==typeof e.preserveCaseOverride?e.preserveCaseOverride:0,r!==this.isRegex&&(s=!0,n.isRegex=!0),a!==this.wholeWord&&(s=!0,n.wholeWord=!0),d!==this.matchCase&&(s=!0,n.matchCase=!0),l!==this.preserveCase&&(s=!0,n.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(n)}canNavigateBack(){return this.canNavigateInLoop()||1!==this.matchesPosition}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=T}}var q=i("4d3c"),K=i("9d4a"),G=i("3d8c"),X=i("47a8"),Y=i("f123"),Q=i("cb4a"),J=(i("5a4d"),i("c602")),ee=i("e338"),te=i("b2eb"),ie=i("6276"),oe=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const ne=Object(ie["b"])("find-selection",X["b"].selection,J["localize"]("vs/editor/contrib/find/findWidget","findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),se=Object(ie["b"])("find-collapsed",X["b"].chevronRight,J["localize"]("vs/editor/contrib/find/findWidget","findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),re=Object(ie["b"])("find-expanded",X["b"].chevronDown,J["localize"]("vs/editor/contrib/find/findWidget","findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),ae=Object(ie["b"])("find-replace",X["b"].replace,J["localize"]("vs/editor/contrib/find/findWidget","findReplaceIcon","Icon for 'Replace' in the editor find widget.")),de=Object(ie["b"])("find-replace-all",X["b"].replaceAll,J["localize"]("vs/editor/contrib/find/findWidget","findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),le=Object(ie["b"])("find-previous-match",X["b"].arrowUp,J["localize"]("vs/editor/contrib/find/findWidget","findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),ce=Object(ie["b"])("find-next-match",X["b"].arrowDown,J["localize"]("vs/editor/contrib/find/findWidget","findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),he=J["localize"]("vs/editor/contrib/find/findWidget","label.find","Find"),ue=J["localize"]("vs/editor/contrib/find/findWidget","placeholder.find","Find"),ge=J["localize"]("vs/editor/contrib/find/findWidget","label.previousMatchButton","Previous Match"),pe=J["localize"]("vs/editor/contrib/find/findWidget","label.nextMatchButton","Next Match"),_e=J["localize"]("vs/editor/contrib/find/findWidget","label.toggleSelectionFind","Find in Selection"),me=J["localize"]("vs/editor/contrib/find/findWidget","label.closeButton","Close"),fe=J["localize"]("vs/editor/contrib/find/findWidget","label.replace","Replace"),be=J["localize"]("vs/editor/contrib/find/findWidget","placeholder.replace","Replace"),ve=J["localize"]("vs/editor/contrib/find/findWidget","label.replaceButton","Replace"),Ce=J["localize"]("vs/editor/contrib/find/findWidget","label.replaceAllButton","Replace All"),Se=J["localize"]("vs/editor/contrib/find/findWidget","label.toggleReplaceButton","Toggle Replace"),ye=J["localize"]("vs/editor/contrib/find/findWidget","title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",T),we=J["localize"]("vs/editor/contrib/find/findWidget","label.matchesLocation","{0} of {1}"),xe=J["localize"]("vs/editor/contrib/find/findWidget","label.noResults","No results"),Ne=419,Le=275,Ie=Le-54;let Oe=69;const Ae=33,Re="ctrlEnterReplaceAll.windows.donotask",ke=Q["f"]?256:2048;class Me{constructor(e){this.afterLineNumber=e,this.heightInPx=Ae,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function De(e,t,i){const o=!!t.match(/\n/);i&&o&&i.selectionStart>0&&e.stopPropagation()}function Ee(e,t,i){const o=!!t.match(/\n/);i&&o&&i.selectionEnd<i.value.length&&e.stopPropagation()}class Pe extends z["a"]{constructor(e,t,i,s,r,a,d,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=s,this._keybindingService=r,this._contextKeyService=a,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(Re,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new o["a"](500),this._register(Object(n["i"])(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(e=>{if(e.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),e.hasChanged(129)&&this._tryUpdateWidgetWidth(),e.hasChanged(2)&&this.updateAccessibilitySupport(),e.hasChanged(35)){const e=this._codeEditor.getOption(35).addExtraSpaceOnTop;e&&!this._viewZone&&(this._viewZone=new Me(0),this._showViewZone()),!e&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>oe(this,void 0,void 0,(function*(){if(this._isVisible){let e=yield this._controller.getGlobalBufferTerm();e&&e!==this._state.searchString&&(this._state.change({searchString:e},!1),this._findInput.select())}})))),this._findInputFocused=A.bindTo(a),this._findFocusTracker=this._register(B["Y"](this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=R.bindTo(a),this._replaceFocusTracker=this._register(B["Y"](this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new Me(0)),this._applyTheme(d.getColorTheme()),this._register(d.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(e=>{e.scrollTopChanged?this._layoutViewZone():setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return Pe.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(80)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=B["I"](this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let e=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",e),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Y["f"])}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){let e;if(this._matchesCount.style.minWidth=Oe+"px",this._state.matchesCount>=T?this._matchesCount.title=ye:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=T&&(t+="+");let i=String(this._state.matchesPosition);"0"===i&&(i="?"),e=s["v"](we,i,t)}else e=xe;this._matchesCount.appendChild(document.createTextNode(e)),Object(q["a"])(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Oe=Math.max(Oe,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===xe)return""===i?J["localize"]("vs/editor/contrib/find/findWidget","ariaSearchNoResultEmpty","{0} found",e):J["localize"]("vs/editor/contrib/find/findWidget","ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const o=J["localize"]("vs/editor/contrib/find/findWidget","ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),n=this._codeEditor.getModel();if(n&&t.startLineNumber<=n.getLineCount()&&t.startLineNumber>=1){const e=n.getLineContent(t.startLineNumber);return`${e}, ${o}`}return o}return J["localize"]("vs/editor/contrib/find/findWidget","ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let i=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const t=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=t;break;default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const o=B["D"](i),n=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),s=o.left+(n?n.left:0),r=n?n.top:0;if(this._viewZone&&r<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const i=B["G"](this._domNode).left;s>i&&(t=!1);const n=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition()),r=o.left+(n?n.left:0);r>i&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){const t=this._codeEditor.getOption(35).addExtraSpaceOnTop;if(!t)return void this._removeViewZone();if(!this._isVisible)return;const i=this._viewZone;void 0===this._viewZoneId&&i&&this._codeEditor.changeViewZones(t=>{i.heightInPx=this._getHeight(),this._viewZoneId=t.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible)return;const t=this._codeEditor.getOption(35).addExtraSpaceOnTop;if(!t)return;void 0===this._viewZone&&(this._viewZone=new Me(0));const i=this._viewZone;this._codeEditor.changeViewZones(t=>{if(void 0!==this._viewZoneId){const o=this._getHeight();if(o===i.heightInPx)return;let n=o-i.heightInPx;return i.heightInPx=o,t.layoutZone(this._viewZoneId),void(e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+n))}{let o=this._getHeight();if(o-=this._codeEditor.getOption(74).top,o<=0)return;i.heightInPx=o,this._viewZoneId=t.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{void 0!==this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(m["lb"]),inputActiveOptionBackground:e.getColor(m["kb"]),inputActiveOptionForeground:e.getColor(m["mb"]),inputBackground:e.getColor(m["nb"]),inputForeground:e.getColor(m["pb"]),inputBorder:e.getColor(m["ob"]),inputValidationInfoBackground:e.getColor(m["tb"]),inputValidationInfoForeground:e.getColor(m["vb"]),inputValidationInfoBorder:e.getColor(m["ub"]),inputValidationWarningBackground:e.getColor(m["wb"]),inputValidationWarningForeground:e.getColor(m["yb"]),inputValidationWarningBorder:e.getColor(m["xb"]),inputValidationErrorBackground:e.getColor(m["qb"]),inputValidationErrorForeground:e.getColor(m["sb"]),inputValidationErrorBorder:e.getColor(m["rb"])};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible)return;if(!B["N"](this._domNode))return;const e=this._codeEditor.getLayoutInfo(),t=e.contentWidth;if(t<=0)return void this._domNode.classList.add("hiddenEditor");this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,o=e.minimap.minimapWidth;let n=!1,s=!1,r=!1;if(this._resized){let e=B["I"](this._domNode);if(e>Ne)return this._domNode.style.maxWidth=i-28-o-15+"px",void(this._replaceInput.width=B["I"](this._findInput.domNode))}if(Ne+28+o>=i&&(s=!0),Ne+28+o-Oe>=i&&(r=!0),Ne+28+o-Oe>=i+50&&(n=!0),this._domNode.classList.toggle("collapsed-find-widget",n),this._domNode.classList.toggle("narrow-find-widget",r),this._domNode.classList.toggle("reduced-find-widget",s),r||n||(this._domNode.style.maxWidth=i-28-o-15+"px"),this._resized){this._findInput.inputBox.layout();let e=this._findInput.inputBox.element.clientWidth;e>0&&(this._replaceInput.width=e)}else this._isReplaceVisible&&(this._replaceInput.width=B["I"](this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height=e+"px",!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(e=>{1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1)));const t=this._state.currentMatch;return e.startLineNumber===e.endLineNumber||h["a"].equalsRange(e,t)?null:e}).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){return e.equals(3|ke)?(this._keybindingService.dispatchEvent(e,e.target)||this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?De(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?Ee(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}_onReplaceInputKeyDown(e){return e.equals(3|ke)?(this._keybindingService.dispatchEvent(e,e.target)||(Q["i"]&&Q["g"]&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(J["localize"]("vs/editor/contrib/find/findWidget","ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(Re,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n")),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?De(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?Ee(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){const e=!0,t=!0;this._findInput=this._register(new ee["a"](null,this._contextViewProvider,{width:Ie,label:he,placeholder:ue,appendCaseSensitiveLabel:this._keybindingLabelFor(F.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(F.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(F.ToggleRegexCommand),validation:e=>{if(0===e.length||!this._findInput.getRegex())return null;try{return new RegExp(e,"gu"),null}catch(t){return{content:t.message}}},flexibleHeight:e,flexibleWidth:t,flexibleMaxHeight:118,showHistoryHint:()=>Object(te["a"])(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(e=>this._onFindInputKeyDown(e))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(e=>{e.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),e.preventDefault())})),this._register(this._findInput.onRegexKeyDown(e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),e.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(e=>{this._tryUpdateHeight()&&this._showViewZone()})),Q["d"]&&this._register(this._findInput.onMouseDown(e=>this._onFindInputMouseDown(e))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new Fe({label:ge+this._keybindingLabelFor(F.PreviousMatchFindAction),icon:le,onTrigger:()=>{this._codeEditor.getAction(F.PreviousMatchFindAction).run().then(void 0,Y["f"])}})),this._nextBtn=this._register(new Fe({label:pe+this._keybindingLabelFor(F.NextMatchFindAction),icon:ce,onTrigger:()=>{this._codeEditor.getAction(F.NextMatchFindAction).run().then(void 0,Y["f"])}}));let i=document.createElement("div");i.className="find-part",i.appendChild(this._findInput.domNode);const o=document.createElement("div");o.className="find-actions",i.appendChild(o),o.appendChild(this._matchesCount),o.appendChild(this._prevBtn.domNode),o.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new K["a"]({icon:ne,title:_e+this._keybindingLabelFor(F.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let e=this._codeEditor.getSelections();e.map(e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e)).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}else this._state.change({searchScope:null},!0)})),o.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Fe({label:me+this._keybindingLabelFor(F.CloseFindWidgetCommand),icon:ie["c"],onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),e.preventDefault())}})),o.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new ee["b"](null,void 0,{label:fe,placeholder:be,appendPreserveCaseLabel:this._keybindingLabelFor(F.TogglePreserveCaseCommand),history:[],flexibleHeight:e,flexibleWidth:t,flexibleMaxHeight:118,showHistoryHint:()=>Object(te["a"])(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(e=>this._onReplaceInputKeyDown(e))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(e=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(e=>{e.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),e.preventDefault())})),this._replaceBtn=this._register(new Fe({label:ve+this._keybindingLabelFor(F.ReplaceOneAction),icon:ae,onTrigger:()=>{this._controller.replace()},onKeyDown:e=>{e.equals(1026)&&(this._closeBtn.focus(),e.preventDefault())}})),this._replaceAllBtn=this._register(new Fe({label:Ce+this._keybindingLabelFor(F.ReplaceAllAction),icon:de,onTrigger:()=>{this._controller.replaceAll()}}));let n=document.createElement("div");n.className="replace-part",n.appendChild(this._replaceInput.domNode);const s=document.createElement("div");s.className="replace-actions",n.appendChild(s),s.appendChild(this._replaceBtn.domNode),s.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Fe({label:Se,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=B["I"](this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=Ne+"px",this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(i),this._domNode.appendChild(n),this._resizeSash=new G["b"](this._domNode,this,{orientation:0,size:2}),this._resized=!1;let r=Ne;this._register(this._resizeSash.onDidStart(()=>{r=B["I"](this._domNode)})),this._register(this._resizeSash.onDidChange(e=>{this._resized=!0;let t=r+e.startX-e.currentX;if(t<Ne)return;const i=parseFloat(B["A"](this._domNode).maxWidth)||0;t>i||(this._domNode.style.width=t+"px",this._isReplaceVisible&&(this._replaceInput.width=B["I"](this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const e=B["I"](this._domNode);if(e<Ne)return;let t=Ne;if(!this._resized||e===Ne){const e=this._codeEditor.getLayoutInfo();t=e.width-28-e.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=t+"px",this._isReplaceVisible&&(this._replaceInput.width=B["I"](this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}Pe.ID="editor.contrib.findWidget";class Fe extends z["a"]{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+f["d"].asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,e=>{this._opts.onTrigger(),e.preventDefault()}),this.onkeydown(this._domNode,e=>{if(e.equals(10)||e.equals(3))return this._opts.onTrigger(),void e.preventDefault();this._opts.onKeyDown&&this._opts.onKeyDown(e)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...f["d"].asClassNameArray(se)),this._domNode.classList.add(...f["d"].asClassNameArray(re))):(this._domNode.classList.remove(...f["d"].asClassNameArray(re)),this._domNode.classList.add(...f["d"].asClassNameArray(se)))}}Object(f["f"])((e,t)=>{const i=(e,i)=>{i&&t.addRule(`.monaco-editor ${e} { background-color: ${i}; }`)};i(".findMatch",e.getColor(m["x"])),i(".currentFindMatch",e.getColor(m["v"])),i(".findScope",e.getColor(m["z"]));const o=e.getColor(m["cb"]);i(".find-widget",o);const n=e.getColor(m["Tc"]);n&&t.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${n}; }`);const s=e.getColor(m["y"]);s&&t.addRule(`.monaco-editor .findMatch { border: 1px ${"hc"===e.type?"dotted":"solid"} ${s}; box-sizing: border-box; }`);const r=e.getColor(m["w"]);r&&t.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${r}; padding: 1px; box-sizing: border-box; }`);const a=e.getColor(m["A"]);a&&t.addRule(`.monaco-editor .findScope { border: 1px ${"hc"===e.type?"dashed":"solid"} ${a}; }`);const d=e.getColor(m["h"]);d&&t.addRule(`.monaco-editor .find-widget { border: 1px solid ${d}; }`);const l=e.getColor(m["eb"]);l&&t.addRule(`.monaco-editor .find-widget { color: ${l}; }`);const c=e.getColor(m["gb"]);c&&t.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${c}; }`);const h=e.getColor(m["fb"]);if(h)t.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${h}; }`);else{const i=e.getColor(m["db"]);i&&t.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${i}; }`)}const u=e.getColor(m["Qc"]);u&&t.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${u} !important;\n\t\t}\n\t`);const g=e.getColor(m["hb"]);g&&t.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${g}; }`)});var Te=i("cd62"),je=i("a1d3"),We=i("5e73"),Be=i("5365"),Ve=i("eb8f"),ze=i("0100"),He=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Ue=function(e,t){return function(i,o){t(i,o,e)}},Ze=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const $e=524288;function qe(e,t="single",i=!1){if(!e.hasModel())return null;const o=e.getSelection();if("single"===t&&o.startLineNumber===o.endLineNumber||"multiple"===t)if(o.isEmpty()){const t=e.getConfiguredWordAtPosition(o.getStartPosition());if(t&&!1===i)return t.word}else if(e.getModel().getValueLengthInRange(o)<$e)return e.getModel().getValueInRange(o);return null}let Ke=class e extends n["a"]{constructor(e,t,i,n){super(),this._editor=e,this._findWidgetVisible=O.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=n,this._updateHistoryDelayer=new o["a"](500),this._state=this._register(new $),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(e=>this._onStateChanged(e))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let e=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(t){return t.getContribution(e.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!A.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._editor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e)).filter(e=>!!e),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=s["t"](e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e){return Ze(this,void 0,void 0,(function*(){if(this.disposeModel(),!this._editor.hasModel())return;let t={isRevealed:!0};if("single"===e.seedSearchStringFromSelection){let i=qe(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?t.searchString=s["t"](i):t.searchString=i)}else if("multiple"===e.seedSearchStringFromSelection&&!e.updateSearchScope){let i=qe(this._editor,e.seedSearchStringFromSelection);i&&(t.searchString=i)}if(!t.searchString&&e.seedSearchStringFromGlobalClipboard){let e=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;e&&(t.searchString=e)}if(e.forceRevealReplace?t.isReplaceRevealed=!0:this._findWidgetVisible.get()||(t.isReplaceRevealed=!1),e.updateSearchScope){let e=this._editor.getSelections();e.some(e=>!e.isEmpty())&&(t.searchScope=e)}t.loop=e.loop,this._state.change(t,!1),this._model||(this._model=new W(this._editor,this._state))}))}start(e){return this._start(e)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){return!!this._model&&(this._model.replaceAll(),!0)}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}getGlobalBufferTerm(){return Ze(this,void 0,void 0,(function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}))}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Ke.ID="editor.contrib.findController",Ke=He([Ue(1,I["b"]),Ue(2,ze["a"]),Ue(3,je["a"])],Ke);let Ge=class extends Ke{constructor(e,t,i,o,n,s,r,a){super(e,i,r,a),this._contextViewService=t,this._keybindingService=o,this._themeService=n,this._notificationService=s,this._widget=null,this._findOptionsWidget=null}_start(e){const t=Object.create(null,{_start:{get:()=>super._start}});return Ze(this,void 0,void 0,(function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let o=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":o=!0;break;case"never":o=!1;break;case"multiline":const e=!!i&&i.startLineNumber!==i.endLineNumber;o=e;break;default:break}e.updateSearchScope=o,yield t._start.call(this,e),this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput())}))}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new Pe(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new H(this._editor,this._state,this._keybindingService,this._themeService))}};Ge=He([Ue(1,We["b"]),Ue(2,I["b"]),Ue(3,Be["a"]),Ue(4,f["b"]),Ue(5,Ve["a"]),Ue(6,ze["a"]),Ue(7,je["a"])],Ge);const Xe=Object(r["p"])(new r["f"]({id:F.StartFindAction,label:J["localize"]("vs/editor/contrib/find/findController","startFindAction","Find"),alias:"Find",precondition:I["a"].or(a["a"].focus,I["a"].has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Te["b"].MenubarEditMenu,group:"3_find",title:J["localize"]("vs/editor/contrib/find/findController",{key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));Xe.addImplementation(0,(e,t,i)=>{const o=Ke.get(t);return!!o&&o.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop})});class Ye extends r["b"]{constructor(){super({id:F.StartFindWithSelection,label:J["localize"]("vs/editor/contrib/find/findController","startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return Ze(this,void 0,void 0,(function*(){let e=Ke.get(t);e&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),e.setGlobalBufferTerm(e.getState().searchString))}))}}class Qe extends r["b"]{run(e,t){return Ze(this,void 0,void 0,(function*(){let e=Ke.get(t);e&&!this._run(e)&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==t.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(e))}))}}class Je extends Qe{constructor(){super({id:F.NextMatchFindAction,label:J["localize"]("vs/editor/contrib/find/findController","findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:a["a"].focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:I["a"].and(a["a"].focus,A),primary:3,weight:100}]})}_run(e){const t=e.moveToNextMatch();return!!t&&(e.editor.pushUndoStop(),!0)}}class et extends Qe{constructor(){super({id:F.PreviousMatchFindAction,label:J["localize"]("vs/editor/contrib/find/findController","findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:a["a"].focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:I["a"].and(a["a"].focus,A),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class tt extends r["b"]{run(e,t){return Ze(this,void 0,void 0,(function*(){let e=Ke.get(t);if(!e)return;const i="selection"===t.getOption(35).seedSearchStringFromSelection;let o=null;"never"!==t.getOption(35).seedSearchStringFromSelection&&(o=qe(t,"single",i)),o&&e.setSearchString(o),this._run(e)||(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:i,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(e))}))}}class it extends tt{constructor(){super({id:F.NextSelectionMatchFindAction,label:J["localize"]("vs/editor/contrib/find/findController","nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:a["a"].focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class ot extends tt{constructor(){super({id:F.PreviousSelectionMatchFindAction,label:J["localize"]("vs/editor/contrib/find/findController","previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:a["a"].focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const nt=Object(r["p"])(new r["f"]({id:F.StartFindReplaceAction,label:J["localize"]("vs/editor/contrib/find/findController","startReplace","Replace"),alias:"Replace",precondition:I["a"].or(a["a"].focus,I["a"].has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Te["b"].MenubarEditMenu,group:"3_find",title:J["localize"]("vs/editor/contrib/find/findController",{key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));nt.addImplementation(0,(e,t,i)=>{if(!t.hasModel()||t.getOption(80))return!1;const o=Ke.get(t);if(!o)return!1;const n=t.getSelection(),s=o.isFindInputFocused(),r=!n.isEmpty()&&n.startLineNumber===n.endLineNumber&&"never"!==t.getOption(35).seedSearchStringFromSelection&&!s,a=s||r?2:1;return o.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(35).seedSearchStringFromSelection,shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop})}),Object(r["l"])(Ke.ID,Ge),Object(r["j"])(Ye),Object(r["j"])(Je),Object(r["j"])(et),Object(r["j"])(it),Object(r["j"])(ot);const st=r["c"].bindToContribution(Ke.get);Object(r["k"])(new st({id:F.CloseFindWidgetCommand,precondition:O,handler:e=>e.closeFindWidget(),kbOpts:{weight:105,kbExpr:I["a"].and(a["a"].focus,I["a"].not("isComposing")),primary:9,secondary:[1033]}})),Object(r["k"])(new st({id:F.ToggleCaseSensitiveCommand,precondition:void 0,handler:e=>e.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:k.primary,mac:k.mac,win:k.win,linux:k.linux}})),Object(r["k"])(new st({id:F.ToggleWholeWordCommand,precondition:void 0,handler:e=>e.toggleWholeWords(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:M.primary,mac:M.mac,win:M.win,linux:M.linux}})),Object(r["k"])(new st({id:F.ToggleRegexCommand,precondition:void 0,handler:e=>e.toggleRegex(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:D.primary,mac:D.mac,win:D.win,linux:D.linux}})),Object(r["k"])(new st({id:F.ToggleSearchScopeCommand,precondition:void 0,handler:e=>e.toggleSearchScope(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:E.primary,mac:E.mac,win:E.win,linux:E.linux}})),Object(r["k"])(new st({id:F.TogglePreserveCaseCommand,precondition:void 0,handler:e=>e.togglePreserveCase(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:P.primary,mac:P.mac,win:P.win,linux:P.linux}})),Object(r["k"])(new st({id:F.ReplaceOneAction,precondition:O,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:3094}})),Object(r["k"])(new st({id:F.ReplaceOneAction,precondition:O,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:I["a"].and(a["a"].focus,R),primary:3}})),Object(r["k"])(new st({id:F.ReplaceAllAction,precondition:O,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:2563}})),Object(r["k"])(new st({id:F.ReplaceAllAction,precondition:O,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:I["a"].and(a["a"].focus,R),primary:void 0,mac:{primary:2051}}})),Object(r["k"])(new st({id:F.SelectAllMatchesAction,precondition:O,handler:e=>e.selectAllMatches(),kbOpts:{weight:105,kbExpr:a["a"].focus,primary:515}}))},"97e4":function(e,t,i){"use strict";i.r(t);var o=i("ae58"),n=i("0fff"),s=i("837c"),r=i("d8b0"),a=i("7c05"),d=i("c602");class l extends o["b"]{constructor(){super({id:"editor.action.transposeLetters",label:d["localize"]("vs/editor/contrib/caretOperations/transpose","transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:a["a"].writable,kbOpts:{kbExpr:a["a"].textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let i=t.getModel(),o=[],a=t.getSelections();for(let d of a){if(!d.isEmpty())continue;let e=d.startLineNumber,t=d.startColumn,a=i.getLineMaxColumn(e);if(1===e&&(1===t||2===t&&2===a))continue;let l=t===a?d.getPosition():s["a"].rightPosition(i,d.getPosition().lineNumber,d.getPosition().column),c=s["a"].leftPosition(i,l),h=s["a"].leftPosition(i,c),u=i.getValueInRange(r["a"].fromPositions(h,c)),g=i.getValueInRange(r["a"].fromPositions(c,l)),p=r["a"].fromPositions(h,l);o.push(new n["a"](p,g+u))}o.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop())}}Object(o["j"])(l)},"983d":function(e,t,i){},a79e:function(e,t,i){"use strict";i.r(t),i.d(t,"FoldingController",(function(){return ce})),i.d(t,"foldBackgroundBackground",(function(){return Ae})),i.d(t,"editorFoldForeground",(function(){return Re}));var o=i("4b4a"),n=i("f123"),s=i("d3a2"),r=i("92db"),a=i("1537"),d=i("4d73"),l=(i("d006"),i("5e2a")),c=i("ae58"),h=i("7c05"),u=i("d778"),g=i("6b8c"),p=i("f295");const _=65535,m=16777215,f=4278190080;class b{constructor(e,t,i){if(e.length!==t.length||e.length>_)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(t,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=t&&this.getEndLineNumber(o)>=i};for(let i=0,o=this._startIndexes.length;i<o;i++){let o=this._startIndexes[i],n=this._endIndexes[i];if(o>m||n>m)throw new Error("startLineNumber or endLineNumber must not exceed "+m);while(e.length>0&&!t(o,n))e.pop();let s=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=o+((255&s)<<24),this._endIndexes[i]=n+((65280&s)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&m}getEndLineNumber(e){return this._endIndexes[e]&m}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,i=e%32;return 0!==(this._collapseStates[t]&1<<i)}setCollapsed(e,t){let i=e/32|0,o=e%32,n=this._collapseStates[i];this._collapseStates[i]=t?n|1<<o:n&~(1<<o)}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let o=0;o<this._types.length;o++)this._types[o]===e&&(this.setCollapsed(o,t),i=!0);return i}toRegion(e){return new v(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&f)>>>24)+((this._endIndexes[e]&f)>>>16);return t===_?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(0===i)return-1;while(t<i){let o=Math.floor((t+i)/2);e<this.getStartLineNumber(o)?i=o:t=o+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){let i=this.getEndLineNumber(t);if(i>=e)return t;t=this.getParentIndex(t);while(-1!==t){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class v{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class C{constructor(e,t){this._updateEventEmitter=new p["b"],this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new b(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((e,t)=>e.regionIndex-t.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let o=0,n=-1,s=-1;const r=e=>{while(o<e){const e=this._regions.getEndLineNumber(o),t=this._regions.isCollapsed(o);e<=n&&i.changeDecorationOptions(this._editorDecorationIds[o],this._decorationProvider.getDecorationOption(t,e<=s)),t&&e>s&&(s=e),o++}};for(let a of e){let e=a.regionIndex,i=this._editorDecorationIds[e];if(i&&!t[i]){t[i]=!0,r(e);let o=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,o),n=Math.max(n,this._regions.getEndLineNumber(e))}}r(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let i=[],o=(e,i)=>{for(let o of t)if(e<o&&o<=i)return!0;return!1},n=-1,s=(t,s)=>{const r=e.getStartLineNumber(t),a=e.getEndLineNumber(t);s||(s=e.isCollapsed(t)),s&&o(r,a)&&(s=!1),e.setCollapsed(t,s);const d=this._textModel.getLineMaxColumn(r),l={startLineNumber:r,startColumn:Math.max(d-1,1),endLineNumber:r,endColumn:d};i.push({range:l,options:this._decorationProvider.getDecorationOption(s,a<=n)}),s&&a>n&&(n=a)},r=0,a=()=>{while(r<this._regions.length){let e=this._regions.isCollapsed(r);if(r++,e)return r-1}return-1},d=0,l=a();while(-1!==l&&d<e.length){let t=this._textModel.getDecorationRange(this._editorDecorationIds[l]);if(t){let i=t.startLineNumber;if(t.startColumn===Math.max(t.endColumn-1,1)&&this._textModel.getLineMaxColumn(i)===t.endColumn)while(d<e.length){let t=e.getStartLineNumber(d);if(!(i>=t))break;s(d,i===t),d++}}l=a()}while(d<e.length)s(d,!1),d++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let i=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(i){let o=i.startLineNumber,n=i.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:o,endLineNumber:n})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let i of e){let e=this.getRegionAtLine(i.startLineNumber);e&&!e.isCollapsed&&t.push(e)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let i=[];if(this._regions){let o=this._regions.findRange(e),n=1;while(o>=0){let e=this._regions.toRegion(o);t&&!t(e,n)||i.push(e),n++,o=e.parentIndex}}return i}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let i=[],o=e?e.regionIndex+1:0,n=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length){const e=[];for(let s=o,r=this._regions.length;s<r;s++){let o=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<n))break;while(e.length>0&&!o.containedBy(e[e.length-1]))e.pop();e.push(o),t(o,e.length)&&i.push(o)}}else for(let s=o,r=this._regions.length;s<r;s++){let e=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<n))break;t&&!t(e)||i.push(e)}return i}}function S(e,t,i){let o=[];for(let n of i){let i=e.getRegionAtLine(n);if(i){const n=!i.isCollapsed;if(o.push(i),t>1){let s=e.getRegionsInside(i,(e,i)=>e.isCollapsed!==n&&i<t);o.push(...s)}}}e.toggleCollapseState(o)}function y(e,t,i=Number.MAX_VALUE,o){let n=[];if(o&&o.length>0)for(let s of o){let o=e.getRegionAtLine(s);if(o&&(o.isCollapsed!==t&&n.push(o),i>1)){let s=e.getRegionsInside(o,(e,o)=>e.isCollapsed!==t&&o<i);n.push(...s)}}else{let o=e.getRegionsInside(null,(e,o)=>e.isCollapsed!==t&&o<i);n.push(...o)}e.toggleCollapseState(n)}function w(e,t,i,o){let n=[];for(let s of o){let o=e.getAllRegionsAtLine(s,(e,o)=>e.isCollapsed!==t&&o<=i);n.push(...o)}e.toggleCollapseState(n)}function x(e,t,i){let o=[];for(let n of i){let i=e.getAllRegionsAtLine(n,e=>e.isCollapsed!==t);i.length>0&&o.push(i[0])}e.toggleCollapseState(o)}function N(e,t,i,o){let n=(e,n)=>n===t&&e.isCollapsed!==i&&!o.some(t=>e.containsLine(t)),s=e.getRegionsInside(null,n);e.toggleCollapseState(s)}function L(e,t,i){let o=[];for(let r of i)o.push(e.getAllRegionsAtLine(r,void 0)[0]);let n=e=>o.every(t=>!t.containedBy(e)&&!e.containedBy(t))&&e.isCollapsed!==t,s=e.getRegionsInside(null,n);e.toggleCollapseState(s)}function I(e,t,i){let o=e.textModel,n=e.regions,s=[];for(let r=n.length-1;r>=0;r--)if(i!==n.isCollapsed(r)){let e=n.getStartLineNumber(r);t.test(o.getLineContent(e))&&s.push(n.toRegion(r))}e.toggleCollapseState(s)}function O(e,t,i){let o=e.regions,n=[];for(let s=o.length-1;s>=0;s--)i!==o.isCollapsed(s)&&t===o.getType(s)&&n.push(o.toRegion(s));e.toggleCollapseState(n)}function A(e,t){let i=null,o=t.getRegionAtLine(e);if(null!==o&&(i=o.startLineNumber,e===i)){let e=o.parentIndex;i=-1!==e?t.regions.getStartLineNumber(e):null}return i}function R(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){if(e!==i.startLineNumber)return i.startLineNumber;{let e=i.parentIndex,o=0;-1!==e&&(o=t.regions.getStartLineNumber(i.parentIndex));while(null!==i){if(!(i.regionIndex>0))return null;if(i=t.regions.toRegion(i.regionIndex-1),i.startLineNumber<=o)return null;if(i.parentIndex===e)return i.startLineNumber}}}else if(t.regions.length>0){i=t.regions.toRegion(t.regions.length-1);while(null!==i){if(i.startLineNumber<e)return i.startLineNumber;i=i.regionIndex>0?t.regions.toRegion(i.regionIndex-1):null}}return null}function k(e,t){let i=t.getRegionAtLine(e);if(null!==i&&i.startLineNumber===e){let e=i.parentIndex,o=0;if(-1!==e)o=t.regions.getEndLineNumber(i.parentIndex);else{if(0===t.regions.length)return null;o=t.regions.getEndLineNumber(t.regions.length-1)}while(null!==i){if(!(i.regionIndex<t.regions.length))return null;if(i=t.regions.toRegion(i.regionIndex+1),i.startLineNumber>=o)return null;if(i.parentIndex===e)return i.startLineNumber}}else if(t.regions.length>0){i=t.regions.toRegion(0);while(null!==i){if(i.startLineNumber>e)return i.startLineNumber;i=i.regionIndex<t.regions.length?t.regions.toRegion(i.regionIndex+1):null}}return null}var M=i("945a"),D=i("d8b0");class E{constructor(e){this._updateEventEmitter=new p["b"],this._foldingModel=e,this._foldingModelListener=e.onDidChange(e=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let e=!1,t=[],i=0,o=0,n=Number.MAX_VALUE,s=-1,r=this._foldingModel.regions;for(;i<r.length;i++){if(!r.isCollapsed(i))continue;let a=r.getStartLineNumber(i)+1,d=r.getEndLineNumber(i);n<=a&&d<=s||(!e&&o<this._hiddenRanges.length&&this._hiddenRanges[o].startLineNumber===a&&this._hiddenRanges[o].endLineNumber===d?(t.push(this._hiddenRanges[o]),o++):(e=!0,t.push(new D["a"](a,1,d,1))),n=a,s=d)}(e||o<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||0===e.length)return!1;let t=[];for(let i of e){if(!i.startLineNumber||!i.endLineNumber)return!1;t.push(new D["a"](i.startLineNumber+1,1,i.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return null!==F(this._hiddenRanges,e)}adjustSelections(e){let t=!1,i=this._foldingModel.textModel,o=null,n=e=>(o&&P(e,o)||(o=F(this._hiddenRanges,e)),o?o.startLineNumber-1:null);for(let s=0,r=e.length;s<r;s++){let o=e[s],r=n(o.startLineNumber);r&&(o=o.setStartPosition(r,i.getLineMaxColumn(r)),t=!0);let a=n(o.endLineNumber);a&&(o=o.setEndPosition(a,i.getLineMaxColumn(a)),t=!0),e[s]=o}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function P(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}function F(e,t){let i=Object(M["h"])(e,e=>t<e.startLineNumber)-1;return i>=0&&e[i].endLineNumber>=t?e[i]:null}var T=i("2f07");const j=5e3,W="indent";class B{constructor(e){this.editorModel=e,this.id=W}dispose(){}compute(e){let t=g["b"].getFoldingRules(this.editorModel.getLanguageId()),i=t&&!!t.offSide,o=t&&t.markers;return Promise.resolve(z(this.editorModel,i,o))}}class V{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>m||t>m)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=this._length-1,o=0;i>=0;i--,o++)e[o]=this._startIndexes[i],t[o]=this._endIndexes[i];return new b(e,t)}{let t=0,i=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){let o=this._indentOccurrences[e];if(o){if(o+t>this._foldingRangesLimit){i=e;break}t+=o}}const o=e.getOptions().tabSize;let n=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit);for(let r=this._length-1,a=0;r>=0;r--){let d=this._startIndexes[r],l=e.getLineContent(d),c=T["c"].computeIndentLevel(l,o);(c<i||c===i&&t++<this._foldingRangesLimit)&&(n[a]=d,s[a]=this._endIndexes[r],a++)}return new b(n,s)}}}function z(e,t,i,o=j){const n=e.getOptions().tabSize;let s=new V(o),r=void 0;i&&(r=new RegExp(`(${i.start.source})|(?:${i.end.source})`));let a=[],d=e.getLineCount()+1;a.push({indent:-1,endAbove:d,line:d});for(let l=e.getLineCount();l>0;l--){let i,o=e.getLineContent(l),d=T["c"].computeIndentLevel(o,n),c=a[a.length-1];if(-1!==d){if(r&&(i=o.match(r))){if(!i[1]){a.push({indent:-2,endAbove:l,line:l});continue}{let e=a.length-1;while(e>0&&-2!==a[e].indent)e--;if(e>0){a.length=e+1,c=a[e],s.insertFirst(l,c.line,d),c.line=l,c.indent=d,c.endAbove=l;continue}}}if(c.indent>d){do{a.pop(),c=a[a.length-1]}while(c.indent>d);let e=c.endAbove-1;e-l>=1&&s.insertFirst(l,e,d)}c.indent===d?c.endAbove=l:a.push({indent:d,endAbove:l,line:l})}else t&&(c.endAbove=l)}return s.toIndentRanges(e)}const H=5e3,U={},Z="syntax";class ${constructor(e,t,i,o=H){this.editorModel=e,this.providers=t,this.limit=o,this.id=Z;for(const n of t)"function"===typeof n.onDidChange&&(this.disposables||(this.disposables=new r["b"]),this.disposables.add(n.onDidChange(i)))}compute(e){return q(this.providers,this.editorModel,e).then(e=>{if(e){let t=G(e,this.limit);return t}return null})}dispose(){var e;null===(e=this.disposables)||void 0===e||e.dispose()}}function q(e,t,i){let o=null,s=e.map((e,s)=>Promise.resolve(e.provideFoldingRanges(t,U,i)).then(e=>{if(!i.isCancellationRequested&&Array.isArray(e)){Array.isArray(o)||(o=[]);let i=t.getLineCount();for(let t of e)t.start>0&&t.end>t.start&&t.end<=i&&o.push({start:t.start,end:t.end,rank:s,kind:t.kind})}},n["g"]));return Promise.all(s).then(e=>o)}class K{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,o){if(e>m||t>m)return;let n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._nestingLevels[n]=o,this._types[n]=i,this._length++,o<30&&(this._nestingLevelCounts[o]=(this._nestingLevelCounts[o]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=0;i<this._length;i++)e[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new b(e,t,this._types)}{let e=0,t=this._nestingLevelCounts.length;for(let s=0;s<this._nestingLevelCounts.length;s++){let i=this._nestingLevelCounts[s];if(i){if(i+e>this._foldingRangesLimit){t=s;break}e+=i}}let i=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit),n=[];for(let s=0,r=0;s<this._length;s++){let a=this._nestingLevels[s];(a<t||a===t&&e++<this._foldingRangesLimit)&&(i[r]=this._startIndexes[s],o[r]=this._endIndexes[s],n[r]=this._types[s],r++)}return new b(i,o,n)}}}function G(e,t){let i=e.sort((e,t)=>{let i=e.start-t.start;return 0===i&&(i=e.rank-t.rank),i}),o=new K(t),n=void 0,s=[];for(let r of i)if(n){if(r.start>n.start)if(r.end<=n.end)s.push(n),n=r,o.add(r.start,r.end,r.kind&&r.kind.value,s.length);else{if(r.start>n.end){do{n=s.pop()}while(n&&r.start>n.end);n&&s.push(n),n=r}o.add(r.start,r.end,r.kind&&r.kind.value,s.length)}}else n=r,o.add(r.start,r.end,r.kind&&r.kind.value,s.length);return o.toIndentRanges()}const X="init";class Y{constructor(e,t,i,o){if(this.editorModel=e,this.id=X,t.length){let n=t=>({range:{startLineNumber:t.startLineNumber,startColumn:0,endLineNumber:t.endLineNumber,endColumn:e.getLineLength(t.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(n)),this.timeout=setTimeout(i,o)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),"number"===typeof this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let i of this.decorationIds){let e=this.editorModel.getDecorationRange(i);e&&t.push({start:e.startLineNumber,end:e.endLineNumber,rank:1})}return Promise.resolve(G(t,Number.MAX_VALUE))}}var Q=i("c602"),J=i("6ad4"),ee=i("f7fb"),te=i("d1e2"),ie=i("47a8"),oe=i("6276");const ne=Object(oe["b"])("folding-expanded",ie["b"].chevronDown,Object(Q["localize"])("vs/editor/contrib/folding/foldingDecorations","foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),se=Object(oe["b"])("folding-collapsed",ie["b"].chevronRight,Object(Q["localize"])("vs/editor/contrib/folding/foldingDecorations","foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class re{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?re.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?re.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:re.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?re.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:re.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}re.COLLAPSED_VISUAL_DECORATION=T["b"].register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:te["d"].asClassName(se)}),re.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=T["b"].register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:te["d"].asClassName(se)}),re.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=T["b"].register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:te["d"].asClassName(ne)}),re.EXPANDED_VISUAL_DECORATION=T["b"].register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+te["d"].asClassName(ne)}),re.HIDDEN_RANGE_DECORATION=T["b"].register({description:"folding-hidden-range-decoration",stickiness:1});var ae=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},de=function(e,t){return function(i,o){t(i,o,e)}};const le=new J["c"]("foldingEnabled",!1);let ce=class e extends r["a"]{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new r["b"]),this.editor=e;const i=this.editor.getOptions();this._isEnabled=i.get(37),this._useFoldingProviders="indentation"!==i.get(38),this._unfoldOnClickAfterEndOfLine=i.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=i.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new re(e),this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===i.get(98),this.foldingDecorationProvider.showFoldingHighlights=i.get(39),this.foldingEnabled=le.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(e=>{if(e.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(98)||e.hasChanged(39)){const e=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===e.get(98),this.foldingDecorationProvider.showFoldingHighlights=e.get(39),this.onModelContentChanged()}e.hasChanged(38)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(38),this.onFoldingStrategyChanged()),e.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),e.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(t){return t.getContribution(e.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)return;if(!e||e.lineCount!==t.getLineCount())return;if(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions)return;e.provider!==Z&&e.provider!==X||(this.foldingStateMemento=e);const i=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(i)){const e=this.getFoldingModel();e&&e.then(e=>{if(e){this._restoringViewState=!0;try{e.applyMemento(i)}finally{this._restoringViewState=!1}}}).then(void 0,n["f"])}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();this._isEnabled&&e&&!e.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new C(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new E(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(e=>this.onHiddenRangesChanges(e))),this.updateScheduler=new o["a"](200),this.cursorChangedScheduler=new o["e"](()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(u["o"].onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(()=>this.onModelContentChanged())),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(e=>this.onEditorMouseDown(e))),this.localToDispose.add(this.editor.onMouseUp(e=>this.onEditorMouseUp(e))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new B(e),this._useFoldingProviders&&this.foldingModel){let t=u["o"].ordered(this.foldingModel.textModel);if(0===t.length&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions){const t=this.rangeProvider=new Y(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);return t}t.length>0&&(this.rangeProvider=new $(e,t,()=>this.onModelContentChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let i=this.foldingRegionPromise=Object(o["h"])(e=>t.compute(e));return i.then(t=>{if(t&&i===this.foldingRegionPromise){let i;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const e=t.setCollapsedAllOfType(u["n"].Imports.value,!0);e&&(i=l["c"].capture(this.editor),this._currentModelHasFoldedImports=e)}let o=this.editor.getSelections(),n=o?o.map(e=>e.startLineNumber):[];e.update(t,n),i&&i.restore(this.editor)}return e})}).then(void 0,e=>(Object(n["f"])(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(e=>{if(e){let t=this.editor.getSelections();if(t&&t.length>0){let i=[];for(let o of t){let t=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(t)&&i.push(...e.getAllRegionsAtLine(t,e=>e.isCollapsed&&t>e.startLineNumber))}i.length&&(e.toggleCollapseState(i),this.reveal(t[0].getPosition()))}}}).then(void 0,n["f"])}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range)return;if(!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:const o=e.target.detail,n=e.target.element.offsetLeft,s=o.offsetX-n;if(s<5)return;i=!0;break;case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){const t=e.target.detail;if(!t.isAfterLines)break}return;case 6:if(this.hiddenRangeModel.hasRanges()){let e=this.editor.getModel();if(e&&t.startColumn===e.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let i=this.mouseDownInfo.lineNumber,o=this.mouseDownInfo.iconClicked,s=e.target.range;if(s&&s.startLineNumber===i){if(o){if(4!==e.target.type)return}else{let e=this.editor.getModel();if(!e||s.startColumn!==e.getLineMaxColumn(i))return}t.then(t=>{if(t){let n=t.getRegionAtLine(i);if(n&&n.startLineNumber===i){let s=n.isCollapsed;if(o||s){let o=e.event.altKey,r=[];if(o){let e=e=>!e.containedBy(n)&&!n.containedBy(e),i=t.getRegionsInside(null,e);for(const t of i)t.isCollapsed&&r.push(t);0===r.length&&(r=i)}else{let i=e.event.middleButton||e.event.shiftKey;if(i)for(const e of t.getRegionsInside(n))e.isCollapsed===s&&r.push(e);!s&&i&&0!==r.length||r.push(n)}t.toggleCollapseState(r),this.reveal({lineNumber:i,column:1})}}}}).then(void 0,n["f"])}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};ce.ID="editor.contrib.folding",ce=ae([de(1,J["b"])],ce);class he extends c["b"]{runEditorCommand(e,t,i){let o=ce.get(t);if(!o)return;let n=o.getFoldingModel();return n?(this.reportTelemetry(e,t),n.then(e=>{if(e){this.invoke(o,e,t,i);const n=t.getSelection();n&&o.reveal(n.getStartPosition())}})):void 0}getSelectedLines(e){let t=e.getSelections();return t?t.map(e=>e.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(e=>e+1):this.getSelectedLines(t)}run(e,t){}}function ue(e){if(!d["m"](e)){if(!d["k"](e))return!1;const t=e;if(!d["m"](t.levels)&&!d["j"](t.levels))return!1;if(!d["m"](t.direction)&&!d["l"](t.direction))return!1;if(!d["m"](t.selectionLines)&&(!d["f"](t.selectionLines)||!t.selectionLines.every(d["j"])))return!1}return!0}class ge extends he{constructor(){super({id:"editor.unfold",label:Q["localize"]("vs/editor/contrib/folding/folding","unfoldAction.label","Unfold"),alias:"Unfold",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:ue,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,o){let n=o&&o.levels||1,s=this.getLineNumbers(o,i);o&&"up"===o.direction?w(t,!1,n,s):y(t,!1,n,s)}}class pe extends he{constructor(){super({id:"editor.unfoldRecursively",label:Q["localize"]("vs/editor/contrib/folding/folding","unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2137),weight:100}})}invoke(e,t,i,o){y(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class _e extends he{constructor(){super({id:"editor.fold",label:Q["localize"]("vs/editor/contrib/folding/folding","foldAction.label","Fold"),alias:"Fold",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:ue,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,o){let n=this.getLineNumbers(o,i);const s=o&&o.levels,r=o&&o.direction;"number"!==typeof s&&"string"!==typeof r?x(t,!0,n):"up"===r?w(t,!0,s||1,n):y(t,!0,s||1,n)}}class me extends he{constructor(){super({id:"editor.toggleFold",label:Q["localize"]("vs/editor/contrib/folding/folding","toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2090),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);S(t,1,o)}}class fe extends he{constructor(){super({id:"editor.foldRecursively",label:Q["localize"]("vs/editor/contrib/folding/folding","foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2135),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);y(t,!0,Number.MAX_VALUE,o)}}class be extends he{constructor(){super({id:"editor.foldAllBlockComments",label:Q["localize"]("vs/editor/contrib/folding/folding","foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2133),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())O(t,u["n"].Comment.value,!0);else{const e=i.getModel();if(!e)return;const o=g["b"].getComments(e.getLanguageId());if(o&&o.blockCommentStartToken){let e=new RegExp("^\\s*"+Object(a["t"])(o.blockCommentStartToken));I(t,e,!0)}}}}class ve extends he{constructor(){super({id:"editor.foldAllMarkerRegions",label:Q["localize"]("vs/editor/contrib/folding/folding","foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2077),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())O(t,u["n"].Region.value,!0);else{const e=i.getModel();if(!e)return;const o=g["b"].getFoldingRules(e.getLanguageId());if(o&&o.markers&&o.markers.start){let e=new RegExp(o.markers.start);I(t,e,!0)}}}}class Ce extends he{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:Q["localize"]("vs/editor/contrib/folding/folding","unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2078),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())O(t,u["n"].Region.value,!1);else{const e=i.getModel();if(!e)return;const o=g["b"].getFoldingRules(e.getLanguageId());if(o&&o.markers&&o.markers.start){let e=new RegExp(o.markers.start);I(t,e,!1)}}}}class Se extends he{constructor(){super({id:"editor.foldAllExcept",label:Q["localize"]("vs/editor/contrib/folding/folding","foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2131),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);L(t,!0,o)}}class ye extends he{constructor(){super({id:"editor.unfoldAllExcept",label:Q["localize"]("vs/editor/contrib/folding/folding","unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2129),weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);L(t,!1,o)}}class we extends he{constructor(){super({id:"editor.foldAll",label:Q["localize"]("vs/editor/contrib/folding/folding","foldAllAction.label","Fold All"),alias:"Fold All",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2069),weight:100}})}invoke(e,t,i){y(t,!0)}}class xe extends he{constructor(){super({id:"editor.unfoldAll",label:Q["localize"]("vs/editor/contrib/folding/folding","unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2088),weight:100}})}invoke(e,t,i){y(t,!1)}}class Ne extends he{getFoldingLevel(){return parseInt(this.id.substr(Ne.ID_PREFIX.length))}invoke(e,t,i){N(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}Ne.ID_PREFIX="editor.foldLevel",Ne.ID=e=>Ne.ID_PREFIX+e;class Le extends he{constructor(){super({id:"editor.gotoParentFold",label:Q["localize"]("vs/editor/contrib/folding/folding","gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=A(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}class Ie extends he{constructor(){super({id:"editor.gotoPreviousFold",label:Q["localize"]("vs/editor/contrib/folding/folding","gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=R(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}class Oe extends he{constructor(){super({id:"editor.gotoNextFold",label:Q["localize"]("vs/editor/contrib/folding/folding","gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,weight:100}})}invoke(e,t,i){let o=this.getSelectedLines(i);if(o.length>0){let e=k(o[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}}Object(c["l"])(ce.ID,ce),Object(c["j"])(ge),Object(c["j"])(pe),Object(c["j"])(_e),Object(c["j"])(fe),Object(c["j"])(we),Object(c["j"])(xe),Object(c["j"])(be),Object(c["j"])(ve),Object(c["j"])(Ce),Object(c["j"])(Se),Object(c["j"])(ye),Object(c["j"])(me),Object(c["j"])(Le),Object(c["j"])(Ie),Object(c["j"])(Oe);for(let ke=1;ke<=7;ke++)Object(c["m"])(new Ne({id:Ne.ID(ke),label:Q["localize"]("vs/editor/contrib/folding/folding","foldLevelAction.label","Fold Level {0}",ke),alias:"Fold Level "+ke,precondition:le,kbOpts:{kbExpr:h["a"].editorTextFocus,primary:Object(s["c"])(2089,2048|21+ke),weight:100}}));const Ae=Object(ee["Cc"])("editor.foldBackground",{light:Object(ee["Rc"])(ee["V"],.3),dark:Object(ee["Rc"])(ee["V"],.3),hc:null},Q["localize"]("vs/editor/contrib/folding/folding","foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),Re=Object(ee["Cc"])("editorGutter.foldingControlForeground",{dark:ee["jb"],light:ee["jb"],hc:ee["jb"]},Q["localize"]("vs/editor/contrib/folding/folding","editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));Object(te["f"])((e,t)=>{const i=e.getColor(Ae);i&&t.addRule(`.monaco-editor .folded-background { background-color: ${i}; }`);const o=e.getColor(Re);o&&t.addRule(`\n\t\t.monaco-editor .cldr${te["d"].asCSSSelector(ne)},\n\t\t.monaco-editor .cldr${te["d"].asCSSSelector(se)} {\n\t\t\tcolor: ${o} !important;\n\t\t}\n\t\t`)})},b18e:function(e,t,i){"use strict";i.r(t),i.d(t,"CutAction",(function(){return b})),i.d(t,"CopyAction",(function(){return v})),i.d(t,"PasteAction",(function(){return C}));var o=i("28e9"),n=i("cb4a"),s=i("8948"),r=i("ae58"),a=i("47f8"),d=i("7c05"),l=i("c602"),c=i("cd62"),h=i("a1d3"),u=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const g="9_cutcopypaste",p=n["g"]||document.queryCommandSupported("cut"),_=n["g"]||document.queryCommandSupported("copy"),m="undefined"!==typeof navigator.clipboard&&!o["g"]||document.queryCommandSupported("paste");function f(e){return e.register(),e}const b=p?f(new r["e"]({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:n["g"]?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:c["b"].MenubarEditMenu,group:"2_ccp",title:l["localize"]("vs/editor/contrib/clipboard/clipboard",{key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:c["b"].EditorContext,group:g,title:l["localize"]("vs/editor/contrib/clipboard/clipboard","actions.clipboard.cutLabel","Cut"),when:d["a"].writable,order:1},{menuId:c["b"].CommandPalette,group:"",title:l["localize"]("vs/editor/contrib/clipboard/clipboard","actions.clipboard.cutLabel","Cut"),order:1},{menuId:c["b"].SimpleEditorContext,group:g,title:l["localize"]("vs/editor/contrib/clipboard/clipboard","actions.clipboard.cutLabel","Cut"),when:d["a"].writable,order:1}]})):void 0,v=_?f(new r["e"]({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:n["g"]?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:c["b"].MenubarEditMenu,group:"2_ccp",title:l["localize"]("vs/editor/contrib/clipboard/clipboard",{key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:c["b"].EditorContext,group:g,title:l["localize"]("vs/editor/contrib/clipboard/clipboard","actions.clipboard.copyLabel","Copy"),order:2},{menuId:c["b"].CommandPalette,group:"",title:l["localize"]("vs/editor/contrib/clipboard/clipboard","actions.clipboard.copyLabel","Copy"),order:1},{menuId:c["b"].SimpleEditorContext,group:g,title:l["localize"]("vs/editor/contrib/clipboard/clipboard","actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;c["d"].appendMenuItem(c["b"].MenubarEditMenu,{submenu:c["b"].MenubarCopy,title:{value:l["localize"]("vs/editor/contrib/clipboard/clipboard","copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),c["d"].appendMenuItem(c["b"].EditorContext,{submenu:c["b"].EditorContextCopy,title:{value:l["localize"]("vs/editor/contrib/clipboard/clipboard","copy as","Copy As"),original:"Copy As"},group:g,order:3});const C=m?f(new r["e"]({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:n["g"]?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:c["b"].MenubarEditMenu,group:"2_ccp",title:l["localize"]("vs/editor/contrib/clipboard/clipboard",{key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:c["b"].EditorContext,group:g,title:l["localize"]("vs/editor/contrib/clipboard/clipboard","actions.clipboard.pasteLabel","Paste"),when:d["a"].writable,order:4},{menuId:c["b"].CommandPalette,group:"",title:l["localize"]("vs/editor/contrib/clipboard/clipboard","actions.clipboard.pasteLabel","Paste"),order:1},{menuId:c["b"].SimpleEditorContext,group:g,title:l["localize"]("vs/editor/contrib/clipboard/clipboard","actions.clipboard.pasteLabel","Paste"),when:d["a"].writable,order:4}]})):void 0;class S extends r["b"]{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:l["localize"]("vs/editor/contrib/clipboard/clipboard","actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:d["a"].textInputFocus,primary:0,weight:100}})}run(e,t){if(!t.hasModel())return;const i=t.getOption(32);!i&&t.getSelection().isEmpty()||(s["a"].forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),s["a"].forceCopyWithSyntaxHighlighting=!1)}}function y(e,t){e&&(e.addImplementation(1e4,"code-editor",(e,i)=>{const o=e.get(a["a"]).getFocusedCodeEditor();if(o&&o.hasTextFocus()){const e=o.getOption(32),i=o.getSelection();return i&&i.isEmpty()&&!e||document.execCommand(t),!0}return!1}),e.addImplementation(0,"generic-dom",(e,i)=>(document.execCommand(t),!0)))}y(b,"cut"),y(v,"copy"),C&&(C.addImplementation(1e4,"code-editor",(e,t)=>{const i=e.get(a["a"]),o=e.get(h["a"]),r=i.getFocusedCodeEditor();if(r&&r.hasTextFocus()){const e=document.execCommand("paste");return!(!e&&n["h"])||(()=>u(void 0,void 0,void 0,(function*(){const e=yield o.readText();if(""!==e){const t=s["b"].INSTANCE.get(e);let i=!1,o=null,n=null;t&&(i=r.getOption(32)&&!!t.isFromEmptySelection,o="undefined"!==typeof t.multicursorText?t.multicursorText:null,n=t.mode),r.trigger("keyboard","paste",{text:e,pasteOnNewLine:i,multicursorText:o,mode:n})}})))()}return!1}),C.addImplementation(0,"generic-dom",(e,t)=>(document.execCommand("paste"),!0))),_&&Object(r["j"])(S)},b361:function(e,t,i){"use strict";i.d(t,"b",(function(){return f})),i.d(t,"f",(function(){return b})),i.d(t,"g",(function(){return v})),i.d(t,"e",(function(){return C})),i.d(t,"c",(function(){return S})),i.d(t,"a",(function(){return y})),i.d(t,"d",(function(){return N}));var o=i("945a"),n=i("4163"),s=i("f123"),r=i("92db"),a=i("c189"),d=i("5e2a"),l=i("d8b0"),c=i("17e0"),h=i("d778"),u=i("1edf"),g=i("d5b7"),p=i("b5f6"),_=i("389a"),m=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const f="editor.action.codeAction",b="editor.action.refactor",v="editor.action.sourceAction",C="editor.action.organizeImports",S="editor.action.fixAll";class y{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return m(this,void 0,void 0,(function*(){if((null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)&&!this.action.edit){let t;try{t=yield this.provider.resolveCodeAction(this.action,e)}catch(i){Object(s["g"])(i)}t&&(this.action.edit=t.edit)}return this}))}}class w extends r["a"]{constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(w.codeActionsComparator),this.validActions=this.allActions.filter(({action:e})=>!e.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:Object(o["n"])(e.diagnostics)?Object(o["n"])(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:Object(o["n"])(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&_["b"].QuickFix.contains(new _["b"](e.kind))&&!!e.isPreferred)}}const x={actions:[],documentation:void 0};function N(e,t,i,n,a){var l;const c=i.filter||{},u={only:null===(l=c.include)||void 0===l?void 0:l.value,trigger:i.type},g=new d["d"](e,a),p=L(e,c),f=new r["b"],b=p.map(i=>m(this,void 0,void 0,(function*(){try{n.report(i);const o=yield i.provideCodeActions(e,t,u,g.token);if(o&&f.add(o),g.token.isCancellationRequested)return x;const s=((null===o||void 0===o?void 0:o.actions)||[]).filter(e=>e&&Object(_["c"])(c,e)),r=I(i,s,c.include);return{actions:s.map(e=>new y(e,i)),documentation:r}}catch(o){if(Object(s["e"])(o))throw o;return Object(s["g"])(o),x}}))),v=h["a"].onDidChange(()=>{const t=h["a"].all(e);Object(o["g"])(t,p)||g.cancel()});return Promise.all(b).then(e=>{const t=Object(o["k"])(e.map(e=>e.actions)),i=Object(o["e"])(e.map(e=>e.documentation));return new w(t,i,f)}).finally(()=>{v.dispose(),g.dispose()})}function L(e,t){return h["a"].all(e).filter(e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some(e=>Object(_["d"])(t,new _["b"](e))))}function I(e,t,i){if(!e.documentation)return;const o=e.documentation.map(e=>({kind:new _["b"](e.kind),command:e.command}));if(i){let e;for(const t of o)t.kind.contains(i)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return null===e||void 0===e?void 0:e.command}for(const n of t)if(n.kind)for(const e of o)if(e.kind.contains(new _["b"](n.kind)))return e.command}g["a"].registerCommand("_executeCodeActionProvider",(function(e,t,i,o,r){return m(this,void 0,void 0,(function*(){if(!(t instanceof a["a"]))throw Object(s["c"])();const d=e.get(u["a"]).getModel(t);if(!d)throw Object(s["c"])();const h=c["a"].isISelection(i)?c["a"].liftSelection(i):l["a"].isIRange(i)?d.validateRange(i):void 0;if(!h)throw Object(s["c"])();const g="string"===typeof o?new _["b"](o):void 0,m=yield N(d,h,{type:1,filter:{includeSourceActions:!0,include:g}},p["b"].None,n["a"].None),f=[],b=Math.min(m.validActions.length,"number"===typeof r?r:0);for(let e=0;e<b;e++)f.push(m.validActions[e].resolve(n["a"].None));try{return yield Promise.all(f),m.validActions.map(e=>e.action)}finally{setTimeout(()=>m.dispose(),100)}}))}))},b654:function(e,t,i){"use strict";i.r(t);var o=i("ae58"),n=i("ed96");Object(o["l"])(n["f"].ID,n["f"]),Object(o["j"])(n["e"]),Object(o["j"])(n["g"]),Object(o["j"])(n["h"]),Object(o["j"])(n["d"]),Object(o["j"])(n["a"]),Object(o["j"])(n["c"]),Object(o["k"])(new n["b"])},b94e:function(e,t,i){},be8e:function(e,t,i){},c084:function(e,t,i){"use strict";i.r(t),i.d(t,"SelectionAnchorSet",(function(){return p}));var o=i("4d3c"),n=i("6b5e"),s=i("d3a2"),r=(i("29d5"),i("ae58")),a=i("17e0"),d=i("7c05"),l=i("c602"),c=i("6ad4"),h=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t){return function(i,o){t(i,o,e)}},g=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};const p=new c["c"]("selectionAnchorSet",!1);let _=class e{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=p.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(t){return t.getContribution(e.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],i=this.editor.deltaDecorations(t,[{range:a["a"].fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:(new n["a"]).appendText(Object(l["localize"])("vs/editor/contrib/anchorSelect/anchorSelect","selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=i[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),Object(o["a"])(Object(l["localize"])("vs/editor/contrib/anchorSelect/anchorSelect","anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(a["a"].fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};_.ID="editor.contrib.selectionAnchorController",_=h([u(1,c["b"])],_);class m extends r["b"]{constructor(){super({id:"editor.action.setSelectionAnchor",label:Object(l["localize"])("vs/editor/contrib/anchorSelect/anchorSelect","setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:d["a"].editorTextFocus,primary:Object(s["c"])(2089,2080),weight:100}})}run(e,t){return g(this,void 0,void 0,(function*(){const e=_.get(t);e.setSelectionAnchor()}))}}class f extends r["b"]{constructor(){super({id:"editor.action.goToSelectionAnchor",label:Object(l["localize"])("vs/editor/contrib/anchorSelect/anchorSelect","goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:p})}run(e,t){return g(this,void 0,void 0,(function*(){const e=_.get(t);e.goToSelectionAnchor()}))}}class b extends r["b"]{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:Object(l["localize"])("vs/editor/contrib/anchorSelect/anchorSelect","selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:p,kbOpts:{kbExpr:d["a"].editorTextFocus,primary:Object(s["c"])(2089,2089),weight:100}})}run(e,t){return g(this,void 0,void 0,(function*(){const e=_.get(t);e.selectFromAnchorToCursor()}))}}class v extends r["b"]{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:Object(l["localize"])("vs/editor/contrib/anchorSelect/anchorSelect","cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:p,kbOpts:{kbExpr:d["a"].editorTextFocus,primary:9,weight:100}})}run(e,t){return g(this,void 0,void 0,(function*(){const e=_.get(t);e.cancelSelectionAnchor()}))}}Object(r["l"])(_.ID,_),Object(r["j"])(m),Object(r["j"])(f),Object(r["j"])(b),Object(r["j"])(v)},ca7e:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var o=i("945a"),n=i("4163"),s=i("f123"),r=i("bd20"),a=i("1a26"),d=i("d8b0"),l=i("d778"),c=i("0650");class h{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let i;"string"===typeof e?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,void 0!==t.children.get(i)&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let o=i;for(let n=0;void 0!==t.children.get(o);n++)o=`${i}_${n}`;return o}static empty(e){return 0===e.children.size}}class u extends h{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class g extends h{constructor(e,t,i,o){super(),this.id=e,this.parent=t,this.label=i,this.order=o,this.children=new Map}}class p extends h{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t){let i=this._keys.for(e,!0),o=p._requests.get(i);if(!o){let t=new n["b"];o={promiseCnt:0,source:t,promise:p._create(e,t.token),model:void 0},p._requests.set(i,o);const s=Date.now();o.promise.then(()=>{this._requestDurations.update(e,Date.now()-s)})}return o.model?Promise.resolve(o.model):(o.promiseCnt+=1,t.onCancellationRequested(()=>{0===--o.promiseCnt&&(o.source.cancel(),p._requests.delete(i))}),new Promise((e,t)=>{o.promise.then(t=>{o.model=t,e(t)},e=>{p._requests.delete(i),t(e)})}))}static _create(e,t){const i=new n["b"](t),r=new p(e.uri),a=l["m"].ordered(e),d=a.map((t,o)=>{var n;let a=h.findId("provider_"+o,r),d=new g(a,r,null!==(n=t.displayName)&&void 0!==n?n:"Unknown Outline Provider",o);return Promise.resolve(t.provideDocumentSymbols(e,i.token)).then(e=>{for(const t of e||[])p._makeOutlineElement(t,d);return d},e=>(Object(s["g"])(e),d)).then(e=>{h.empty(e)?e.remove():r._groups.set(a,e)})}),c=l["m"].onDidChange(()=>{const t=l["m"].ordered(e);Object(o["g"])(t,a)||i.cancel()});return Promise.all(d).then(()=>i.token.isCancellationRequested&&!t.isCancellationRequested?p._create(e,t):r._compact()).finally(()=>{c.dispose()})}static _makeOutlineElement(e,t){let i=h.findId(e,t),o=new u(i,t,e);if(e.children)for(const n of e.children)p._makeOutlineElement(n,o);t.children.set(o.id,o)}_compact(){let e=0;for(const[t,i]of this._groups)0===i.children.size?this._groups.delete(t):e+=1;if(1!==e)this.children=this._groups;else{let e=r["a"].first(this._groups.values());for(let[,t]of e.children)t.parent=this,this.children.set(t.id,t)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof u?e.push(t.symbol):e.push(...r["a"].map(t.children.values(),e=>e.symbol));return e.sort((e,t)=>d["a"].compareRangesUsingStarts(e.range,t.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return p._flattenDocumentSymbols(t,e,""),t.sort((e,t)=>d["a"].compareRangesUsingStarts(e.range,t.range))}static _flattenDocumentSymbols(e,t,i){for(const o of t)e.push({kind:o.kind,tags:o.tags,name:o.name,detail:o.detail,containerName:o.containerName||i,range:o.range,selectionRange:o.selectionRange,children:void 0}),o.children&&p._flattenDocumentSymbols(e,o.children,o.name)}}p._requestDurations=new c["b"](l["m"],350),p._requests=new a["a"](9,.75),p._keys=new class{constructor(){this._counter=1,this._data=new WeakMap}for(e,t){return`${e.id}/${t?e.getVersionId():""}/${this._hash(l["m"].all(e))}`}_hash(e){let t="";for(const i of e){let e=this._data.get(i);"undefined"===typeof e&&(e=this._counter++,this._data.set(i,e)),t+=e}return t}}},d006:function(e,t,i){},d578:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var o=i("f295");class n{constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new o["b"],this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new o["b"],this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new o["b"],this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let i=0;i<this.colorPresentations.length;i++)if(t.toLowerCase()===this.colorPresentations[i].label){this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}},eadb:function(e,t,i){"use strict";i.r(t),i.d(t,"getDocumentSymbols",(function(){return h}));var o=i("4163"),n=i("4d73"),s=i("c189"),r=i("1edf"),a=i("d00e"),d=i("ca7e"),l=i("d5b7"),c=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};function h(e,t,i){return c(this,void 0,void 0,(function*(){const o=yield d["a"].create(e,i);return t?o.asListOfDocumentSymbols():o.getTopLevelSymbols()}))}l["a"].registerCommand("_executeDocumentSymbolProvider",(function(e,...t){return c(this,void 0,void 0,(function*(){const[i]=t;Object(n["c"])(s["a"].isUri(i));const d=e.get(r["a"]).getModel(i);if(d)return h(d,!1,o["a"].None);const l=yield e.get(a["a"]).createModelReference(i);try{return yield h(l.object.textEditorModel,!1,o["a"].None)}finally{l.dispose()}}))}))},ec54:function(e,t,i){"use strict";i.r(t),i.d(t,"CursorUndoRedoController",(function(){return l})),i.d(t,"CursorUndo",(function(){return c})),i.d(t,"CursorRedo",(function(){return h}));var o=i("92db"),n=i("ae58"),s=i("7c05"),r=i("c602");class a{constructor(e){this.selections=e}equals(e){const t=this.selections.length,i=e.selections.length;if(t!==i)return!1;for(let o=0;o<t;o++)if(!this.selections[o].equalsSelection(e.selections[o]))return!1;return!0}}class d{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}class l extends o["a"]{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(e=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(e=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo)return;if(!t.oldSelections)return;if(t.oldModelVersionId!==t.modelVersionId)return;const i=new a(t.oldSelections),o=this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i);o||(this._undoStack.push(new d(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(l.ID)}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new d(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new d(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}l.ID="editor.contrib.cursorUndoRedoController";class c extends n["b"]{constructor(){super({id:"cursorUndo",label:r["localize"]("vs/editor/contrib/cursorUndo/cursorUndo","cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:s["a"].textInputFocus,primary:2099,weight:100}})}run(e,t,i){l.get(t).cursorUndo()}}class h extends n["b"]{constructor(){super({id:"cursorRedo",label:r["localize"]("vs/editor/contrib/cursorUndo/cursorUndo","cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){l.get(t).cursorRedo()}}Object(n["l"])(l.ID,l),Object(n["j"])(c),Object(n["j"])(h)},ed96:function(e,t,i){"use strict";i.d(t,"f",(function(){return _e})),i.d(t,"e",(function(){return ve})),i.d(t,"b",(function(){return Ce})),i.d(t,"g",(function(){return Se})),i.d(t,"h",(function(){return ye})),i.d(t,"d",(function(){return we})),i.d(t,"c",(function(){return xe})),i.d(t,"a",(function(){return Ne}));var o=i("4163"),n=i("b726"),s=i("92db"),r=i("1537"),a=i("ae58"),d=i("10ec"),l=i("7c05"),c=i("b361"),h=i("f123"),u=i("90d4"),g=i("bf32"),p=i("d208"),_=i("8a8f"),m=i("e0ab"),f=i("d778"),b=i("389a"),v=i("5e73"),C=i("5365"),S=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,o){t(i,o,e)}},w=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};class x extends _["a"]{constructor(e,t){super(e.command?e.command.id:e.title,N(e.title),void 0,!e.disabled,t),this.action=e}}function N(e){return e.replace(/\r\n|\r|\n/g," ")}let L=class extends s["a"]{constructor(e,t,i,o){super(),this._editor=e,this._delegate=t,this._contextMenuService=i,this._visible=!1,this._showingActions=this._register(new s["d"]),this._keybindingResolver=new I({getKeybindings:()=>o.getKeybindings()})}get isVisible(){return this._visible}show(e,t,i,o){return w(this,void 0,void 0,(function*(){const n=o.includeDisabledActions?t.allActions:t.validActions;if(!n.length)return void(this._visible=!1);if(!this._editor.getDomNode())throw this._visible=!1,Object(h["b"])();this._visible=!0,this._showingActions.value=t;const s=this.getMenuActions(e,n,t.documentation),r=m["a"].isIPosition(i)?this._toCoords(i):i||{x:0,y:0},a=this._keybindingResolver.getResolver(),d=this._editor.getOption(113);this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>r,getActions:()=>s,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:e=>e instanceof x?a(e.action):void 0})}))}getMenuActions(e,t,i){var o,n;const s=e=>new x(e.action,()=>this._delegate.onSelectCodeAction(e)),r=t.map(s),a=[...i],d=this._editor.getModel();if(d&&r.length)for(const l of f["a"].all(d))l._getAdditionalMenuItems&&a.push(...l._getAdditionalMenuItems({trigger:e.type,only:null===(n=null===(o=e.filter)||void 0===o?void 0:o.include)||void 0===n?void 0:n.value},t.map(e=>e.action)));return a.length&&r.push(new _["d"],...a.map(e=>s(new c["a"]({title:e.title,command:e},void 0)))),r}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=Object(p["D"])(this._editor.getDomNode()),o=i.left+t.left,n=i.top+t.top+t.height;return{x:o,y:n}}};L=S([y(2,v["a"]),y(3,C["a"])],L);class I{constructor(e){this._keybindingProvider=e}getResolver(){const e=new n["a"](()=>this._keybindingProvider.getKeybindings().filter(e=>I.codeActionCommands.indexOf(e.command)>=0).filter(e=>e.resolvedKeybinding).map(e=>{let t=e.commandArgs;return e.command===c["e"]?t={kind:b["b"].SourceOrganizeImports.value}:e.command===c["c"]&&(t={kind:b["b"].SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},b["a"].fromUser(t,{kind:b["b"].None,apply:"never"}))}));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.getValue());return null===i||void 0===i?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new b["b"](e.kind);return t.filter(e=>e.kind.contains(i)).filter(t=>!t.preferred||e.isPreferred).reduceRight((e,t)=>e?e.kind.contains(t.kind)?t:e:t,void 0)}}I.codeActionCommands=[c["f"],c["b"],c["g"],c["e"],c["c"]];var O,A=i("5e5c"),R=i("95f9"),k=i("47a8"),M=i("f295"),D=(i("be8e"),i("2f07")),E=i("c602"),P=i("f7fb"),F=i("d1e2"),T=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},j=function(e,t){return function(i,o){t(i,o,e)}};(function(e){e.Hidden={type:0};class t{constructor(e,t,i,o){this.actions=e,this.trigger=t,this.editorPosition=i,this.widgetPosition=o,this.type=1}}e.Showing=t})(O||(O={}));let W=class e extends s["a"]{constructor(e,t,i,o){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=i,this._keybindingService=o,this._onClick=this._register(new M["b"]),this.onClick=this._onClick.event,this._state=O.Hidden,this._domNode=document.createElement("div"),this._domNode.className=k["b"].lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(e=>{const t=this._editor.getModel();(1!==this.state.type||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide()})),R["b"].ignoreTarget(this._domNode),this._register(p["n"](this._domNode,e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();const{top:t,height:i}=p["D"](this._domNode),o=this._editor.getOption(58);let n=Math.floor(o/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(n+=o),this._onClick.fire({x:e.posx,y:t+i+n,actions:this.state.actions,trigger:this.state.trigger})})),this._register(p["i"](this._domNode,"mouseenter",e=>{if(1!==(1&e.buttons))return;this.hide();const t=new A["a"];t.startMonitoring(e.target,e.buttons,A["b"],()=>{},()=>{t.dispose()})})),this._register(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(t,i,o){if(t.validActions.length<=0)return this.hide();const n=this._editor.getOptions();if(!n.get(56).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:r,column:a}=s.validatePosition(o),d=s.getOptions().tabSize,l=n.get(43),c=s.getLineContent(r),h=D["c"].computeIndentLevel(c,d),u=l.spaceWidth*h>22,g=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1);let p=r;if(!u)if(r>1&&!g(r-1))p-=1;else if(g(r+1)){if(a*l.spaceWidth<22)return this.hide()}else p+=1;this.state=new O.Showing(t,i,o,{position:{lineNumber:p,column:1},preference:e._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=O.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(1===this.state.type&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...k["b"].lightBulb.classNamesArray),this._domNode.classList.add(...k["b"].lightbulbAutofix.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(e)return void(this.title=E["localize"]("vs/editor/contrib/codeAction/lightBulbWidget","preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",e.getLabel()))}this._domNode.classList.remove(...k["b"].lightbulbAutofix.classNamesArray),this._domNode.classList.add(...k["b"].lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);this.title=e?E["localize"]("vs/editor/contrib/codeAction/lightBulbWidget","codeActionWithKb","Show Code Actions ({0})",e.getLabel()):E["localize"]("vs/editor/contrib/codeAction/lightBulbWidget","codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};W._posPref=[0],W=T([j(3,C["a"])],W),Object(F["f"])((e,t)=>{var i;const o=null===(i=e.getColor(P["r"]))||void 0===i?void 0:i.transparent(.7),n=e.getColor(P["U"]);n&&t.addRule(`\n\t\t.monaco-editor .contentWidgets ${k["b"].lightBulb.cssSelector} {\n\t\t\tcolor: ${n};\n\t\t\tbackground-color: ${o};\n\t\t}`);const s=e.getColor(P["T"]);s&&t.addRule(`\n\t\t.monaco-editor .contentWidgets ${k["b"].lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${s};\n\t\t\tbackground-color: ${o};\n\t\t}`)});var B,V=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},z=function(e,t){return function(i,o){t(i,o,e)}},H=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))},U=function(e,t,i,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,i):n?n.value=i:t.set(e,i),i},Z=function(e,t,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(e):o?o.value:t.get(e)};let $=class extends s["a"]{constructor(e,t,i,o,r){super(),this._editor=e,this.delegate=o,this._activeCodeActions=this._register(new s["d"]),B.set(this,!1),this._codeActionWidget=new n["a"](()=>this._register(r.createInstance(L,this._editor,{onSelectCodeAction:e=>H(this,void 0,void 0,(function*(){this.delegate.applyCodeAction(e,!0)}))}))),this._lightBulbWidget=new n["a"](()=>{const e=this._register(r.createInstance(W,this._editor,t,i));return this._register(e.onClick(e=>this.showCodeActionList(e.trigger,e.actions,e,{includeDisabledActions:!1}))),e})}dispose(){U(this,B,!0,"f"),super.dispose()}update(e){var t,i,o;return H(this,void 0,void 0,(function*(){if(1!==e.type)return void(null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide());let n;try{n=yield e.actions}catch(s){return void Object(h["f"])(s)}if(!Z(this,B,"f"))if(this._lightBulbWidget.getValue().update(n,e.trigger,e.position),1===e.trigger.type){if(null===(i=e.trigger.filter)||void 0===i?void 0:i.include){const t=this.tryGetValidActionToApply(e.trigger,n);if(t){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(t,!1)}finally{n.dispose()}return}if(e.trigger.context){const t=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,n);if(t&&t.action.disabled)return u["a"].get(this._editor).showMessage(t.action.disabled,e.trigger.context.position),void n.dispose()}}const t=!!(null===(o=e.trigger.filter)||void 0===o?void 0:o.include);if(e.trigger.context&&(!n.allActions.length||!t&&!n.validActions.length))return u["a"].get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=n,void n.dispose();this._activeCodeActions.value=n,this._codeActionWidget.getValue().show(e.trigger,n,e.position,{includeDisabledActions:t})}else this._codeActionWidget.getValue().isVisible?n.dispose():this._activeCodeActions.value=n}))}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find(({action:e})=>e.disabled):void 0}tryGetValidActionToApply(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}showCodeActionList(e,t,i,o){return H(this,void 0,void 0,(function*(){this._codeActionWidget.getValue().show(e,t,i,o)}))}};B=new WeakMap,$=V([z(4,g["a"])],$);var q,K=i("d5b7"),G=i("6ad4"),X=i("0c01"),Y=i("eb8f"),Q=i("b5f6"),J=i("c273"),ee=i("4b4a"),te=i("1ff1"),ie=i("d8b0"),oe=function(e,t,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(e):o?o.value:t.get(e)},ne=function(e,t,i,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,i):n?n.value=i:t.set(e,i),i};const se=new G["c"]("supportedCodeAction","");class re extends s["a"]{constructor(e,t,i,o=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=o,this._autoTriggerTimer=this._register(new ee["g"]),this._register(this._markerService.onMarkerChanged(e=>this._onMarkerChanges(e))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(e=>Object(te["f"])(e,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const i of this._markerService.read({resource:t.uri})){const o=t.validateRange(i);if(ie["a"].intersectRanges(o,e))return ie["a"].lift(o)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._editor.getSelection();if(i.isEmpty()&&2===e.type){const{lineNumber:e,column:o}=i.getPosition(),n=t.getLineContent(e);if(0===n.length)return;if(1===o){if(/\s/.test(n[0]))return}else if(o===t.getLineMaxColumn(e)){if(/\s/.test(n[n.length-1]))return}else if(/\s/.test(n[o-2])&&/\s/.test(n[o-1]))return}return i}_createEventAndSignalChange(e,t){const i=this._editor.getModel();if(!t||!i)return void this._signalChange(void 0);const o=this._getRangeOfMarker(t),n=o?o.getStartPosition():t.getStartPosition(),s={trigger:e,selection:t,position:n};return this._signalChange(s),s}}var ae;(function(e){e.Empty={type:0};class t{constructor(e,t,i,o){this.trigger=e,this.rangeOrSelection=t,this.position=i,this._cancellablePromise=o,this.type=1,this.actions=o.catch(e=>{if(Object(h["e"])(e))return de;throw e})}cancel(){this._cancellablePromise.cancel()}}e.Triggered=t})(ae||(ae={}));const de={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class le extends s["a"]{constructor(e,t,i,o){super(),this._editor=e,this._markerService=t,this._progressService=o,this._codeActionOracle=this._register(new s["d"]),this._state=ae.Empty,this._onDidChangeState=this._register(new M["b"]),this.onDidChangeState=this._onDidChangeState.event,q.set(this,!1),this._supportedCodeActions=se.bindTo(i),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(f["a"].onDidChange(()=>this._update())),this._update()}dispose(){oe(this,q,"f")||(ne(this,q,!0,"f"),super.dispose(),this.setState(ae.Empty,!0))}_update(){if(oe(this,q,"f"))return;this._codeActionOracle.value=void 0,this.setState(ae.Empty);const e=this._editor.getModel();if(e&&f["a"].has(e)&&!this._editor.getOption(80)){const t=[];for(const i of f["a"].all(e))Array.isArray(i.providedCodeActionKinds)&&t.push(...i.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new re(this._editor,this._markerService,t=>{var i;if(!t)return void this.setState(ae.Empty);const o=Object(ee["h"])(i=>Object(c["d"])(e,t.selection,t.trigger,Q["b"].None,i));1===t.trigger.type&&(null===(i=this._progressService)||void 0===i||i.showWhile(o,250)),this.setState(new ae.Triggered(t.trigger,t.selection,t.position,o))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||oe(this,q,"f")||this._onDidChangeState.fire(e))}}q=new WeakMap;var ce=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},he=function(e,t){return function(i,o){t(i,o,e)}},ue=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};function ge(e){return G["a"].regex(se.keys()[0],new RegExp("(\\s|^)"+Object(r["t"])(e.value)+"\\b"))}const pe={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","args.schema.apply.first","Always apply the first returned code action."),E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let _e=class e extends s["a"]{constructor(e,t,i,o,s){super(),this._instantiationService=s,this._editor=e,this._model=this._register(new le(this._editor,t,i,o)),this._register(this._model.onDidChangeState(e=>this.update(e))),this._ui=new n["a"](()=>this._register(new $(e,ve.Id,Ne.Id,{applyCodeAction:(e,t)=>ue(this,void 0,void 0,(function*(){try{yield this._applyCodeAction(e)}finally{t&&this._trigger({type:2,filter:{}})}}))},this._instantiationService)))}static get(t){return t.getContribution(e.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,i){return this._ui.getValue().showCodeActionList(e,t,i,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,i){if(!this._editor.hasModel())return;u["a"].get(this._editor).closeMessage();const o=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:i,context:{notAvailableMessage:e,position:o}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(me,e,this._editor)}};function me(e,t,i){return ue(this,void 0,void 0,(function*(){const n=e.get(d["a"]),s=e.get(K["b"]),r=e.get(J["a"]),a=e.get(Y["a"]);if(r.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred}),yield t.resolve(o["a"].None),t.action.edit&&(yield n.apply(d["b"].convert(t.action.edit),{editor:i,label:t.action.title})),t.action.command)try{yield s.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(l){const e=fe(l);a.error("string"===typeof e?e:E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","applyCodeActionFailed","An unknown error occurred while applying the code action"))}}))}function fe(e){return"string"===typeof e?e:e instanceof Error&&"string"===typeof e.message?e.message:void 0}function be(e,t,i,o){if(e.hasModel()){const n=_e.get(e);n&&n.manualTriggerAtCurrentPosition(t,i,o)}}_e.ID="editor.contrib.quickFixController",_e=ce([he(1,X["b"]),he(2,G["b"]),he(3,Q["a"]),he(4,g["a"])],_e);class ve extends a["b"]{constructor(){super({id:ve.Id,label:E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:G["a"].and(l["a"].writable,l["a"].hasCodeActionsProvider),kbOpts:{kbExpr:l["a"].editorTextFocus,primary:2132,weight:100}})}run(e,t){return be(t,E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}ve.Id="editor.action.quickFix";class Ce extends a["c"]{constructor(){super({id:c["b"],precondition:G["a"].and(l["a"].writable,l["a"].hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:pe}]}})}runEditorCommand(e,t,i){const o=b["a"].fromUser(i,{kind:b["b"].Empty,apply:"ifSingle"});return be(t,"string"===typeof(null===i||void 0===i?void 0:i.kind)?o.preferred?E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):o.preferred?E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.codeAction.noneMessage","No code actions available"),{include:o.kind,includeSourceActions:!0,onlyIncludePreferredActions:o.preferred},o.apply)}}class Se extends a["b"]{constructor(){super({id:c["f"],label:E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","refactor.label","Refactor..."),alias:"Refactor...",precondition:G["a"].and(l["a"].writable,l["a"].hasCodeActionsProvider),kbOpts:{kbExpr:l["a"].editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:G["a"].and(l["a"].writable,ge(b["b"].Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:pe}]}})}run(e,t,i){const o=b["a"].fromUser(i,{kind:b["b"].Refactor,apply:"never"});return be(t,"string"===typeof(null===i||void 0===i?void 0:i.kind)?o.preferred?E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):o.preferred?E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.refactor.noneMessage","No refactorings available"),{include:b["b"].Refactor.contains(o.kind)?o.kind:b["b"].None,onlyIncludePreferredActions:o.preferred},o.apply)}}class ye extends a["b"]{constructor(){super({id:c["g"],label:E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","source.label","Source Action..."),alias:"Source Action...",precondition:G["a"].and(l["a"].writable,l["a"].hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:G["a"].and(l["a"].writable,ge(b["b"].Source))},description:{description:"Source Action...",args:[{name:"args",schema:pe}]}})}run(e,t,i){const o=b["a"].fromUser(i,{kind:b["b"].Source,apply:"never"});return be(t,"string"===typeof(null===i||void 0===i?void 0:i.kind)?o.preferred?E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):o.preferred?E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.source.noneMessage.preferred","No preferred source actions available"):E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.source.noneMessage","No source actions available"),{include:b["b"].Source.contains(o.kind)?o.kind:b["b"].None,includeSourceActions:!0,onlyIncludePreferredActions:o.preferred},o.apply)}}class we extends a["b"]{constructor(){super({id:c["e"],label:E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:G["a"].and(l["a"].writable,ge(b["b"].SourceOrganizeImports)),kbOpts:{kbExpr:l["a"].editorTextFocus,primary:1581,weight:100}})}run(e,t){return be(t,E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.organize.noneMessage","No organize imports action available"),{include:b["b"].SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}class xe extends a["b"]{constructor(){super({id:c["c"],label:E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","fixAll.label","Fix All"),alias:"Fix All",precondition:G["a"].and(l["a"].writable,ge(b["b"].SourceFixAll))})}run(e,t){return be(t,E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","fixAll.noneMessage","No fix all action available"),{include:b["b"].SourceFixAll,includeSourceActions:!0},"ifSingle")}}class Ne extends a["b"]{constructor(){super({id:Ne.Id,label:E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:G["a"].and(l["a"].writable,ge(b["b"].QuickFix)),kbOpts:{kbExpr:l["a"].editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return be(t,E["localize"]("vs/editor/contrib/codeAction/codeActionCommands","editor.action.autoFix.noneMessage","No auto fixes available"),{include:b["b"].QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}Ne.Id="editor.action.autoFix"},f6a5:function(e,t,i){"use strict";i.r(t),i.d(t,"CodeLensContribution",(function(){return K}));var o=i("d208"),n=i("4b4a"),s=i("f123"),r=i("f28f"),a=i("92db"),d=i("5e2a"),l=i("ae58"),c=i("7be4"),h=i("7c05"),u=i("d778"),g=i("0650"),p=i("4163"),_=i("4d73"),m=i("c189"),f=i("1edf"),b=i("d5b7"),v=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};class C{constructor(){this.lenses=[],this._disposables=new a["b"]}dispose(){this._disposables.dispose()}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}function S(e,t){return v(this,void 0,void 0,(function*(){const i=u["b"].ordered(e),o=new Map,n=new C,r=i.map((i,r)=>v(this,void 0,void 0,(function*(){o.set(i,r);try{const o=yield Promise.resolve(i.provideCodeLenses(e,t));o&&n.add(o,i)}catch(a){Object(s["g"])(a)}})));return yield Promise.all(r),n.lenses=n.lenses.sort((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:o.get(e.provider)<o.get(t.provider)?-1:o.get(e.provider)>o.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0),n}))}b["a"].registerCommand("_executeCodeLensProvider",(function(e,...t){let[i,o]=t;Object(_["c"])(m["a"].isUri(i)),Object(_["c"])("number"===typeof o||!o);const n=e.get(f["a"]).getModel(i);if(!n)throw Object(s["c"])();const r=[],d=new a["b"];return S(n,p["a"].None).then(e=>{d.add(e);let t=[];for(const i of e.lenses)void 0===o||null===o||Boolean(i.symbol.command)?r.push(i.symbol):o-- >0&&i.provider.resolveCodeLens&&t.push(Promise.resolve(i.provider.resolveCodeLens(n,i.symbol,p["a"].None)).then(e=>r.push(e||i.symbol)));return Promise.all(t)}).then(()=>r).finally(()=>{setTimeout(()=>d.dispose(),100)})}));var y=i("1dc1"),w=i("1a26"),x=i("d8b0"),N=i("3f3e"),L=i("bf32"),I=i("0100"),O=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},A=function(e,t){return function(i,o){t(i,o,e)}};const R=Object(L["c"])("ICodeLensCache");class k{constructor(e,t){this.lineCount=e,this.data=t}}let M=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new w["a"](20,.75);const t="codelens/cache";Object(n["m"])(()=>e.remove(t,1));const i="codelens/cache2",o=e.get(i,1,"{}");this._deserialize(o),Object(y["a"])(e.onWillSaveState)(t=>{t.reason===I["c"].SHUTDOWN&&e.store(i,this._serialize(),1,1)})}put(e,t){const i=t.lenses.map(e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}}),o=new C;o.add({lenses:i,dispose:()=>{}},this._fakeProvider);const n=new k(e.getLineCount(),o);this._cache.set(e.uri.toString(),n)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const o=new Set;for(const e of i.data.lenses)o.add(e.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...o.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const i=t[e],o=[];for(const e of i.lines)o.push({range:new x["a"](e,1,e,11)});const n=new C;n.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(e,new k(i.lineCount,n))}}catch(t){}}};M=O([A(0,I["a"])],M),Object(N["b"])(R,M);var D=i("905e"),E=(i("983d"),i("2f07")),P=i("59e4"),F=i("f7fb"),T=i("d1e2");class j{constructor(e,t,i){this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class W{constructor(e,t,i){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-"+W._idPool++,this.updatePosition(i),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration "+t}withCommands(e,t){this._commands.clear();let i=[],n=!1;for(let s=0;s<e.length;s++){const t=e[s];if(t&&(n=!0,t.command)){const n=Object(D["a"])(t.command.title.trim());t.command.id?(i.push(o["a"]("a",{id:String(s),title:t.command.tooltip},...n)),this._commands.set(String(s),t.command)):i.push(o["a"]("span",{title:t.command.tooltip},...n)),s+1<e.length&&i.push(o["a"]("span",void 0," | "))}}n?(o["R"](this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):o["R"](this._domNode,o["a"]("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}W._idPool=0;class B{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,o=t.length;i<o;i++)this._addDecorationsCallbacks[i](t[i])}}class V{constructor(e,t,i,o,n,s,r){let a;this._isDisposed=!1,this._editor=t,this._className=i,this._data=e,this._decorationIds=[];let d=[];this._data.forEach((e,t)=>{e.symbol.command&&d.push(e.symbol),o.addDecoration({range:e.symbol.range,options:E["b"].EMPTY},e=>this._decorationIds[t]=e),a=a?x["a"].plusRange(a,e.symbol.range):x["a"].lift(e.symbol.range)}),this._viewZone=new j(a.startLineNumber-1,s,r),this._viewZoneId=n.addZone(this._viewZone),d.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(d,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new W(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),o=this._data[t].symbol;return!(!i||x["a"].isEmpty(o.range)!==i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((e,i)=>{t.addDecoration({range:e.symbol.range,options:E["b"].EMPTY},e=>this._decorationIds[i]=e)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:e}=this._data[t];e.command=i.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}}Object(T["f"])((e,t)=>{const i=e.getColor(P["x"]);i&&(t.addRule(`.monaco-editor .codelens-decoration { color: ${i}; }`),t.addRule(`.monaco-editor .codelens-decoration .codicon { color: ${i}; }`));const o=e.getColor(F["q"]);o&&(t.addRule(`.monaco-editor .codelens-decoration > a:hover { color: ${o} !important; }`),t.addRule(`.monaco-editor .codelens-decoration > a:hover .codicon { color: ${o} !important; }`))});var z=i("c602"),H=i("eb8f"),U=i("60a0"),Z=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},$=function(e,t){return function(i,o){t(i,o,e)}},q=function(e,t,i,o){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{d(o.next(e))}catch(t){s(t)}}function a(e){try{d(o["throw"](e))}catch(t){s(t)}}function d(e){e.done?i(e.value):n(e.value).then(r,a)}d((o=o.apply(e,t||[])).next())}))};let K=class{constructor(e,t,i,s){this._editor=e,this._commandService=t,this._notificationService=i,this._codeLensCache=s,this._disposables=new a["b"],this._localToDispose=new a["b"],this._lenses=[],this._getCodeLensModelDelays=new g["b"](u["b"],250,2500),this._oldCodeLensModels=new a["b"],this._resolveCodeLensesDelays=new g["b"](u["b"],250,2500),this._resolveCodeLensesScheduler=new n["e"](()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(e=>{(e.hasChanged(43)||e.hasChanged(16)||e.hasChanged(15))&&this._updateLensStyle(),e.hasChanged(14)&&this._onModelChange()})),this._disposables.add(u["b"].onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+Object(r["c"])(this._editor.getId()).toString(16),this._styleElement=o["w"](o["O"](this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e,t=this._editor.getOption(16);return!t||t<5?(t=.9*this._editor.getOption(45)|0,e=this._editor.getOption(58)):e=t*Math.max(1.3,this._editor.getOption(58)/this._editor.getOption(45))|0,{codeLensHeight:e,fontSize:t}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(15),o=this._editor.getOption(43),n="--codelens-font-family"+this._styleClassName,s="--codelens-font-features"+this._styleClassName;let r=`\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(.5*t)}px; font-feature-settings: var(${s}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }\n\t\t`;i&&(r+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${n}), ${c["c"].fontFamily}}`),this._styleElement.textContent=r,this._editor.getContainerDomNode().style.setProperty(n,null!==i&&void 0!==i?i:"inherit"),this._editor.getContainerDomNode().style.setProperty(s,o.fontFeatureSettings),this._editor.changeViewZones(t=>{for(let i of this._lenses)i.updateHeight(e,t)})}_localDispose(){var e,t,i;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(i=this._currentCodeLensModel)||void 0===i||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!u["b"].has(e))return void(t&&this._localToDispose.add(Object(n["i"])(()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},3e4)));for(const o of u["b"].all(e))if("function"===typeof o.onDidChange){let e=o.onDidChange(()=>i.schedule());this._localToDispose.add(e)}const i=new n["e"](()=>{var t;const o=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=Object(n["h"])(t=>S(e,t)),this._getCodeLensModelPromise.then(t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const n=this._getCodeLensModelDelays.update(e,Date.now()-o);i.delay=n,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()},s["f"])},this._getCodeLensModelDelays.get(e));this._localToDispose.add(i),this._localToDispose.add(Object(a["i"])(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{let i=[],o=-1;this._lenses.forEach(e=>{e.isValid()&&o!==e.getLineNumber()?(e.update(t),o=e.getLineNumber()):i.push(e)});let n=new B;i.forEach(e=>{e.dispose(n,t),this._lenses.splice(this._lenses.indexOf(e),1)}),n.commit(e)})}),i.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Object(a["i"])(()=>{if(this._editor.getModel()){const e=d["c"].capture(this._editor);this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{this._disposeAllLenses(e,t)})}),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null===t||void 0===t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null===t||void 0===t?void 0:t.tagName))for(const i of this._lenses){let e=i.getCommand(t);if(e){this._commandService.executeCommand(e.id,...e.arguments||[]).catch(e=>this._notificationService.error(e));break}}})),i.schedule()}_disposeAllLenses(e,t){const i=new B;for(const o of this._lenses)o.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t,i=this._editor.getModel().getLineCount(),o=[];for(let r of e.lenses){let e=r.symbol.range.startLineNumber;e<1||e>i||(t&&t[t.length-1].symbol.range.startLineNumber===e?t.push(r):(t=[r],o.push(t)))}const n=d["c"].capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations(e=>{this._editor.changeViewZones(t=>{const i=new B;let n=0,r=0;while(r<o.length&&n<this._lenses.length){let e=o[r][0].symbol.range.startLineNumber,a=this._lenses[n].getLineNumber();a<e?(this._lenses[n].dispose(i,t),this._lenses.splice(n,1)):a===e?(this._lenses[n].updateCodeLensSymbols(o[r],i),r++,n++):(this._lenses.splice(n,0,new V(o[r],this._editor,this._styleClassName,i,t,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),n++,r++)}while(n<this._lenses.length)this._lenses[n].dispose(i,t),this._lenses.splice(n,1);while(r<o.length)this._lenses.push(new V(o[r],this._editor,this._styleClassName,i,t,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),r++;i.commit(e)})}),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){const e=this._editor.getModel();e&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const i=[],o=[];if(this._lenses.forEach(e=>{const n=e.computeIfNecessary(t);n&&(i.push(n),o.push(e))}),0===i.length)return;const r=Date.now(),a=Object(n["h"])(e=>{const n=i.map((i,n)=>{const r=new Array(i.length),a=i.map((i,o)=>i.symbol.command||"function"!==typeof i.provider.resolveCodeLens?(r[o]=i.symbol,Promise.resolve(void 0)):Promise.resolve(i.provider.resolveCodeLens(t,i.symbol,e)).then(e=>{r[o]=e},s["g"]));return Promise.all(a).then(()=>{e.isCancellationRequested||o[n].isDisposed()||o[n].updateCommands(r)})});return Promise.all(n)});this._resolveCodeLensesPromise=a,this._resolveCodeLensesPromise.then(()=>{const e=this._resolveCodeLensesDelays.update(t,Date.now()-r);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},e=>{Object(s["f"])(e),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getLenses(){return this._lenses}};K.ID="css.editor.codeLens",K=Z([$(1,b["b"]),$(2,H["a"]),$(3,R)],K),Object(l["l"])(K.ID,K),Object(l["j"])(class extends l["b"]{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:h["a"].hasCodeLensProvider,label:Object(z["localize"])("vs/editor/contrib/codelens/codelensController","showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return q(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(U["a"]),o=e.get(b["b"]),n=e.get(H["a"]),s=t.getSelection().positionLineNumber,r=t.getContribution(K.ID),a=[];for(let e of r.getLenses())if(e.getLineNumber()===s)for(let t of e.getItems()){const{command:e}=t.symbol;e&&a.push({label:e.title,command:e})}if(0===a.length)return;const d=yield i.pick(a,{canPickMany:!1});if(d)try{yield o.executeCommand(d.command.id,...d.command.arguments||[])}catch(l){n.error(l)}}))}})},f989:function(e,t,i){"use strict";i.r(t);var o=i("ae58"),n=i("7c05"),s=i("d8b0"),r=i("17e0");class a{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,o=this._selection.startColumn,n=this._selection.endColumn;if((!this._isMovingLeft||1!==o)&&(this._isMovingLeft||n!==e.getLineMaxColumn(i)))if(this._isMovingLeft){const r=new s["a"](i,o-1,i,o),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new s["a"](i,n,i,n),a)}else{const r=new s["a"](i,n,i,n+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new s["a"](i,o,i,o),a)}}computeCursorState(e,t){return this._isMovingLeft?new r["a"](this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new r["a"](this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}var d=i("c602");class l extends o["b"]{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let i=[],o=t.getSelections();for(const n of o)i.push(new a(n,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class c extends l{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:d["localize"]("vs/editor/contrib/caretOperations/caretOperations","caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:n["a"].writable})}}class h extends l{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:d["localize"]("vs/editor/contrib/caretOperations/caretOperations","caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:n["a"].writable})}}Object(o["j"])(c),Object(o["j"])(h)}}]);