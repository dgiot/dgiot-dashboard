/*!
 *  build: 杭州数蛙科技有限公司 
 *  copyright: dgiot-dashboard 
 *  author: h7ml(h7ml@qq.com) 
 *  Time: 2021-12-30 04:30:07
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors-dgiot-app-dgiot-3e00ee63"],{"1d01":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("6b14"),i=r("c32d"),o=r("b488"),u=r("144f"),a=r("9b75"),l=r("903a"),f=r("c45f"),s=r("975c"),c=r("d3f3"),p=r("3f66"),v=r("d864"),h=r("a4d4");function d(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var y,m=d(i),g=d(o),b=d(u),T=d(a),A=d(l),O=d(f),w=d(s),S=d(c),E=d(p),R=d(v),N=d(h),x=function(){function t(e,r){void 0===r&&(r={defaultFilter:"html"}),this.options=r,this.functions={},this.contextStack=[],this.context=e,this.contextStack.push((function(t){return"&"===t?e:null===e||void 0===e?void 0:e[t]})),this.filters=n.__assign(n.__assign(n.__assign({},t.defaultFilters),this.filters),null===r||void 0===r?void 0:r.filters),this.functions=n.__assign(n.__assign({},this.functions),null===r||void 0===r?void 0:r.functions)}return t.setDefaultFilters=function(e){t.defaultFilters=n.__assign(n.__assign({},t.defaultFilters),e)},t.prototype.evalute=function(t){if(t&&t.type){var e=t.type.replace(/(?:_|\-)(\w)/g,(function(t,e){return e.toUpperCase()})),r=this.functions[e]||this[e];if(!r)throw new Error("".concat(t.type," unkown."));return r.call(this,t)}return t},t.prototype.document=function(t){var e=this;if(t.body.length){var r=t.body.length>1,n=t.body.map((function(t){var n=e.evalute(t);return r&&null==n?"":n}));return 1===n.length?n[0]:n.join("")}},t.prototype.filter=function(t){var e=this,r=this.evalute(t.input),n=t.filters.concat(),i={filter:void 0,data:this.context,restFilters:n};while(n.length){var o=n.shift(),u=this.filters[o.name];if(!u)throw new Error("filter `".concat(o.name,"` not exits"));i.filter=o,r=u.apply(i,[r].concat(o.args.map((function(t){return"mixed"===(null===t||void 0===t?void 0:t.type)?t.body.map((function(t){return"string"===typeof t?t:e.evalute(t)})).join(""):t.type?e.evalute(t):t}))))}return r},t.prototype.raw=function(t){return t.value},t.prototype.script=function(t){var e,r=this.options.defaultFilter;return r&&~["getter","variable"].indexOf(null===(e=t.body)||void 0===e?void 0:e.type)&&(t.body={type:"filter",input:t.body,filters:[{name:r.replace(/^\s*\|\s*/,""),args:[]}]}),this.evalute(t.body)},t.prototype.expressionList=function(t){var e=this;return t.body.reduce((function(t,r){return e.evalute(r)}))},t.prototype.template=function(t){var e=this;return t.body.map((function(t){return e.evalute(t)})).join("")},t.prototype.templateRaw=function(t){return t.value},t.prototype.getter=function(t){var e,r=this.evalute(t.host),n=this.evalute(t.key);return"undefined"===typeof n&&"variable"===(null===(e=t.key)||void 0===e?void 0:e.type)&&(n=t.key.name),null===r||void 0===r?void 0:r[n]},t.prototype.unary=function(t){var e=this.evalute(t.value);switch(t.op){case"+":return+e;case"-":return-e;case"~":return~e;case"!":return!e}},t.prototype.formatNumber=function(t,e){void 0===e&&(e=!1);var r=typeof t;return"string"===r?(e?parseInt(t,10):parseFloat(t))||0:"number"===r&&e?Math.round(t):null!==t&&void 0!==t?t:0},t.prototype.power=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return Math.pow(this.formatNumber(e),this.formatNumber(r))},t.prototype.multiply=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return this.formatNumber(e)*this.formatNumber(r)},t.prototype.divide=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return this.formatNumber(e)/this.formatNumber(r)},t.prototype.remainder=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return this.formatNumber(e)%this.formatNumber(r)},t.prototype.add=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return this.formatNumber(e)+this.formatNumber(r)},t.prototype.minus=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return this.formatNumber(e)-this.formatNumber(r)},t.prototype.shift=function(t){var e=this.evalute(t.left),r=this.formatNumber(this.evalute(t.right),!0);return"<<"===t.op?e<<r:">>"==t.op?e>>r:e>>>r},t.prototype.lt=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return e<r},t.prototype.gt=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return e>r},t.prototype.le=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return e<=r},t.prototype.ge=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return e>=r},t.prototype.eq=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return e==r},t.prototype.ne=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return e!=r},t.prototype.streq=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return e===r},t.prototype.strneq=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return e!==r},t.prototype.binary=function(t){var e=this.evalute(t.left),r=this.evalute(t.right);return"&"===t.op?e&r:"^"===t.op?e^r:e|r},t.prototype.and=function(t){var e=this.evalute(t.left);return e&&this.evalute(t.right)},t.prototype.or=function(t){var e=this.evalute(t.left);return e||this.evalute(t.right)},t.prototype.number=function(t){return t.value},t.prototype.nsVariable=function(t){if("window"===t.namespace)this.contextStack.push((function(t){return"&"===t?window:window[t]}));else if("cookie"===t.namespace)this.contextStack.push((function(t){return M(t)}));else{if("ls"!==t.namespace&&"ss"!==t.namespace)throw new Error("Unsupported namespace: "+t.namespace);var e=t.namespace;this.contextStack.push((function(t){var r="ss"===e?sessionStorage.getItem(t):localStorage.getItem(t);if("string"===typeof r)return I(r,r)}))}var r=this.evalute(t.body);return this.contextStack.pop(),r},t.prototype.variable=function(t){var e=this.contextStack[this.contextStack.length-1];return e(t.name)},t.prototype.identifier=function(t){return t.name},t.prototype.array=function(t){var e=this;return t.members.map((function(t){return e.evalute(t)}))},t.prototype.literal=function(t){return t.value},t.prototype.string=function(t){return t.value},t.prototype.object=function(t){var e=this,r={};return t.members.forEach((function(t){var n=t.key,i=t.value;r[e.evalute(n)]=e.evalute(i)})),r},t.prototype.conditional=function(t){return this.evalute(t.test)?this.evalute(t.consequent):this.evalute(t.alternate)},t.prototype.funcCall=function(t){var e=this,r="fn".concat(t.identifier),n=this.functions[r]||this[r]||this.filters[t.identifier];if(!n)throw new Error("".concat(t.identifier,"函数没有定义"));var i=t.args;return i=~["IF","AND","OR","XOR","IFS"].indexOf(t.identifier)?i.map((function(t){return function(){return e.evalute(t)}})):i.map((function(t){return e.evalute(t)})),n.apply(this,i)},t.prototype.fnIF=function(t,e,r){return t()?e():r()},t.prototype.fnAND=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.every((function(t){return t()}))},t.prototype.fnOR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some((function(t){return t()}))},t.prototype.fnXOR=function(t,e){return!!t()===!!e()},t.prototype.fnIFS=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.length%2&&t.splice(t.length-1,0,(function(){return!0}));while(t.length){var r=t.shift(),n=t.shift();if(r())return n()}},t.prototype.fnABS=function(t){return t=this.formatNumber(t),Math.abs(t)},t.prototype.fnMAX=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Math.max.apply(Math,e.map((function(e){return t.formatNumber(e)})))},t.prototype.fnMIN=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Math.min.apply(Math,e.map((function(e){return t.formatNumber(e)})))},t.prototype.fnSUM=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.reduce((function(e,r){return e+t.formatNumber(r)||0}),0)},t.prototype.fnINT=function(t){return Math.floor(this.formatNumber(t))},t.prototype.fnMOD=function(t,e){return this.formatNumber(t)%this.formatNumber(e)},t.prototype.fnPI=function(){return Math.PI},t.prototype.fnROUND=function(t,e){t=this.formatNumber(t),e=this.formatNumber(e);var r=Math.round(e);if(r){var n=Math.pow(10,r);return Math.round(t*n)/n}return Math.round(t)},t.prototype.fnFLOOR=function(t,e){t=this.formatNumber(t),e=this.formatNumber(e);var r=Math.round(e);if(r){var n=Math.pow(10,r);return Math.floor(t*n)/n}return Math.floor(t)},t.prototype.fnCEIL=function(t,e){t=this.formatNumber(t),e=this.formatNumber(e);var r=Math.round(e);if(r){var n=Math.pow(10,r);return Math.ceil(t*n)/n}return Math.ceil(t)},t.prototype.fnSQRT=function(t){return Math.sqrt(this.formatNumber(t))},t.prototype.fnAVG=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.fnSUM.apply(this,e.map((function(e){return t.formatNumber(e)})))/e.length},t.prototype.fnDEVSQ=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(0===e.length)return null;for(var n=e.map((function(e){return t.formatNumber(e)})),i=n.reduce((function(t,e){return t+e||0}),0),o=i/n.length,u=0,a=0,l=n;a<l.length;a++){var f=l[a];u+=Math.pow(f-o,2)}return u},t.prototype.fnAVEDEV=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(0===e.length)return null;for(var n=e.map((function(e){return t.formatNumber(e)})),i=n.reduce((function(t,e){return t+e||0}),0),o=i/n.length,u=0,a=0,l=n;a<l.length;a++){var f=l[a];u+=Math.abs(f-o)}return u/n.length},t.prototype.fnHARMEAN=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(0===e.length)return null;for(var n=e.map((function(e){return t.formatNumber(e)})),i=0,o=0,u=n;o<u.length;o++){var a=u[o];i+=1/a}return n.length/i},t.prototype.fnLARGE=function(t,e){var r=this;if(0===t.length)return null;var n=t.map((function(t){return r.formatNumber(t)}));return e<0||n.length<e?null:n.sort((function(t,e){return e-t}))[e-1]},t.prototype.fnUPPERMONEY=function(t){t=this.formatNumber(t);var e=["角","分"],r=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],n=[["元","万","亿"],["","拾","佰","仟"]],i=t<0?"欠":"";t=Math.abs(t);for(var o="",u=0;u<e.length;u++)o+=(r[Math.floor(10*t*Math.pow(10,u))%10]+e[u]).replace(/零./,"");o=o||"整",t=Math.floor(t);for(u=0;u<n[0].length&&t>0;u++){for(var a="",l=0;l<n[1].length&&t>0;l++)a=r[t%10]+n[1][l]+a,t=Math.floor(t/10);o=a.replace(/(零.)*零$/,"").replace(/^$/,"零")+n[0][u]+o}return i+o.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")},t.prototype.fnRAND=function(){return Math.random()},t.prototype.normalizeText=function(t){return t instanceof Date?m["default"](t).format():"".concat(t)},t.prototype.fnLEFT=function(t,e){return t=this.normalizeText(t),t.substring(0,e)},t.prototype.fnRIGHT=function(t,e){return t=this.normalizeText(t),t.substring(t.length-e,t.length)},t.prototype.fnLEN=function(t){return t=this.normalizeText(t),null===t||void 0===t?void 0:t.length},t.prototype.fnLENGTH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.fnLEN.call(this,t)},t.prototype.fnISEMPTY=function(t){return!t||!String(t).trim()},t.prototype.fnCONCATENATE=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.join("")},t.prototype.fnCHAR=function(t){return String.fromCharCode(t)},t.prototype.fnLOWER=function(t){return t=this.normalizeText(t),t.toLowerCase()},t.prototype.fnUPPER=function(t){return t=this.normalizeText(t),t.toUpperCase()},t.prototype.fnUPPERFIRST=function(t){return t=this.normalizeText(t),g["default"](t)},t.prototype.fnPADSTART=function(t,e,r){return t=this.normalizeText(t),b["default"](t,e,r)},t.prototype.fnCAPITALIZE=function(t){return t=this.normalizeText(t),T["default"](t)},t.prototype.fnESCAPE=function(t){return t=this.normalizeText(t),A["default"](t)},t.prototype.fnTRUNCATE=function(t,e){return t=this.normalizeText(t),O["default"](t,{length:e})},t.prototype.fnBEFORELAST=function(t,e){return void 0===e&&(e="."),t=this.normalizeText(t),t.split(e).slice(0,-1).join(e)||t+""},t.prototype.fnSPLIT=function(t,e){return void 0===e&&(e=","),t=this.normalizeText(t),t.split(e)},t.prototype.fnTRIM=function(t){return t=this.normalizeText(t),t.trim()},t.prototype.fnSTRIPTAG=function(t){return t=this.normalizeText(t),t.replace(/<\/?[^>]+(>|$)/g,"")},t.prototype.fnLINEBREAK=function(t){return t=this.normalizeText(t),t.replace(/(?:\r\n|\r|\n)/g,"<br/>")},t.prototype.fnSTARTSWITH=function(t,e){return!!e&&(t=this.normalizeText(t),0===t.indexOf(e))},t.prototype.fnENDSWITH=function(t,e){return!!e&&(t=this.normalizeText(t),-1!==t.indexOf(e,t.length-e.length))},t.prototype.fnCONTAINS=function(t,e){return!!e&&(t=this.normalizeText(t),!!~t.indexOf(e))},t.prototype.fnREPLACE=function(t,e,r){t=this.normalizeText(t);var n=t;while(1){var i=n.indexOf(e);if(!~i)break;n=n.substring(0,i)+r+n.substring(i+e.length)}return n},t.prototype.fnSEARCH=function(t,e,r){void 0===r&&(r=0),t=this.normalizeText(t),r=this.formatNumber(r);var n=t.indexOf(e,r);return~n?n:-1},t.prototype.fnMID=function(t,e,r){return t=this.normalizeText(t),t.substring(e,e+r)},t.prototype.fnDATE=function(t,e,r,n,i,o){return void 0===e?new Date(t):new Date(t,e,r,n,i,o)},t.prototype.fnTIMESTAMP=function(t,e){return parseInt(m["default"](t).format("x"===e?"x":"X"),10)},t.prototype.fnTODAY=function(){return new Date},t.prototype.fnNOW=function(){return new Date},t.prototype.fnDATETOSTR=function(t,e){return void 0===e&&(e="YYYY-MM-DD HH:mm:ss"),m["default"](t).format(e)},t.prototype.fnSTARTOF=function(t,e){return m["default"](t).startOf(e||"day").toDate()},t.prototype.fnENDOF=function(t,e){return m["default"](t).endOf(e||"day").toDate()},t.prototype.normalizeDate=function(t){if("string"===typeof t){var e=["","YYYY-MM-DD HH:mm:ss"];while(e.length){var r=e.shift(),n=m["default"](t,r);if(n.isValid())return n.toDate()}}else if("number"===typeof t)return new Date(t);return t},t.prototype.fnYEAR=function(t){return t=this.normalizeDate(t),t.getFullYear()},t.prototype.fnMONTH=function(t){return t=this.normalizeDate(t),t.getMonth()+1},t.prototype.fnDAY=function(t){return t=this.normalizeDate(t),t.getDate()},t.prototype.fnHOUR=function(t){return t=this.normalizeDate(t),t.getHours()},t.prototype.fnMINUTE=function(t){return t=this.normalizeDate(t),t.getMinutes()},t.prototype.fnSECOND=function(t){return t=this.normalizeDate(t),t.getSeconds()},t.prototype.fnYEARS=function(t,e){return t=this.normalizeDate(t),e=this.normalizeDate(e),m["default"](t).diff(m["default"](e),"year")},t.prototype.fnMINUTES=function(t,e){return t=this.normalizeDate(t),e=this.normalizeDate(e),m["default"](t).diff(m["default"](e),"minutes")},t.prototype.fnDAYS=function(t,e){return t=this.normalizeDate(t),e=this.normalizeDate(e),m["default"](t).diff(m["default"](e),"days")},t.prototype.fnHOURS=function(t,e){return t=this.normalizeDate(t),e=this.normalizeDate(e),m["default"](t).diff(m["default"](e),"hour")},t.prototype.fnDATEMODIFY=function(t,e,r){return t=this.normalizeDate(t),m["default"](t).add(e,r).toDate()},t.prototype.fnSTRTODATE=function(t,e){return void 0===e&&(e=""),m["default"](t,e).toDate()},t.prototype.fnISBEFORE=function(t,e,r){return void 0===r&&(r="day"),t=this.normalizeDate(t),e=this.normalizeDate(e),m["default"](t).isBefore(m["default"](e),r)},t.prototype.fnISAFTER=function(t,e,r){return void 0===r&&(r="day"),t=this.normalizeDate(t),e=this.normalizeDate(e),m["default"](t).isAfter(m["default"](e),r)},t.prototype.fnISSAMEORBEFORE=function(t,e,r){return void 0===r&&(r="day"),t=this.normalizeDate(t),e=this.normalizeDate(e),m["default"](t).isSameOrBefore(m["default"](e),r)},t.prototype.fnISSAMEORAFTER=function(t,e,r){return void 0===r&&(r="day"),t=this.normalizeDate(t),e=this.normalizeDate(e),m["default"](t).isSameOrAfter(m["default"](e),r)},t.prototype.fnCOUNT=function(t){return Array.isArray(t)?t.length:t?1:0},t.defaultFilters={},t}();function M(t){var e="; ".concat(document.cookie),r=e.split("; ".concat(t,"="));if(2===r.length)return r.pop().split(";").shift()}function I(t,e){try{return JSON.parse(t)}catch(r){return e}}(function(t){t[t["BooleanLiteral"]=1]="BooleanLiteral",t[t["RAW"]=2]="RAW",t[t["Variable"]=3]="Variable",t[t["OpenScript"]=4]="OpenScript",t[t["CloseScript"]=5]="CloseScript",t[t["EOF"]=6]="EOF",t[t["Identifier"]=7]="Identifier",t[t["Literal"]=8]="Literal",t[t["NumericLiteral"]=9]="NumericLiteral",t[t["Punctuator"]=10]="Punctuator",t[t["StringLiteral"]=11]="StringLiteral",t[t["RegularExpression"]=12]="RegularExpression",t[t["TemplateRaw"]=13]="TemplateRaw",t[t["TemplateLeftBrace"]=14]="TemplateLeftBrace",t[t["TemplateRightBrace"]=15]="TemplateRightBrace",t[t["OpenFilter"]=16]="OpenFilter",t[t["Char"]=17]="Char"})(y||(y={}));var C={};C[y.BooleanLiteral]="Boolean",C[y.RAW]="Raw",C[y.Variable]="Variable",C[y.OpenScript]="OpenScript",C[y.CloseScript]="CloseScript",C[y.EOF]="EOF",C[y.Identifier]="Identifier",C[y.Literal]="Literal",C[y.NumericLiteral]="Numeric",C[y.Punctuator]="Punctuator",C[y.StringLiteral]="String",C[y.RegularExpression]="RegularExpression",C[y.TemplateRaw]="TemplateRaw",C[y.TemplateLeftBrace]="TemplateLeftBrace",C[y.TemplateRightBrace]="TemplateRightBrace",C[y.OpenFilter]="OpenFilter",C[y.Char]="Char";var D={START:0,SCRIPT:1,EXPRESSION:2,BLOCK:3,Template:4,Filter:5},F={START:0,ESCAPE:1},P={START:0,ZERO:1,DIGIT:2,POINT:3,DIGIT_FRACTION:4,EXP:5},_={START:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},k=["===","!==",">>>","==","!=","<>","<=",">=","||","&&","++","--","<<",">>","**","+=","*=","/=","<",">","=","*","/","-","+","^","!","~","%","&","|","(",")","[","]","{","}","?",":",";",",",".","$"],L={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8};function z(t){return t>="1"&&t<="9"}function B(t){return t>="0"&&t<="9"}function $(t){return"e"===t||"E"===t}function j(t,e){return void 0===e&&(e=[]),t.replace(/\\(.)/g,(function(t,r){return"b"===r?"\b":"f"===r?"\f":"n"===r?"\n":"r"===r?"\r":"t"===r?"\t":"v"===r?"\v":~e.indexOf(r)?r:t}))}function U(t){return Number(t)}function V(t,e){var r=1,n=1,i=0,o=D.START,u=[o],a=[],l=!1!==(null===e||void 0===e?void 0:e.allowFilter);function f(t){u.push(o=t)}function s(){u.pop(),o=u[u.length-1]}function c(t){if(t&&"string"===typeof t){var e=t.split(/[\r\n]+/);return{index:i+t.length,line:r+e.length-1,column:n+e[e.length-1].length}}return{index:i,line:r,column:n}}function p(){if(i>=t.length)return{type:C[y.EOF],value:void 0,start:c(),end:c()}}function v(){if(o!==D.START)return null;var e="",r=F.START,n=i;while(n<t.length){var u=t[n];if(r===F.ESCAPE){if(!L.hasOwnProperty(u)&&"$"!==u){var l=c(e+u);throw new SyntaxError("Unexpected token ".concat(u," in ").concat(l.line,":").concat(l.column))}e+=u,n++,r=F.START}else{if("\\"===u){e+=u,n++,r=F.ESCAPE;continue}if("$"===u){var f=t[n+1];if("{"===f)break;if("$"===f){a.push({type:C[y.Variable],value:"&",raw:"$$",start:c(t.substring(i,n)),end:c(t.substring(i,n+2))});break}var s=/^[a-zA-Z0-9_]+(?:\.[a-zA-Z0-9_]+)*/.exec(t.substring(n+1));if(s){a.push({type:C[y.Variable],value:s[0],raw:s[0],start:c(t.substring(i,n)),end:c(t.substring(i,n+1+s[0].length))});break}}n++,e+=u}}return n>i?{type:C[y.RAW],value:j(e,["`","$"]),raw:e,start:c(),end:c(e)}:a.length?a.shift():null}function h(){if(o===D.Template)return null;var e=t[i];if("$"===e){var r=t[i+1];if("{"===r){f(D.SCRIPT);var n=t.substring(i,i+2);return{type:C[y.OpenScript],value:n,start:c(),end:c(n)}}}return null}function d(){if(o!==D.SCRIPT&&o!==D.EXPRESSION&&o!==D.BLOCK&&o!==D.Filter)return null;var e=A()||S()||O()||w()||T()||m();if("{"===(null===e||void 0===e?void 0:e.value))f(D.BLOCK);else if("}"===(null===e||void 0===e?void 0:e.value)){o===D.Filter&&s();var r=o;if(s(),r===D.SCRIPT||r===D.EXPRESSION)return{type:C[r===D.EXPRESSION?y.TemplateRightBrace:y.CloseScript],value:e.value,start:c(),end:c(e.value)}}return o===D.SCRIPT&&"|"===(null===e||void 0===e?void 0:e.value)&&l?(f(D.Filter),{type:C[y.OpenFilter],value:"|",start:c(),end:c("|")}):o===D.Filter&&"|"===(null===e||void 0===e?void 0:e.value)?{type:C[y.OpenFilter],value:"|",start:c(),end:c("|")}:e||"`"!==t[i]?e:(f(D.Template),{type:C[y.Punctuator],value:"`",start:c(),end:c("`")})}function m(){if(o!==D.Filter)return null;var e=i,r=t[e];if("\\"===r){var n=t[e+1];if("$"!==n&&!~k.indexOf(n)&&!L.hasOwnProperty(n)){var u=c(t.substring(i,i+2));throw new SyntaxError("Unexpected token ".concat(n," in ").concat(u.line,":").concat(u.column))}e++,r="b"===n?"\b":"f"===n?"\f":"n"===n?"\n":"r"===n?"\r":"t"===n?"\t":"v"===n?"\v":n}var a={type:C[y.Char],value:r,start:c(),end:c(t.substring(i,e+1))};return a}function g(){if(o!==D.Template)return null;var e=_.START,r=i;while(r<t.length){var n=t[r];if(e===_.ESCAPE){if(!L.hasOwnProperty(n)&&"`"!==n&&"$"!==n){var u=c(t.substring(i,r+1));throw new SyntaxError("Unexpected token ".concat(n," in ").concat(u.line,":").concat(u.column))}r++,e=_.START_QUOTE_OR_CHAR}else if("\\"===n)r++,e=_.ESCAPE;else{if("`"===n){s(),a.push({type:C[y.Punctuator],value:"`",start:c(t.substring(i,r)),end:c(t.substring(i,r+1))});break}if("$"===n){var l=t[r+1];if("{"===l){f(D.EXPRESSION),a.push({type:C[y.TemplateLeftBrace],value:"${",start:c(t.substring(i,r)),end:c(t.substring(i,r+2))});break}r++}else r++}}if(r>i){var p=t.substring(i,r);return{type:C[y.TemplateRaw],value:j(p,["`","$"]),raw:p,start:c(),end:c(p)}}return a.length?a.shift():null}function b(){while(i<t.length){var e=t[i];if("\r"===e)i++,r++,n=1,"\n"===t.charAt(i)&&i++;else if("\n"===e)i++,r++,n=1;else{if("\t"!==e&&" "!==e)break;i++,n++}}}function T(){var e=k.find((function(e){return t.substring(i,i+e.length)===e}));return e?{type:C[y.Punctuator],value:e,start:c(),end:c(e)}:null}function A(){var e=t.substring(i,i+4).toLowerCase(),r=e,n=!1;return"true"===e||"null"===e?(n=!0,r="true"===e||null):"false"===(e=t.substring(i,i+5).toLowerCase())?(n=!0,r=!1):"undefined"===(e=t.substring(i,i+9).toLowerCase())&&(n=!0,r=void 0),n?{type:!0===r||!1===r?C[y.BooleanLiteral]:C[y.Literal],value:r,raw:e,start:c(),end:c(e)}:null}function O(){var e=i,r=e,n=P.START;t:while(e<t.length){var o=t.charAt(e);switch(n){case P.START:if("0"===o)r=e+1,n=P.ZERO;else{if(!z(o))return null;r=e+1,n=P.DIGIT}break;case P.ZERO:if("."===o)n=P.POINT;else{if(!$(o))break t;n=P.EXP}break;case P.DIGIT:if(B(o))r=e+1;else if("."===o)n=P.POINT;else{if(!$(o))break t;n=P.EXP}break;case P.POINT:if(!B(o))break t;r=e+1,n=P.DIGIT_FRACTION;break;case P.DIGIT_FRACTION:if(B(o))r=e+1;else{if(!$(o))break t;n=P.EXP}break}e++}if(r>0){var u=t.slice(i,r);return{type:C[y.NumericLiteral],value:U(u),raw:u,start:c(),end:c(u)}}return null}function w(){var e='"',r=_.START,n=i;while(n<t.length){var o=t[n];if(r===_.START){if('"'!==o&&"'"!==o)break;e=o,n++,r=_.START_QUOTE_OR_CHAR}else if(r===_.ESCAPE){if(!L.hasOwnProperty(o)&&o!==e){var u=c(t.substring(i,n+1));throw new SyntaxError("Unexpected token ".concat(o," in ").concat(u.line,":").concat(u.column))}n++,r=_.START_QUOTE_OR_CHAR}else if("\\"===o)n++,r=_.ESCAPE;else{if(o===e){n++;break}n++}}if(n>i){var a=t.substring(i,n);return{type:C[y.StringLiteral],value:j(a.substring(1,a.length-1),[e]),raw:a,start:c(),end:c(a)}}return null}function S(){var r=(null===e||void 0===e?void 0:e.variableMode)?/^[\u4e00-\u9fa5A-Za-z0-9_$@][\u4e00-\u9fa5A-Za-z0-9_\-]*/:/^(?:[\u4e00-\u9fa5A-Za-z_$@][\u4e00-\u9fa5A-Za-z0-9_\-]*|\d+[\u4e00-\u9fa5A-Za-z_][\u4e00-\u9fa5A-Za-z0-9_\-]*)/,n=r.exec(t.substring(i,i+256));return n?{type:C[y.Identifier],value:n[0],start:c(),end:c(n[0])}:null}function E(){return a.length?a.shift():(o!==D.SCRIPT&&o!==D.EXPRESSION&&o!==D.BLOCK||b(),p()||v()||h()||d()||g())}return((null===e||void 0===e?void 0:e.evalMode)||(null===e||void 0===e?void 0:e.variableMode))&&f(D.EXPRESSION),{next:function(){var e=E();if(e)return i=e.end.index,r=e.end.line,n=e.end.column,e;var o=c();throw new SyntaxError('unexpected character "'.concat(t[i],'" at ').concat(o.line,":").concat(o.column))}}}var Y={START:0,COMMA:1},H={START:0,SCRIPTING:1},X={START:0,KEY:1,COLON:2,VALUE:3,COMMA:4};function q(t,e){var r,n,i,o=V(t,e),u=[],a=[],l=null!==(r=null===e||void 0===e?void 0:e.variableNamespaces)&&void 0!==r?r:["window","cookie","ls","ss"];function f(){if(i=a.length?a.shift():o.next(),!i)throw new TypeError("next token is undefined");u.push(i)}function s(){a.unshift(u.pop()),i=u[u.length-1]}function c(t){return i.type===C[y.Punctuator]&&(Array.isArray(t)?~t.indexOf(i.value):i.value===t)}function p(){throw TypeError("Unexpected token ".concat(i.value," in ").concat(i.start.line,":").concat(i.start.column))}function v(t){return t||p(),t}function h(){return J()}function d(){while(i.type===C[y.Char]&&/^\s+$/m.test(i.value))f()}function m(){var t=[];while(!c(":")&&i.type!==C[y.OpenFilter]&&i.type!==C[y.CloseScript]){var e=q()||B()||z()||$()||Z()||et()||K();e?t.push(e):(v(~[C[y.Identifier],C[y.Punctuator],C[y.Char]].indexOf(i.type)),t.length&&"string"===typeof t[t.length-1]?t[t.length-1]+=i.raw||i.value:t.push(i.raw||i.value),f())}return t.length&&"string"===typeof t[t.length-1]&&(t[t.length-1]=t[t.length-1].replace(/\s+$/,""),t[t.length-1]||t.pop()),t}function g(){var t=h(),e=[];while(i.type===C[y.OpenFilter]){f(),d();var r=v(j()),n=r.name,o=[];d();while(c(":")){f(),d();var u=m();1===u.length?u=u[0]:u.length||(u=""),o.push(Array.isArray(u)?{type:"mixed",body:u}:u)}e.push({name:n,args:o})}return e.length&&(t={type:"filter",input:t,filters:e}),t}function b(){var t=A();if(!t)return null;if(c("?")){f();var e=J();v(e),v(c(":")),f();var r=J();return v(r),{type:"conditional",test:t,consequent:e,alternate:r}}return t}function T(t,e,r,n,i,o){var u;void 0===n&&(n=r),void 0===i&&(i="left"),void 0===o&&(o="right");var a=r();if(!a)return null;if(c(e))while(c(e)){f();var l=v(n());u={type:t,op:e},u[i]=a,u[o]=l,a=u}return a}function A(){return T("or","||",O)}function O(){return T("and","&&",w)}function w(){return T("binary","|",S)}function S(){return T("binary","^",E)}function E(){return T("binary","&",R)}function R(){return T("eq","==",(function(){return T("ne","!=",(function(){return T("streq","===",(function(){return T("strneq","!==",N)}))}))}))}function N(){return T("lt","<",(function(){return T("gt",">",(function(){return T("le","<=",(function(){return T("ge",">=",x)}))}))}))}function x(){return T("shift","<<",(function(){return T("shift",">>",(function(){return T("shift",">>>",M)}))}))}function M(){return T("add","+",(function(){return T("minus","-",I)}))}function I(){return T("multiply","*",(function(){return T("divide","/",(function(){return T("remainder","%",D)}))}))}function D(){return T("power","**",F)}function F(){var t=["+","-","~","!"],e=[];while(c(t))e.push(i),f();var r=P();v(!e.length||r);while(e.length){var n=e.pop();r={type:"unary",op:n.value,value:r}}return r}function P(t){void 0===t&&(t=_);var e=t();if(!e)return null;while(c("[")||c(".")){var r=c(".");f();var n=v(r?j()||B()||et():h());r||(v(c("]")),f()),e={type:"getter",host:e,key:n}}return e}function _(){return G()||U()}function k(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),(t?rt():j())||z()||B()||(e?L():$())}function L(){if(c("[")){f();var t=v($());return v(c("]")),f(),t}return null}function z(){if(i.type===C[y.StringLiteral]){var t=i;return f(),{type:"string",value:t.value}}return null}function B(){if(i.type===C[y.NumericLiteral]){var t=i.value;return f(),{type:"literal",value:t}}return null}function $(){if(c("`")){f();var t=H.START,e={type:"template",body:[]};while(1)if(t===H.SCRIPTING){var r=v(h());e.body.push(r),v(i.type===C[y.TemplateRightBrace]),f(),t=H.START}else{if(c("`")){f();break}i.type===C[y.TemplateLeftBrace]?(f(),t=H.SCRIPTING):i.type===C[y.TemplateRaw]?(e.body.push({type:"template_raw",value:i.value}),f()):p()}return e}return null}function j(){if(i.type===C[y.Identifier]){var t=i;return f(),{type:"identifier",name:t.value}}return null}function U(){return rt()||q()||B()||z()||$()||Z()||K()||function(){var t=W();return 1===(null===t||void 0===t?void 0:t.body.length)?t.body[0]:t}()||et()}function q(){if(i.type===C[y.Literal]||i.type===C[y.BooleanLiteral]){var t=i.value;return f(),{type:"literal",value:t}}return null}function G(){if(i.type===C[y.Identifier]){var t=i;if(f(),c("(")){var e=W();return{type:"func_call",identifier:t.value,args:null===e||void 0===e?void 0:e.body}}s()}return null}function Z(){if(c("[")){var t=W("[","]");return{type:"array",members:null===t||void 0===t?void 0:t.body}}return null}function W(t,e){if(void 0===t&&(t="("),void 0===e&&(e=")"),c(t)){f();var r=[],n=Y.START;while(1)if(n!==Y.COMMA&&c(e)){if(c(e)){f();break}}else{var i=v(h());r.push(i),n=Y.START,c(",")&&(f(),n=Y.COMMA)}return{type:"expression-list",body:r}}return null}function K(){if(c("{")){f();var t={type:"object",members:[]},e=X.START,r=void 0,n=void 0;while(1)if(e===X.KEY)v(c(":")),f(),e=X.COLON;else if(e===X.COLON)n=v(h()),t.members.push({key:r,value:n}),e=X.VALUE;else if(e===X.VALUE)if(c(","))f(),e=X.COMMA;else{if(c("}")){f();break}p()}else{if(e!=X.COMMA&&c("}")){f();break}r=v(k(!1,!0)),e=X.KEY}return t}return null}function J(){return b()}function Q(){var t={type:"document",body:[]};while(i.type!==C[y.EOF]){var e=tt()||et()||nt();if(!e)break;t.body.push(e)}return t}function tt(){if(i.type!==C[y.RAW])return null;var t=i;return f(),{type:"raw",value:t.value}}function et(){if(i.type!==C[y.OpenScript])return null;f();var t=v(g());return v(i.type===C[y.CloseScript]),f(),{type:"script",body:t}}function rt(){if(i.type===C[y.Identifier]){var t=i;if(f(),c(":")&&~l.indexOf(t.value)){f();var e=v(P());return{type:"ns-variable",namespace:t.value,body:e}}return{type:"variable",name:t.value}}return c("&")?(f(),{type:"variable",name:"&"}):null}function nt(){if(i.type!==C[y.Variable])return null;var t=i;return f(),{type:"script",body:t.value.split(".").reduce((function(t,e){return t?{type:"getter",host:t,key:e}:{type:"variable",name:e}}),null)}}Array.isArray(l)||(l=[]),f();var it=(null===e||void 0===e?void 0:e.variableMode)?P(rt):(null===e||void 0===e?void 0:e.evalMode)?h():Q();return v((null===(n=i)||void 0===n?void 0:n.type)===C[y.EOF]),it}function G(t,e,r){t&&Object.isFrozen(t)&&(t=Z(t));var i=t?Object.create(t,n.__assign(n.__assign({},r),{__super:{value:t,writable:!1,enumerable:!1}})):Object.create(Object.prototype,r);return e&&W(e)&&Object.keys(e).forEach((function(t){return i[t]=e[t]})),i}function Z(t,e){void 0===e&&(e=!0);var r=t&&t.__super?Object.create(t.__super,{__super:{value:t.__super,writable:!1,enumerable:!1}}):Object.create(Object.prototype);return e&&t&&Object.keys(t).forEach((function(e){return r[e]=t[e]})),r}function W(t){var e=typeof t;return t&&"string"!==e&&"number"!==e&&"boolean"!==e&&"function"!==e&&!Array.isArray(t)}function K(t,e){if(void 0===e&&(e=!1),"string"!==typeof t)throw new TypeError("Expected a string");return new RegExp(t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),e?"":"i")}function J(t,e,r){if(void 0===r&&(r=!0),t&&e)return(r?e in t:t.hasOwnProperty(e))?t[e]:et(e).reduce((function(t,e){return t&&"object"===typeof t&&(r?e in t:t.hasOwnProperty(e))?t[e]:void 0}),t)}function Q(t,e,r,i){if(t=t||{},e in t)t[e]=r;else{var o=!1!==i?et(e):[e],u=o.pop();while(o.length){var a=o.shift();N["default"](t[a])?t=t[a]=n.__assign({},t[a]):Array.isArray(t[a])?(t[a]=t[a].concat(),t=t[a]):(t[a],t[a]={},t=t[a])}t[u]=r}}function tt(t,e){if(t)if(t.hasOwnProperty(e))delete t[e];else{var r=et(e),i=r.pop();while(r.length){var o=r.shift();if(!N["default"](t[o])){if(t[o])throw new Error("目标路径不是纯对象，不能修改");break}t=t[o]=n.__assign({},t[o])}t&&t.hasOwnProperty&&t.hasOwnProperty(i)&&delete t[i]}}var et=function(t){var e=[];return t.charCodeAt(0)===".".charCodeAt(0)&&e.push(""),t.replace(new RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),(function(t,r,n,i){var o=t;return n?o=i.replace(/\\(\\)?/g,"$1"):r&&(o=r.trim()),e.push(o),""})),e},rt=function(t,e,r){if(void 0===r&&(r="| html"),!t||"string"!==typeof t)return t;var n=q(t,{evalMode:!1,allowFilter:!0}),i=new x(e,{defaultFilter:r}).evalute(n);return"".concat(null==i?"":i)},nt=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],it=function(t){if(!Number.isFinite(t))throw new TypeError("Expected a finite number, got ".concat(typeof t,": ").concat(t));var e=t<0;if(e&&(t=-t),t<1)return(e?"-":"")+t+" B";var r=Math.min(Math.floor(Math.log(t)/Math.log(1e3)),nt.length-1),n=Number((t/Math.pow(1e3,r)).toPrecision(3)),i=nt[r];return(e?"-":"")+n+" "+i},ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},ut=function(t){return String(t).replace(/[&<>"'\/]/g,(function(t){return ot[t]}))};function at(t){var e=["秒","分","时","天","月","季","年"],r=[1,60,3600,86400,2592e3,7776e3,31104e3],n=r.length,i=[];while(n--)r[n]&&t>=r[n]?(i.push(Math.floor(t/r[n])+e[n]),t%=r[n]):0===n&&t&&i.push((t.toFixed?t.toFixed(2):"0")+e[0]);return i.join("")}var lt={year:"Y",month:"M",week:"w",weekday:"W",day:"d",hour:"h",minute:"m",min:"m",second:"s",millisecond:"ms"},ft=/^(.+)?(\+|-)(\d+)(minute|min|hour|day|week|month|year|weekday|second|millisecond)s?$/i,st=function(t,e,r,n){void 0===e&&(e={}),void 0===r&&(r="X"),void 0===n&&(n=!1);var i,o=n?m["default"].utc:m["default"];if("string"===typeof t&&(t=t.trim()),t=rt(t,e),t&&"string"===typeof t&&(i=ft.exec(t))){var u=new Date,a=parseInt(i[3],10),l=i[1]?st(i[1],e,r,n):o(/(minute|min|hour|second)s?/.test(i[4])?[u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes(),u.getSeconds()]:[u.getFullYear(),u.getMonth(),u.getDate()]);return"-"===i[2]?l.subtract(a,lt[i[4]]):l.add(a,lt[i[4]])}if("now"===t)return o();if("today"===t){u=new Date;return o([u.getFullYear(),u.getMonth(),u.getDate()])}return o(t,r)};function ct(t){var e=/^((?:\-|\+)?(?:\d*\.)?\d+)(minute|min|hour|day|week|month|quarter|year|weekday|second|millisecond)s?$/.exec(t);if(e){var r=m["default"].duration(parseFloat(e[1]),e[2]);if(m["default"].isDuration(r))return r}}function pt(t){return"number"===typeof t?parseFloat(t.toPrecision(12)):t}function vt(t,e){var r,n;if(!t||(n=t.split(","))&&n.length<2){var i=t.indexOf("~");if(~i){var o=t.substring(0,i),u=t.substring(i+1);return r={},r[o]=ht(u,e),r}return ht(t,e)}var a={};return n.forEach((function(t){var r=t.indexOf("~"),n=t;~r&&(n=t.substring(r+1),t=t.substring(0,r)),Q(a,t,ht(n,e))})),a}function ht(t,e){if(void 0===e&&(e={}),"&"===t||"$$"==t)return e;if(t&&"string"===typeof t){if(!~t.indexOf(":"))return J(e,"$"===t[0]?t.substring(1):t);try{return new x(e).evalute(q(t,{variableMode:!0,allowFilter:!1}))}catch(r){return}}}function dt(t){return"string"===typeof t&&/^\$(?:((?:\w+\:)?[a-z0-9_.][a-z0-9_.\[\]]*)|{[^}{]+})$/i.test(t)}var yt=function(t,e,r,n){if(void 0===e&&(e={}),void 0===r&&(r="| html"),void 0===n&&(n=function(t){return t}),t&&"string"===typeof t){var i=q(t,{evalMode:!1,allowFilter:!0}),o=new x(e,{defaultFilter:r}).evalute(i);return null!=o||~t.indexOf("default")||~t.indexOf("now")?o:n(o)}},mt=void 0;function gt(t,e,r){return function(n,i){if(!n||!i)return 0;var o=ht(t,n),u=ht(t,i),a=0;return a="numerical"===e?(parseFloat(o)||0)-(parseFloat(u)||0):String(o).localeCompare(String(u)),a*("desc"===r?-1:1)}}var bt={map:function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return Array.isArray(t)&&bt[e]?t.map((function(t){var i;return(i=bt[e]).call.apply(i,n.__spreadArray([mt,t],r,!1))})):t},html:function(t){return null==t?t:ut(t)},json:function(t,e){return void 0===e&&(e=2),e?JSON.stringify(t,null,parseInt(e,10)):JSON.stringify(t)},toJson:function(t){var e;try{e=JSON.parse(t)}catch(r){e=null}return e},toInt:function(t){return"string"===typeof t?parseInt(t,10):t},toFloat:function(t){return"string"===typeof t?parseFloat(t):t},raw:function(t){return t},now:function(){return new Date},toDate:function(t,e){void 0===e&&(e="");var r=m["default"](t,e);return r.isValid()?r.toDate():void 0},fromNow:function(t,e){return void 0===e&&(e=""),m["default"](t,e).fromNow()},dateModify:function(t,e,r,n){return void 0===e&&(e="add"),void 0===r&&(r=0),void 0===n&&(n="days"),t instanceof Date||(t=new Date),"endOf"===e||"startOf"===e?m["default"](t)["endOf"===e?"endOf":"startOf"](r||"day").toDate():m["default"](t)["add"===e?"add":"subtract"](parseInt(r,10)||0,n).toDate()},date:function(t,e,r){return void 0===e&&(e="LLL"),void 0===r&&(r="X"),m["default"](t,r).format(e)},number:function(t){var e=String(t).split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},trim:function(t){return"string"===typeof t?t.trim():t},percent:function(t,e){void 0===e&&(e=0),t=parseFloat(t)||0,e=parseInt(e,10)||0;var r=100*t,n=Math.pow(10,e);return(Math.round(r*n)/n).toFixed(e)+"%"},duration:function(t){return t?at(t):t},bytes:function(t){return t?it(parseFloat(t)):t},round:function(t,e){var r;if(void 0===e&&(e=2),isNaN(t))return 0;e=null!==(r=parseInt(e,10))&&void 0!==r?r:2;var n=Math.pow(10,e);return(Math.round(t*n)/n).toFixed(e)},truncate:function(t,e,r){return"string"!==typeof t?t:(r=r||"...",null==e?t:(e=parseInt(e,10)||200,t.substring(0,e)+(t.length>e?r:"")))},url_encode:function(t){return null==t?"":encodeURIComponent(t)},url_decode:function(t){return decodeURIComponent(t)},default:function(t,e,r){var n;return void 0===r&&(r=!1),null!==(n=r?t:t||void 0)&&void 0!==n?n:function(){try{if("undefined"===e)return;return JSON.parse(e)}catch(t){return e}}()},join:function(t,e){return t&&t.join?t.join(e):t},split:function(t,e){return void 0===e&&(e=","),"string"===typeof t?t.split(e):t},sortBy:function(t,e,r,n){return void 0===e&&(e="&"),void 0===r&&(r="alpha"),Array.isArray(t)?t.sort(gt(e,r,n)):t},objectToArray:function(t,e,r){return void 0===e&&(e="label"),void 0===r&&(r="value"),w["default"](t,(function(t,n,i){var o;(t||(t=[])).push((o={},o[e]=n,o[r]=i,o))}),[])},unique:function(t,e){return Array.isArray(t)?e?E["default"](t,e):R["default"](t):t},topAndOther:function(t,e,r,n){if(void 0===e&&(e=10),void 0===r&&(r="name"),void 0===n&&(n="其他"),Array.isArray(t)&&e){var i=S["default"](t,(function(r){var n=t.indexOf(r)+1;return n>=e?e:n}));return Object.keys(i).map((function(t,o){var u=i[t],a=u.reduce((function(t,e){return Object.keys(e).forEach((function(r){t.hasOwnProperty(r)&&"labelField"!==r?"number"===typeof e[r]&&"number"===typeof t[r]?t[r]+=e[r]:"string"===typeof e[r]&&/^(?:\-|\.)\d/.test(e[r])&&"number"===typeof t[r]?t[r]+=parseFloat(e[r])||0:"string"===typeof e[r]&&"string"===typeof t[r]?t[r]+=", ".concat(e[r]):t[r]=e[r]:t[r]=e[r]})),t}),{});return o===e-1&&(a[r]=n||"其他"),a}))}return t},first:function(t){return t&&t[0]},nth:function(t,e){return void 0===e&&(e=0),t&&t[e]},last:function(t){return t&&(t.length?t[t.length-1]:null)},minus:function(t,e){var r;return void 0===e&&(e=1),pt((Number(t)||0)-Number(At(e,this.data,null===(r=this.filter)||void 0===r?void 0:r.args[0])))},plus:function(t,e){var r;return void 0===e&&(e=1),pt((Number(t)||0)+Number(At(e,this.data,null===(r=this.filter)||void 0===r?void 0:r.args[0])))},times:function(t,e){var r;return void 0===e&&(e=1),pt((Number(t)||0)*Number(At(e,this.data,null===(r=this.filter)||void 0===r?void 0:r.args[0])))},division:function(t,e){var r;return void 0===e&&(e=1),pt((Number(t)||0)/Number(At(e,this.data,null===(r=this.filter)||void 0===r?void 0:r.args[0])))},count:function(t){return Array.isArray(t)||"string"===typeof t?t.length:0},sum:function(t,e){if(!Array.isArray(t))return t;var r=t.reduce((function(t,r){return t+(parseFloat(e?vt(e,r):r)||0)}),0);return pt(r)},abs:function(t){return"number"===typeof t?Math.abs(t):t},pick:function(t,e){return void 0===e&&(e="&"),Array.isArray(t)&&!/^\d+$/.test(e)?t.map((function(t,r){return vt(e,G({index:r},t))})):vt(e,t)},pick_if_exist:function(t,e){return void 0===e&&(e="&"),Array.isArray(t)?t.map((function(t){return ht(e,t)||t})):ht(e,t)||t},str2date:function(t,e,r){return void 0===e&&(e="X"),void 0===r&&(r="X"),t?st(t,this.data,e).format(r):""},asArray:function(t){return Array.isArray(t)?t:t?[t]:t},concat:function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return Array.isArray(t)?t.concat.apply(t,r.map((function(t,r){var n;return At(t,e.data,null===(n=e.filter)||void 0===n?void 0:n.args[r])}))):t},filter:function(t,e,r,n){var i,o,u,a;if(!Array.isArray(t)||!e||!r)return t;var l=r,f=function(){return!0};if("isTrue"===l)f=function(t){return!!t};else if("isFalse"===l)f=function(t){return!t};else if("isExists"===l)f=function(t){return"undefined"!==typeof t};else if("equals"===l||"equal"===l)n=n?At(n,this.data,null===(i=this.filter)||void 0===i?void 0:i.args[2]):"",f=function(t){return n==t};else if("isIn"===l){var s=n?At(n,this.data,null===(o=this.filter)||void 0===o?void 0:o.args[2]):[];s=Ot(s),s=Array.isArray(s)?s:s?[s]:[],f=function(t){return!s.length||!!~s.indexOf(t)}}else if("notIn"===l){var c=n?At(n,this.data,null===(u=this.filter)||void 0===u?void 0:u.args[2]):[];c=Ot(c),c=Array.isArray(c)?c:c?[c]:[],f=function(t){return!~c.indexOf(t)}}else{if("match"!==l&&(l="match",n=r),n=n?At(n,this.data,null===(a=this.filter)||void 0===a?void 0:a.args[2]):"",!n)return t;var p=K("".concat(n),!1);f=function(t){return p.test(String(t))}}var v=/\s*\*\s*/.test(e);return e=e.split(/\s*,\s*/),t.filter((function(t){return(v?Object.keys(t):e).some((function(e){return f(ht(e,t),e,t)}))}))},base64Encode:function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode("0x"+e)})))},base64Decode:function(t){return decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))},substring:function(t,e,r){return t&&"string"===typeof t?t.substring(e,r):t},lowerCase:function(t){return t&&"string"===typeof t?t.toLowerCase():t},upperCase:function(t){return t&&"string"===typeof t?t.toUpperCase():t},isTrue:function(t,e,r){var n=arguments.length>2;return Tt(t,n,this,!!t,e,r)},isFalse:function(t,e,r){var n=arguments.length>2;return Tt(t,n,this,!t,e,r)},isMatch:function(t,e,r,n){var i,o,u=arguments.length>3;return e=null!==(o=At(e,this.data,null===(i=this.filter)||void 0===i?void 0:i.args[0]))&&void 0!==o?o:e,Tt(t,u,this,e&&K("".concat(e),!1).test(String(t)),r,n)},notMatch:function(t,e,r,n){var i,o,u=arguments.length>3;return e=null!==(o=At(e,this.data,null===(i=this.filter)||void 0===i?void 0:i.args[0]))&&void 0!==o?o:e,Tt(t,u,this,e&&!K("".concat(e),!1).test(String(t)),r,n)},isEquals:function(t,e,r,n){var i,o;e=null!==(o=At(e,this.data,null===(i=this.filter)||void 0===i?void 0:i.args[0]))&&void 0!==o?o:e;var u=arguments.length>3;return Tt(t,u,this,t===e,r,n)},notEquals:function(t,e,r,n){var i,o;e=null!==(o=At(e,this.data,null===(i=this.filter)||void 0===i?void 0:i.args[0]))&&void 0!==o?o:e;var u=arguments.length>3;return Tt(t,u,this,t!==e,r,n)}};function Tt(t,e,r,n,i,o){var u,a,l;(e||n)&&wt(r.restFilters);var f=n?i:o,s=n?null===(u=r.filter)||void 0===u?void 0:u.args[1]:null===(a=r.filter)||void 0===a?void 0:a.args[2];return n||e?null!==(l=At(f,r.data,s))&&void 0!==l?l:f:t}function At(t,e,r){return(null===r||void 0===r?void 0:r.type)&&"literal"!==r.type?t:"string"===typeof t&&/,/.test(t)?t.split(/\s*,\s*/).filter((function(t){return t})):"string"===typeof t?ht(t,e):t}function Ot(t){return t&&"string"===typeof t?/^\[.*\]$/.test(t)?t.substring(1,t.length-1).split(/\s*,\s*/).filter((function(t){return t})):t.split(/\s*,\s*/).filter((function(t){return t})):t}function wt(t){var e;while(~["isTrue","isFalse","isMatch","isEquals","notMatch","notEquals"].indexOf(null===(e=t[0])||void 0===e?void 0:e.name))t.shift()}function St(t,e){bt[t]=e,x.setDefaultFilters(bt)}function Et(){return bt}function Rt(t,e,r){return"string"===typeof t&&(t=q(t,r)),new x(e,r).evalute(t)}x.setDefaultFilters(Et()),e.Evaluator=x,e.cloneObject=Z,e.createObject=G,e.deleteVariable=tt,e.escapeHtml=ut,e.evaluate=Rt,e.filterDate=st,e.filters=bt,e.formatDuration=at,e.getFilters=Et,e.getVariable=J,e.isObject=W,e.isPureVariable=dt,e.keyToPath=et,e.lexer=V,e.parse=q,e.parseDuration=ct,e.pickValues=vt,e.prettyBytes=it,e.registerFilter=St,e.relativeValueRe=ft,e.resolveVariable=ht,e.resolveVariableAndFilter=yt,e.setVariable=Q,e.string2regExp=K,e.stripNumber=pt,e.tokenize=rt}}]);